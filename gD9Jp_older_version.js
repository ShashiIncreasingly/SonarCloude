
var INC = (typeof(INC) == "undefined") ? {} : INC;
var init_flag = true
INC.ENV = "prod";
INC.debug = 0;
INC.initStatus = "";
INC.initStatusCP = "";
var prefix = "inc_";
var postfix = "_block";
var onloadpdp = false;
var onloadpdp_delete = false;
if (document.querySelector('.aio-widget-frame.acquire_w_ui_status_max') != null) {
    document.querySelector('.aio-widget-frame.acquire_w_ui_status_max').classList.add('acquire_w_ui_status_min')
    document.querySelector('.aio-widget-frame.acquire_w_ui_status_max').classList.remove('acquire_w_ui_status_max')
}
INC.checkDevUserCookie = function() {
    if (INC.ENV == "prod") {
        setTimeout(function() {
            INC.config.pageType = INC.methods.detectPageType();
            if (init_flag) {
                init_flag = false;
                INC.init();
            }
        }, 10);
    }
}


var collection_height = 200
var emailNancheck = false
var item_inc = []
INC.clientConfig = {};
INC.clientConfig.currencySymbol = "";
// INC.clientConfig.currencySymbol = "$";
INC.clientConfig.productPage = {};
INC.clientConfig.productPage.pdpElementSelector = "";
INC.clientConfig.productPage.amElementSelector = "";
INC.clientConfig.productPage.sbElementSelector = "";
INC.clientConfig.productListPage = {};
INC.clientConfig.productListPage.sbElementSelector = "";
INC.clientConfig.cartPage = {};
INC.clientConfig.cartPage.amElementSelector = "";
INC.clientConfig.statusVAT = "";
INC.clientConfig.regularPricePrefix = "";
INC.clientConfig.checkoutLink = "https://shop.golfdigest.co.jp/gdogolfshop/cart/CCtViewCart_001.jsp?car=gr-dmg-bundle";
INC.clientConfig.loggedInUser = "";
INC.clientConfig.offset = 0;
INC.clientConfig.slidevalue = 0;
INC.config = {};
INC.config.deviceType = "";
INC.config.clientToken = "gD9Jp";
INC.config.trackingURL = "https://jpoptimizedby.increasingly.co/ImportData";
INC.config.addToBasketURL = "https://shop.golfdigest.co.jp/newshop/cart/CCtAsyncAddGoodsToCart_J.jsp?";
INC.config.affiliateURL = "";
INC.config.crawlDataObj = {};
INC.config.pageType = "";
INC.config.ivid = "";
INC.config.language = "en";
INC.config.clientOverlayInterval = "";
INC.config.conversionPixelFileStatus = "";
INC.config.deviceMode = "";
INC.config.pdpaddedProductList = [];
INC.config.stopImgOver = false;
INC.config.scroll = true;
INC.config.tout = null;
INC.config.plpstorebtnclick = null;
INC.config.empty_prod_details = []
INC.config.inc_slideIndex = 1;
INC.config.quick_view = true;
INC.config.user_interaction_modal = true;
INC.config.close_modal_time = 0;
INC.config.configcount = 0;
INC.config.bundle_tracking = [];
INC.config.Product_id = null;
INC.config.dupBasket = [];
INC.config.dupDataObjectProducts = [];
INC.clientConfig.OOS = []
INC.config.dataObjcount = 0;
INC.config.uniqeProduct = []
INC.config.disablebtn = true;
INC.config.plpProductId = ""
INC.config.clientbtn = false
INC.config.FBTTitle = "Frequently bought together"
INC.config.AddText = "Add"
INC.config.AddedText = "Added"
INC.config.TotalText = "Total"
INC.config.AddToCartText = "Add to cart"
INC.config.ItemAddedToCarttext = "Items added to the cart"
INC.config.ExcItemAlreadyinCartText = "(Excluding items already in the cart)"
INC.config.NosText = "Nos"
INC.config.OtherCustAlsoBoughtText = "Other customers also bought"
INC.config.ContinueShopping = "Contnue shopping"
INC.config.CartText = "Cart"
INC.config.BeforeYouChecktext = "Before you checkout"
INC.config.ViewDetailsText = "View Details"
INC.config.DescriptionText = "Description"
INC.config.SeeOtherProdText = "See other products"
INC.config.ColorSizeText = "Color / size"
INC.config.EditText = "Edit"
INC.config.UpdateText = "Update"
INC.config.addingText = "Adding"
INC.config.qtyText = "Quantity:"
INC.config.usrIdfy = "";
INC.config.prcText = "税込";
INC.config.srcImgeLazy = "https://gzinc.increasingly.co/Implementation/amR6xE_N/images/img_placeholder.gif";
if (window.location.host == "shop.golfdigest.co.jp") {
    INC.config.FBTTitle = "よく一緒に買われている商品をまとめて購入"
    INC.config.AddText = "選択する"
    INC.config.AddedText = "選択中"
    if (window.innerWidth < 820){
        INC.config.TotalText = "合計"
    } else {
        INC.config.TotalText = "商品合計"
    }
    INC.config.AddToCartText = "カートに入れる"
    INC.config.AddToCarts = "まとめてカートに入れる"
    INC.config.ItemAddedToCarttext = "カートに追加した商品"
    INC.config.ExcItemAlreadyinCartText = ""
    INC.config.NosText = "点"
    INC.config.OtherCustAlsoBoughtText = "この商品を買った人は、こんな商品も買っています"
    INC.config.ContinueShopping = "ショッピングを続ける"
    INC.config.CartText = "カートを見る"
    INC.config.BeforeYouChecktext = "この商品とよく一緒に購入されている商品"
    INC.config.BeforeYouChecktextMob = "この商品を買った人は、<br>こんな商品も買っています"
    INC.config.ViewDetailsText = "詳細を見る"
    INC.config.DescriptionText = "商品説明"
    INC.config.SeeOtherProdText = "その他の商品を見る"
    INC.config.ColorSizeText = "色/サイズ"
    INC.config.EditText = "編集"
    INC.config.UpdateText = "選択中"
    INC.config.addingText = "選択する"
    INC.config.qtyText = "数量:"
}

if (document.querySelector('#cartBtn') != null) {
    INC.clientConfig.checkoutLink = "https://www.toysrus.co.jp/cart/SpCCtViewCart_001.jsp"
}

function isIE() {
    ua = navigator.userAgent;
    /* MSIE used to detect old browsers and Trident used to newer ones*/
    var is_ie = ua.indexOf("MSIE ") > -1 || ua.indexOf("Trident/") > -1;
    return is_ie;
}

function isBase64(str) {
    try {
        return btoa(atob(str)) == str;
    } catch (err) {
        return false;
    }
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for (var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') c = c.substring(1, c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
    }
    return null;
}
var ressponse_data = JSON.stringify({

    "BundleCount": 1,
    "Bundles": [{
        "BundleId": 12345679,
        "Products": [{
                "ProductId": "9517B002",
                "ProductSku": "180309",
                "ProductName": "",
                "ImageURL": "",
                "ProductUrl": "",
                "Price": "469.9900",
                "SpecialPrice": "469.9900",
                "ExclusiveVATPrice": null,
                "ExclusiveVATSpecialPrice": null,
                "Description": "",
                "ShortDescription": "",
                "Quantity": 1000,
                "Manufacturer": "",
                "OtherImageList": null,
                "QuantityBasedBundle": null,
                "ProductType": "simple",
                "Color": "",
                "Size": null,
                "Weight": null,
                "Attributes": null,
            },
            {
                "ProductId": "8267B001",
                "ProductSku": "178181",
                "ProductName": "Lens Hood EW-60E",
                "ImageURL": "",
                "ProductUrl": "",
                "Price": "39.9900",
                "SpecialPrice": "39.9900",
                "ExclusiveVATPrice": null,
                "ExclusiveVATSpecialPrice": null,
                "Description": "",
                "ShortDescription": "",
                "Quantity": 1000,
                "Manufacturer": "Canon",
                "OtherImageList": null,
                "QuantityBasedBundle": null,
                "ProductType": "simple",
                "Color": "",
                "Size": null,
                "Weight": null,
                "Attributes": null,
            }
        ],
    }],
})

function generate_html_tag(element, className) {
    var generateEl = document.createElement(element);
    className ? generateEl.classList.add(className) : null;
    return generateEl;
}
if (document.querySelector('#usr_shopLevel') != null){
    if (document.querySelector('#usr_shopLevel').innerText == "0"){
        INC.config.usrIdfy = "level0"
    }

    if (document.querySelector('#usr_shopLevel').innerText == "1"){
        INC.config.usrIdfy = "level1"
    }

    if (document.querySelector('#usr_shopLevel').innerText == "2"){
        INC.config.usrIdfy = "level2"
    } 

    if (document.querySelector('#usr_shopLevel').innerText == "3"){
        INC.config.usrIdfy = "level3"
    }

    if (document.querySelector('#usr_shopLevel').innerText == "4"){
        INC.config.usrIdfy = "level4"
    }
} else {
    INC.config.usrIdfy = "nonLogin"
}

   
INC.init = function() {
    if (document.querySelector('img[src="/images/parts/logo_bru_ja.png"]') != null) {
        document.querySelector('body').classList.add('babyrus_inc_template')
    } else if (document.querySelector('link[href="../images/b_parts/babiesrus.ico"]') != null) {
        document.querySelector('body').classList.add('babyrus_inc_template')
    }
    INC.methods.addVisitorID();
    INC.config.deviceType = INC.methods.detectDeviceType();
    INC.config.pageType = INC.methods.detectPageType();
    INC.config.language = INC.methods.detectLanguage();
    INC.clientConfig.statusVAT = INC.methods.checkStatusVAT();
    INC.clientConfig.statusLoggedIn = INC.methods.checkStatusLoggedIn();
    INC.methods.clear();

    switch (INC.config.pageType) {
        case "pdp":
            setTimeout(function() {
                var productId = INC.methods.getProductIdFromWebPage();
                INC.methods.irbReq(productId, 5, "catalog_product_view");
            }, 0);

            break;
        case "cartPage":
            setTimeout(function() {
                var productIds = []
                var pushedpid = []
                Array.prototype.forEach.call(document.querySelectorAll('.thumimage img'), function(elProductCode) {
                    var cartId = elProductCode.src.split('/')[elProductCode.src.split('/').length-1]
                    productIds.push(cartId.split('.')[0]);
                });
                if (productIds.length > 0) {
                    INC.methods.irbReq(productIds, 12, "checkout_cart_index");
                }
            }, 0);

            break;
        case "productList":

            //openCartModal
            var plp_list = document.querySelectorAll('.search-result-content .grid-tile .product-image')
            
            break;
    }
}

INC.dataStore = {};
INC.dataStore.methods = function() {
    var incDataStore = INC.dataStore;
    var dataStoreObj = {};

    function buildDataStoreObj(bundleResponse) {
        INC.config.dupDataObjectProducts = []
        INC.config.uniqeProduct = []
        // var incDataStore = {};
        INC.dataStore.clientProductDealsCategory = "";
        var bundles = bundleResponse.Bundles;
        var productDealCount = 0;
        if (bundleResponse.ProductDeals != null) {
            bundleResponse.ProductDeals.forEach(function(productDealObj) {

                bundles.push({
                    BundleId: bundles[0]["BundleId"],
                    Products: [bundles[0].Products[0], productDealObj]
                });

                INC.dataStore.clientProductDealsCategory = productDealObj.CategoryId;
            });
        }



        var dataStoreObj = {};
        var bundleProductsArray = [];
        var pdpProductId = '';
        if (window.location.pathname == "/cart") {
            var productIds_d = [];

            // Array.prototype.forEach.call(document.querySelectorAll('.item-delite button'), function (elProductCode) {
            //     productIds_d.push(elProductCode.getAttribute('onclick').split("('")[1].split("')")[0]);
            // });
            if (productIds_d.length == 0) {
                Array.prototype.forEach.call(document.querySelectorAll('.thumimage img'), function(elProductCode) {
                    var cartId = elProductCode.src.split('/')[elProductCode.src.split('/').length-1]
                    productIds_d.push(cartId.split('.')[0]);
                });
            }
        }
        var bundleproductarray={}
        if(bundleResponse.ProductsDetail != undefined){
            for (var ib = 0; ib < bundleResponse.ProductsDetail.length; ib++) {
                bundleproductarray[bundleResponse.ProductsDetail[ib].ProductId] = bundleResponse.ProductsDetail[ib]
            }
        }
        for (var i = 0; i < bundles.length; i++) {
            if (INC.config.dupDataObjectProducts.indexOf(bundles[i].BundleId) == -1) {
                INC.config.dupDataObjectProducts.push(bundles[i].BundleId)
                var irbBundleObj = bundles[i];
                var bundleObj = {};
                bundleObj.id = irbBundleObj["BundleId"];
                bundleObj.totalRegularPrice = irbBundleObj["TotalPrice"];
                bundleObj.totalActivePrice = irbBundleObj["TotalSpecialPrice"];
                bundleObj.totalBundlePrice = irbBundleObj["TotalBundlePrice"];
                bundleObj.totalBundleDiscountPrice = irbBundleObj["DiscountPrice"];
                bundleObj.productCount = irbBundleObj["ProductCount"];


                var irbProductsArray = irbBundleObj["ProductIds"];
                if (irbProductsArray.length) {

                    if (window.location.pathname == "/cart/CCtViewCart_001.jsp") {
                        if (productIds_d.indexOf(irbProductsArray[0]) >= 0) {
                            pdpProductId = irbProductsArray[0];
                            if (irbProductsArray[1].Attributes == null && INC.clientConfig.statusLoggedIn == true) {
                                bundleProductsArray.push(irbProductsArray[1]);
                            }

                            if (INC.clientConfig.statusLoggedIn == false) {
                                bundleProductsArray.push(irbProductsArray[1]);
                            }
                        } else if (productIds_d.indexOf(irbProductsArray[1]) >= 0) {
                            pdpProductId = irbProductsArray[1];
                            if (irbProductsArray[0].Attributes == null && INC.clientConfig.statusLoggedIn == true) {
                                bundleProductsArray.push(irbProductsArray[0]);
                            }

                            if (INC.clientConfig.statusLoggedIn == false) {
                                bundleProductsArray.push(irbProductsArray[0]);
                            }
                        }
                    } else {
                        pdpProductId = irbProductsArray[0];
                        bundleProductsArray.push(irbProductsArray[1]);
                    }
                }

                for (var j = 0; j < irbProductsArray.length; j++) {
                    var product = bundleproductarray[irbProductsArray[j]]
                    if (INC.config.uniqeProduct.indexOf(product["ProductId"]) == -1) {
                        if (isBase64(product["Description"]) == true) {
                            try {
                                product["Description"] = Base64.decode(product["Description"])
                            } catch (e) {
                                product["Description"] = product["Description"]
                            }
                        } else {
                            // product["Description"] = product["Description"]
                            try {
                                if (product["Description"] != "" && product["Description"] != null) {
                                    if (product["Description"].indexOf('div') >= 0 || product["Description"].indexOf('the') >= 0 || product["Description"].indexOf('br') >= 0 || product["Description"].indexOf('<a>') >= 0 || product["Description"].indexOf('<p>') >= 0 || product["Description"].indexOf('<span>') >= 0 || product["Description"].indexOf('and') >= 0 || product["Description"].indexOf('<a')) {
                                        product["Description"] = product["Description"]
                                    } else {
                                        product["Description"] = Base64.decode(product["Description"])
                                    }

                                }
                            } catch (e) {
                                product["Description"] = product["Description"]
                            }

                        }
                        var pAttributes = product["Attributes"] || "";
                        if (pAttributes != "" && pAttributes != null) {
                            pAttributes = attribute_listing(pAttributes)
                        }
                        var pAttObj = {};
                        for (t = 0; t < pAttributes.length; t++) {
                            pAttributes[t].attributeId = t
                            var attr_values = pAttributes[t].attributeValues;
                            for (v = 0; v < attr_values.length; v++) {
                                attr_values[v].optionId = t;
                            }
                        }

                        // if (readCookie('ivid') == "2c9e5a1dbd74a8d5e148093a1f5fa5e1fccbff4a70"){
                        //     
                        // }

                        if (pAttributes.length) {
                            INC.config.configcount = 0
                            for (var k = 0; k < pAttributes.length; k++) {
                                var pAttributesObj = pAttributes[k];

                                var pAttributesValues = pAttributesObj["attributeValues"];
                                
                                for (var l = 0; l < pAttributesValues.length; l++) {
                                    var childProduct = pAttributesValues[l];
                                    if (childProduct["childProductId"] == null) {

                                        childProduct["childProductId"] = product["ProductSku"];
                                        childProduct["childProductSku"] = product["ProductId"];
                                        childProduct["childProductName"] = product["ProductName"];
                                        childProduct["childProductImageUrl"] = product["ImageURL"];
                                        childProduct["childProductOtherImageUrl"] = product["OtherImageList"];
                                        childProduct["childProductUrl"] = product["ProductUrl"];
                                        childProduct["childProductPrice"] = product["Price"];
                                        childProduct["childProductSpecialPrice"] = product["SpecialPrice"];
                                        childProduct["childProductDescription"] = product["Description"];
                                        childProduct["childInternalProductId"] = product["ProductId"]
                                        childProduct["MemberPrc"] = product["Field4"];
                                        childProduct["MemberPrices"] = product["Field4"];
                                        childProduct["MakerName"] = product["Field6"];
                                        childProduct["genericField"] = product["GenericField"];
                                    }
                                    if (childProduct["childProductImageUrl"] == null) {
                                        childProduct["childProductImageUrl"] = product["ImageURL"];
                                    }
                                    if (childProduct["childProductOtherImageUrl"] == null) {
                                        childProduct["childProductOtherImageUrl"] = product["OtherImageList"];
                                    }
                                    if (childProduct["childProductImageUrl"] == "" || childProduct["childProductImageUrl"] == null) {
                                        childProduct["childProductImageUrl"] = product["ImageURL"];
                                    }

                                    if (INC.config.uniqeProduct.indexOf(childProduct["childProductId"]) == -1) {

                                        if (pAttributesObj.attributeCode == "色/サイズ") {
                                            pAttributesObj.attributeCode = "Size"
                                        }
                                        //ライトブルー/90cm
                                        if (product["Size"] != null) {
                                            childProduct["MainprodVariant"] = product["Color"].replace('ー', '') + "ー" + product["Size"].replace('ー', '');
                                        } else {
                                            childProduct["MainprodVariant"] = product["Color"];
                                        }

                                        childProduct["childCategoryId"] = product["CategoryId"];
                                        childProduct["childCategoryName"] = product["CategoryName"];
                                        // childProduct["childProductOtherImageUrl"] = product["OtherImageList"];
                                        childProduct["childProductDescription"] = product["Description"];
                                        childProduct["ShortDescription"] = product["ShortDescription"];
                                        childProduct["childProductImageUrlMain"] = product["ImageURL"];
                                        childProduct["childProductPrice"] = product["Price"];
                                        childProduct["childProductSpecialPrice"] = product["SpecialPrice"];
                                        childProduct["childProductNameMain"] = product["ProductName"];
                                        childProduct["childProductUrlMain"] = product["ProductUrl"];
                                        childProduct["childProductAddId"] = product["Field1"];
                                        childProduct["mainSKU"] = product["ProductSku"];
                                        childProduct["ProductType"] = product["ProductType"];
                                        childProduct["MemberPrices"] = product["Field4"];
                                        childProduct["MakerName"] = product["Field6"];
                                        childProduct["Manufacturer"] = product["Manufacturer"];
                                        childProduct["genericField"] = product["GenericField"];

                                        if (childProduct["optionImageUrl"] == null) {
                                            childProduct["optionImageUrl"] = product["childProductImageUrl"];
                                        }
                                        var productObj = new INC.classes.ProductAttObj(childProduct);
                                        productObj["bundledProductId"] = pdpProductId;
                                        productObj.mainId = product["ProductId"];
                                        productObj.bundleId = bundleObj.id;
                                        productObj.sku = productObj.id;
                                        productObj.option[pAttributesObj["attributeId"]].id = pAttributesObj["attributeId"];
                                        productObj.option[pAttributesObj["attributeId"]].label = pAttributesObj["frontEndLabel"];
                                        productObj.option[pAttributesObj["attributeId"]].code = pAttributesObj["attributeCode"];
                                        // productObj.idAddtocart = product["Field1"];
                                        if (!dataStoreObj.hasOwnProperty(product['ProductId'])) {
                                            dataStoreObj[product['ProductId']] = {};
                                        }
                                        if (!dataStoreObj[product['ProductId']].hasOwnProperty(productObj['id'])) {
                                            dataStoreObj[product['ProductId']][productObj['id']] = {}
                                        }
                                        pAttObj = dataStoreObj[product['ProductId']][productObj['id']];


                                        for (pAtt in productObj) {
                                            if (pAtt == "option") {
                                                if (!pAttObj.hasOwnProperty('option')) {
                                                    pAttObj["option"] = {}
                                                }

                                                Object.keys(productObj[pAtt]).forEach(function(key) {
                                                    pAttObj[pAtt][key] = productObj[pAtt][key];
                                                });
                                                // }
                                            } else {
                                                pAttObj[pAtt] = productObj[pAtt];
                                            }
                                        }
                                    }
                                }

                            }
                        }

                        if (pAttributes.length == 0) {
                            // INC.config.uniqeProduct.push(product["ProductId"])
                            var productObj = new INC.classes.ProductObj(product);
                            productObj["bundleId"] = irbBundleObj["BundleId"];
                            productObj["bundledProductId"] = pdpProductId;
                            productObj.sku = productObj.id;
                            // productObj.Filed3 = product["Field1"];
                            productObj.Filed3 = product["Field2"] + " | " + product["Field3"];
                            if (!dataStoreObj.hasOwnProperty(productObj['mainId'])) {
                                dataStoreObj[productObj['mainId']] = {};
                            }

                            // if(!dataStoreObj[product['mainId']].hasOwnProperty(product['id'])){
                            //     dataStoreObj[product['mainId']['id']] = {};
                            // }

                            dataStoreObj[productObj['mainId']][productObj['id']] = {};
                            if (!!window.MSInputMethodContext && !!document.documentMode) {
                                dataStoreObj[productObj['mainId']][productObj['id']] = JSON.parse(JSON.stringify(productObj));
                            } else {
                                dataStoreObj[productObj['mainId']][productObj['id']] = Object.assign({}, productObj);
                            }

                            // dataStoreObj[productObj['mainId']][productObj['id']] = Object.assign({}, productObj);
                        }
                    }
                    // productArray.push(pAttObj);
                }
            }
        }

        incDataStore.dataStoreObj = dataStoreObj;
        incDataStore.bundleProductsArray = bundleProductsArray;
        incDataStore.pdpProductId = pdpProductId;
        incDataStore.bundleCartProducts = {};
    }

    function getFirstProductObjByMainId(findObj) {
        var childProductObj = {};
        var productListObj = INC.dataStore.dataStoreObj;
        try {
            if (productListObj != undefined) {
                childProductObj = productListObj[findObj["mainId"]][Object.keys(productListObj[findObj["mainId"]])[0]];
            }
        } catch (e) {
        }

        return childProductObj;
    }

    function getProductById(findObj, client_add_btn) {
        var childProductObj = {};
        var productListObj = INC.dataStore.dataStoreObj;
        if (findObj.hasOwnProperty("id")) {
            for (mainProductId in productListObj) {
                for (childProductId in productListObj[mainProductId]) {
                    if (client_add_btn == "client_add_btn") {
                        var cpid = findObj["id"] + INC.config.configcount
                        if (productListObj[mainProductId][childProductId]["id"] == cpid) {
                            childProductObj = productListObj[mainProductId][childProductId];
                            break;
                        }
                    } else {
                        if (productListObj[mainProductId][childProductId]["id"] == findObj["id"]) {
                            childProductObj = productListObj[mainProductId][childProductId];
                            break;
                        }
                    }
                }
            }
        }
        if (Object.keys(childProductObj).length == 0) {
            if (findObj.hasOwnProperty("id")) {
                for (mainProductId in productListObj) {
                    for (childProductId in productListObj[mainProductId]) {
                        if (productListObj[mainProductId][childProductId]["id"] == findObj["id"]) {
                            childProductObj = productListObj[mainProductId][childProductId];
                            break;
                        }
                    }
                }
            }
        }
        return childProductObj;
    }

    function getProductBySKU(findObj) {
        var childProductObj = {};
        var productListObj = INC.dataStore.dataStoreObj;

        if (findObj.hasOwnProperty('sku')) {
            for (mainProductId in productListObj) {
                for (childProductId in productListObj[mainProductId]) {
                    if (productListObj[mainProductId][childProductId]["sku"] == findObj['sku']) {
                        childProductObj = productListObj[mainProductId][childProductId];
                    }
                }
            }
        }
        
        return childProductObj;
    }

    function getUniqueCatergories() {
        var catergoriesArray = [];

        var productListObj = INC.dataStore.dataStoreObj;
        var bundleProductsArray = INC.dataStore.bundleProductsArray;

        bundleProductsArray.forEach(function(productId) {

            for (childProductId in productListObj[productId]) {
                var indexOfCategoryId = catergoriesArray.indexOf(productListObj[productId][childProductId]["categoryId"]);
                
                if (indexOfCategoryId == -1 && productListObj[productId][childProductId]["categoryId"] != INC.dataStore.clientProductDealsCategory) {
                    catergoriesArray.push(productListObj[productId][childProductId]["categoryId"]);
                }
            }
        });
        return catergoriesArray;
    }

    function sorting_data(json_object, key_to_sort_by) {
        function sortByKey(a, b) {
            var x = a[key_to_sort_by];
            var y = b[key_to_sort_by];
            return ((x < y) ? -1 : ((x > y) ? 1 : 0));
        }

        json_object.sort(sortByKey);
    }

    function sortByKey(array, key) {
        return array.sort(function(a, b) {
            var x = a[key],
                y = b[key];
            if (typeof x === 'string') {
                x = x.toLowerCase();
                y = y.toLowerCase();
                if (!isNaN(x) && !isNaN(y)) {
                    x = parseInt(x, 10);
                    y = parseInt(y, 10);
                }
            }
            return (x < y ? -1 : (x > y ? 1 : 0));
        });
    }
    function getProductColorsObj(findObj, type_of) {
        var productColorObj = {};
        var productListObj = INC.dataStore.dataStoreObj;
        var productColorArrayObj = {}
        var productColorObjArray = [];
        var option_ids = ""
        var is_color = true;
        if (findObj.hasOwnProperty("mainId")) {
            for (mainProductId in productListObj) {
                if (mainProductId == findObj["mainId"]) {
                    for (childProductId in productListObj[mainProductId]) {
                        if (productListObj[mainProductId][childProductId]["option"]["0"] != undefined) {
                            // if(productListObj[mainProductId][childProductId]["option"]["0"].code == "Color"){
                            if (productListObj[mainProductId][childProductId]["option"] != null &&
                                productListObj[mainProductId][childProductId]["option"] != undefined &&
                                productListObj[mainProductId][childProductId]["option"]["0"] != null &&
                                productListObj[mainProductId][childProductId]["option"]["0"] != undefined) {
                                if (type_of != undefined) {
                                    var attr_block = null;
                                    if (type_of.parentNode.parentNode.parentNode.classList.contains('inc_product_desc_att_block') == false) {
                                        attr_block = type_of.parentNode.parentNode.parentNode.parentNode
                                    } else {
                                        attr_block = type_of.parentNode.parentNode.parentNode
                                    }
                                    if (type_of.parentNode != null) {
                                        var opt_text = attr_block.getAttribute('data-zero');
                                    } else {
                                        var opt_text = type_of.innerText;
                                        var opt_size_text = ""
                                    }

                                    if (opt_text != "" && productListObj[mainProductId][childProductId].option[1] != undefined) {
                                        if (productListObj[mainProductId][childProductId].option[1].text == opt_text) {
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]] = {};
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["colorCode"] = "";
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["imgSrc"] = "";
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["titleText"] = productListObj[mainProductId][childProductId]["option"]["0"]["titleText"];
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["colorCode"] = productListObj[mainProductId][childProductId]["option"]["0"]["colorCode"];
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["imgSrc"] = productListObj[mainProductId][childProductId]["option"]["0"]["imgSrc"];
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["code"] = productListObj[mainProductId][childProductId]["option"]["0"]["code"];
                                        }
                                    } else {
                                        productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]] = {};
                                        productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["colorCode"] = "";
                                        productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["imgSrc"] = "";
                                        productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["titleText"] = productListObj[mainProductId][childProductId]["option"]["0"]["titleText"];
                                        productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["colorCode"] = productListObj[mainProductId][childProductId]["option"]["0"]["colorCode"];
                                        productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["imgSrc"] = productListObj[mainProductId][childProductId]["option"]["0"]["imgSrc"];
                                        productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["code"] = productListObj[mainProductId][childProductId]["option"]["0"]["code"];
                                    }
                                } else {
                                    productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]] = {};
                                    productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["colorCode"] = "";
                                    productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["imgSrc"] = "";
                                    productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["titleText"] = productListObj[mainProductId][childProductId]["option"]["0"]["titleText"];
                                    productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["colorCode"] = productListObj[mainProductId][childProductId]["option"]["0"]["colorCode"];
                                    productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["imgSrc"] = productListObj[mainProductId][childProductId]["option"]["0"]["imgSrc"];
                                    productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["0"]["text"]]["code"] = productListObj[mainProductId][childProductId]["option"]["0"]["code"];
                                }

                            }
                            // }
                        }
                    }
                }
            }
        }
        Object.keys(productColorArrayObj).forEach(function(colorText) {
            var colorObj = {}
            colorObj["text"] = colorText;
            // colorObj["imgSrc"] = productColorArrayObj[colorText];
            colorObj["colorCode"] = productColorArrayObj[colorText]["colorCode"];
            colorObj["imgSrc"] = productColorArrayObj[colorText]["imgSrc"];
            colorObj["titleText"] = productColorArrayObj[colorText]["titleText"];
            colorObj["code"] = productColorArrayObj[colorText]["code"];
            productColorObjArray.push(colorObj);
        });
        if (type_of == "size") {
            productColorObj["sizeArray"] = productColorObjArray;
        } else if (type_of == "zero") {
            productColorObj["att0Array"] = productColorObjArray;
        } else if (type_of == "third") {
            productColorObj["att3Array"] = productColorObjArray;
        } else {
            productColorObj["colorArray"] = productColorObjArray;
        }
        return productColorObj;
    }

    function getProductSizesObj(findObj, type_of) {
        var productSizeObj = {};
        var productListObj = INC.dataStore.dataStoreObj;
        var productSizesArrayObj = {};
        var productSizesObjArray = [];
        var sizesArray = ["S", "M", "L", "XL", "XX", "XXL"];
        var attr_code = "";
        if (findObj.hasOwnProperty("mainId")) {
            for (mainProductId in productListObj) {
                if (mainProductId == findObj["mainId"]) {
                    for (childProductId in productListObj[mainProductId]) {
                        if (productListObj[mainProductId][childProductId]["option"] != undefined &&
                            productListObj[mainProductId][childProductId]["option"]["2"] != null) {
                            if (type_of != undefined) {
                                var attr_block = null;
                                
                                if(type_of.parentNode.parentNode != null){
                                    if (type_of.parentNode.parentNode.parentNode.classList.contains('inc_product_desc_att_block') == false) {
                                        attr_block = type_of.parentNode.parentNode.parentNode.parentNode
                                    } else {
                                        attr_block = type_of.parentNode.parentNode.parentNode
                                    }
                                }else {
                                    attr_block = type_of.parentNode
                                }
                                var opt_text = attr_block.getAttribute('data-zero');
                                var opt_size_text = attr_block.getAttribute('data-color');
                                // var opt_color_text=attr_block.getAttribute('data-color');

                                if (opt_size_text == undefined) {
                                    var opt_size_text = ""
                                }
                                if (opt_text == undefined) {
                                    var opt_text = ""
                                }
                                if (opt_color_text == undefined) {
                                    var opt_color_text = ""
                                }
                                if (opt_text != "" && opt_size_text != "") {
                                    if (productListObj[mainProductId][childProductId].option[1] != undefined && productListObj[mainProductId][childProductId].option[0] != undefined) {
                                        if (productListObj[mainProductId][childProductId].option[1].text == opt_text && productListObj[mainProductId][childProductId].option[0].text == opt_size_text) {
                                            productSizesArrayObj[productListObj[mainProductId][childProductId]["option"]["2"]["text"]] = productListObj[mainProductId][childProductId]["option"]["2"]["text"];
                                            attr_code = productListObj[mainProductId][childProductId]["option"]["2"]["code"];
                                        }
                                    }
                                } else if (opt_text != "" && productListObj[mainProductId][childProductId].option[1] != undefined) {
                                    if (productListObj[mainProductId][childProductId].option[1].text == opt_text) {
                                        if (productListObj[mainProductId][childProductId]["option"] != null &&
                                            productListObj[mainProductId][childProductId]["option"] != undefined &&
                                            productListObj[mainProductId][childProductId]["option"]["2"] != null &&
                                            productListObj[mainProductId][childProductId]["option"]["2"] != undefined) {
                                            productSizesArrayObj[productListObj[mainProductId][childProductId]["option"]["2"]["text"]] = productListObj[mainProductId][childProductId]["option"]["2"]["text"];
                                            attr_code = productListObj[mainProductId][childProductId]["option"]["2"]["code"];
                                        }
                                    }
                                } else if (productListObj[mainProductId][childProductId]["option"] != null &&
                                    productListObj[mainProductId][childProductId]["option"] != undefined &&
                                    productListObj[mainProductId][childProductId]["option"]["2"] != null &&
                                    productListObj[mainProductId][childProductId]["option"]["2"] != undefined) {
                                    productSizesArrayObj[productListObj[mainProductId][childProductId]["option"]["2"]["text"]] = productListObj[mainProductId][childProductId]["option"]["2"]["text"];
                                    attr_code = productListObj[mainProductId][childProductId]["option"]["2"]["code"];
                                }

                            } else if (productListObj[mainProductId][childProductId]["option"] != null &&
                                productListObj[mainProductId][childProductId]["option"] != undefined &&
                                productListObj[mainProductId][childProductId]["option"]["2"] != null &&
                                productListObj[mainProductId][childProductId]["option"]["2"] != undefined) {
                                productSizesArrayObj[productListObj[mainProductId][childProductId]["option"]["2"]["text"]] = productListObj[mainProductId][childProductId]["option"]["2"]["text"];
                                attr_code = productListObj[mainProductId][childProductId]["option"]["2"]["code"];
                            }
                        }
                    }

                }
            }
        }

        Object.keys(productSizesArrayObj).forEach(function(sizeText) {
            var sizeObj = {};
            sizeObj["text"] = sizeText;
            // sizeObj["text1"] = sizeText.split(":")[0]
            sizeObj["code"] = attr_code;
            productSizesObjArray.push(sizeObj);
            // productSizesObjArray.push(code);
        });
        productSizeObj["sizeArray"] = productSizesObjArray.sort(function(a, b) {
            return a["text"].split("-")[0].trim() - b["text"].split("-")[0].trim()
        });
        // productSizeObj["sizeArray"] = productSizesObjArray.sort(function (a, b) { return a["text"].split(" ")[1].trim() - b["text"].split(" ")[1].trim() });
        productSizeObj["sizeArray"] = productSizesObjArray.sort();
        productSizeObj["sizeArray"] = productSizesObjArray.sort(function(a, b) {
            return sizesArray.indexOf(a["text"]) - sizesArray.indexOf(b["text"])
        });

        return productSizeObj;
    }

    function getProductopt0Obj(findObj, type_of) {
        var product0Obj = {};
        var productListObj = INC.dataStore.dataStoreObj;
        var product0ArrayObj = {}
        var product0ObjArray = [];
        var sizesArray = ["S", "M", "L", "LL", "3L", "XL", "2XL", "XX", "XXL", "XXXL", "20cm", "20.5cm", "21cm", "21.5cm", "22cm", "22.5cm", "23cm", "23.5cm", "24cm", "24.5cm", "25cm", "25.5cm", "26cm", "26.5cm", "27cm", "27.5cm", "28cm", "28.5cm", "29cm", "29.5cm", "30cm", "30.5cm", "31cm", "31.5cm", "32cm", "32.5cm"];
        if (findObj.hasOwnProperty("mainId")) {
            for (mainProductId in productListObj) {
                if (mainProductId == findObj["mainId"]) {
                    for (childProductId in productListObj[mainProductId]) {

                        if (productListObj[mainProductId][childProductId]["option"] != null &&
                            productListObj[mainProductId][childProductId]["option"] != undefined &&
                            productListObj[mainProductId][childProductId]["option"]["1"] != null &&
                            productListObj[mainProductId][childProductId]["option"]["1"] != undefined) {

                            var attr_main = true;
                            var first_attr_acodec = ["カラー", "左右", "ボール数",  "サイズ", "シャフト重量", "ライ角", "巻番号", "数量",  "バックライン", "サイズ/幅","サイズ/数量", "バックライン/サイズ", "長さ", "番手", "シャフト", "口径/バックライン","左右/サイズ", "番手/ロフト", "フレックス/長さ" , "フレックス/サイズ"  , "ロフト/フレックス", "口径/バックライン/サイズ", "フレックス", "番手/フレックス",  "長さ/ライ角","ロフト", "ロフト/バウンス角", "長さ/シャフト重量", "Flex", "Irons", "Size"];
                            if (productListObj[mainProductId][childProductId]["option"][0].code != undefined || productListObj[mainProductId][childProductId]["option"][1].code != undefined) {
                                if (first_attr_acodec.indexOf(productListObj[mainProductId][childProductId]["option"][0].code) == -1 && first_attr_acodec.indexOf(productListObj[mainProductId][childProductId]["option"][1].code) == -1) {
                                    attr_main = false;
                                }
                            }
                            if (attr_main == true && type_of == undefined) {
                                product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]] = {};
                                product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["colorCode"] = "";
                                product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["imgSrc"] = "";
                                product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["titleText"] = productListObj[mainProductId][childProductId]["option"]["1"]["titleText"];

                                product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["imgSrc"] = productListObj[mainProductId][childProductId]["option"]["1"]["imgSrc"];
                                product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["code"] = productListObj[mainProductId][childProductId]["option"]["1"]["code"];
                            } else {
                                if (findObj.colorText != undefined) {
                                    if (productListObj[mainProductId][childProductId].option["0"].text.trim().toLocaleLowerCase() == findObj.colorText.trim().toLocaleLowerCase()) {
                                        product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]] = {};
                                        product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["colorCode"] = "";
                                        product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["imgSrc"] = "";
                                        product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["titleText"] = productListObj[mainProductId][childProductId]["option"]["1"]["titleText"];

                                        product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["imgSrc"] = productListObj[mainProductId][childProductId]["option"]["1"]["imgSrc"];
                                        product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["code"] = productListObj[mainProductId][childProductId]["option"]["1"]["code"];
                                    }
                                } else {
                                    product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]] = {};
                                    product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["colorCode"] = "";
                                    product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["imgSrc"] = "";
                                    product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["titleText"] = productListObj[mainProductId][childProductId]["option"]["1"]["titleText"];

                                    product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["imgSrc"] = productListObj[mainProductId][childProductId]["option"]["1"]["imgSrc"];
                                    product0ArrayObj[productListObj[mainProductId][childProductId]["option"]["1"]["text"]]["code"] = productListObj[mainProductId][childProductId]["option"]["1"]["code"];
                                }
                            }
                        }

                        // colorObj["text"] = productListObj[mainProductId][childProductId]["option"]["1"]["text"];
                        // colorObj["imgSrc"] = productListObj[mainProductId][childProductId]["option"]["1"]["imgSrc"];
                        // product0ObjArray.push(colorObj)
                    }
                }
            }
        }

        Object.keys(product0ArrayObj).forEach(function(colorText) {
            var attr0Obj = {}
            attr0Obj["text"] = colorText;
            attr0Obj["text1"] = colorText.split("：")[0].trim()
            attr0Obj["imgSrc"] = product0ArrayObj[colorText]["imgSrc"];
            attr0Obj["titleText"] = product0ArrayObj[colorText]["titleText"];
            attr0Obj["code"] = product0ArrayObj[colorText]["code"];
            product0ObjArray.push(attr0Obj);
        });
        // product0ObjArray["att0Array"] = productSizesObjArray.sort(function(a, b) {
        //     return a["text1"].split("-")[0].trim() - b["text1"].split("-")[0].trim()
        // });
        // product0ObjArray["att0Array"] = productSizesObjArray.sort();
        // product0ObjArray["att0Array"] = productSizesObjArray.sort(function(a, b) {
        //     return sizesArray.indexOf(a["text"]) - sizesArray.indexOf(b["text"])
        // });
        product0Obj["att0Array"] = sortByKey(product0ObjArray, 'text1')
        product0Obj["att0Array"] = product0ObjArray.sort(function(a, b) {
            return a["text1"].split("-")[0].trim() - b["text1"].split("-")[0].trim()
        });
        // productSizeObj["sizeArray"] = productSizesObjArray.sort(function (a, b) { return a["text"].split(" ")[1].trim() - b["text"].split(" ")[1].trim() });
        product0Obj["att0Array"] = product0ObjArray.sort();
        product0Obj["att0Array"] = product0ObjArray.sort(function(a, b) {
            return sizesArray.indexOf(a["text"]) - sizesArray.indexOf(b["text"])
        });
        
        // product0Obj["att0Array"] = product0ObjArray;

        return product0Obj;
    }

    function getProductopt3Obj(findObj, type_of) {
        var product3Obj = {};
        var productListObj = INC.dataStore.dataStoreObj;
        var productColorArrayObj = {}
        var product3ObjArray = [];

        if (findObj.hasOwnProperty("mainId")) {
            for (mainProductId in productListObj) {
                if (mainProductId == findObj["mainId"]) {
                    for (childProductId in productListObj[mainProductId]) {

                        if (productListObj[mainProductId][childProductId]["option"] != null &&
                            productListObj[mainProductId][childProductId]["option"] != undefined &&
                            productListObj[mainProductId][childProductId]["option"]["3"] != null &&
                            productListObj[mainProductId][childProductId]["option"]["3"] != undefined) {
                            if (type_of != undefined) {
                                var attr_block = null;
                                if (type_of.parentNode.parentNode.parentNode.classList.contains('inc_product_desc_att_block') == false) {
                                    attr_block = type_of.parentNode.parentNode.parentNode.parentNode
                                } else {
                                    attr_block = type_of.parentNode.parentNode.parentNode
                                }
                                var opt_text = attr_block.getAttribute('data-zero');
                                var opt_size_text = attr_block.getAttribute('data-size');
                                var opt_color_text = attr_block.getAttribute('data-color');

                                if (opt_size_text == undefined) {
                                    var opt_size_text = ""
                                }
                                if (opt_color_text == undefined) {
                                    var opt_color_text = ""
                                }
                                // if(type_of.getAttribute('data-option') == "2"){
                                //     var opt_text=type_of.parentNode.parentNode.parentNode.getAttribute('data-zero');
                                //     var opt_size_text=type_of.parentNode.parentNode.parentNode.getAttribute('data-size');
                                //     var opt_color_text=type_of.parentNode.parentNode.parentNode.getAttribute('data-color');
                                // }else{
                                //     var opt_text=type_of.innerText;
                                //     var opt_size_text=""
                                //     var opt_color_text=""
                                // }
                                if (opt_text != "" && opt_size_text != "" && opt_color_text != "") {
                                    if (productListObj[mainProductId][childProductId].option[1] != undefined && productListObj[mainProductId][childProductId].option[2] != undefined && productListObj[mainProductId][childProductId].option[0] != undefined) {
                                        if (productListObj[mainProductId][childProductId].option[1].text == opt_text && productListObj[mainProductId][childProductId].option[2].text == opt_size_text && productListObj[mainProductId][childProductId].option[0].text == opt_color_text) {
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]] = {};
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["colorCode"] = "";
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["imgSrc"] = "";
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["titleText"] = productListObj[mainProductId][childProductId]["option"]["3"]["titleText"];

                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["imgSrc"] = productListObj[mainProductId][childProductId]["option"]["3"]["imgSrc"];
                                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["code"] = productListObj[mainProductId][childProductId]["option"]["3"]["code"];
                                        }
                                    }
                                } else {
                                    productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]] = {};
                                    productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["colorCode"] = "";
                                    productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["imgSrc"] = "";
                                    productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["titleText"] = productListObj[mainProductId][childProductId]["option"]["3"]["titleText"];

                                    productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["imgSrc"] = productListObj[mainProductId][childProductId]["option"]["3"]["imgSrc"];
                                    productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["code"] = productListObj[mainProductId][childProductId]["option"]["3"]["code"];
                                }
                            } else {
                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]] = {};
                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["colorCode"] = "";
                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["imgSrc"] = "";
                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["titleText"] = productListObj[mainProductId][childProductId]["option"]["3"]["titleText"];

                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["imgSrc"] = productListObj[mainProductId][childProductId]["option"]["3"]["imgSrc"];
                                productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["3"]["text"]]["code"] = productListObj[mainProductId][childProductId]["option"]["3"]["code"];
                            }


                        }

                        // colorObj["text"] = productListObj[mainProductId][childProductId]["option"]["1"]["text"];
                        // colorObj["imgSrc"] = productListObj[mainProductId][childProductId]["option"]["1"]["imgSrc"];
                        // product3ObjArray.push(colorObj)
                    }
                }
            }
        }

        Object.keys(productColorArrayObj).forEach(function(colorText) {
            var attr3Obj = {}
            attr3Obj["text"] = colorText;
            attr3Obj["imgSrc"] = productColorArrayObj[colorText]["imgSrc"];
            attr3Obj["titleText"] = productColorArrayObj[colorText]["titleText"];
            attr3Obj["code"] = productColorArrayObj[colorText]["code"];
            product3ObjArray.push(attr3Obj);
        });

        product3Obj["att3Array"] = product3ObjArray;

        return product3Obj;
    }

    function getProductopt4Obj(findObj) {
        var product4Obj = {};
        var productListObj = INC.dataStore.dataStoreObj;
        var productColorArrayObj = {}
        var product4ObjArray = [];

        if (findObj.hasOwnProperty("mainId")) {
            for (mainProductId in productListObj) {
                if (mainProductId == findObj["mainId"]) {
                    for (childProductId in productListObj[mainProductId]) {
                        if (productListObj[mainProductId][childProductId]["option"] != null &&
                            productListObj[mainProductId][childProductId]["option"] != undefined &&
                            productListObj[mainProductId][childProductId]["option"]["4"] != null &&
                            productListObj[mainProductId][childProductId]["option"]["4"] != undefined) {

                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["4"]["text"]] = {};
                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["4"]["text"]]["colorCode"] = "";
                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["4"]["text"]]["imgSrc"] = "";
                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["4"]["text"]]["titleText"] = productListObj[mainProductId][childProductId]["option"]["4"]["titleText"];

                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["4"]["text"]]["imgSrc"] = productListObj[mainProductId][childProductId]["option"]["4"]["imgSrc"];
                            productColorArrayObj[productListObj[mainProductId][childProductId]["option"]["4"]["text"]]["code"] = productListObj[mainProductId][childProductId]["option"]["4"]["code"];


                        }
                    }
                }
            }
        }

        Object.keys(productColorArrayObj).forEach(function(colorText) {
            var attr4Obj = {}
            attr4Obj["text"] = colorText;
            attr4Obj["imgSrc"] = productColorArrayObj[colorText]["imgSrc"];
            attr4Obj["titleText"] = productColorArrayObj[colorText]["titleText"];
            attr4Obj["code"] = productColorArrayObj[colorText]["code"];
            product4ObjArray.push(attr4Obj);
        });

        product4Obj["att4Array"] = product4ObjArray;

        return product4Obj;

    }

    function getProductByAtt(findObj) {

        var childProductObj = {};
        var productListObj = INC.dataStore.dataStoreObj;
        var mainProductListObj = productListObj[findObj.mainId];
        for (childProductId in mainProductListObj) {

            if (findObj.zeroText != "" && findObj.sizeText != "" && findObj.colorText != "" && findObj.thirdText != "" && mainProductListObj[childProductId]["option"]["0"] != undefined && mainProductListObj[childProductId]["option"]["1"] != undefined && mainProductListObj[childProductId]["option"]["2"] != undefined && mainProductListObj[childProductId]["option"]["3"] != undefined) {
                if (findObj.colorText == mainProductListObj[childProductId]["option"]["0"].text && findObj.zeroText == mainProductListObj[childProductId]["option"]["1"].text && findObj.sizeText == mainProductListObj[childProductId]["option"]["2"].text && findObj.thirdText == mainProductListObj[childProductId]["option"]["3"].text) {
                    childProductObj = mainProductListObj[childProductId];
                }
            } else if (findObj.zeroText != "" && findObj.sizeText != "" && findObj.colorText != "" && mainProductListObj[childProductId]["option"]["0"] != undefined && mainProductListObj[childProductId]["option"]["1"] != undefined && mainProductListObj[childProductId]["option"]["2"] != undefined) {
                if (findObj.colorText == mainProductListObj[childProductId]["option"]["0"].text && findObj.zeroText == mainProductListObj[childProductId]["option"]["1"].text && findObj.sizeText == mainProductListObj[childProductId]["option"]["2"].text) {
                    childProductObj = mainProductListObj[childProductId];
                }
            } else if (findObj.zeroText != "" && findObj.colorText != "" && mainProductListObj[childProductId]["option"]["0"] != undefined && mainProductListObj[childProductId]["option"]["1"] != undefined) {
                if (findObj.colorText == mainProductListObj[childProductId]["option"]["0"].text && findObj.zeroText == mainProductListObj[childProductId]["option"]["1"].text) {
                    childProductObj = mainProductListObj[childProductId];
                }
            } else if (
                mainProductListObj[childProductId]["option"] != null &&
                mainProductListObj[childProductId]["option"] != undefined &&
                mainProductListObj[childProductId]["option"]["0"] != null &&
                mainProductListObj[childProductId]["option"]["0"] != undefined &&
                (findObj.colorText == mainProductListObj[childProductId]["option"]["0"].text)
            ) {
                childProductObj = mainProductListObj[childProductId];

            } else if (
                mainProductListObj[childProductId]["option"] != null &&
                mainProductListObj[childProductId]["option"] != undefined &&
                mainProductListObj[childProductId]["option"]["1"] != null &&
                mainProductListObj[childProductId]["option"]["1"] != undefined &&
                (findObj.sizeText == mainProductListObj[childProductId]["option"]["1"].text)
            ) {
                childProductObj = mainProductListObj[childProductId];

            } else if (
                mainProductListObj[childProductId]["option"] != null &&
                mainProductListObj[childProductId]["option"] != undefined &&
                mainProductListObj[childProductId]["option"]["1"] != null &&
                mainProductListObj[childProductId]["option"]["1"] != undefined &&
                (findObj.zeroText == mainProductListObj[childProductId]["option"]["1"].text)
            ) {
                childProductObj = mainProductListObj[childProductId];

            } else if (
                mainProductListObj[childProductId]["option"] != null &&
                mainProductListObj[childProductId]["option"] != undefined &&
                mainProductListObj[childProductId]["option"]["2"] != null &&
                mainProductListObj[childProductId]["option"]["2"] != undefined &&
                (findObj.sizeText == mainProductListObj[childProductId]["option"]["2"].text)
            ) {
                childProductObj = mainProductListObj[childProductId];

            }
        }

        return childProductObj;
    }

    return {
        buildDataStoreObj: buildDataStoreObj,
        getFirstProductObjByMainId: getFirstProductObjByMainId,
        getProductById: getProductById,
        getProductBySKU: getProductBySKU,
        getUniqueCatergories: getUniqueCatergories,
        getProductColorsObj: getProductColorsObj,
        getProductSizesObj: getProductSizesObj,
        getProductopt3Obj: getProductopt3Obj,
        getProductopt4Obj: getProductopt4Obj,
        getProductopt0Obj: getProductopt0Obj,
        getProductByAtt: getProductByAtt
    }
}

INC.classes = {};
INC.classes.ProductObj = function(product) {
    this.bundleId = "";
    //+ INC.config.configcount
    this.id = ((product != null) && (product != undefined)) ? product["ProductId"] : "";
    this.sku = ((product != null) && (product != undefined)) ? product["ProductSku"] : "";
    this.mainsku = ((product != null) && (product != undefined)) ? product["ProductSku"] : "";
    this.idAddtocart = ((product != null) && (product != undefined)) ? product["ProductId"] : "";
    this.childsku = ((product != null) && (product != undefined)) ? product["ProductSku"] : "";
    this.name = ((product != null) && (product != undefined)) ? ((INC.config.language == "en") ? product["ProductName"] : product["Field4"]) : "";
    this.url = product["ProductUrl"];
    this.imageURL = ((product != null) && (product != undefined)) ? product["ImageURL"] : "";
    this.regularPrice = ((product != null) && (product != undefined)) ? product["Price"] : "";
    this.activePrice = ((product != null) && (product != undefined)) ? ((product["SpecialPrice"] != null) ? product["SpecialPrice"] : product["Price"]) : "";
    //((product != null) && (product != undefined)) ? ((product["Field3"] != "") ? ((INC.config.language == "en") ? product["Field3"] : product["Field6"]) : "") : 
    this.activePriceMsg = "";
    this.manufacturer = ((product != null) && (product != undefined)) ? product["Manufacturer"] : "";
    this.otherImageList = ((product != null) && (product != undefined)) ? product["OtherImageList"] : [];
    this.size = ((product != null) && (product != undefined)) ? ((product["Size"] != null) ? product["Size"] : "") : "";
    this.option = {};
    if (product["ProductLevelDiscountMessage"] != null) {
        this.ProductLevelDiscountMessage = product["ProductLevelDiscountMessage"]
    } else {
        this.ProductLevelDiscountMessage = product["PromotionalMessage"]
    }
    this.pointcollect = "";
    this.mainProdVariant = product["Color"]
    this.internalId = ((product != null) && (product != undefined)) ? product["InternalId"] : "";
    this.mainId = ((product != null) && (product != undefined)) ? product["ProductId"] : "";
    this.categoryName = ((product != null) && (product != undefined)) ? product["CategoryName"] : "";
    this.manufacturer = ((product != null) && (product != undefined)) ? product["Manufacturer"] : "";
    this.categoryId = ((product != null) && (product != undefined)) ? product["CategoryId"] : "";
    this.description = ((product != null) && (product != undefined)) ? product["Description"] : "";
    this.shortDescription = ((product != null) && (product != undefined)) ? ((INC.config.language == "en") ? product["ShortDescription"] : product["Field5"]) : "";
    this.GOODSNO = ((product != null) && (product != undefined)) ? product["Field1"] : "";
    this.ratingsCount = ((product != null) && (product != undefined)) ? product["Field2"] : "";
    this.reviewsCount = ((product != null) && (product != undefined)) ? product["Field3"] : "";
    this.worthPrice = ((product != null) && (product != undefined)) ? product["Field4"] : "";
    this.ProductType = ((product != null) && (product != undefined)) ? product["ProductType"] : "";
    this.MemberPrices = ((product != null) && (product != undefined)) ? product["MemberPrices"] : "";
    this.MemberPrc = ((product != null) && (product != undefined)) ? product["MemberPrc"] : "";
    this.MakerName = ((product != null) && (product != undefined)) ? product["MakerName"] : "";
    this.regularPriceMain = ((product != null) && (product != undefined)) ? product["Price"] : "";
    this.activePriceMain = ((product != null) && (product != undefined)) ? ((product["SpecialPrice"] != null) ? product["SpecialPrice"] : product["Price"]) : "";
    this.nameMain = ((product != null) && (product != undefined)) ? ((INC.config.language == "en") ? product["ProductName"] : product["ProductName"]) : "";
    this.imageURLMain = ((product != null) && (product != undefined)) ? product["ImageURL"] : "";
    this.urlMain = ((product != null) && (product != undefined)) ? product["ProductUrl"] : "";
    this.genericField =  ((product != null) && (product != undefined)) ? product["genericField"] : "";
    INC.config.dataObjcount++
}
INC.classes.ProductAttObj = function(product) {
    
    this.bundleId = "";
    this.id = ((product != null) && (product != undefined)) ? product["childProductId"] : "";
    this.idAddtocart = ((product != null) && (product != undefined)) ? product["childProductField1"] : "";
    this.sku = ((product != null) && (product != undefined)) ? product["childProductSku"] : "";
    this.mainsku = ((product != null) && (product != undefined)) ? product["mainSKU"] : "";
    this.mainProdVariant = ((product != null) && (product != undefined)) ? product["MainprodVariant"] : "";
    this.childsku = ((product != null) && (product != undefined)) ? product["childProductSku"] : "";
    this.name = ((product != null) && (product != undefined)) ? ((INC.config.language == "en") ? product["childProductName"] : product["Field4"]) : "";
    this.url = ((product != null) && (product != undefined)) ? product["childProductUrl"] : "";
    this.imageURL = ((product != null) && (product != undefined)) ? product["childProductImageUrl"] : "";
    this.regularPrice = ((product != null) && (product != undefined)) ? product["childProductPrice"] : "";
    this.activePrice = ((product != null) && (product != undefined)) ? ((product["childProductSpecialPrice"] != null) ? product["childProductSpecialPrice"] : product["childProductPrice"]) : "";
    this.GOODSNO = ((product != null) && (product != undefined)) ? product["childProductField1"] : "";
    this.activePriceMsg = "";
    //((product != null) && (product != undefined)) ? ((product["Field3"] != "") ? ((INC.config.language == "en") ? product["Field3"] : product["Field6"]) : "") :


    if (product["ProductLevelDiscountMessage"] != null) {
        this.ProductLevelDiscountMessage = product["ProductLevelDiscountMessage"]
    } else {
        this.ProductLevelDiscountMessage = product["PromotionalMessage"]
    }
    this.pointcollect = "";
    this.manufacturer = ((product != null) && (product != undefined)) ? product["Manufacturer"] : "";
    this.otherImageList = ((product != null) && (product != undefined)) ? product["childProductOtherImageUrl"] : [];

    this.size = "";
    this.option = {};

    if (((product != null) && (product != undefined))) {
        this.option[product["optionId"]] = {};
        this.option[product["optionId"]].text = product["optionText"];
        this.option[product["optionId"]].ImgURLC = product["childProductImageUrl"];
        this.option[product["optionId"]].titleText = (product["childProductName"] != null) ? product["childProductName"] : "";
        this.option[product["optionId"]].imgSrc = product["childProductImageUrl"];
        this.option[product["optionId"]].colorCode = (product["colorCode"] != null) ? product["colorCode"] : "";
    }
    this.internalId = ((product != null) && (product != undefined)) ? product["childInternalProductId"] : "";
    // this.mainId = ((product != null) && (product != undefined)) ? product["ProductId"] : "";a
    this.categoryName = ((product != null) && (product != undefined)) ? product["childCategoryName"] : "";
    this.categoryId = ((product != null) && (product != undefined)) ? product["childCategoryId"] : "";
    this.description = ((product != null) && (product != undefined)) ? product["childProductDescription"] : "";
    this.shortDescription = ((product != null) && (product != undefined)) ? ((INC.config.language == "en") ? product["ShortDescription"] : product["Field5"]) : "";
    this.ratingsCount = ((product != null) && (product != undefined)) ? product["childProductField2"] : "";
    this.reviewsCount = ((product != null) && (product != undefined)) ? product["childProductField3"] : "";
    this.MemberPrices = ((product != null) && (product != undefined)) ? product["childProductField4"] : "";
    this.MemberPrc = ((product != null) && (product != undefined)) ? product["childProductField4"] : "";
    this.worthPrice = ((product != null) && (product != undefined)) ? product["MemberPrices"] : "";
    this.worthPricee = ((product != null) && (product != undefined)) ? product["MemberPrc"] : "";
    this.ProductType = ((product != null) && (product != undefined)) ? product["ProductType"] : "";
    
    this.MakerName = ((product != null) && (product != undefined)) ? product["MakerName"] : "";
    this.regularPriceMain = ((product != null) && (product != undefined)) ? product["childProductPrice"] : "";
    this.activePriceMain = ((product != null) && (product != undefined)) ? ((product["SpecialPrice"] != null) ? product["SpecialPrice"] : product["Price"]) : "";
    this.nameMain = ((product != null) && (product != undefined)) ? ((INC.config.language == "en") ? product["childProductNameMain"] : product["childProductNameMain"]) : "";
    this.imageURLMain = ((product != null) && (product != undefined)) ? ((INC.config.language == "en") ? product["childProductImageUrlMain"] : product["childProductImageUrlMain"]) : "";
    this.urlMain = ((product != null) && (product != undefined)) ? product["childProductUrlMain"] : "";
    this.genericField =  ((product != null) && (product != undefined)) ? product["genericField"] : "";
    INC.config.dataObjcount++
}
INC.classes.FindObj = function(findObj) {
    this.id = (findObj != null && findObj != undefined) ? findObj.id : "";
    this.sku = (findObj != null && findObj != undefined) ? findObj.sku : "";
    this.mainId = (findObj != null && findObj != undefined) ? findObj.mainId : "";
    this.colorText = (findObj != null && findObj != undefined) ? findObj.colorText : "";
    this.sizeText = (findObj != null && findObj != undefined) ? findObj.sizeText : "";
}

INC.classes.NWConfig = function(nwConfigObj) {
    this.url = (nwConfigObj != null && nwConfigObj != undefined) ? nwConfigObj.url : "";
    this.method = (nwConfigObj != null && nwConfigObj != undefined) ? nwConfigObj.method : "GET";
    this.params = (nwConfigObj != null && nwConfigObj != undefined) ? nwConfigObj.params : "";
}

INC.uiConfig = {
    pdp: {
        className: {
            pdpModalBlock: prefix + "pdp" + postfix,
            pdpModalTitleBlock: prefix + "pdp_title" + postfix,
            pdpModalTitleTextBlock: prefix + "pdp_title_text" + postfix,
            pdpModalTitleText: prefix + "pdp_title_text",
            pdpModalTitleImgBlock: prefix + "pdp_title_img" + postfix,
            pdpModalTitleImg: prefix + "pdp_title_img",

            pdpModalBundleBlock: prefix + "pdp_bundle" + postfix,
            pdpModalMainProductBlock: prefix + "pdp_product-main" + postfix,
            pdpModalAddIconBlock: prefix + "pdp_icon-add" + postfix,
            pdpModalBundleProductBlock: prefix + "pdp_bundle_product" + postfix,
            pdpModalBundleCartBlock: prefix + "pdp_bundle_cart" + postfix,
            pdpModalBundleCartOverlay: prefix + "pdp_bundle_cart_overlay" + postfix,

            pdpAddIconImgBlock: prefix + "pdp_icon-add_img" + postfix,
            pdpAddIconImg: prefix + "pdp_icon-add_img",
            pdpBundleProductHeaderBlock: prefix + "pdp_bundle_product_header" + postfix,
            pdpBundleProductHeaderText: prefix + "pdp_bundle_product_header_text",
            pdpBundleProductLeftBtnBlock: prefix + "pdp_bundle_product_left-btn" + postfix,
            pdpBundleProductLeftBtnImgBlock: prefix + "pdp_bundle_product_left-btn_img" + postfix,
            pdpBundleProductNavBlock: prefix + "pdp_bundle_product_nav" + postfix,
            pdpBundleProductLeftBtnImg: prefix + "pdp_bundle_product_left-btn_img",
            pdpBundleProductRightBtnBlock: prefix + "pdp_bundle_product_right-btn" + postfix,
            pdpBundleProductRightBtnImgBlock: prefix + "pdp_bundle_product_right-btn_img" + postfix,
            pdpBundleProductRightBtnImg: prefix + "pdp_bundle_product_right-btn_img",

            pdpBundleProductListBlock: prefix + "pdp_bundle_product_list" + postfix,
            pdpBundleProductListMainBlock: prefix + "pdp_bundle_product_list_main" + postfix,
            pdpBundleProductListMainLeftBlock: prefix + "pdp_bundle_product_list_main_left" + postfix,
            pdpBundleProductListMainLeftBtnBlock: prefix + "pdp_bundle_product_list_main_left_btn" + postfix,
            pdpBundleProductListMainLeftBtnImgBlock: prefix + "pdp_bundle_product_list_main_left_btn_img" + postfix,
            pdpBundleProductListMainLeftBtnImg: prefix + "pdp_bundle_product_list_main_left_btn_img",
            pdpBundleProductListMainLeftBtnTextBlock: prefix + "pdp_bundle_product_list_main_left_btn_text" + postfix,
            pdpBundleProductListMainLeftBtnText: prefix + "pdp_bundle_product_list_main_left_btn_text",
            pdpBundleProductListMainListBlock: prefix + "pdp_bundle_product_list_main_list" + postfix,
            pdpBundleProductListMainRightBlock: prefix + "pdp_bundle_product_list_main_right" + postfix,
            pdpBundleProductListMainRightBtnBlock: prefix + "pdp_bundle_product_list_main_right_btn" + postfix,
            pdpBundleProductListMainRightBtnImgBlock: prefix + "pdp_bundle_product_list_main_right_btn_img" + postfix,
            pdpBundleProductListMainRightBtnImg: prefix + "pdp_bundle_product_list_main_right_btn_img",
            pdpBundleProductListMainRightBtnTextBlock: prefix + "pdp_bundle_product_list_main_right_btn_text" + postfix,
            pdpBundleProductListMainRightBtnText: prefix + "pdp_bundle_product_list_main_right_btn_text",
            pdpBundleProductListLeftBlock: prefix + "pdp_bundle_product_list_left" + postfix,
            pdpBundleProductListLeftBtnBlock: prefix + "pdp_bundle_product_list_left_btn" + postfix,
            pdpBundleProductListLeftBtnImgBlock: prefix + "pdp_bundle_product_list_left_btn_img" + postfix,
            pdpBundleProductListLeftBtnImg: prefix + "pdp_bundle_product_list_left_btn_img",
            pdpBundleProductListRightBlock: prefix + "pdp_bundle_product_list_right" + postfix,
            pdpBundleProductListRightBtnBlock: prefix + "pdp_bundle_product_list_right_btn" + postfix,
            pdpBundleProductListRightBtnImgBlock: prefix + "pdp_bundle_product_list_right_btn_img" + postfix,
            pdpBundleProductListRightBtnImg: prefix + "pdp_bundle_product_list_right_btn_img",
            pdpBundleProductListItemsBlockShowMoreLess: prefix + "pdp_bundle_product_list_items_show_more_less" + postfix,
            pdpBundleProductListItemsBlockShowMoreLessText: prefix + "pdp_bundle_product_list_items_show_more_less_text",
            pdpBundleProductListItemsWrapperBlock: prefix + "pdp_bundle_product_list_wrapper_items" + postfix,
            pdpBundleProductListItemsWrapperHeaderBlock: prefix + "pdp_bundle_product_list_wrapper_header" + postfix,
            pdpBundleProductListItemsWrapperHeaderText: prefix + "pdp_bundle_product_list_wrapper_header_text" + postfix,
            pdpBundleProductListItemsWrapperHeaderclose: prefix + "pdp_bundle_product_list_wrapper_header_close" + postfix,
            pdpBundleProductListItemsBlock: prefix + "pdp_bundle_product_list_items" + postfix,
            pdpBundleProductListItemBlock: prefix + "pdp_bundle_product_list_item" + postfix,
            pdpBundleProductListItemImgBlock: prefix + "pdp_bundle_product_list_item_img" + postfix,
            pdpBundleProductListItemImg: prefix + "pdp_bundle_product_list_item_img",
            pdpBundleProductListItemTitleBlock: prefix + "pdp_bundle_product_list_item_title" + postfix,
            pdpBundleProductListItemTitleTextBlock: prefix + "pdp_bundle_product_list_item_title_text" + postfix,
            pdpBundleProductListItemTitleText: prefix + "pdp_bundle_product_list_item_title_text",
            pdpBundleProductListItemPriceBlock: prefix + "pdp_bundle_product_list_item_price" + postfix,
            pdpBundleProductListItemPriceActiveBlock: prefix + "pdp_bundle_product_list_item_price_active" + postfix,
            pdpBundleProductListItemPriceActiveTextBlock: prefix + "pdp_bundle_product_list_item_price_active_text" + postfix,
            pdpBundleProductListItemPriceActiveText: prefix + "pdp_bundle_product_list_item_price_active_text",
            pdpBundleProductListItemAddedBlock: prefix + "pdp_bundle_product_list_item_added" + postfix,
            pdpBundleProductListItemAddedBtnBlock: prefix + "pdp_bundle_product_list_item_added_btn" + postfix,
            pdpBundleProductListItemAddedBtnImgBlock: prefix + "pdp_bundle_product_list_item_added_btn_img" + postfix,
            pdpBundleProductListItemAddedBtnImg: prefix + "pdp_bundle_product_list_item_added_btn_img",
            pdpBundleProductListItemAddedBtnTextBlock: prefix + "pdp_bundle_product_list_item_added_btn_text" + postfix,
            pdpBundleProductListItemAddedBtnText: prefix + "pdp_bundle_product_list_item_added_btn_text",

            pdpBundleCartTitleBlock: prefix + "pdp_bundle_cart_title" + postfix,
            pdpBundleCartTitleTextBlock: prefix + "pdp_bundle_cart_title_text" + postfix,
            pdpBundleCartTitleText: prefix + "pdp_bundle_cart_title_text",
            pdpBundleCartTitleImgBlock: prefix + "pdp_bundle_cart_title_img" + postfix,
            pdpBundleCartTitleImg: prefix + "pdp_bundle_cart_title_img",
            pdpBundleCartPriceBlock: prefix + "pdp_bundle-cart_price" + postfix,
            pdpBundleCartPriceMainBlock: prefix + "pdp_bundle-cart_price_main",
            pdpBundleCartPriceMainTitleBlock: prefix + "pdp_bundle-cart_price_main_title" + postfix,
            pdpBundleCartPriceMainTitleTextBlock: prefix + "pdp_bundle-cart_price_main_title_text" + postfix,
            pdpBundleCartPriceMainTitleText: prefix + "pdp_bundle-cart_price_main_title_text",
            pdpBundleCartPriceMainFigureBlock: prefix + "pdp_bundle-cart_price_main_figure" + postfix,
            pdpBundleCartPriceMainFigureTextBlock: prefix + "pdp_bundle-cart_price_main_figure_text" + postfix,
            pdpBundleCartPriceMainFigureText: prefix + "pdp_bundle-cart_price_main_figure_text",
            pdpBundleCartPriceAddonBlock: prefix + "pdp_bundle-cart_price_addon" + postfix,
            pdpBundleCartPriceAddonTitleBlock: prefix + "pdp_bundle-cart_price_addon_title" + postfix,
            pdpBundleCartPriceAddonTitleTextBlock: prefix + "pdp_bundle-cart_price_addon_title_text" + postfix,
            pdpBundleCartPriceAddonTitleText: prefix + "pdp_bundle-cart_price_addon_title_text",
            pdpBundleCartPriceAddonFigureBlock: prefix + "pdp_bundle-cart_price_addon_figure" + postfix,
            pdpBundleCartPriceAddonFigureTextBlock: prefix + "pdp_bundle-cart_price_addon_figure_text" + postfix,
            pdpBundleCartPriceAddonFigureText: prefix + "pdp_bundle-cart_price_addon_figure_text",
            pdpBundleCartAddedBlock: prefix + "pdp_bundle_cart_added" + postfix,
            pdpBundleCartAddedProductBlock: prefix + "pdp_bundle_cart_added_product" + postfix,
            pdpBundleCartAddedProductImgBlock: prefix + "pdp_bundle_cart_added_product_img" + postfix,
            pdpBundleCartAddedProductImg: prefix + "pdp_bundle_cart_added_product_img",
            pdpBundleCartAddedProductTitleBlock: prefix + "pdp_bundle_cart_added_product_title" + postfix,
            pdpBundleCartAddedProductTitleTextBlock: prefix + "pdp_bundle_cart_added_product_title_text" + postfix,
            pdpBundleCartAddedProductTitleText: prefix + "pdp_bundle_cart_added_product_title_text",
            pdpBundleCartAddedProductPriceBlock: prefix + "pdp_bundle_cart_added_product_price" + postfix,
            pdpBundleCartAddedProductPriceTextBlock: prefix + "pdp_bundle_cart_added_product_price_text" + postfix,
            pdpBundleCartAddedProductPriceText: prefix + "pdp_bundle_cart_added_product_price_text",
            pdpBundleCartAddedProductAttBlock: prefix + "pdp_bundle_cart_added_product_att" + postfix,
            pdpBundleCartAddedProductAttColorBlock: prefix + "pdp_bundle_cart_added_product_att_color" + postfix,
            pdpBundleCartAddedProductAttColorTextBlock: prefix + "pdp_bundle_cart_added_product_att_color_text" + postfix,
            pdpBundleCartAddedProductAttColorText: prefix + "pdp_bundle_cart_added_product_att_color_text" + postfix,
            pdpBundleCartAddedProductAttSizeBlock: prefix + "pdp_bundle_cart_added_product_att_size" + postfix,
            pdpBundleCartAddedProductAttSizeTextBlock: prefix + "pdp_bundle_cart_added_product_att_size_text" + postfix,
            pdpBundleCartAddedProductAttSizeText: prefix + "pdp_bundle_cart_added_product_att_size_text",
            pdpBundleCartAddedProductQtyBlock: prefix + "pdp_bundle_cart_added_product_qty" + postfix,
            pdpBundleCartAddedProductQtyTextBlock: prefix + "pdp_bundle_cart_added_product_qty_text" + postfix,
            pdpBundleCartAddedProductQtyText: prefix + "pdp_bundle_cart_addeed_product_qty_text",
            pdpBundleCartAddedProductEditBlock: prefix + "pdp_bundle_cart_added_product_edit" + postfix,
            pdpBundleCartAddedProductEditTextBlock: prefix + "pdp_bundle_cart_added_product_edit_text" + postfix,
            pdpBundleCartAddedProductEditText: prefix + "pdp_bundle_cart_added_product_edit_text",
            pdpBundleCartAddedProductEditImgBlock: prefix + "pdp_bundle_cart_added_product_edit_img" + postfix,
            pdpBundleCartAddedProductEditImg: prefix + "pdp_bundle_cart_added_product_edit_img",
            pdpBundleCartSummaryBlock: prefix + "pdp_bundle_cart_summary" + postfix,
            pdpBundleCartSummaryTitleBlock: prefix + "pdp_bundle_cart_summary_title" + postfix,
            pdpBundleCartSummaryTitleTextBlock: prefix + "pdp_bundle_cart_summary_title_text" + postfix,
            pdpBundleCartSummaryTitleText: prefix + "pdp_bundle_cart_summary_title_text",
            pdpBundleCartSummaryPriceBlock: prefix + "pdp_bundle_cart_summary_price" + postfix,
            pdpBundleCartSummaryPriceRegularBlock: prefix + "pdp_bundle_cart_summary_price_regular" + postfix,
            pdpBundleCartSummaryPriceRegularTextBlock: prefix + "pdp_bundle_cart_summary_price_regular_text" + postfix,
            pdpBundleCartSummaryPriceRegularText: prefix + "pdp_bundle_cart_summary_price_regular_text",
            pdpBundleCartSummaryPriceActiveBlock: prefix + "pdp_bundle_cart_summary_price_active" + postfix,
            pdpBundleCartSummaryPriceActiveTextBlock: prefix + "pdp_bundle_cart_summary_price_active_text" + postfix,
            pdpBundleCartSummaryPriceActiveText: prefix + "pdp_bundle_cart_summary_price_active_text",
            pdpBundleCartSummaryViewBlock: prefix + "pdp_bundle_cart_summary_view" + postfix,
            pdpBundleCartSummaryViewBtnBlock: prefix + "pdp_bundle_cart_summary_view_btn" + postfix,
            pdpBundleCartSummaryViewBtnImgBlock: prefix + "pdp_bundle_cart_summary_view_btn_img" + postfix,
            pdpBundleCartSummaryViewBtnImg: prefix + "pdp_bundle_cart_summary_view_btn_img",
            pdpBundleCartSummaryViewBtnTextBlock: prefix + "pdp_bundle_cart_summary_view_btn_text" + postfix,
            pdpBundleCartSummaryViewBtnText: prefix + "pdp_bundle_cart_summary_view_btn_text",
            pdpBundleCartSummaryViewBtnCountBlock: prefix + "pdp_bundle_cart_summary_view_btn_count" + postfix,
            pdpBundleCartSummaryViewBtnCount: prefix + "pdp_bundle_cart_summary_view_btn_count",
            pdpBundleCartSummaryAddBlock: prefix + "pdp_bundle_cart_summary_add" + postfix,
            pdpBundleCartSummaryAddBtnBlock: prefix + "pdp_bundle_cart_summary_add_btn" + postfix,
            pdpBundleCartSummaryAddBtnTxtBlock: prefix + "pdp_bundle_cart_summary_add_btn_txt" + postfix,
            pdpBundleCartSummaryAddBtnTextBlock: prefix + "pdp_bundle_cart_summary_add_btn_text" + postfix,
            pdpBundleCartSummaryAddBtnText: prefix + "pdp_bundle_cart_summary_add_btn_text",
            pdpBundleCartSummaryAddBtnspan: prefix + "pdp_bundle_cart_summary_add_btn_span",
            pdpBundleCartSummaryAddBtnImgBlock: prefix + "pdp_bundle_cart_summary_add_btn_img" + postfix,
            pdpBundleCartSummaryAddBtnImg: prefix + "pdp_bundle_cart_summary_add_btn_img",

            productModuleBlock: prefix + "product_module" + postfix,
            productModalBlock: prefix + "product_modal" + postfix,
            productShowcaseBlock: prefix + "product_showcase" + postfix,
            productBlock: prefix + "product" + postfix,

            productHeaderMainBlock: prefix + "product_header_main" + postfix,
            productHeaderBlock: prefix + "product_header" + postfix,
            productHeaderTitleBlock: prefix + "product_header_title" + postfix,
            productHeaderTitleTextBlock: prefix + "product_header_title_text" + postfix,
            productHeaderTitleText: prefix + "product_header_title_text",
            productHeaderImgBlock: prefix + "product_header_img" + postfix,
            productHeaderImg: prefix + "product_header_img",

            productDescriptionHeaderBlock: prefix + "product_Description_header" + postfix,
            productDescriptionHeaderTitleBlock: prefix + "product_Description_header_title" + postfix,
            productDescriptionHeaderTitleTextBlock: prefix + "product_Description_header_title_text" + postfix,
            productDescriptionHeaderTitleText: prefix + "product_Description_header_title_text",
            productDescriptionHeaderImgBlock: prefix + "product_Description_header_img" + postfix,
            productDescriptionHeaderImg: prefix + "product_Description_header_img",

            productInfoMainBlock: prefix + "product_info_main" + postfix,
            productImgBlock: prefix + "product_img" + postfix,
            productImgMainBlock: prefix + "product_img_main" + postfix,
            productImgMainImgBlock: prefix + "product_img_main_img" + postfix,
            productImgMainImg: prefix + "product_img_main_img",
            productImgMainZoomBlock: prefix + "product_img_main_zoom" + postfix,
            productImgMainZoomBtnBlock: prefix + "product_img_main_zoom_btn" + postfix,
            productImgMainZoomBtnImgBlock: prefix + "product_img_main_zoom_btn_img" + postfix,
            productImgMainZoomBtnImg: prefix + "product_img_main_zoom_btn_img",
            productImgMainZoomminusImg: prefix + "product_img_main_zoom_minus_img",
            productImgMainZoomRuturnImg: prefix + "product_img_main_zoom_return_img",
            productImgMainZoomBtnTextBlock: prefix + "product_img_main_zoom_btn_text" + postfix,
            productImgMainZoomBtnText: prefix + "product_img_main_zoom_btn_text",
            productImgGalleryBlock: prefix + "product_img_gallery" + postfix,
            productImgGalleryHeaderBlock: prefix + "producy_img_gallery_header" + postfix,
            productImgGalleryHeaderTitleBlock: prefix + "product_img_gallery_header_title" + postfix,
            productImgGalleryHeaderTitleImgBlock: prefix + "product_img_gallery_header_title_img" + postfix,
            productImgGalleryHeaderTitleImg: prefix + "product_img_gallery_header_title_img",
            productImgGalleryHeaderTitleTextBlock: prefix + "product_img_gallery_header_title_text" + postfix,
            productImgGalleryHeaderTitleText: prefix + "product_img_gallery_header_title_text",
            productImgGalleryHeaderToggleBlock: prefix + "product_img_gallery_header_toggle" + postfix,
            productImgGalleryHeaderToggleImgBlock: prefix + "product_img_gallery_header_toggle_img" + postfix,
            productImgGalleryHeaderToggleImg: prefix + "product_img_gallery_header_toggle_img",
            productImgGalleryHeaderToggleTextBlock: prefix + "product_img_gallery_header_toggle_text" + postfix,
            productImgGalleryHeaderToggleText: prefix + "product_img_gallery_header_toggle_text",
            productImgGalleryLeftBlock: prefix + "product_img_gallery_left" + postfix,
            productImgGalleryLeftBtnBlock: prefix + "product_img_gallery_left_btn" + postfix,
            productImgGalleryLeftBtnImgBlock: prefix + "product_img_gallery_left_btn_img" + postfix,
            productImgGalleryLeftBtnImg: prefix + "product_img_gallery_left_btn_img",
            productImgGalleryLeftBtnTextBlock: prefix + "product_img_gallery_left_btn_text" + postfix,
            productImgGalleryLeftBtnText: prefix + "product_img_gallery_left_btn_text",
            productImgGalleryListBlock: prefix + "product_img_gallery_list" + postfix,
            productImgGalleryListItemBlock: prefix + "product_img_gallery_list_item" + postfix,
            productImgGalleryListItemImgBlock: prefix + "product_img_gallery_list_item_img" + postfix,
            productImgGalleryListItemImg: prefix + "product_img_gallery_list_item_img",
            productImgGalleryListItemTextBlock: prefix + "product_img_gallery_list_item_text" + postfix,
            productImgGalleryListItemText: prefix + "product_img_gallery_list_item_text",
            productImgGalleryRightBlock: prefix + "product_img_gallery_right" + postfix,
            productImgGalleryRightBtnBlock: prefix + "product_img_gallery_right_btn" + postfix,
            productImgGalleryRightBtnImgBlock: prefix + "product_img_gallery_right_btn_img" + postfix,
            productImgGalleryRightBtnImg: prefix + "product_img_gallery_right_btn_img",
            productImgGalleryRightBtnTextBlock: prefix + "product_img_gallery_right_btn_text" + postfix,
            productImgGalleryRightBtnText: prefix + "product_img_gallery_right_btn_text",
            productDescBlock: prefix + "product_desc" + postfix,
            productTitlPrcBlock: prefix + "product_desc_titlprc" + postfix,
            productTitleBlock: prefix + "product_desc_title" + postfix,
            productTitleTextBlock: prefix + "product_desc_title_text" + postfix,
            productTitleText: prefix + "product_desc_title_text",
            productMaufactureTextBlock: prefix + "product_manufacture_text" + postfix,
            productMaufactureText: prefix + "product_maufacture_text",
            productTitleTextHeader: prefix + "product_desc_title_text_header",
            productRatingsBlock: prefix + "product_desc_ratings" + postfix,
            productInfoBlock: prefix + "product_desc_info" + postfix,
            productInfoImgBlock: prefix + "product_desc_info_img" + postfix,
            productInfoImg: prefix + "product_desc_info_img",
            productInfoFullDescBlock: prefix + "product_Info_Full_desc_info" + postfix,
            productInfoFullDescText: prefix + "product_Info_Full_desc_info_text",
            productInfoFullDescDescBlock: prefix + "Info_Full_desc_desc" + postfix,
            productInfoFullDescDescHeaderBlock: prefix + "Info_Full_desc_desc_header" + postfix,
            productInfoFullDescDescHeaderText: prefix + "Info_Full_desc_desc_header_text",
            productInfoFullDescShippingBlock: prefix + "Info_Full_desc_shipping" + postfix,
            productInfoFullDescShippingHeaderBlock: prefix + "Info_Full_desc_shipping_header" + postfix,
            productInfoFullDescShippingHeaderText: prefix + "Info_Full_desc_shipping_header_text",
            productInfoFullDescShippingText: prefix + "Info_Full_desc_shipping_text",
            productInfoTextBlock: prefix + "product_desc_info_text" + postfix,
            productInfoText: prefix + "product_desc_info_text",
            productPriceBlock: prefix + "product_desc_price" + postfix,
            productPriceLabel: prefix + "product_price_label" + postfix,
            productPriceActiveBlock: prefix + "product_desc_price_active" + postfix,
            productPriceActiveTextBlock: prefix + "product_desc_price_active_text" + postfix,
            productPriceActiveText: prefix + "product_desc_price_active_text",
            productPriceActiveTextMsg: prefix + "product_desc_price_active_text_msg",
            productPriceRegularBlock: prefix + "product_desc_price_regular" + postfix,
            productPriceRegularTextBlock: prefix + "product_desc_price_regular_text" + postfix,
            productPriceRegularText: prefix + "product_desc_price_regular_text",
            productPriceWorthBlock: prefix + "product_desc_price_worth" + postfix,
            productPriceWorthTextBlock: prefix + "product_desc_price_worth_text" + postfix,
            productPriceWorthText: prefix + "product_desc_price_worth_text",
            productPriceWorthTextMsg: prefix + "product_desc_price_worth_text_msg",
            productAttBlock: prefix + "product_desc_att" + postfix,
            productAttColorBlock: prefix + "product_desc_att_color" + postfix,
            productAttColorTitleBlock: prefix + "product_desc_att_color_title" + postfix,
            productAttColorTitleTextBlock: prefix + "product_desc_att_color_title_text" + postfix,
            productAttColorTitleText: prefix + "product_desc_att_color_title_text",
            productAttColorTitleTextSelected: prefix + "product_desc_att_color_title_text_selected",
            productAttColorListBlock: prefix + "product_desc_att_color_list" + postfix,
            productAttColorListItemBlock: prefix + "product_desc_att_color_list_item" + postfix,
            productAttColorListItemImgBlock: prefix + "product_desc_att_color_list_item_img" + postfix,
            productAttColorListItemImg: prefix + "product_desc_att_color_list_item_img",
            productAttColorListItemTextBlock: prefix + "product_desc_att_color_list_item_text" + postfix,
            productAttColorListItemText: prefix + "product_desc_att_color_list_item_text",
            productAttSizeBlock: prefix + "product_desc_att_size" + postfix,
            productAttSizeTitleBlock: prefix + "product_desc_att_size_title" + postfix,
            productAttSizeTitleTextBlock: prefix + "product_desc_att_size_title_text" + postfix,
            productAttSizeTitleText: prefix + "product_desc_att_size_title_text",
            productAttSizeTitleTextSelected: prefix + "product_desc_att_size_title_text_selected",
            productAttSizeListBlock: prefix + "product_desc_att_size_list" + postfix,
            productAttSizeListItemBlock: prefix + "product_desc_att_size_list_item" + postfix,
            productAttSizeListItemImgBlock: prefix + "product_desc_att_size_list_item_img" + postfix,
            productAttSizeListItemImg: prefix + "product_desc_att_size_list_item_img",
            productAttSizeListItemTextBlock: prefix + "product_desc_att_size_list_item_text" + postfix,
            productAttSizeListItemText: prefix + "product_desc_att_size_list_item_text",
            productAttzeroBlock: prefix + "product_desc_att_zero" + postfix,
            productAttzeroTitleBlock: prefix + "product_desc_att_zero_title" + postfix,
            productAttzeroTitleTextBlock: prefix + "product_desc_att_zero_title_text" + postfix,
            productAttzeroTitleText: prefix + "product_desc_att_zero_title_text",
            productAttzeroTitleTextSelected: prefix + "product_desc_att_zero_title_text_selected",
            productAttzeroListBlock: prefix + "product_desc_att_zero_list" + postfix,
            productAttzeroListItemBlock: prefix + "product_desc_att_zero_list_item" + postfix,
            productAttzeroListItemImgBlock: prefix + "product_desc_att_zero_list_item_img" + postfix,
            productAttzeroListItemImg: prefix + "product_desc_att_zero_list_item_img",
            productAttzeroListItemTextBlock: prefix + "product_desc_att_zero_list_item_text" + postfix,
            productAttzeroListItemText: prefix + "product_desc_att_zero_list_item_text",
            productAttthirdBlock: prefix + "product_desc_att_third" + postfix,
            productAttthirdTitleBlock: prefix + "product_desc_att_third_title" + postfix,
            productAttthirdTitleTextBlock: prefix + "product_desc_att_third_title_text" + postfix,
            productAttthirdTitleText: prefix + "product_desc_att_third_title_text",
            productAttthirdTitleTextSelected: prefix + "product_desc_att_third_title_text_selected",
            productAttthirdListBlock: prefix + "product_desc_att_third_list" + postfix,
            productAttthirdListItemBlock: prefix + "product_desc_att_third_list_item" + postfix,
            productAttthirdListItemImgBlock: prefix + "product_desc_att_third_list_item_img" + postfix,
            productAttthirdListItemImg: prefix + "product_desc_att_third_list_item_img",
            productAttthirdListItemTextBlock: prefix + "product_desc_att_third_list_item_text" + postfix,
            productAttthirdListItemText: prefix + "product_desc_att_third_list_item_text",
            productAttfourthBlock: prefix + "product_desc_att_fourth" + postfix,
            productAttfourthTitleBlock: prefix + "product_desc_att_fourth_title" + postfix,
            productAttfourthTitleTextBlock: prefix + "product_desc_att_fourth_title_text" + postfix,
            productAttfourthTitleText: prefix + "product_desc_att_fourth_title_text",
            productAttfourthTitleTextSelected: prefix + "product_desc_att_fourth_title_text_selected",
            productAttfourthListBlock: prefix + "product_desc_att_fourth_list" + postfix,
            productAttfourthListItemBlock: prefix + "product_desc_att_fourth_list_item" + postfix,
            productAttfourthListItemImgBlock: prefix + "product_desc_att_fourth_list_item_img" + postfix,
            productAttfourthListItemImg: prefix + "product_desc_att_fourth_list_item_img",
            productAttfourthListItemTextBlock: prefix + "product_desc_att_fourth_list_item_text" + postfix,
            productAttfourthListItemText: prefix + "product_desc_att_fourth_list_item_text",
            productAttEditText: prefix + "product_desc_att_edit_text",
            productAttEditBlock: prefix + "product_desc_att_edit" + postfix,
            productPackOfBlock: prefix + "product_desc_pack_of" + postfix,
            productPackOfLeftBlock: prefix + "product_desc_pack_of_left" + postfix,
            productPackOfListBlock: prefix + "product_desc_pack_of_list" + postfix,
            productPackOfRightBlock: prefix + "product_desc_pack_of_right" + postfix,
            productPackOfLeftBtnBlock: prefix + "product_desc_pack_of_left_btn" + postfix,
            productPackOfLeftBtnImgBlock: prefix + "product_desc_pack_of_left_btn_img" + postfix,
            productPackOfLeftBtnImg: prefix + "product_desc_pack_of_left_btn_img",
            productPackOfRightBtnBlock: prefix + "product_desc_pack_of_right_btn" + postfix,
            productPackOfRightBtnImgBlock: prefix + "product_desc_pack_of_right_btn_img" + postfix,
            productPackOfRightBtnImg: prefix + "product_desc_pack_of_right_btn_img",
            productPackOfItemBlock: prefix + "product_desc_pack_of_item" + postfix,
            productPackOfItemTitleBlock: prefix + "product_desc_pack_of_item_title" + postfix,
            productPackOfItemTitleTextBlock: prefix + "product_desc_pack_of_item_title_text" + postfix,
            productPackOfItemTitleText: prefix + "product_desc_pack_of_item_title_text",
            productPackOfItemImgBlock: prefix + "product_desc_pack_of_item_img" + postfix,
            productPackOfItemImg: prefix + "product_desc_pack_of_item_img",
            productPackOfItemQuantityBlock: prefix + "product_desc_pack_of_item_quantity" + postfix,
            productPackOfItemQuantityTextBlock: prefix + "product_desc_pack_of_item_quantity_text" + postfix,
            productPackOfItemQuantityText: prefix + "product_desc_pack_of_item_quantity_text",
            productPackOfItemPriceBlock: prefix + "product_desc_pack_of_item_price" + postfix,
            productPackOfItemPriceRegularBlock: prefix + "product_desc_pack_of_item_price_regular" + postfix,
            productPackOfItemPriceRegularTextBlock: prefix + "product_desc_pack_of_item_price_regular_text" + postfix,
            productPackOfItemPriceRegularText: prefix + "product_desc_pack_of_item_price_regular_text",
            productPackOfItemPriceActiveBlock: prefix + "product_desc_pack_of_item_price_active" + postfix,
            productPackOfItemPriceActiveTextBlock: prefix + "product_desc_pack_of_item_price_active_text" + postfix,
            productPackOfItemPriceActiveText: prefix + "product_desc_pack_of_item_price_active_text",
            productQtyAddBtnBlock: prefix + "product_desc_qty_add_btn" + postfix,
            productQtyBlock: prefix + "product_desc_qty" + postfix,
            productQtyDownBlock: prefix + "product_desc_qty_down" + postfix,
            productQtyDownBtnBlock: prefix + "product_desc_qty_down_btn" + postfix,
            productQtyDownBtn: prefix + "product_desc_qty_down_btn",
            productQtyInputBlock: prefix + "product_desc_qty_input" + postfix,
            productQtyInputTextBlock: prefix + "product_desc_qty_input_text" + postfix,
            productQtyInputText: prefix + "product_desc_qty_input_text",
            productQtyUpBlock: prefix + "product_desc_qty_up" + postfix,
            productQtyUpBtnBlock: prefix + "product_desc_qty_up_btn" + postfix,
            productQtyUpBtn: prefix + "product_desc_qty_up_btn",
            productAddBlock: prefix + "product_desc_add" + postfix,
            productAddTextBlock: prefix + "product_desc_add_text" + postfix,
            productAddText: prefix + "product_desc_add_text",
            productAddspan: prefix + "product_desc_add_span",
            productAddImgBlock: prefix + "product_desc_add_img" + postfix,
            productAddImg: prefix + "product_desc_add_img",
            productAddErrText: prefix + "product_desc_add_err_text" + postfix,
            productAddTitle: prefix + "product_desc_add_title_text" + postfix,
            productDescriptionMainBlock: prefix + "product_description_main" + postfix,
        },
        dom: {
            pdpModalBlock: ["pdpModalTitleBlock", "pdpModalBundleBlock"],
            pdpModalTitleBlock: ["pdpModalTitleTextBlock", "pdpModalTitleImgBlock"],
            pdpModalTitleTextBlock: ["pdpModalTitleText"],
            pdpModalTitleImgBlock: ["pdpModalTitleImg"],
            pdpModalBundleBlock: ["pdpModalMainProductBlock", "pdpModalAddIconBlock", "pdpModalBundleProductBlock", "pdpModalBundleCartOverlay", "pdpModalBundleCartBlock"],
            pdpModalMainProductBlock: ["productModuleBlock"],
            pdpModalAddIconBlock: ["pdpAddIconImgBlock"],
            pdpAddIconImgBlock: ["pdpAddIconImg"],

            pdpModalBundleProductBlock: ["pdpBundleProductHeaderBlock", "pdpBundleProductLeftBtnBlock", "pdpBundleProductListBlock", "pdpBundleProductNavBlock", "pdpBundleProductRightBtnBlock"],
            pdpBundleProductHeaderBlock: ["pdpBundleProductHeaderText"],
            pdpBundleProductLeftBtnBlock: ["pdpBundleProductLeftBtnImgBlock"],
            pdpBundleProductLeftBtnImgBlock: ["pdpBundleProductLeftBtnImg"],
            pdpBundleProductRightBtnBlock: ["pdpBundleProductRightBtnImgBlock"],
            pdpBundleProductRightBtnImgBlock: ["pdpBundleProductRightBtnImg"],
            pdpBundleProductListBlock: ["pdpBundleProductListMainBlock", "pdpBundleProductListLeftBlock", "pdpBundleProductListItemsBlockShowMoreLess", "pdpBundleProductListItemsWrapperBlock", "pdpBundleProductListRightBlock"],
            pdpBundleProductListItemsWrapperBlock: ["pdpBundleProductListItemsWrapperHeaderBlock", "pdpBundleProductListItemsBlock"],
            pdpBundleProductListItemsWrapperHeaderBlock: ["pdpBundleProductListItemsWrapperHeaderText", "pdpBundleProductListItemsWrapperHeaderclose"],
            pdpBundleProductListMainBlock: ["pdpBundleProductListMainLeftBlock", "pdpBundleProductListMainListBlock", "pdpBundleProductListMainRightBlock"],
            pdpBundleProductListMainLeftBlock: ["pdpBundleProductListMainLeftBtnBlock"],
            pdpBundleProductListMainLeftBtnBlock: ["pdpBundleProductListMainLeftBtnImgBlock", "pdpBundleProductListMainLeftBtnTextBlock"],
            pdpBundleProductListMainLeftBtnImgBlock: ["pdpBundleProductListMainLeftBtnImg"],
            pdpBundleProductListMainLeftBtnTextBlock: ["pdpBundleProductListMainLeftBtnText"],
            pdpBundleProductListMainListBlock: ["productModuleBlock"],
            pdpBundleProductListMainRightBlock: ["pdpBundleProductListMainRightBtnBlock"],
            pdpBundleProductListMainRightBtnBlock: ["pdpBundleProductListMainRightBtnImgBlock", "pdpBundleProductListMainRightBtnTextBlock"],
            pdpBundleProductListMainRightBtnImgBlock: ["pdpBundleProductListMainRightBtnImg"],
            pdpBundleProductListMainRightBtnTextBlock: ["pdpBundleProductListMainRightBtnText"],
            pdpBundleProductListLeftBlock: ["pdpBundleProductListLeftBtnBlock"],
            pdpBundleProductListLeftBtnBlock: ["pdpBundleProductListLeftBtnImgBlock"],
            pdpBundleProductListLeftBtnImgBlock: ["pdpBundleProductListLeftBtnImg"],
            pdpBundleProductListRightBlock: ["pdpBundleProductListRightBtnBlock"],
            pdpBundleProductListRightBtnBlock: ["pdpBundleProductListRightBtnImgBlock"],
            pdpBundleProductListRightBtnImgBlock: ["pdpBundleProductListRightBtnImg"],
            pdpBundleProductListItemsBlockShowMoreLess: ["pdpBundleProductListItemsBlockShowMoreLessText"],
            pdpBundleProductListItemsBlock: ["pdpBundleProductListItemBlock"],
            pdpBundleProductListItemBlock: ["pdpBundleProductListItemAddedBlock", "pdpBundleProductListItemImgBlock", "pdpBundleProductListItemTitleBlock", "pdpBundleProductListItemPriceBlock"],
            pdpBundleProductListItemAddedBlock: ["pdpBundleProductListItemAddedBtnBlock"],
            pdpBundleProductListItemAddedBtnBlock: ["pdpBundleProductListItemAddedBtnImgBlock", "pdpBundleProductListItemAddedBtnTextBlock"],
            pdpBundleProductListItemAddedBtnImgBlock: ["pdpBundleProductListItemAddedBtnImg"],
            pdpBundleProductListItemAddedBtnTextBlock: ["pdpBundleProductListItemAddedBtnText"],
            pdpBundleProductListItemImgBlock: ["pdpBundleProductListItemImg"],
            pdpBundleProductListItemTitleBlock: ["pdpBundleProductListItemTitleTextBlock"],
            pdpBundleProductListItemTitleTextBlock: ["pdpBundleProductListItemTitleText"],
            pdpBundleProductListItemPriceBlock: ["pdpBundleProductListItemPriceActiveBlock"],
            pdpBundleProductListItemPriceActiveBlock: ["pdpBundleProductListItemPriceActiveTextBlock"],
            pdpBundleProductListItemPriceActiveTextBlock: ["pdpBundleProductListItemPriceActiveText"],

            pdpModalBundleCartBlock: ["pdpBundleCartTitleBlock", "pdpBundleCartPriceBlock", "pdpBundleCartAddedBlock", "pdpBundleCartSummaryBlock"],
            pdpBundleCartTitleBlock: ["pdpBundleCartTitleTextBlock", "pdpBundleCartTitleImgBlock"],
            pdpBundleCartTitleTextBlock: ["pdpBundleCartTitleText"],
            pdpBundleCartTitleImgBlock: ["pdpBundleCartTitleImg"],
            pdpBundleCartPriceBlock: ["pdpBundleCartPriceMainBlock", "pdpBundleCartPriceAddonBlock"],
            pdpBundleCartPriceMainBlock: ["pdpBundleCartPriceMainTitleBlock", "pdpBundleCartPriceMainFigureBlock"],
            pdpBundleCartPriceMainTitleBlock: ["pdpBundleCartPriceMainTitleTextBlock"],
            pdpBundleCartPriceMainTitleTextBlock: ["pdpBundleCartPriceMainTitleText"],
            pdpBundleCartPriceMainFigureBlock: ["pdpBundleCartPriceMainFigureTextBlock"],
            pdpBundleCartPriceMainFigureTextBlock: ["pdpBundleCartPriceMainFigureText"],
            pdpBundleCartPriceAddonBlock: ["pdpBundleCartPriceAddonTitleBlock", "pdpBundleCartPriceAddonFigureBlock"],
            pdpBundleCartPriceAddonTitleBlock: ["pdpBundleCartPriceAddonTitleTextBlock"],
            pdpBundleCartPriceAddonTitleTextBlock: ["pdpBundleCartPriceAddonTitleText"],
            pdpBundleCartPriceAddonFigureBlock: ["pdpBundleCartPriceAddonFigureTextBlock"],
            pdpBundleCartPriceAddonFigureTextBlock: ["pdpBundleCartPriceAddonFigureText"],
            pdpBundleCartAddedBlock: ["pdpBundleCartAddedProductBlock"],
            pdpBundleCartAddedProductBlock: ["pdpBundleCartAddedProductImgBlock", "pdpBundleCartAddedProductTitleBlock", "pdpBundleCartAddedProductQtyBlock", "pdpBundleCartAddedProductAttBlock", "pdpBundleCartAddedProductPriceBlock", "pdpBundleCartAddedProductEditBlock"],
            pdpBundleCartAddedProductImgBlock: ["pdpBundleCartAddedProductImg"],
            pdpBundleCartAddedProductTitleBlock: ["pdpBundleCartAddedProductTitleTextBlock"],
            pdpBundleCartAddedProductTitleTextBlock: ["pdpBundleCartAddedProductTitleText"],
            pdpBundleCartAddedProductPriceBlock: ["pdpBundleCartAddedProductPriceTextBlock"],
            pdpBundleCartAddedProductPriceTextBlock: ["pdpBundleCartAddedProductPriceText"],
            pdpBundleCartAddedProductAttBlock: ["pdpBundleCartAddedProductAttColorBlock", "pdpBundleCartAddedProductAttSizeBlock"],
            pdpBundleCartAddedProductAttColorBlock: ["pdpBundleCartAddedProductAttColorTextBlock"],
            pdpBundleCartAddedProductAttColorTextBlock: ["pdpBundleCartAddedProductAttColorText"],
            pdpBundleCartAddedProductAttSizeBlock: ["pdpBundleCartAddedProductAttSizeTextBlock"],
            pdpBundleCartAddedProductAttSizeTextBlock: ["pdpBundleCartAddedProductAttSizeText"],
            pdpBundleCartAddedProductQtyBlock: ["pdpBundleCartAddedProductQtyTextBlock"],
            pdpBundleCartAddedProductQtyTextBlock: ["pdpBundleCartAddedProductQtyText"],
            pdpBundleCartAddedProductEditBlock: ["pdpBundleCartAddedProductEditTextBlock", "pdpBundleCartAddedProductEditImgBlock"],
            pdpBundleCartAddedProductEditTextBlock: ["pdpBundleCartAddedProductEditText"],
            pdpBundleCartAddedProductEditImgBlock: ["pdpBundleCartAddedProductEditImg"],
            pdpBundleCartSummaryBlock: ["pdpBundleCartSummaryTitleBlock", "pdpBundleCartSummaryViewBlock", "pdpBundleCartSummaryPriceBlock", "pdpBundleCartSummaryAddBlock"],
            pdpBundleCartSummaryTitleBlock: ["pdpBundleCartSummaryTitleTextBlock"],
            pdpBundleCartSummaryTitleTextBlock: ["pdpBundleCartSummaryTitleText"],
            pdpBundleCartSummaryViewBlock: ["pdpBundleCartSummaryViewBtnBlock"],
            pdpBundleCartSummaryViewBtnBlock: ["pdpBundleCartSummaryViewBtnImgBlock", "pdpBundleCartSummaryViewBtnTextBlock", "pdpBundleCartSummaryViewBtnCountBlock"],
            pdpBundleCartSummaryViewBtnImgBlock: ["pdpBundleCartSummaryViewBtnImg"],
            pdpBundleCartSummaryViewBtnTextBlock: ["pdpBundleCartSummaryViewBtnText"],
            pdpBundleCartSummaryViewBtnCountBlock: ["pdpBundleCartSummaryViewBtnCount"],
            pdpBundleCartSummaryPriceBlock: ["pdpBundleCartSummaryPriceActiveBlock", "pdpBundleCartSummaryPriceRegularBlock"],
            pdpBundleCartSummaryPriceRegularBlock: ["pdpBundleCartSummaryPriceRegularTextBlock"],
            pdpBundleCartSummaryPriceRegularTextBlock: ["pdpBundleCartSummaryPriceRegularText"],
            pdpBundleCartSummaryPriceActiveBlock: ["pdpBundleCartSummaryPriceActiveTextBlock"],
            pdpBundleCartSummaryPriceActiveTextBlock: ["pdpBundleCartSummaryPriceActiveText"],
            pdpBundleCartSummaryAddBlock: ["pdpBundleCartSummaryAddBtnBlock","pdpBundleCartSummaryAddBtnTxtBlock"],
            pdpBundleCartSummaryAddBtnBlock: ["pdpBundleCartSummaryAddBtnTextBlock", "pdpBundleCartSummaryAddBtnImgBlock"],
            pdpBundleCartSummaryAddBtnTextBlock: ["pdpBundleCartSummaryAddBtnText", "pdpBundleCartSummaryAddBtnspan"],
            // pdpBundleCartSummaryAddBtnText:["pdpBundleCartSummaryAddBtnspan"],
            pdpBundleCartSummaryAddBtnImgBlock: ["pdpBundleCartSummaryAddBtnImg"],

            productModuleBlock: ["productShowcaseBlock", "productModalBlock"],
            productShowcaseBlock: ["productBlock"],
            productModalBlock: ["productBlock"],
            productBlock: ["productHeaderMainBlock", "productInfoMainBlock", "productDescriptionMainBlock"],
            productInfoMainBlock: ["productImgBlock", "productDescBlock"],
            productHeaderMainBlock: ["productHeaderBlock", "productDescriptionHeaderBlock", "productHeaderImgBlock"],
            productHeaderBlock: ["productHeaderTitleBlock"],
            productHeaderTitleBlock: ["productHeaderTitleTextBlock"],
            productHeaderTitleTextBlock: ["productHeaderTitleText"],
            productHeaderImgBlock: ["productHeaderImg"],

            productDescriptionHeaderBlock: ["productDescriptionHeaderTitleBlock"],
            productDescriptionHeaderTitleBlock: ["productDescriptionHeaderTitleTextBlock"],
            productDescriptionHeaderTitleTextBlock: ["productDescriptionHeaderTitleText"],
            productDescriptionHeaderImgBlock: ["productDescriptionHeaderImg"],

            productImgBlock: ["productImgMainBlock", "productTitlPrcBlock"],
            productTitlPrcBlock: ["productTitleBlock", "productPriceBlock"],
            productImgMainBlock: ["productImgMainImgBlock", "productImgMainZoomBlock"],
            productImgMainImgBlock: ["productImgMainImg"],
            productImgMainZoomBlock: ["productImgMainZoomBtnBlock"],
            productImgMainZoomBtnBlock: ["productImgMainZoomBtnImgBlock", "productImgMainZoomBtnTextBlock"],
            productImgMainZoomBtnImgBlock: ["productImgMainZoomBtnImg", "productImgMainZoomminusImg", "productImgMainZoomRuturnImg"],
            productImgMainZoomBtnTextBlock: ["productImgMainZoomBtnText"],
            productImgGalleryBlock: ["productImgGalleryHeaderBlock", "productImgGalleryLeftBlock", "productImgGalleryListBlock", "productImgGalleryRightBlock"],
            productImgGalleryHeaderBlock: ["productImgGalleryHeaderTitleBlock", "productImgGalleryHeaderToggleBlock"],
            productImgGalleryHeaderTitleBlock: ["productImgGalleryHeaderTitleImgBlock", "productImgGalleryHeaderTitleTextBlock"],
            productImgGalleryHeaderTitleImgBlock: ["productImgGalleryHeaderTitleImg"],
            productImgGalleryHeaderTitleTextBlock: ["productImgGalleryHeaderTitleText"],
            productImgGalleryHeaderToggleBlock: ["productImgGalleryHeaderToggleImgBlock", "productImgGalleryHeaderToggleTextBlock"],
            productImgGalleryHeaderToggleImgBlock: ["productImgGalleryHeaderToggleImg"],
            productImgGalleryHeaderToggleTextBlock: ["productImgGalleryHeaderToggleText"],
            productImgGalleryLeftBlock: ["productImgGalleryLeftBtnBlock"],
            productImgGalleryLeftBtnBlock: ["productImgGalleryLeftBtnImgBlock", "productImgGalleryLeftBtnTextBlock"],
            productImgGalleryLeftBtnImgBlock: ["productImgGalleryLeftBtnImg"],
            productImgGalleryLeftBtnTextBlock: ["productImgGalleryLeftBtnText"],
            productImgGalleryListBlock: ["productImgGalleryListItemBlock"],
            productImgGalleryListItemBlock: ["productImgGalleryListItemImgBlock", "productImgGalleryListItemTextBlock"],
            productImgGalleryListItemImgBlock: ["productImgGalleryListItemImg"],
            productImgGalleryListItemTextBlock: ["productImgGalleryListItemText"],
            productImgGalleryRightBlock: ["productImgGalleryRightBtnBlock"],
            productImgGalleryRightBtnBlock: ["productImgGalleryRightBtnImgBlock", "productImgGalleryRightBtnTextBlock"],
            productImgGalleryRightBtnImgBlock: ["productImgGalleryRightBtnImg"],
            productImgGalleryRightBtnTextBlock: ["productImgGalleryRightBtnText"],
            productDescBlock: ["productImgGalleryBlock", "productRatingsBlock", "productPriceWorthBlock", "productAttBlock", "productInfoBlock", "productPackOfBlock", "productQtyAddBtnBlock"],
            productTitleBlock: ["productMaufactureTextBlock", "productTitleTextBlock"],
            productTitleTextBlock: ["productTitleTextHeader", "productTitleText"],
            productMaufactureTextBlock: ["productMaufactureText"],
            productInfoBlock: ["productInfoImgBlock", "productInfoTextBlock", "productInfoFullDescBlock"],
            productInfoImgBlock: ["productInfoImg"],
            productInfoTextBlock: ["productInfoText"],
            productInfoFullDescBlock: ["productInfoFullDescDescBlock", "productInfoFullDescShippingBlock"],
            productInfoFullDescDescBlock: ["productInfoFullDescDescHeaderBlock", "productInfoFullDescText"],
            productInfoFullDescDescHeaderBlock: ["productInfoFullDescDescHeaderText"],
            productInfoFullDescShippingBlock: ["productInfoFullDescShippingHeaderBlock", "productInfoFullDescShippingText"],
            productInfoFullDescShippingHeaderBlock: ["productInfoFullDescShippingHeaderText"],
            productPriceBlock: ["productPriceLabel", "productPriceActiveBlock", "productPriceRegularBlock"],
            productPriceActiveBlock: ["productPriceActiveTextBlock"],
            productPriceActiveTextBlock: ["productPriceActiveText", "productPriceActiveTextMsg"],
            productPriceRegularBlock: ["productPriceRegularTextBlock"],
            productPriceRegularTextBlock: ["productPriceRegularText"],
            productPriceWorthBlock: ["productPriceWorthTextBlock"],
            productPriceWorthTextBlock: ["productPriceWorthText", "productPriceWorthTextMsg"],
            productAttBlock: ["productAddErrText", "productAddTitle", "productAttzeroBlock", "productAttColorBlock", "productAttSizeBlock", "productAttthirdBlock", "productAttfourthBlock", "productAttEditBlock"],
            productAttColorBlock: ["productAttColorTitleBlock", "productAttColorListBlock"],
            productAttColorTitleBlock: ["productAttColorTitleTextBlock"],
            productAttColorTitleTextBlock: ["productAttColorTitleText", "productAttColorTitleTextSelected"],
            productAttColorListBlock: ["productAttColorListItemBlock"],
            productAttColorListItemBlock: ["productAttColorListItemImgBlock", "productAttColorListItemTextBlock"],
            productAttColorListItemImgBlock: ["productAttColorListItemImg"],
            productAttColorListItemTextBlock: ["productAttColorListItemText"],

            productAttzeroBlock: ["productAttzeroTitleBlock", "productAttzeroListBlock"],
            productAttzeroTitleBlock: ["productAttzeroTitleTextBlock"],
            productAttzeroTitleTextBlock: ["productAttzeroTitleText", "productAttzeroTitleTextSelected"],
            productAttzeroListBlock: ["productAttzeroListItemBlock"],
            productAttzeroListItemBlock: ["productAttzeroListItemImgBlock", "productAttzeroListItemTextBlock"],
            productAttzeroListItemImgBlock: ["productAttzeroListItemImg"],
            productAttzeroListItemTextBlock: ["productAttzeroListItemText"],

            productAttthirdBlock: ["productAttthirdTitleBlock", "productAttthirdListBlock"],
            productAttthirdTitleBlock: ["productAttthirdTitleTextBlock"],
            productAttthirdTitleTextBlock: ["productAttthirdTitleText", "productAttthirdTitleTextSelected"],
            productAttthirdListBlock: ["productAttthirdListItemBlock"],
            productAttthirdListItemBlock: ["productAttthirdListItemImgBlock", "productAttthirdListItemTextBlock"],
            productAttthirdListItemImgBlock: ["productAttthirdListItemImg"],
            productAttthirdListItemTextBlock: ["productAttthirdListItemText"],

            productAttfourthBlock: ["productAttfourthTitleBlock", "productAttfourthListBlock"],
            productAttfourthTitleBlock: ["productAttfourthTitleTextBlock"],
            productAttfourthTitleTextBlock: ["productAttfourthTitleText", "productAttfourthTitleTextSelected"],
            productAttfourthListBlock: ["productAttfourthListItemBlock"],
            productAttfourthListItemBlock: ["productAttfourthListItemImgBlock", "productAttfourthListItemTextBlock"],
            productAttfourthListItemImgBlock: ["productAttfourthListItemImg"],
            productAttfourthListItemTextBlock: ["productAttfourthListItemText"],

            productAttSizeBlock: ["productAttSizeTitleBlock", "productAttSizeListBlock"],
            productAttSizeTitleBlock: ["productAttSizeTitleTextBlock"],
            productAttSizeTitleTextBlock: ["productAttSizeTitleText", "productAttSizeTitleTextSelected"],
            productAttSizeListBlock: ["productAttSizeListItemBlock"],
            productAttSizeListItemBlock: ["productAttSizeListItemImgBlock", "productAttSizeListItemTextBlock"],
            productAttSizeListItemImgBlock: ["productAttSizeListItemImg"],
            productAttSizeListItemTextBlock: ["productAttSizeListItemText"],
            productAttEditBlock: ["productAttEditText"],
            productPackOfBlock: ["productPackOfLeftBlock", "productPackOfListBlock", "productPackOfRightBlock"],
            productPackOfLeftBlock: ["productPackOfLeftBtnBlock"],
            productPackOfLeftBtnBlock: ["productPackOfLeftBtnImgBlock"],
            productPackOfLeftBtnImgBlock: ["productPackOfLeftBtnImg"],
            productPackOfRightBlock: ["productPackOfRightBtnBlock"],
            productPackOfRightBtnBlock: ["productPackOfRightBtnImgBlock"],
            productPackOfRightBtnImgBlock: ["productPackOfRightBtnImg"],
            productPackOfListBlock: ["productPackOfItemBlock"],
            productPackOfItemBlock: ["productPackOfItemImgBlock", "productPackOfItemTitleBlock", "productPackOfItemQuantityBlock", "productPackOfItemPriceBlock"],
            productPackOfItemImgBlock: ["productPackOfItemImg"],
            productPackOfItemTitleBlock: ["productPackOfItemTitleTextBlock"],
            productPackOfItemTitleTextBlock: ["productPackOfItemTitleText"],
            productPackOfItemQuantityBlock: ["productPackOfItemQuantityTextBlock"],
            productPackOfItemQuantityTextBlock: ["productPackOfItemQuantityText"],
            productPackOfItemPriceBlock: ["productPackOfItemPriceActiveBlock", "productPackOfItemPriceRegularBlock"],
            productPackOfItemPriceActiveBlock: ["productPackOfItemPriceActiveTextBlock"],
            productPackOfItemPriceActiveTextBlock: ["productPackOfItemPriceActiveText"],
            productPackOfItemPriceRegularBlock: ["productPackOfItemPriceRegularTextBlock"],
            productPackOfItemPriceRegularTextBlock: ["productPackOfItemPriceRegularText"],
            productQtyAddBtnBlock: ["productQtyBlock", "productAddBlock"],
            productQtyBlock: ["productQtyDownBlock", "productQtyInputBlock", "productQtyUpBlock"],
            productQtyDownBlock: ["productQtyDownBtnBlock"],
            productQtyDownBtnBlock: ["productQtyDownBtn"],
            productQtyUpBlock: ["productQtyUpBtnBlock"],
            productQtyUpBtnBlock: ["productQtyUpBtn"],
            productQtyInputBlock: ["productQtyInputTextBlock"],
            productQtyInputTextBlock: ["productQtyInputText"],
            productAddBlock: ["productAddImgBlock", "productAddTextBlock"],
            productAddTextBlock: ["productAddText", "productAddspan"],
            productAddImgBlock: ["productAddImg"],
        }
    },
    sidebar: {
        className: {
            sidebarModalBlock: prefix + "sidebar_modal" + postfix,
            sidebarHeaderBlock: prefix + "sidebar_header" + postfix,
            sidebarCartAddedBlock: prefix + "sidebar_cart_added" + postfix,
            sidebarRecommendedBlock: prefix + "sidebar_recommended" + postfix,
            sidebarCheckoutBlock: prefix + "sidebar_checkout" + postfix,
            sidebarHeaderContinueBlock: prefix + "header_continue" + postfix,
            sidebarHeaderContinueImgBlock: prefix + "header_continue_img" + postfix,
            sidebarHeaderContinueImg: prefix + "header_continue_img",
            sidebarHeaderContinueTextBlock: prefix + "header_continue_text" + postfix,
            sidebarHeaderContinueText: prefix + "header_continue_text",
            sidebarHeaderTitleBlock: prefix + "header_title" + postfix,
            sidebarHeaderTitleTextBlock: prefix + "header_title_text" + postfix,
            sidebarHeaderTitleText: prefix + "header_title_text",
            sidebarHeaderSubTitleTextBlock: prefix + "header_sub_title_text" + postfix,
            sidebarHeaderSubTitleText: prefix + "header_sub_title_text",
            sidebarHeaderItemBlock: prefix + "header_item" + postfix,
            sidebarHeaderItemCountBlock: prefix + "header_item_count" + postfix,
            sidebarHeaderItemCountTitleBlock: prefix + "header_item_count_title" + postfix,
            sidebarHeaderItemCountTitleTextBlock: prefix + "header_item_count_title_text" + postfix,
            sidebarHeaderItemCountTitleText: prefix + "header_item_count_title_text",
            sidebarHeaderItemCountFigureBlock: prefix + "header_item_count_figure" + postfix,
            sidebarHeaderItemCountFigureTextBlock: prefix + "header_item_count_figure_text" + postfix,
            sidebarHeaderItemCountFigureText: prefix + "header_item_count_figure_text",
            sidebarCartAddedProductDescSubTotalPriceBlock: prefix + "cart_added_product_desc_subtotal_price" + postfix,
            sidebarCartAddedProductDescSubTotalPriceRegularBlock: prefix + "cart_added_product_desc_subtotal_price_regular" + postfix,
            sidebarCartAddedProductDescSubTotalRegularTextBlock: prefix + "cart_added_product_desc_subtotal_price_regular_text" + postfix,
            sidebarCartAddedProductDescSubTotalRegularText: prefix + "cart_added_product_desc_subtotal_price_regular_text",
            sidebarCartAddedProductDescSubTotalActiveBlock: prefix + "cart_added_product_desc_subtotal_price_active" + postfix,
            sidebarCartAddedProductDescSubTotalActiveTextBlock: prefix + "cart_added_product_desc_subtotal_price_active_text" + postfix,
            sidebarCartAddedProductDescSubTotalActiveText: prefix + "cart_added_product_desc_subtotal_price_active_text",
            sidebarCartAddedProductDescSubTotalActiveTextMsg: prefix + "cart_added_product_desc_subtotal_price_active_text_msg",

            sidebarCartAddedLeftBlock: prefix + "cart_added_left" + postfix,
            sidebarCartAddedLeftBtnBlock: prefix + "cart_added_left_btn" + postfix,
            sidebarCartAddedLeftBtnImgBlock: prefix + "cart_added_left_btn_img" + postfix,
            sidebarCartAddedLeftBtnImg: prefix + "cart_added_left_btn_img",
            sidebarCartAddedRightBlock: prefix + "cart_added_right" + postfix,
            sidebarCartAddedRightBtnBlock: prefix + "cart_added_right_btn" + postfix,
            sidebarCartAddedRightBtnImgBlock: prefix + "cart_added_right_btn_img" + postfix,
            sidebarCartAddedRightBtnImg: prefix + "cart_added_right_btn_img",
            sidebarCartAddedListBlock: prefix + "cart_added_list" + postfix,
            sidebarCartAddedProductBlock: prefix + "cart_added_product" + postfix,
            sidebarCartAddedProductImgBlock: prefix + "cart_added_product_img" + postfix,
            sidebarCartAddedProductImg: prefix + "cart_added_product_img",
            sidebarCartAddedProductPrcBlock: prefix + "cart_added_product_prc" + postfix,
            sidebarCartAddedProductPrc: prefix + "cart_added_product_prc",
            sidebarCartAddedProductDescBlock: prefix + "cart_added_product_desc" + postfix,
            sidebarCartAddedProductqtyBlock: prefix + "cart_added_product_qty" + postfix,
            sidebarCartAddedProductDescManuBlock: prefix + "cart_added_product_desc_manu" + postfix,
            sidebarCartAddedProductDescTitleBlock: prefix + "cart_added_product_desc_title" + postfix,
            sidebarCartAddedProductDescTitleTextBlock: prefix + "cart_added_product_desc_title_text" + postfix,
            sidebarCartAddedProductDescTitleText: prefix + "cart_added_product_desc_title_text",
            sidebarCartAddedProductDescPriceBlock: prefix + "cart_added_product_desc_price" + postfix,
            sidebarCartAddedProductDescPriceRegularBlock: prefix + "cart_added_product_desc_price_regular" + postfix,
            sidebarCartAddedProductDescPriceRegularTextBlock: prefix + "cart_added_product_desc_price_regular_text" + postfix,
            sidebarCartAddedProductDescPriceRegularText: prefix + "cart_added_product_desc_price_regular_text",
            sidebarCartAddedProductDescPriceActiveBlock: prefix + "cart_added_product_desc_price_active" + postfix,
            sidebarCartAddedProductDescPriceActiveTextBlock: prefix + "cart_added_product_desc_price_active_text" + postfix,
            sidebarCartAddedProductDescPriceActiveText: prefix + "cart_added_product_desc_price_active_text",
            sidebarCartAddedProductDescPriceActiveTextMsg: prefix + "cart_added_product_desc_price_active_text_msg",
            sidebarCartAddedProductDescAttBlock: prefix + "cart_added_product_desc_att" + postfix,
            sidebarCartAddedProductDescAttColorBlock: prefix + "cart_added_product_desc_att_color" + postfix,
            sidebarCartAddedProductDescAttColorTextBlock: prefix + "cart_added_product_desc_att_color_text" + postfix,
            sidebarCartAddedProductDescAttColorText: prefix + "cart_added_product_desc_att_color_text" + postfix,
            sidebarCartAddedProductDescAttSizeBlock: prefix + "cart_added_product_desc_att_size" + postfix,
            sidebarCartAddedProductDescAttSizeTextBlock: prefix + "cart_added_product_desc_att_size_text" + postfix,
            sidebarCartAddedProductDescAttSizeText: prefix + "cart_added_product_desc_att_size_text",


            sidebarRecommendedTitleBlock: prefix + "recommended_title" + postfix,
            sidebarRecommendedTitleTextBlock: prefix + "recommended_title_text" + postfix,
            sidebarRecommendedTitleText: prefix + "recommended_title_text",
            sidebarRecommendedTitleImgBlock: prefix + "recommended_title_img" + postfix,
            sidebarRecommendedTitleImg: prefix + "recommended_title_img",
            sidebarRecommendedTabsBlock: prefix + "recommended_tabs" + postfix,
            sidebarRecommendedTabsTitleBlock: prefix + "recommended_tabs_title" + postfix,
            sidebarRecommendedTabsTitleTextBlock: prefix + "recommended_tabs_title_text" + postfix,
            sidebarRecommendedTabsTitleText: prefix + "recommended_tabs_title_text",
            sidebarRecommendedTabsLeftBlock: prefix + "recommended_tabs_left" + postfix,
            sidebarRecommendedTabsListBlock: prefix + "recommended_tabs_list" + postfix,
            sidebarRecommendedTabsRightBlock: prefix + "recommended_tabs_right" + postfix,
            sidebarRecommendedTabsLeftBtnBlock: prefix + "recommended_tabs_left_btn" + postfix,
            sidebarRecommendedTabsLeftBtnImgBlock: prefix + "recommended_tabs_left_btn_img" + postfix,
            sidebarRecommendedTabsLeftBtnImg: prefix + "recommended_tabs_left_btn_img",
            sidebarRecommendedTabsRightBtnBlock: prefix + "recommended_tabs_right_btn" + postfix,
            sidebarRecommendedTabsRightBtnImgBlock: prefix + "recommended_tabs_right_btn_img" + postfix,
            sidebarRecommendedTabsRightBtnImg: prefix + "recommended_tabs_right_btn_img",
            sidebarRecommendedTabsListItemBlock: prefix + "recommended_tabs_list_item" + postfix,
            sidebarRecommendedTabsListItemTextBlock: prefix + "recommended_tabs_list_item_text" + postfix,
            sidebarRecommendedTabsListItemText: prefix + "recommended_tabs_list_item_text",
            sidebarRecommendedProductsBlock: prefix + "recommended_products" + postfix,
            sidebarRecommendedProductsLeftBlock: prefix + "recommended_products_left" + postfix,
            sidebarRecommendedProductsListBlock: prefix + "recommended_products_list" + postfix,
            sidebarRecommendedProductsListMainBlock: prefix + "recommended_products_list_main" + postfix,
            sidebarRecommendedProductsRightBlock: prefix + "recommended_products_right" + postfix,
            sidebarRecommendedProductsLeftBtnBlock: prefix + "recommended_products_left_btn" + postfix,
            sidebarRecommendedProductsLeftBtnImgBlock: prefix + "recommended_products_left_btn_img" + postfix,
            sidebarRecommendedProductsLeftBtnImg: prefix + "recommended_products_left_btn_img",
            sidebarRecommendedProductsRightBtnBlock: prefix + "recommeded_products_right_btn" + postfix,
            sidebarRecommendedProductsRightBtnImgBlock: prefix + "recommended_products_right_btn_img" + postfix,
            sidebarRecommendedProductsRightBtnImg: prefix + "recommended_products_right_btn_img",
            sidebarCheckoutContinueBlock: prefix + "checkout_continue" + postfix,
            sidebarCheckoutContinueBtnBlock: prefix + "checkout_continue_btn" + postfix,
            sidebarCheckoutContinueBtnTextBlock: prefix + "checkout_continue_btn_text" + postfix,
            sidebarCheckoutContinueBtnText: prefix + "checkout_continue_btn_text",
            sidebarCheckoutContinueBtnspan: prefix + "checkout_continue_btn_span",
            sidebarCheckoutContinueBtnImgBlock: prefix + "checkout_continue_btn_img" + postfix,
            sidebarCheckoutContinueBtnImg: prefix + "checkout_continue_btn_img",
            sidebarCheckoutBasketBlock: prefix + "checkout_basket" + postfix,
            sidebarCheckoutBasketBtnBlock: prefix + "checkout_basket_btn" + postfix,
            sidebarCheckoutBasketBtnTextBlock: prefix + "checkout_basket_btn_text" + postfix,
            sidebarCheckoutBasketBtnText: prefix + "checkout_basket_btn_text",
            sidebarCheckoutBasketBtnspan: prefix + "checkout_basket_btn_span",
            sidebarCheckoutBasketBtnImgBlock: prefix + "checkout_basket_btn_img" + postfix,
            sidebarCheckoutBasketBtnImg: prefix + "checkout_basket_btn_img",

            productModuleBlock: prefix + "product_module" + postfix,
            productModalBlock: prefix + "product_modal" + postfix,
            productShowcaseBlock: prefix + "product_showcase" + postfix,
            productBlock: prefix + "product" + postfix,
            productHeaderMainBlock: prefix + "product_header_main" + postfix,
            productHeaderBlock: prefix + "product_header" + postfix,
            productHeaderTitleBlock: prefix + "product_header_title" + postfix,
            productHeaderTitleTextBlock: prefix + "product_header_title_text" + postfix,
            productHeaderTitleText: prefix + "product_header_title_text",
            productHeaderImgBlock: prefix + "product_header_img" + postfix,
            productHeaderImg: prefix + "product_header_img",

            productDescriptionHeaderBlock: prefix + "product_Description_header" + postfix,
            productDescriptionHeaderTitleBlock: prefix + "product_Description_header_title" + postfix,
            productDescriptionHeaderTitleTextBlock: prefix + "product_Description_header_title_text" + postfix,
            productDescriptionHeaderTitleText: prefix + "product_Description_header_title_text",
            productDescriptionHeaderImgBlock: prefix + "product_Description_header_img" + postfix,
            productDescriptionHeaderImg: prefix + "product_Description_header_img",

            productInfoMainBlock: prefix + "product_info_main" + postfix,
            productImgBlock: prefix + "product_img" + postfix,
            productImgMainBlock: prefix + "product_img_main" + postfix,
            productImgMainImgBlock: prefix + "product_img_main_img" + postfix,
            productImgMainImg: prefix + "product_img_main_img",
            productImgMainZoomBlock: prefix + "product_img_main_zoom" + postfix,
            productImgMainZoomBtnBlock: prefix + "product_img_main_zoom_btn" + postfix,
            productImgMainZoomBtnImgBlock: prefix + "product_img_main_zoom_btn_img" + postfix,
            productImgMainZoomBtnImg: prefix + "product_img_main_zoom_btn_img",
            productImgMainZoomminusImg: prefix + "product_img_main_zoom_minus_img",
            productImgMainZoomRuturnImg: prefix + "product_img_main_zoom_return_img",
            productImgMainZoomBtnTextBlock: prefix + "product_img_main_zoom_btn_text" + postfix,
            productImgMainZoomBtnText: prefix + "product_img_main_zoom_btn_text",
            productImgGalleryBlock: prefix + "product_img_gallery" + postfix,
            productImgGalleryHeaderBlock: prefix + "producy_img_gallery_header" + postfix,
            productImgGalleryHeaderTitleBlock: prefix + "product_img_gallery_header_title" + postfix,
            productImgGalleryHeaderTitleImgBlock: prefix + "product_img_gallery_header_title_img" + postfix,
            productImgGalleryHeaderTitleImg: prefix + "product_img_gallery_header_title_img",
            productImgGalleryHeaderTitleTextBlock: prefix + "product_img_gallery_header_title_text" + postfix,
            productImgGalleryHeaderTitleText: prefix + "product_img_gallery_header_title_text",
            productImgGalleryHeaderToggleBlock: prefix + "product_img_gallery_header_toggle" + postfix,
            productImgGalleryHeaderToggleImgBlock: prefix + "product_img_gallery_header_toggle_img" + postfix,
            productImgGalleryHeaderToggleImg: prefix + "product_img_gallery_header_toggle_img",
            productImgGalleryHeaderToggleTextBlock: prefix + "product_img_gallery_header_toggle_text" + postfix,
            productImgGalleryHeaderToggleText: prefix + "product_img_gallery_header_toggle_text",
            productImgGalleryLeftBlock: prefix + "product_img_gallery_left" + postfix,
            productImgGalleryLeftBtnBlock: prefix + "product_img_gallery_left_btn" + postfix,
            productImgGalleryLeftBtnImgBlock: prefix + "product_img_gallery_left_btn_img" + postfix,
            productImgGalleryLeftBtnImg: prefix + "product_img_gallery_left_btn_img",
            productImgGalleryLeftBtnTextBlock: prefix + "product_img_gallery_left_btn_text" + postfix,
            productImgGalleryLeftBtnText: prefix + "product_img_gallery_left_btn_text",
            productImgGalleryListBlock: prefix + "product_img_gallery_list" + postfix,
            productImgGalleryListItemBlock: prefix + "product_img_gallery_list_item" + postfix,
            productImgGalleryListItemImgBlock: prefix + "product_img_gallery_list_item_img" + postfix,
            productImgGalleryListItemImg: prefix + "product_img_gallery_list_item_img",
            productImgGalleryListItemTextBlock: prefix + "product_img_gallery_list_item_text" + postfix,
            productImgGalleryListItemText: prefix + "product_img_gallery_list_item_text",
            productImgGalleryRightBlock: prefix + "product_img_gallery_right" + postfix,
            productImgGalleryRightBtnBlock: prefix + "product_img_gallery_right_btn" + postfix,
            productImgGalleryRightBtnImgBlock: prefix + "product_img_gallery_right_btn_img" + postfix,
            productImgGalleryRightBtnImg: prefix + "product_img_gallery_right_btn_img",
            productImgGalleryRightBtnTextBlock: prefix + "product_img_gallery_right_btn_text" + postfix,
            productImgGalleryRightBtnText: prefix + "product_img_gallery_right_btn_text",
            productDescBlock: prefix + "product_desc" + postfix,
            productTitlPrcBlock: prefix + "product_desc_titlprc" + postfix,
            productTitleBlock: prefix + "product_desc_title" + postfix,
            productTitleTextBlock: prefix + "product_desc_title_text" + postfix,
            productTitleText: prefix + "product_desc_title_text",
            productMaufactureTextBlock: prefix + "product_manufacture_text" + postfix,
            productMaufactureText: prefix + "product_maufacture_text",
            productRatingsBlock: prefix + "product_desc_ratings" + postfix,
            productInfoBlock: prefix + "product_desc_info" + postfix,
            productInfoImgBlock: prefix + "product_desc_info_img" + postfix,
            productInfoImg: prefix + "product_desc_info_img",
            productInfoTextBlock: prefix + "product_desc_info_text" + postfix,
            productInfoText: prefix + "product_desc_info_text",
            productInfoFullDescBlock: prefix + "product_Info_Full_desc_info" + postfix,
            productInfoFullDescText: prefix + "product_Info_Full_desc_info_text",
            productInfoFullDescDescBlock: prefix + "Info_Full_desc_desc" + postfix,
            productInfoFullDescDescHeaderBlock: prefix + "Info_Full_desc_desc_header" + postfix,
            productInfoFullDescDescHeaderText: prefix + "Info_Full_desc_desc_header_text",
            productInfoFullDescShippingBlock: prefix + "Info_Full_desc_shipping" + postfix,
            productInfoFullDescShippingHeaderBlock: prefix + "Info_Full_desc_shipping_header" + postfix,
            productInfoFullDescShippingHeaderText: prefix + "Info_Full_desc_shipping_header_text",
            productInfoFullDescShippingText: prefix + "Info_Full_desc_shipping_text",
            productPriceBlock: prefix + "product_desc_price" + postfix,
            productPriceLabel: prefix + "product_price_label" + postfix,
            productPriceActiveBlock: prefix + "product_desc_price_active" + postfix,
            productPriceActiveTextBlock: prefix + "product_desc_price_active_text" + postfix,
            productPriceActiveText: prefix + "product_desc_price_active_text",
            productPriceActiveTextMsg: prefix + "product_desc_price_active_text_msg",
            productPriceRegularBlock: prefix + "product_desc_price_regular" + postfix,
            productPriceRegularTextBlock: prefix + "product_desc_price_regular_text" + postfix,
            productPriceRegularText: prefix + "product_desc_price_regular_text",
            productPriceWorthBlock: prefix + "product_desc_price_worth" + postfix,
            productPriceWorthTextBlock: prefix + "product_desc_price_worth_text" + postfix,
            productPriceWorthText: prefix + "product_desc_price_worth_text",
            productPriceWorthTextMsg: prefix + "product_desc_price_worth_text_msg",
            productAttBlock: prefix + "product_desc_att" + postfix,
            productAttColorBlock: prefix + "product_desc_att_color" + postfix,
            productAttColorTitleBlock: prefix + "product_desc_att_color_title" + postfix,
            productAttColorTitleTextBlock: prefix + "product_desc_att_color_title_text" + postfix,
            productAttColorTitleText: prefix + "product_desc_att_color_title_text",
            productAttColorTitleTextSelected: prefix + "product_desc_att_color_title_text_selected",
            productAttColorListBlock: prefix + "product_desc_att_color_list" + postfix,
            productAttColorListItemBlock: prefix + "product_desc_att_color_list_item" + postfix,
            productAttColorListItemImgBlock: prefix + "product_desc_att_color_list_item_img" + postfix,
            productAttColorListItemImg: prefix + "product_desc_att_color_list_item_img",
            productAttColorListItemTextBlock: prefix + "product_desc_att_color_list_item_text" + postfix,
            productAttColorListItemText: prefix + "product_desc_att_color_list_item_text",
            productAttSizeBlock: prefix + "product_desc_att_size" + postfix,
            productAttSizeTitleBlock: prefix + "product_desc_att_size_title" + postfix,
            productAttSizeTitleTextBlock: prefix + "product_desc_att_size_title_text" + postfix,
            productAttSizeTitleText: prefix + "product_desc_att_size_title_text",
            productAttSizeTitleTextSelected: prefix + "product_desc_att_size_title_text_selected",
            productAttSizeListBlock: prefix + "product_desc_att_size_list" + postfix,
            productAttSizeListItemBlock: prefix + "product_desc_att_size_list_item" + postfix,
            productAttSizeListItemImgBlock: prefix + "product_desc_att_size_list_item_img" + postfix,
            productAttSizeListItemImg: prefix + "product_desc_att_size_list_item_img",
            productAttSizeListItemTextBlock: prefix + "product_desc_att_size_list_item_text" + postfix,
            productAttSizeListItemText: prefix + "product_desc_att_size_list_item_text",
            productAttzeroBlock: prefix + "product_desc_att_zero" + postfix,
            productAttzeroTitleBlock: prefix + "product_desc_att_zero_title" + postfix,
            productAttzeroTitleTextBlock: prefix + "product_desc_att_zero_title_text" + postfix,
            productAttzeroTitleText: prefix + "product_desc_att_zero_title_text",
            productAttzeroTitleTextSelected: prefix + "product_desc_att_zero_title_text_selected",
            productAttzeroListBlock: prefix + "product_desc_att_zero_list" + postfix,
            productAttzeroListItemBlock: prefix + "product_desc_att_zero_list_item" + postfix,
            productAttzeroListItemImgBlock: prefix + "product_desc_att_zero_list_item_img" + postfix,
            productAttzeroListItemImg: prefix + "product_desc_att_zero_list_item_img",
            productAttzeroListItemTextBlock: prefix + "product_desc_att_zero_list_item_text" + postfix,
            productAttzeroListItemText: prefix + "product_desc_att_zero_list_item_text",
            productAttthirdBlock: prefix + "product_desc_att_third" + postfix,
            productAttthirdTitleBlock: prefix + "product_desc_att_third_title" + postfix,
            productAttthirdTitleTextBlock: prefix + "product_desc_att_third_title_text" + postfix,
            productAttthirdTitleText: prefix + "product_desc_att_third_title_text",
            productAttthirdTitleTextSelected: prefix + "product_desc_att_third_title_text_selected",
            productAttthirdListBlock: prefix + "product_desc_att_third_list" + postfix,
            productAttthirdListItemBlock: prefix + "product_desc_att_third_list_item" + postfix,
            productAttthirdListItemImgBlock: prefix + "product_desc_att_third_list_item_img" + postfix,
            productAttthirdListItemImg: prefix + "product_desc_att_third_list_item_img",
            productAttthirdListItemTextBlock: prefix + "product_desc_att_third_list_item_text" + postfix,
            productAttthirdListItemText: prefix + "product_desc_att_third_list_item_text",
            productAttfourthBlock: prefix + "product_desc_att_fourth" + postfix,
            productAttfourthTitleBlock: prefix + "product_desc_att_fourth_title" + postfix,
            productAttfourthTitleTextBlock: prefix + "product_desc_att_fourth_title_text" + postfix,
            productAttfourthTitleText: prefix + "product_desc_att_fourth_title_text",
            productAttfourthTitleTextSelected: prefix + "product_desc_att_fourth_title_text_selected",
            productAttfourthListBlock: prefix + "product_desc_att_fourth_list" + postfix,
            productAttfourthListItemBlock: prefix + "product_desc_att_fourth_list_item" + postfix,
            productAttfourthListItemImgBlock: prefix + "product_desc_att_fourth_list_item_img" + postfix,
            productAttfourthListItemImg: prefix + "product_desc_att_fourth_list_item_img",
            productAttfourthListItemTextBlock: prefix + "product_desc_att_fourth_list_item_text" + postfix,
            productAttfourthListItemText: prefix + "product_desc_att_fourth_list_item_text",

            productAttEditBlock: prefix + "product_desc_att_edit" + postfix,
            productAttEditTextBlock: prefix + "product_desc_att_edit_text" + postfix,
            productAttEditText: prefix + "product_desc_att_edit_text",
            productAttEditImgBlock: prefix + "product_desc_att_edit_img" + postfix,
            productAttEditImg: prefix + "product_desc_att_edit_img",
            productPackOfBlock: prefix + "product_desc_pack_of" + postfix,
            productPackOfLeftBlock: prefix + "product_desc_pack_of_left" + postfix,
            productPackOfListBlock: prefix + "product_desc_pack_of_list" + postfix,
            productPackOfRightBlock: prefix + "product_desc_pack_of_right" + postfix,
            productPackOfLeftBtnBlock: prefix + "product_desc_pack_of_left_btn" + postfix,
            productPackOfLeftBtnImgBlock: prefix + "product_desc_pack_of_left_btn_img" + postfix,
            productPackOfLeftBtnImg: prefix + "product_desc_pack_of_left_btn_img",
            productPackOfRightBtnBlock: prefix + "product_desc_pack_of_right_btn" + postfix,
            productPackOfRightBtnImgBlock: prefix + "product_desc_pack_of_right_btn_img" + postfix,
            productPackOfRightBtnImg: prefix + "product_desc_pack_of_right_btn_img",
            productPackOfItemBlock: prefix + "product_desc_pack_of_item" + postfix,
            productPackOfItemTitleBlock: prefix + "product_desc_pack_of_item_title" + postfix,
            productPackOfItemTitleTextBlock: prefix + "product_desc_pack_of_item_title_text" + postfix,
            productPackOfItemTitleText: prefix + "product_desc_pack_of_item_title_text",
            productPackOfItemImgBlock: prefix + "product_desc_pack_of_item_img" + postfix,
            productPackOfItemImg: prefix + "product_desc_pack_of_item_img",
            productPackOfItemQuantityBlock: prefix + "product_desc_pack_of_item_quantity" + postfix,
            productPackOfItemQuantityTextBlock: prefix + "product_desc_pack_of_item_quantity_text" + postfix,
            productPackOfItemQuantityText: prefix + "product_desc_pack_of_item_quantity_text",
            productPackOfItemPriceBlock: prefix + "product_desc_pack_of_item_price" + postfix,
            productPackOfItemPriceRegularBlock: prefix + "product_desc_pack_of_item_price_regular" + postfix,
            productPackOfItemPriceRegularTextBlock: prefix + "product_desc_pack_of_item_price_regular_text" + postfix,
            productPackOfItemPriceRegularText: prefix + "product_desc_pack_of_item_price_regular_text",
            productPackOfItemPriceActiveBlock: prefix + "product_desc_pack_of_item_price_active" + postfix,
            productPackOfItemPriceActiveTextBlock: prefix + "product_desc_pack_of_item_price_active_text" + postfix,
            productPackOfItemPriceActiveText: prefix + "product_desc_pack_of_item_price_active_text",
            productQtyAddBtnBlock: prefix + "product_desc_qty_add_btn" + postfix,
            productQtyBlock: prefix + "product_desc_qty" + postfix,
            productQtyDownBlock: prefix + "product_desc_qty_down" + postfix,
            productQtyDownBtnBlock: prefix + "product_desc_qty_down_btn" + postfix,
            productQtyDownBtn: prefix + "product_desc_qty_down_btn",
            productQtyInputBlock: prefix + "product_desc_qty_input" + postfix,
            productQtyInputTextBlock: prefix + "product_desc_qty_input_text" + postfix,
            productQtyInputText: prefix + "product_desc_qty_input_text",
            productQtyUpBlock: prefix + "product_desc_qty_up" + postfix,
            productQtyUpBtnBlock: prefix + "product_desc_qty_up_btn" + postfix,
            productQtyUpBtn: prefix + "product_desc_qty_up_btn",
            productAddBlock: prefix + "product_desc_add" + postfix,
            productAddTextBlock: prefix + "product_desc_add_text" + postfix,
            productAddText: prefix + "product_desc_add_text",
            productAddspan: prefix + "product_desc_add_span",
            productAddImgBlock: prefix + "product_desc_add_img" + postfix,
            productAddImg: prefix + "product_desc_add_img",
            productAddErrText: prefix + "product_desc_add_err_text" + postfix,
            productAddTitle: prefix + "product_desc_add_title_text" + postfix,
            productDescriptionMainBlock: prefix + "product_description_main" + postfix,
        },
        dom: {
            sidebarModalBlock: ["sidebarHeaderTitleBlock", "sidebarHeaderBlock", "sidebarCartAddedBlock", "sidebarCheckoutBlock", "sidebarRecommendedBlock"],
            sidebarHeaderBlock: ["sidebarHeaderContinueBlock", "sidebarHeaderItemBlock"],
            sidebarHeaderContinueBlock: ["sidebarHeaderContinueImgBlock", "sidebarHeaderContinueTextBlock"],
            sidebarHeaderContinueImgBlock: ["sidebarHeaderContinueImg"],
            sidebarHeaderContinueTextBlock: ["sidebarHeaderContinueText"],
            sidebarHeaderTitleBlock: ["sidebarHeaderTitleTextBlock", "sidebarHeaderSubTitleTextBlock"],
            sidebarHeaderTitleTextBlock: ["sidebarHeaderTitleText"],
            sidebarHeaderSubTitleTextBlock: ["sidebarHeaderSubTitleText"],
            sidebarHeaderItemBlock: ["sidebarHeaderItemCountBlock"],
            sidebarHeaderItemCountBlock: ["sidebarHeaderItemCountTitleBlock", "sidebarHeaderItemCountFigureBlock", "sidebarCartAddedProductDescSubTotalPriceBlock"],
            sidebarHeaderItemCountTitleBlock: ["sidebarHeaderItemCountTitleTextBlock"],
            sidebarHeaderItemCountTitleTextBlock: ["sidebarHeaderItemCountTitleText"],
            sidebarHeaderItemCountFigureBlock: ["sidebarHeaderItemCountFigureTextBlock"],
            sidebarHeaderItemCountFigureTextBlock: ["sidebarHeaderItemCountFigureText"],

            sidebarCartAddedProductDescSubTotalPriceBlock: ["sidebarCartAddedProductDescSubTotalActiveBlock", "sidebarCartAddedProductDescSubTotalPriceRegularBlock"],
            sidebarCartAddedProductDescSubTotalActiveBlock: ["sidebarCartAddedProductDescSubTotalActiveTextBlock"],
            sidebarCartAddedProductDescSubTotalActiveTextBlock: ["sidebarCartAddedProductDescSubTotalActiveText", "sidebarCartAddedProductDescPriceActiveTextMsg"],
            sidebarCartAddedProductDescSubTotalPriceRegularBlock: ["sidebarCartAddedProductDescSubTotalRegularTextBlock"],
            sidebarCartAddedProductDescSubTotalRegularTextBlock: ["sidebarCartAddedProductDescSubTotalRegularText"],

            sidebarCartAddedBlock: ["sidebarCartAddedLeftBlock", "sidebarCartAddedListBlock", "sidebarCartAddedRightBlock"],
            sidebarCartAddedLeftBlock: ["sidebarCartAddedLeftBtnBlock"],
            sidebarCartAddedLeftBtnBlock: ["sidebarCartAddedLeftBtnImgBlock"],
            sidebarCartAddedLeftBtnImgBlock: ["sidebarCartAddedLeftBtnImg"],
            sidebarCartAddedRightBlock: ["sidebarCartAddedRightBtnBlock"],
            sidebarCartAddedRightBtnBlock: ["sidebarCartAddedRightBtnImgBlock"],
            sidebarCartAddedRightBtnImgBlock: ["sidebarCartAddedRightBtnImg"],
            sidebarCartAddedListBlock: ["sidebarCartAddedProductBlock"],
            sidebarCartAddedProductBlock: ["sidebarCartAddedProductImgBlock", "sidebarCartAddedProductPrcBlock", "sidebarCartAddedProductDescBlock"],
            sidebarCartAddedProductImgBlock: ["sidebarCartAddedProductImg"],
            sidebarCartAddedProductPrcBlock: ["sidebarCartAddedProductPrc"],
            sidebarCartAddedProductDescBlock: ["sidebarCartAddedProductDescManuBlock", "sidebarCartAddedProductDescTitleBlock", "sidebarCartAddedProductDescAttBlock", "sidebarCartAddedProductDescPriceBlock", "sidebarCartAddedProductqtyBlock"],
            sidebarCartAddedProductDescTitleBlock: ["sidebarCartAddedProductDescTitleTextBlock"],
            sidebarCartAddedProductDescTitleTextBlock: ["sidebarCartAddedProductDescTitleText"],
            sidebarCartAddedProductDescPriceBlock: ["sidebarCartAddedProductDescPriceActiveBlock", "sidebarCartAddedProductDescPriceRegularBlock"],
            sidebarCartAddedProductDescPriceActiveBlock: ["sidebarCartAddedProductDescPriceActiveTextBlock"],
            sidebarCartAddedProductDescPriceActiveTextBlock: ["sidebarCartAddedProductDescPriceActiveText", "sidebarCartAddedProductDescPriceActiveTextMsg"],
            sidebarCartAddedProductDescPriceRegularBlock: ["sidebarCartAddedProductDescPriceRegularTextBlock"],
            sidebarCartAddedProductDescPriceRegularTextBlock: ["sidebarCartAddedProductDescPriceRegularText"],

            sidebarCartAddedProductDescAttBlock: ["sidebarCartAddedProductDescAttColorBlock", "sidebarCartAddedProductDescAttSizeBlock"],
            sidebarCartAddedProductDescAttColorBlock: ["sidebarCartAddedProductDescAttColorTextBlock"],
            sidebarCartAddedProductDescAttColorTextBlock: ["sidebarCartAddedProductDescAttColorText"],
            sidebarCartAddedProductDescAttSizeBlock: ["sidebarCartAddedProductDescAttSizeTextBlock"],
            sidebarCartAddedProductDescAttSizeTextBlock: ["sidebarCartAddedProductDescAttSizeText"],

            sidebarRecommendedBlock: ["sidebarRecommendedTitleBlock", "sidebarRecommendedTabsBlock", "sidebarRecommendedProductsBlock"],
            sidebarRecommendedTitleBlock: ["sidebarRecommendedTitleTextBlock", "sidebarRecommendedTitleImgBlock"],
            sidebarRecommendedTitleTextBlock: ["sidebarRecommendedTitleText"],
            sidebarRecommendedTitleImgBlock: ["sidebarRecommendedTitleImg"],
            sidebarRecommendedTabsBlock: ["sidebarRecommendedTabsTitleBlock", "sidebarRecommendedTabsLeftBlock", "sidebarRecommendedTabsListBlock", "sidebarRecommendedTabsRightBlock"],
            sidebarRecommendedTabsTitleBlock: ["sidebarRecommendedTabsTitleTextBlock"],
            sidebarRecommendedTabsTitleTextBlock: ["sidebarRecommendedTabsTitleText"],
            sidebarRecommendedTabsLeftBlock: ["sidebarRecommendedTabsLeftBtnBlock"],
            sidebarRecommendedTabsLeftBtnBlock: ["sidebarRecommendedTabsLeftBtnImgBlock"],
            sidebarRecommendedTabsLeftBtnImgBlock: ["sidebarRecommendedTabsLeftBtnImg"],
            sidebarRecommendedTabsRightBlock: ["sidebarRecommendedTabsRightBtnBlock"],
            sidebarRecommendedTabsRightBtnBlock: ["sidebarRecommendedTabsRightBtnImgBlock"],
            sidebarRecommendedTabsRightBtnImgBlock: ["sidebarRecommendedTabsRightBtnImg"],
            sidebarRecommendedTabsListBlock: ["sidebarRecommendedTabsListItemBlock"],
            sidebarRecommendedTabsListItemBlock: ["sidebarRecommendedTabsListItemTextBlock"],
            sidebarRecommendedTabsListItemTextBlock: ["sidebarRecommendedTabsListItemText"],
            sidebarRecommendedProductsBlock: ["sidebarRecommendedProductsLeftBlock", "sidebarRecommendedProductsListMainBlock", "sidebarRecommendedProductsRightBlock"],
            sidebarRecommendedProductsLeftBlock: ["sidebarRecommendedProductsLeftBtnBlock"],
            sidebarRecommendedProductsLeftBtnBlock: ["sidebarRecommendedProductsLeftBtnImgBlock"],
            sidebarRecommendedProductsLeftBtnImgBlock: ["sidebarRecommendedProductsLeftBtnImg"],
            sidebarRecommendedProductsRightBlock: ["sidebarRecommendedProductsRightBtnBlock"],
            sidebarRecommendedProductsRightBtnBlock: ["sidebarRecommendedProductsRightBtnImgBlock"],
            sidebarRecommendedProductsRightBtnImgBlock: ["sidebarRecommendedProductsRightBtnImg"],
            sidebarRecommendedProductsListMainBlock: ["sidebarRecommendedProductsListBlock"],
            sidebarRecommendedProductsListBlock: ["productModuleBlock"],
            sidebarCheckoutBlock: ["sidebarCheckoutContinueBlock", "sidebarCheckoutBasketBlock"],
            sidebarCheckoutContinueBlock: ["sidebarCheckoutContinueBtnBlock"],
            sidebarCheckoutContinueBtnBlock: ["sidebarCheckoutContinueBtnImgBlock", "sidebarCheckoutContinueBtnTextBlock"],
            sidebarCheckoutContinueBtnImgBlock: ["sidebarCheckoutContinueBtnImg"],
            sidebarCheckoutContinueBtnTextBlock: ["sidebarCheckoutContinueBtnText", "sidebarCheckoutContinueBtnspan"],
            sidebarCheckoutBasketBlock: ["sidebarCheckoutBasketBtnBlock"],
            sidebarCheckoutBasketBtnBlock: ["sidebarCheckoutBasketBtnImgBlock", "sidebarCheckoutBasketBtnTextBlock"],
            sidebarCheckoutBasketBtnImgBlock: ["sidebarCheckoutBasketBtnImg"],
            sidebarCheckoutBasketBtnTextBlock: ["sidebarCheckoutBasketBtnspan", "sidebarCheckoutBasketBtnText"],

            productModuleBlock: ["productShowcaseBlock", "productModalBlock"],
            productShowcaseBlock: ["productBlock"],
            productModalBlock: ["productBlock"],
            productBlock: ["productHeaderMainBlock", "productInfoMainBlock", "productDescriptionMainBlock"],
            productInfoMainBlock: ["productImgBlock", "productDescBlock"],
            productHeaderMainBlock: ["productHeaderBlock", "productDescriptionHeaderBlock", "productHeaderImgBlock"],
            productHeaderBlock: ["productHeaderTitleBlock"],
            productHeaderTitleBlock: ["productHeaderTitleTextBlock"],
            productHeaderTitleTextBlock: ["productHeaderTitleText"],
            productHeaderImgBlock: ["productHeaderImg"],

            productDescriptionHeaderBlock: ["productDescriptionHeaderTitleBlock"],
            productDescriptionHeaderTitleBlock: ["productDescriptionHeaderTitleTextBlock"],
            productDescriptionHeaderTitleTextBlock: ["productDescriptionHeaderTitleText"],
            productDescriptionHeaderImgBlock: ["productDescriptionHeaderImg"],
            productImgBlock: ["productImgMainBlock", "productImgGalleryBlock"],
            productImgMainBlock: ["productImgMainImgBlock", "productImgMainZoomBlock"],
            productImgMainImgBlock: ["productImgMainImg"],
            productImgMainZoomBlock: ["productImgMainZoomBtnBlock"],
            productImgMainZoomBtnBlock: ["productImgMainZoomBtnImgBlock", "productImgMainZoomBtnTextBlock"],
            productImgMainZoomBtnImgBlock: ["productImgMainZoomBtnImg", "productImgMainZoomminusImg", "productImgMainZoomRuturnImg"],
            productImgMainZoomBtnTextBlock: ["productImgMainZoomBtnText"],
            productImgGalleryBlock: ["productImgGalleryHeaderBlock", "productImgGalleryLeftBlock", "productImgGalleryListBlock", "productImgGalleryRightBlock"],
            productImgGalleryHeaderBlock: ["productImgGalleryHeaderTitleBlock", "productImgGalleryHeaderToggleBlock"],
            productImgGalleryHeaderTitleBlock: ["productImgGalleryHeaderTitleImgBlock", "productImgGalleryHeaderTitleTextBlock"],
            productImgGalleryHeaderTitleImgBlock: ["productImgGalleryHeaderTitleImg"],
            productImgGalleryHeaderTitleTextBlock: ["productImgGalleryHeaderTitleText"],
            productImgGalleryHeaderToggleBlock: ["productImgGalleryHeaderToggleImgBlock", "productImgGalleryHeaderToggleTextBlock"],
            productImgGalleryHeaderToggleImgBlock: ["productImgGalleryHeaderToggleImg"],
            productImgGalleryHeaderToggleTextBlock: ["productImgGalleryHeaderToggleText"],
            productImgGalleryBlock: ["productImgGalleryLeftBlock", "productImgGalleryListBlock", "productImgGalleryRightBlock"],
            productImgGalleryLeftBlock: ["productImgGalleryLeftBtnBlock"],
            productImgGalleryLeftBtnBlock: ["productImgGalleryLeftBtnImgBlock", "productImgGalleryLeftBtnTextBlock"],
            productImgGalleryLeftBtnImgBlock: ["productImgGalleryLeftBtnImg"],
            productImgGalleryLeftBtnTextBlock: ["productImgGalleryLeftBtnText"],
            productImgGalleryListBlock: ["productImgGalleryListItemBlock"],
            productImgGalleryListItemBlock: ["productImgGalleryListItemImgBlock", "productImgGalleryListItemTextBlock"],
            productImgGalleryListItemImgBlock: ["productImgGalleryListItemImg"],
            productImgGalleryListItemTextBlock: ["productImgGalleryListItemText"],
            productImgGalleryRightBlock: ["productImgGalleryRightBtnBlock"],
            productImgGalleryRightBtnBlock: ["productImgGalleryRightBtnImgBlock", "productImgGalleryRightBtnTextBlock"],
            productImgGalleryRightBtnImgBlock: ["productImgGalleryRightBtnImg"],
            productImgGalleryRightBtnTextBlock: ["productImgGalleryRightBtnText"],
            productDescBlock: ["productTitleBlock", "productPriceBlock", "productRatingsBlock", "productPriceWorthBlock", "productAttBlock", "productInfoBlock", "productPackOfBlock", "productQtyAddBtnBlock"],
            productTitleBlock: [ "productMaufactureTextBlock", "productTitleTextBlock"],
            productTitleTextBlock: ["productTitleText"],
            productMaufactureTextBlock: ["productMaufactureText"],
            productInfoBlock: ["productInfoImgBlock", "productInfoTextBlock", "productInfoFullDescBlock"],
            productInfoImgBlock: ["productInfoImg"],
            productInfoTextBlock: ["productInfoText"],
            productInfoFullDescBlock: ["productInfoFullDescDescBlock", "productInfoFullDescShippingBlock"],
            productInfoFullDescDescBlock: ["productInfoFullDescDescHeaderBlock", "productInfoFullDescText"],
            productInfoFullDescDescHeaderBlock: ["productInfoFullDescDescHeaderText"],
            productInfoFullDescShippingBlock: ["productInfoFullDescShippingHeaderBlock", "productInfoFullDescShippingText"],
            productInfoFullDescShippingHeaderBlock: ["productInfoFullDescShippingHeaderText"],
            productPriceBlock: ["productPriceLabel", "productPriceActiveBlock", "productPriceRegularBlock"],
            productPriceActiveBlock: ["productPriceActiveTextBlock"],
            productPriceActiveTextBlock: ["productPriceActiveText", "productPriceActiveTextMsg"],
            productPriceRegularBlock: ["productPriceRegularTextBlock"],
            productPriceRegularTextBlock: ["productPriceRegularText"],
            productPriceWorthBlock: ["productPriceWorthTextBlock"],
            productPriceWorthTextBlock: ["productPriceWorthText", "productPriceWorthTextMsg"],

            productAttBlock: ["productAddErrText", "productAddTitle", "productAttzeroBlock", "productAttColorBlock", "productAttSizeBlock", "productAttthirdBlock", "productAttfourthBlock", "productAttEditBlock"],
            productAttColorBlock: ["productAttColorTitleBlock", "productAttColorListBlock"],
            productAttColorTitleBlock: ["productAttColorTitleTextBlock"],
            productAttColorTitleTextBlock: ["productAttColorTitleText", "productAttColorTitleTextSelected"],
            productAttColorListBlock: ["productAttColorListItemBlock"],
            productAttColorListItemBlock: ["productAttColorListItemImgBlock", "productAttColorListItemTextBlock"],
            productAttColorListItemImgBlock: ["productAttColorListItemImg"],
            productAttColorListItemTextBlock: ["productAttColorListItemText"],

            productAttzeroBlock: ["productAttzeroTitleBlock", "productAttzeroListBlock"],
            productAttzeroTitleBlock: ["productAttzeroTitleTextBlock"],
            productAttzeroTitleTextBlock: ["productAttzeroTitleText", "productAttzeroTitleTextSelected"],
            productAttzeroListBlock: ["productAttzeroListItemBlock"],
            productAttzeroListItemBlock: ["productAttzeroListItemImgBlock", "productAttzeroListItemTextBlock"],
            productAttzeroListItemImgBlock: ["productAttzeroListItemImg"],
            productAttzeroListItemTextBlock: ["productAttzeroListItemText"],

            productAttthirdBlock: ["productAttthirdTitleBlock", "productAttthirdListBlock"],
            productAttthirdTitleBlock: ["productAttthirdTitleTextBlock"],
            productAttthirdTitleTextBlock: ["productAttthirdTitleText", "productAttthirdTitleTextSelected"],
            productAttthirdListBlock: ["productAttthirdListItemBlock"],
            productAttthirdListItemBlock: ["productAttthirdListItemImgBlock", "productAttthirdListItemTextBlock"],
            productAttthirdListItemImgBlock: ["productAttthirdListItemImg"],
            productAttthirdListItemTextBlock: ["productAttthirdListItemText"],

            productAttfourthBlock: ["productAttfourthTitleBlock", "productAttfourthListBlock"],
            productAttfourthTitleBlock: ["productAttfourthTitleTextBlock"],
            productAttfourthTitleTextBlock: ["productAttfourthTitleText", "productAttfourthTitleTextSelected"],
            productAttfourthListBlock: ["productAttfourthListItemBlock"],
            productAttfourthListItemBlock: ["productAttfourthListItemImgBlock", "productAttfourthListItemTextBlock"],
            productAttfourthListItemImgBlock: ["productAttfourthListItemImg"],
            productAttfourthListItemTextBlock: ["productAttfourthListItemText"],

            productAttSizeBlock: ["productAttSizeTitleBlock", "productAttSizeListBlock"],
            productAttSizeTitleBlock: ["productAttSizeTitleTextBlock"],
            productAttSizeTitleTextBlock: ["productAttSizeTitleText", "productAttSizeTitleTextSelected"],
            productAttSizeListBlock: ["productAttSizeListItemBlock"],
            productAttSizeListItemBlock: ["productAttSizeListItemImgBlock", "productAttSizeListItemTextBlock"],
            productAttSizeListItemImgBlock: ["productAttSizeListItemImg"],
            productAttSizeListItemTextBlock: ["productAttSizeListItemText"],

            productAttEditBlock: ["productAttEditText"],
            productPackOfBlock: ["productPackOfLeftBlock", "productPackOfListBlock", "productPackOfRightBlock"],
            productPackOfLeftBlock: ["productPackOfLeftBtnBlock"],
            productPackOfLeftBtnBlock: ["productPackOfLeftBtnImgBlock"],
            productPackOfLeftBtnImgBlock: ["productPackOfLeftBtnImg"],
            productPackOfRightBlock: ["productPackOfRightBtnBlock"],
            productPackOfRightBtnBlock: ["productPackOfRightBtnImgBlock"],
            productPackOfRightBtnImgBlock: ["productPackOfRightBtnImg"],
            productPackOfListBlock: ["productPackOfItemBlock"],
            productPackOfItemBlock: ["productPackOfItemImgBlock", "productPackOfItemTitleBlock", "productPackOfItemQuantityBlock", "productPackOfItemPriceBlock"],
            productPackOfItemImgBlock: ["productPackOfItemImg"],
            productPackOfItemTitleBlock: ["productPackOfItemTitleTextBlock"],
            productPackOfItemTitleTextBlock: ["productPackOfItemTitleText"],
            productPackOfItemQuantityBlock: ["productPackOfItemQuantityTextBlock"],
            productPackOfItemQuantityTextBlock: ["productPackOfItemQuantityText"],
            productPackOfItemPriceBlock: ["productPackOfItemPriceActiveBlock", "productPackOfItemPriceRegularBlock"],
            productPackOfItemPriceActiveBlock: ["productPackOfItemPriceActiveTextBlock"],
            productPackOfItemPriceActiveTextBlock: ["productPackOfItemPriceActiveText"],
            productPackOfItemPriceRegularBlock: ["productPackOfItemPriceRegularTextBlock"],
            productPackOfItemPriceRegularTextBlock: ["productPackOfItemPriceRegularText"],
            productQtyAddBtnBlock: ["productQtyBlock", "productAddBlock"],
            productQtyBlock: ["productQtyDownBlock", "productQtyInputBlock", "productQtyUpBlock"],
            productQtyDownBlock: ["productQtyDownBtnBlock"],
            productQtyDownBtnBlock: ["productQtyDownBtn"],
            productQtyUpBlock: ["productQtyUpBtnBlock"],
            productQtyUpBtnBlock: ["productQtyUpBtn"],
            productQtyInputBlock: ["productQtyInputTextBlock"],
            productQtyInputTextBlock: ["productQtyInputText"],
            productAddBlock: ["productAddImgBlock", "productAddTextBlock"],
            productAddTextBlock: ["productAddText", "productAddspan"],
            productAddImgBlock: ["productAddImg"],
        }
    },
    am: {
        className: {
            afModalBlock: prefix + "af" + postfix,
            afModalTitleBlock: prefix + "af_title" + postfix,
            afModalTitleTextBlock: prefix + "af_title_text" + postfix,
            afModalTitleText: prefix + "af_title_text",
            afModalClose: prefix + "af_modal_close",
            afModalBundlesBlock: prefix + "af_bundles" + postfix,
            afLeftBlock: prefix + "af_left" + postfix,
            afLeftBtnBlock: prefix + "af_left_btn" + postfix,
            afLeftBtnImgBlock: prefix + "af_left_btn_img" + postfix,
            afLeftBtnImg: prefix + "af_left_btn_img",
            afProductListMainBlock: prefix + "af_product-list-main" + postfix,
            afProductListBlock: prefix + "af_product-list" + postfix,
            afRightBlock: prefix + "af_right" + postfix,
            afRightBtnBlock: prefix + "af_right_btn" + postfix,
            afRightBtnImgBlock: prefix + "af_right_btn_img" + postfix,
            afRightBtnImg: prefix + "af_right_btn_img",

            productModuleBlock: prefix + "product_module" + postfix,
            productModalBlock: prefix + "product_modal" + postfix,
            productShowcaseBlock: prefix + "product_showcase" + postfix,
            productBlock: prefix + "product" + postfix,
            productHeaderMainBlock: prefix + "product_header_main" + postfix,
            productHeaderBlock: prefix + "product_header" + postfix,
            productHeaderTitleBlock: prefix + "product_header_title" + postfix,
            productHeaderTitleTextBlock: prefix + "product_header_title_text" + postfix,
            productHeaderTitleText: prefix + "product_header_title_text",
            productHeaderImgBlock: prefix + "product_header_img" + postfix,
            productHeaderImg: prefix + "product_header_img",

            productDescriptionHeaderBlock: prefix + "product_Description_header" + postfix,
            productDescriptionHeaderTitleBlock: prefix + "product_Description_header_title" + postfix,
            productDescriptionHeaderTitleTextBlock: prefix + "product_Description_header_title_text" + postfix,
            productDescriptionHeaderTitleText: prefix + "product_Description_header_title_text",
            productDescriptionHeaderImgBlock: prefix + "product_Description_header_img" + postfix,
            productDescriptionHeaderImg: prefix + "product_Description_header_img",
            productInfoMainBlock: prefix + "product_info_main" + postfix,
            productImgBlock: prefix + "product_img" + postfix,
            productImgMainBlock: prefix + "product_img_main" + postfix,
            productImgMainImgBlock: prefix + "product_img_main_img" + postfix,
            productImgMainImg: prefix + "product_img_main_img",
            productImgMainZoomBlock: prefix + "product_img_main_zoom" + postfix,
            productImgMainZoomBtnBlock: prefix + "product_img_main_zoom_btn" + postfix,
            productImgMainZoomBtnImgBlock: prefix + "product_img_main_zoom_btn_img" + postfix,
            productImgMainZoomBtnImg: prefix + "product_img_main_zoom_btn_img",
            productImgMainZoomminusImg: prefix + "product_img_main_zoom_minus_img",
            productImgMainZoomRuturnImg: prefix + "product_img_main_zoom_return_img",
            productImgMainZoomBtnTextBlock: prefix + "product_img_main_zoom_btn_text" + postfix,
            productImgMainZoomBtnText: prefix + "product_img_main_zoom_btn_text",
            productImgGalleryBlock: prefix + "product_img_gallery" + postfix,
            productImgGalleryHeaderBlock: prefix + "producy_img_gallery_header" + postfix,
            productImgGalleryHeaderTitleBlock: prefix + "product_img_gallery_header_title" + postfix,
            productImgGalleryHeaderTitleImgBlock: prefix + "product_img_gallery_header_title_img" + postfix,
            productImgGalleryHeaderTitleImg: prefix + "product_img_gallery_header_title_img",
            productImgGalleryHeaderTitleTextBlock: prefix + "product_img_gallery_header_title_text" + postfix,
            productImgGalleryHeaderTitleText: prefix + "product_img_gallery_header_title_text",
            productImgGalleryHeaderToggleBlock: prefix + "product_img_gallery_header_toggle" + postfix,
            productImgGalleryHeaderToggleImgBlock: prefix + "product_img_gallery_header_toggle_img" + postfix,
            productImgGalleryHeaderToggleImg: prefix + "product_img_gallery_header_toggle_img",
            productImgGalleryHeaderToggleTextBlock: prefix + "product_img_gallery_header_toggle_text" + postfix,
            productImgGalleryHeaderToggleText: prefix + "product_img_gallery_header_toggle_text",
            productImgGalleryLeftBlock: prefix + "product_img_gallery_left" + postfix,
            productImgGalleryLeftBtnBlock: prefix + "product_img_gallery_left_btn" + postfix,
            productImgGalleryLeftBtnImgBlock: prefix + "product_img_gallery_left_btn_img" + postfix,
            productImgGalleryLeftBtnImg: prefix + "product_img_gallery_left_btn_img",
            productImgGalleryLeftBtnTextBlock: prefix + "product_img_gallery_left_btn_text" + postfix,
            productImgGalleryLeftBtnText: prefix + "product_img_gallery_left_btn_text",
            productImgGalleryListBlock: prefix + "product_img_gallery_list" + postfix,
            productImgGalleryListItemBlock: prefix + "product_img_gallery_list_item" + postfix,
            productImgGalleryListItemImgBlock: prefix + "product_img_gallery_list_item_img" + postfix,
            productImgGalleryListItemImg: prefix + "product_img_gallery_list_item_img",
            productImgGalleryListItemTextBlock: prefix + "product_img_gallery_list_item_text" + postfix,
            productImgGalleryListItemText: prefix + "product_img_gallery_list_item_text",
            productImgGalleryRightBlock: prefix + "product_img_gallery_right" + postfix,
            productImgGalleryRightBtnBlock: prefix + "product_img_gallery_right_btn" + postfix,
            productImgGalleryRightBtnImgBlock: prefix + "product_img_gallery_right_btn_img" + postfix,
            productImgGalleryRightBtnImg: prefix + "product_img_gallery_right_btn_img",
            productImgGalleryRightBtnTextBlock: prefix + "product_img_gallery_right_btn_text" + postfix,
            productImgGalleryRightBtnText: prefix + "product_img_gallery_right_btn_text",
            productDescBlock: prefix + "product_desc" + postfix,
            productTitleBlock: prefix + "product_desc_title" + postfix,
            productTitleTextBlock: prefix + "product_desc_title_text" + postfix,
            productTitleText: prefix + "product_desc_title_text",
            productMaufactureTextBlock: prefix + "product_manufacture_text" + postfix,
            productMaufactureText: prefix + "product_maufacture_text",
            productRatingsBlock: prefix + "product_desc_ratings" + postfix,
            productInfoBlock: prefix + "product_desc_info" + postfix,
            productInfoImgBlock: prefix + "product_desc_info_img" + postfix,
            productInfoImg: prefix + "product_desc_info_img",
            productInfoTextBlock: prefix + "product_desc_info_text" + postfix,
            productInfoText: prefix + "product_desc_info_text",
            productInfoFullDescBlock: prefix + "product_Info_Full_desc_info" + postfix,
            productInfoFullDescText: prefix + "product_Info_Full_desc_info_text",
            productInfoFullDescDescBlock: prefix + "Info_Full_desc_desc" + postfix,
            productInfoFullDescDescHeaderBlock: prefix + "Info_Full_desc_desc_header" + postfix,
            productInfoFullDescDescHeaderText: prefix + "Info_Full_desc_desc_header_text",
            productInfoFullDescShippingBlock: prefix + "Info_Full_desc_shipping" + postfix,
            productInfoFullDescShippingHeaderBlock: prefix + "Info_Full_desc_shipping_header" + postfix,
            productInfoFullDescShippingHeaderText: prefix + "Info_Full_desc_shipping_header_text",
            productInfoFullDescShippingText: prefix + "Info_Full_desc_shipping_text",
            productPriceBlock: prefix + "product_desc_price" + postfix,
            productPriceLabel: prefix + "product_price_label" + postfix,
            productPriceActiveBlock: prefix + "product_desc_price_active" + postfix,
            productPriceActiveTextBlock: prefix + "product_desc_price_active_text" + postfix,
            productPriceActiveText: prefix + "product_desc_price_active_text",
            productPriceActiveTextMsg: prefix + "product_desc_price_active_text_msg",
            productPriceRegularBlock: prefix + "product_desc_price_regular" + postfix,
            productPriceRegularTextBlock: prefix + "product_desc_price_regular_text" + postfix,
            productPriceRegularText: prefix + "product_desc_price_regular_text",
            productPriceWorthBlock: prefix + "product_desc_price_worth" + postfix,
            productPriceWorthTextBlock: prefix + "product_desc_price_worth_text" + postfix,
            productPriceWorthText: prefix + "product_desc_price_worth_text",
            productPriceWorthTextMsg: prefix + "product_desc_price_worth_text_msg",
            productAttBlock: prefix + "product_desc_att" + postfix,
            productAttColorBlock: prefix + "product_desc_att_color" + postfix,
            productAttColorTitleBlock: prefix + "product_desc_att_color_title" + postfix,
            productAttColorTitleTextBlock: prefix + "product_desc_att_color_title_text" + postfix,
            productAttColorTitleText: prefix + "product_desc_att_color_title_text",
            productAttColorTitleTextSelected: prefix + "product_desc_att_color_title_text_selected",
            productAttColorListBlock: prefix + "product_desc_att_color_list" + postfix,
            productAttColorListItemBlock: prefix + "product_desc_att_color_list_item" + postfix,
            productAttColorListItemImgBlock: prefix + "product_desc_att_color_list_item_img" + postfix,
            productAttColorListItemImg: prefix + "product_desc_att_color_list_item_img",
            productAttColorListItemTextBlock: prefix + "product_desc_att_color_list_item_text" + postfix,
            productAttColorListItemText: prefix + "product_desc_att_color_list_item_text",
            productAttSizeBlock: prefix + "product_desc_att_size" + postfix,
            productAttSizeTitleBlock: prefix + "product_desc_att_size_title" + postfix,
            productAttSizeTitleTextBlock: prefix + "product_desc_att_size_title_text" + postfix,
            productAttSizeTitleText: prefix + "product_desc_att_size_title_text",
            productAttSizeTitleTextSelected: prefix + "product_desc_att_size_title_text_selected",
            productAttSizeListBlock: prefix + "product_desc_att_size_list" + postfix,
            productAttSizeListItemBlock: prefix + "product_desc_att_size_list_item" + postfix,
            productAttSizeListItemImgBlock: prefix + "product_desc_att_size_list_item_img" + postfix,
            productAttSizeListItemImg: prefix + "product_desc_att_size_list_item_img",
            productAttSizeListItemTextBlock: prefix + "product_desc_att_size_list_item_text" + postfix,
            productAttSizeListItemText: prefix + "product_desc_att_size_list_item_text",
            productAttzeroBlock: prefix + "product_desc_att_zero" + postfix,
            productAttzeroTitleBlock: prefix + "product_desc_att_zero_title" + postfix,
            productAttzeroTitleTextBlock: prefix + "product_desc_att_zero_title_text" + postfix,
            productAttzeroTitleText: prefix + "product_desc_att_zero_title_text",
            productAttzeroTitleTextSelected: prefix + "product_desc_att_zero_title_text_selected",
            productAttzeroListBlock: prefix + "product_desc_att_zero_list" + postfix,
            productAttzeroListItemBlock: prefix + "product_desc_att_zero_list_item" + postfix,
            productAttzeroListItemImgBlock: prefix + "product_desc_att_zero_list_item_img" + postfix,
            productAttzeroListItemImg: prefix + "product_desc_att_zero_list_item_img",
            productAttzeroListItemTextBlock: prefix + "product_desc_att_zero_list_item_text" + postfix,
            productAttzeroListItemText: prefix + "product_desc_att_zero_list_item_text",
            productAttthirdBlock: prefix + "product_desc_att_third" + postfix,
            productAttthirdTitleBlock: prefix + "product_desc_att_third_title" + postfix,
            productAttthirdTitleTextBlock: prefix + "product_desc_att_third_title_text" + postfix,
            productAttthirdTitleText: prefix + "product_desc_att_third_title_text",
            productAttthirdTitleTextSelected: prefix + "product_desc_att_third_title_text_selected",
            productAttthirdListBlock: prefix + "product_desc_att_third_list" + postfix,
            productAttthirdListItemBlock: prefix + "product_desc_att_third_list_item" + postfix,
            productAttthirdListItemImgBlock: prefix + "product_desc_att_third_list_item_img" + postfix,
            productAttthirdListItemImg: prefix + "product_desc_att_third_list_item_img",
            productAttthirdListItemTextBlock: prefix + "product_desc_att_third_list_item_text" + postfix,
            productAttthirdListItemText: prefix + "product_desc_att_third_list_item_text",
            productAttfourthBlock: prefix + "product_desc_att_fourth" + postfix,
            productAttfourthTitleBlock: prefix + "product_desc_att_fourth_title" + postfix,
            productAttfourthTitleTextBlock: prefix + "product_desc_att_fourth_title_text" + postfix,
            productAttfourthTitleText: prefix + "product_desc_att_fourth_title_text",
            productAttfourthTitleTextSelected: prefix + "product_desc_att_fourth_title_text_selected",
            productAttfourthListBlock: prefix + "product_desc_att_fourth_list" + postfix,
            productAttfourthListItemBlock: prefix + "product_desc_att_fourth_list_item" + postfix,
            productAttfourthListItemImgBlock: prefix + "product_desc_att_fourth_list_item_img" + postfix,
            productAttfourthListItemImg: prefix + "product_desc_att_fourth_list_item_img",
            productAttfourthListItemTextBlock: prefix + "product_desc_att_fourth_list_item_text" + postfix,
            productAttfourthListItemText: prefix + "product_desc_att_fourth_list_item_text",

            productAttEditText: prefix + "product_desc_att_edit_text",
            productAttEditBlock: prefix + "product_desc_att_edit" + postfix,
            productPackOfBlock: prefix + "product_desc_pack_of" + postfix,
            productPackOfLeftBlock: prefix + "product_desc_pack_of_left" + postfix,
            productPackOfListBlock: prefix + "product_desc_pack_of_list" + postfix,
            productPackOfRightBlock: prefix + "product_desc_pack_of_right" + postfix,
            productPackOfLeftBtnBlock: prefix + "product_desc_pack_of_left_btn" + postfix,
            productPackOfLeftBtnImgBlock: prefix + "product_desc_pack_of_left_btn_img" + postfix,
            productPackOfLeftBtnImg: prefix + "product_desc_pack_of_left_btn_img",
            productPackOfRightBtnBlock: prefix + "product_desc_pack_of_right_btn" + postfix,
            productPackOfRightBtnImgBlock: prefix + "product_desc_pack_of_right_btn_img" + postfix,
            productPackOfRightBtnImg: prefix + "product_desc_pack_of_right_btn_img",
            productPackOfItemBlock: prefix + "product_desc_pack_of_item" + postfix,
            productPackOfItemTitleBlock: prefix + "product_desc_pack_of_item_title" + postfix,
            productPackOfItemTitleTextBlock: prefix + "product_desc_pack_of_item_title_text" + postfix,
            productPackOfItemTitleText: prefix + "product_desc_pack_of_item_title_text",
            productPackOfItemImgBlock: prefix + "product_desc_pack_of_item_img" + postfix,
            productPackOfItemImg: prefix + "product_desc_pack_of_item_img",
            productPackOfItemQuantityBlock: prefix + "product_desc_pack_of_item_quantity" + postfix,
            productPackOfItemQuantityTextBlock: prefix + "product_desc_pack_of_item_quantity_text" + postfix,
            productPackOfItemQuantityText: prefix + "product_desc_pack_of_item_quantity_text",
            productPackOfItemPriceBlock: prefix + "product_desc_pack_of_item_price" + postfix,
            productPackOfItemPriceRegularBlock: prefix + "product_desc_pack_of_item_price_regular" + postfix,
            productPackOfItemPriceRegularTextBlock: prefix + "product_desc_pack_of_item_price_regular_text" + postfix,
            productPackOfItemPriceRegularText: prefix + "product_desc_pack_of_item_price_regular_text",
            productPackOfItemPriceActiveBlock: prefix + "product_desc_pack_of_item_price_active" + postfix,
            productPackOfItemPriceActiveTextBlock: prefix + "product_desc_pack_of_item_price_active_text" + postfix,
            productPackOfItemPriceActiveText: prefix + "product_desc_pack_of_item_price_active_text",
            productQtyAddBtnBlock: prefix + "product_desc_qty_add_btn" + postfix,
            productQtyBlock: prefix + "product_desc_qty" + postfix,
            productQtyDownBlock: prefix + "product_desc_qty_down" + postfix,
            productQtyDownBtnBlock: prefix + "product_desc_qty_down_btn" + postfix,
            productQtyDownBtn: prefix + "product_desc_qty_down_btn",
            productQtyInputBlock: prefix + "product_desc_qty_input" + postfix,
            productQtyInputTextBlock: prefix + "product_desc_qty_input_text" + postfix,
            productQtyInputText: prefix + "product_desc_qty_input_text",
            productQtyUpBlock: prefix + "product_desc_qty_up" + postfix,
            productQtyUpBtnBlock: prefix + "product_desc_qty_up_btn" + postfix,
            productQtyUpBtn: prefix + "product_desc_qty_up_btn",
            productAddBlock: prefix + "product_desc_add" + postfix,
            productAddTextBlock: prefix + "product_desc_add_text" + postfix,
            productAddText: prefix + "product_desc_add_text",
            productAddspan: prefix + "product_desc_add_span",
            productAddImgBlock: prefix + "product_desc_add_img" + postfix,
            productAddImg: prefix + "product_desc_add_img",
            productAddErrText: prefix + "product_desc_add_err_text" + postfix,
            productAddTitle: prefix + "product_desc_add_title_text" + postfix,
            productDescriptionMainBlock: prefix + "product_description_main" + postfix,
        },
        dom: {
            afModalBlock: ["afModalTitleBlock", "afModalBundlesBlock"],
            afModalTitleBlock: ["afModalTitleTextBlock"],
            afModalTitleTextBlock: ["afModalTitleText", "afModalClose"],
            afModalBundlesBlock: ["afLeftBlock", "afProductListMainBlock", "afRightBlock"],
            afLeftBlock: ["afLeftBtnBlock"],
            afLeftBtnBlock: ["afLeftBtnImgBlock"],
            afLeftBtnImgBlock: ["afLeftBtnImg"],
            afProductListMainBlock: ["afProductListBlock"],
            afProductListBlock: ["productModuleBlock", "productModuleBlock", "productModuleBlock"],
            afRightBlock: ["afRightBtnBlock"],
            afRightBtnBlock: ["afRightBtnImgBlock"],
            afRightBtnImgBlock: ["afRightBtnImg"],

            productModuleBlock: ["productShowcaseBlock", "productModalBlock"],
            productShowcaseBlock: ["productBlock"],
            productModalBlock: ["productBlock"],
            productBlock: ["productHeaderMainBlock", "productInfoMainBlock", "productDescriptionMainBlock"],
            productInfoMainBlock: ["productImgBlock", "productDescBlock"],
            productHeaderMainBlock: ["productHeaderBlock", "productDescriptionHeaderBlock", "productHeaderImgBlock"],
            productHeaderBlock: ["productHeaderTitleBlock"],
            productHeaderTitleBlock: ["productHeaderTitleTextBlock"],
            productHeaderTitleTextBlock: ["productHeaderTitleText"],
            productHeaderImgBlock: ["productHeaderImg"],

            productDescriptionHeaderBlock: ["productDescriptionHeaderTitleBlock"],
            productDescriptionHeaderTitleBlock: ["productDescriptionHeaderTitleTextBlock"],
            productDescriptionHeaderTitleTextBlock: ["productDescriptionHeaderTitleText"],
            productDescriptionHeaderImgBlock: ["productDescriptionHeaderImg"],
            productImgBlock: ["productImgMainBlock", "productImgGalleryBlock"],
            productImgMainBlock: ["productImgMainImgBlock", "productImgMainZoomBlock"],
            productImgMainImgBlock: ["productImgMainImg"],
            productImgMainZoomBlock: ["productImgMainZoomBtnBlock"],
            productImgMainZoomBtnBlock: ["productImgMainZoomBtnImgBlock", "productImgMainZoomBtnTextBlock"],
            productImgMainZoomBtnImgBlock: ["productImgMainZoomBtnImg", "productImgMainZoomminusImg", "productImgMainZoomRuturnImg"],
            productImgMainZoomBtnTextBlock: ["productImgMainZoomBtnText"],
            productImgGalleryBlock: ["productImgGalleryHeaderBlock", "productImgGalleryLeftBlock", "productImgGalleryListBlock", "productImgGalleryRightBlock"],
            productImgGalleryHeaderBlock: ["productImgGalleryHeaderTitleBlock", "productImgGalleryHeaderToggleBlock"],
            productImgGalleryHeaderTitleBlock: ["productImgGalleryHeaderTitleImgBlock", "productImgGalleryHeaderTitleTextBlock"],
            productImgGalleryHeaderTitleImgBlock: ["productImgGalleryHeaderTitleImg"],
            productImgGalleryHeaderTitleTextBlock: ["productImgGalleryHeaderTitleText"],
            productImgGalleryHeaderToggleBlock: ["productImgGalleryHeaderToggleImgBlock", "productImgGalleryHeaderToggleTextBlock"],
            productImgGalleryHeaderToggleImgBlock: ["productImgGalleryHeaderToggleImg"],
            productImgGalleryHeaderToggleTextBlock: ["productImgGalleryHeaderToggleText"],
            productImgGalleryBlock: ["productImgGalleryLeftBlock", "productImgGalleryListBlock", "productImgGalleryRightBlock"],
            productImgGalleryLeftBlock: ["productImgGalleryLeftBtnBlock"],
            productImgGalleryLeftBtnBlock: ["productImgGalleryLeftBtnImgBlock", "productImgGalleryLeftBtnTextBlock"],
            productImgGalleryLeftBtnImgBlock: ["productImgGalleryLeftBtnImg"],
            productImgGalleryLeftBtnTextBlock: ["productImgGalleryLeftBtnText"],
            productImgGalleryListBlock: ["productImgGalleryListItemBlock"],
            productImgGalleryListItemBlock: ["productImgGalleryListItemImgBlock", "productImgGalleryListItemTextBlock"],
            productImgGalleryListItemImgBlock: ["productImgGalleryListItemImg"],
            productImgGalleryListItemTextBlock: ["productImgGalleryListItemText"],
            productImgGalleryRightBlock: ["productImgGalleryRightBtnBlock"],
            productImgGalleryRightBtnBlock: ["productImgGalleryRightBtnImgBlock", "productImgGalleryRightBtnTextBlock"],
            productImgGalleryRightBtnImgBlock: ["productImgGalleryRightBtnImg"],
            productImgGalleryRightBtnTextBlock: ["productImgGalleryRightBtnText"],
            productDescBlock: ["productTitleBlock", "productPriceBlock", "productRatingsBlock", "productPriceWorthBlock", "productAttBlock", "productInfoBlock", "productPackOfBlock", "productQtyAddBtnBlock"],
            productTitleBlock: ["productMaufactureTextBlock", "productTitleTextBlock"],
            productTitleTextBlock: ["productTitleText"],
            productMaufactureTextBlock: ["productMaufactureText"],
            productInfoBlock: ["productInfoImgBlock", "productInfoTextBlock", "productInfoFullDescBlock"],
            productInfoImgBlock: ["productInfoImg"],
            productInfoTextBlock: ["productInfoText"],
            productInfoFullDescBlock: ["productInfoFullDescDescBlock", "productInfoFullDescShippingBlock"],
            productInfoFullDescDescBlock: ["productInfoFullDescDescHeaderBlock", "productInfoFullDescText"],
            productInfoFullDescDescHeaderBlock: ["productInfoFullDescDescHeaderText"],
            productInfoFullDescShippingBlock: ["productInfoFullDescShippingHeaderBlock", "productInfoFullDescShippingText"],
            productInfoFullDescShippingHeaderBlock: ["productInfoFullDescShippingHeaderText"],
            productPriceBlock: ["productPriceLabel", "productPriceActiveBlock", "productPriceRegularBlock"],
            productPriceActiveBlock: ["productPriceActiveTextBlock"],
            productPriceActiveTextBlock: ["productPriceActiveText", "productPriceActiveTextMsg"],
            productPriceRegularBlock: ["productPriceRegularTextBlock"],
            productPriceRegularTextBlock: ["productPriceRegularText"],
            productPriceWorthBlock: ["productPriceWorthTextBlock"],
            productPriceWorthTextBlock: ["productPriceWorthText", "productPriceWorthTextMsg"],

            productAttBlock: ["productAddErrText", "productAddTitle", "productAttzeroBlock", "productAttColorBlock", "productAttSizeBlock", "productAttthirdBlock", "productAttfourthBlock", "productAttEditBlock"],
            productAttColorBlock: ["productAttColorTitleBlock", "productAttColorListBlock"],
            productAttColorTitleBlock: ["productAttColorTitleTextBlock"],
            productAttColorTitleTextBlock: ["productAttColorTitleText", "productAttColorTitleTextSelected"],
            productAttColorListBlock: ["productAttColorListItemBlock"],
            productAttColorListItemBlock: ["productAttColorListItemImgBlock", "productAttColorListItemTextBlock"],
            productAttColorListItemImgBlock: ["productAttColorListItemImg"],
            productAttColorListItemTextBlock: ["productAttColorListItemText"],

            productAttzeroBlock: ["productAttzeroTitleBlock", "productAttzeroListBlock"],
            productAttzeroTitleBlock: ["productAttzeroTitleTextBlock"],
            productAttzeroTitleTextBlock: ["productAttzeroTitleText", "productAttzeroTitleTextSelected"],
            productAttzeroListBlock: ["productAttzeroListItemBlock"],
            productAttzeroListItemBlock: ["productAttzeroListItemImgBlock", "productAttzeroListItemTextBlock"],
            productAttzeroListItemImgBlock: ["productAttzeroListItemImg"],
            productAttzeroListItemTextBlock: ["productAttzeroListItemText"],

            productAttthirdBlock: ["productAttthirdTitleBlock", "productAttthirdListBlock"],
            productAttthirdTitleBlock: ["productAttthirdTitleTextBlock"],
            productAttthirdTitleTextBlock: ["productAttthirdTitleText", "productAttthirdTitleTextSelected"],
            productAttthirdListBlock: ["productAttthirdListItemBlock"],
            productAttthirdListItemBlock: ["productAttthirdListItemImgBlock", "productAttthirdListItemTextBlock"],
            productAttthirdListItemImgBlock: ["productAttthirdListItemImg"],
            productAttthirdListItemTextBlock: ["productAttthirdListItemText"],

            productAttfourthBlock: ["productAttfourthTitleBlock", "productAttfourthListBlock"],
            productAttfourthTitleBlock: ["productAttfourthTitleTextBlock"],
            productAttfourthTitleTextBlock: ["productAttfourthTitleText", "productAttfourthTitleTextSelected"],
            productAttfourthListBlock: ["productAttfourthListItemBlock"],
            productAttfourthListItemBlock: ["productAttfourthListItemImgBlock", "productAttfourthListItemTextBlock"],
            productAttfourthListItemImgBlock: ["productAttfourthListItemImg"],
            productAttfourthListItemTextBlock: ["productAttfourthListItemText"],

            productAttSizeBlock: ["productAttSizeTitleBlock", "productAttSizeListBlock"],
            productAttSizeTitleBlock: ["productAttSizeTitleTextBlock"],
            productAttSizeTitleTextBlock: ["productAttSizeTitleText", "productAttSizeTitleTextSelected"],
            productAttSizeListBlock: ["productAttSizeListItemBlock"],
            productAttSizeListItemBlock: ["productAttSizeListItemImgBlock", "productAttSizeListItemTextBlock"],
            productAttSizeListItemImgBlock: ["productAttSizeListItemImg"],
            productAttSizeListItemTextBlock: ["productAttSizeListItemText"],

            productAttEditBlock: ["productAttEditText"],
            productPackOfBlock: ["productPackOfLeftBlock", "productPackOfListBlock", "productPackOfRightBlock"],
            productPackOfLeftBlock: ["productPackOfLeftBtnBlock"],
            productPackOfLeftBtnBlock: ["productPackOfLeftBtnImgBlock"],
            productPackOfLeftBtnImgBlock: ["productPackOfLeftBtnImg"],
            productPackOfRightBlock: ["productPackOfRightBtnBlock"],
            productPackOfRightBtnBlock: ["productPackOfRightBtnImgBlock"],
            productPackOfRightBtnImgBlock: ["productPackOfRightBtnImg"],
            productPackOfListBlock: ["productPackOfItemBlock"],
            productPackOfItemBlock: ["productPackOfItemImgBlock", "productPackOfItemTitleBlock", "productPackOfItemQuantityBlock", "productPackOfItemPriceBlock"],
            productPackOfItemImgBlock: ["productPackOfItemImg"],
            productPackOfItemTitleBlock: ["productPackOfItemTitleTextBlock"],
            productPackOfItemTitleTextBlock: ["productPackOfItemTitleText"],
            productPackOfItemQuantityBlock: ["productPackOfItemQuantityTextBlock"],
            productPackOfItemQuantityTextBlock: ["productPackOfItemQuantityText"],
            productPackOfItemPriceBlock: ["productPackOfItemPriceActiveBlock", "productPackOfItemPriceRegularBlock"],
            productPackOfItemPriceActiveBlock: ["productPackOfItemPriceActiveTextBlock"],
            productPackOfItemPriceActiveTextBlock: ["productPackOfItemPriceActiveText"],
            productPackOfItemPriceRegularBlock: ["productPackOfItemPriceRegularTextBlock"],
            productPackOfItemPriceRegularTextBlock: ["productPackOfItemPriceRegularText"],
            productQtyAddBtnBlock: ["productQtyBlock", "productAddBlock"],
            productQtyBlock: ["productQtyDownBlock", "productQtyInputBlock", "productQtyUpBlock"],
            productQtyDownBlock: ["productQtyDownBtnBlock"],
            productQtyDownBtnBlock: ["productQtyDownBtn"],
            productQtyUpBlock: ["productQtyUpBtnBlock"],
            productQtyUpBtnBlock: ["productQtyUpBtn"],
            productQtyInputBlock: ["productQtyInputTextBlock"],
            productQtyInputTextBlock: ["productQtyInputText"],
            productAddBlock: ["productAddImgBlock", "productAddTextBlock"],
            productAddTextBlock: ["productAddText", "productAddspan"],
            productAddImgBlock: ["productAddImg"],
        }
    },
}

INC.methods = {};
INC.methods.networkReq = function(nwConfigObj, cb) {

    var nwConfigObj = new INC.classes.NWConfig(nwConfigObj);
    var xhr = new XMLHttpRequest();
    xhr.open(nwConfigObj.method, nwConfigObj.url, true);

    xhr.onload = function() {}
    // xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.onreadystatechange = function() {
        if (xhr.readyState == 4 && xhr.status === 200) {
            if (xhr.response != "") {
                if (INC.config.pageType == "pdp" && document.querySelector('.add-to-customize') == null) {
                    cb(xhr.response);
                } else {
                    cb(xhr.response);
                }
                if (INC.config.pageType == "pdp") {
                    var p_ids = INC.methods.getProductIdFromWebPage()
                    // INC.methods.irbReq_is_tc(p_ids, 10, "catalog_product_view");
                }
                sessionStorage.setItem('bundleJSON', xhr.response)
            } else {
                document.querySelector('body').classList.remove('hide_mini_cart')

            }
        }
    }

    xhr.send(JSON.stringify(nwConfigObj.params));
}

INC.methods.irbReq = function(productId, bundleCount, elementName) {

    var elementName = elementName || "";
    var productId = productId;
    var apiKey = INC.config.clientToken;
    var bundleReqCount = bundleCount || 5;
    // var irbPATH = "//jprapidload.increasingly.co/increasingly_bundles?irb/";
    var irbPATH = "//jprapidload.increasingly.co/increasingly_bundles?irb/";
    if (INC.config.pageType == "pdp" || INC.config.pageType == "cartPage") {
        var irbReqParams =
            "product_ids=" + productId +
            "&category_id=" +
            "&api_key=" + apiKey +
            "&client_id=" +
            "&page_type=" + elementName +
            "&fr=" + "1" + 
            "&client_visitor_id=" + INC.config.ivid //+
        // "&is_tc=" + "1" +
        // "&no_of_bundles=" + bundleReqCount
        ;
    } else {
        var irbReqParams =
            "product_ids=" + productId +
            "&category_id=" +
            "&api_key=" + apiKey +
            "&client_id=" +
            "&page_type=" + elementName +
            "&client_visitor_id=" + INC.config.ivid +
            "&is_tc=" + "1" +
            "&fr=" + "1" + 
            "&no_of_bundles=" + bundleReqCount;
    }


    var irbReqURL = decodeURI(irbPATH + btoa(irbReqParams));
    var networkConfigObj = new INC.classes.NWConfig();
    networkConfigObj["url"] = irbReqURL;

    return this.refreshBundles(networkConfigObj);
}

INC.methods.refreshBundles = function(nwConfigObj) {
    var incDataStore = INC.dataStore;

    INC.methods.networkReq(nwConfigObj, function(response) {
        if (response.length == 0) return;

        if (typeof(response) != "object") {
            var responseJSON = JSON.parse(response);
        } else {
            var responseJSON = response;
        }


        if (responseJSON.hasOwnProperty('Bundles') && (responseJSON.Bundles.length > 0)) {
            responseJSON.timeStamp = Date.now();
            var bundleResponse = responseJSON;
            INC.dataStore.methods().buildDataStoreObj(bundleResponse);

            if ((incDataStore.dataStoreObj == null) || (incDataStore.dataStoreObj == undefined)) return;

            switch (INC.config.pageType) {
                case "pdp":
                    INC.methods.createPDPBlock();
                    setTimeout(function() {
                        INC.methods.createPDPBlock("sidebar")
                    })
                    break;
                case "cartPage":
                    INC.methods.createAMBlock();
                    break;
                case "productList":
                    INC.methods.clear();
                    INC.config.dupDataObjectProducts = []
                    INC.methods.createSidebarBlock();
                    var findObj = new INC.classes.FindObj();
                    findObj["id"] = INC.config.plpProductId;



                    var sbBlock = document.querySelector(INC.methods.getSelectorClassName(INC.uiConfig.sidebar.className, "sidebarModalBlock"));
                    sbBlock.querySelector(INC.methods.getSelectorClassName(INC.uiConfig.sidebar.className, "sidebarCartAddedBlock")).style.visibilty = "hidden";
                    document.querySelector(".inc_sidebar_modal_block .inc_sidebar_cart_added_block").style.borderBottom = "0px";
                    sbBlock.querySelector(INC.methods.getSelectorClassName(INC.uiConfig.sidebar.className, "sidebarHeaderItemCountFigureText")).innerText = 0;
                    sbBlock.querySelector(INC.methods.getSelectorClassName(INC.uiConfig.sidebar.className, "sidebarCartAddedListBlock")).innerHTML = "";
                    if (INC.dataStore.plpProductQty == 0) {
                        INC.dataStore.plpProductQty = 1
                    }
                    var checkquick = setInterval(function(){
                        if(document.querySelector('.quickview[aria-describedby="QuickViewDialog"]') != null){
                            if(document.querySelector('.quickview[aria-describedby="QuickViewDialog"]').style.display == "none"){
                                clearInterval(checkquick)
                                INC.methods.addProductToSidebarCart(findObj, INC.dataStore.plpProductQty, null, "client_add_btn");
                                if (document.querySelector('.ic_popup_module_wrapper.active .inc_popup_close') != null) {
                                    document.querySelector('.ic_popup_module_wrapper.active .inc_popup_close').click();
                                }
                                INC.methods.showSidebar();

                                
                                var img_elem = setInterval(function() {
                                    var circle_img = document.querySelector('.inc_cart_added_product_img img')
                                    if (circle_img != null) {
                                        clearInterval(img_elem)
                                        var subtotalinc_active = document.querySelector('.inc_cart_added_product_desc_subtotal_price_active_text');
                                        if (INC.config.empty_prod_details[0] != undefined) {
                                            if (INC.config.empty_prod_details[0].p_activePrice != undefined) {

                                                document.querySelector('.inc_cart_added_product_prc').innerText = ""
                                                if (subtotalinc_active != null) {
                                                    var subt = (+INC.config.empty_prod_details[0].p_activePrice * INC.dataStore.plpProductQty)
                                                    subtotalinc_active.innerHTML = "<span> 特価 </span>" + "¥" + formatter.format(subt).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
                                                    subtotalinc_active.setAttribute('subtotalinc_activeprice', subt)
                                                    subtotalinc_active.setAttribute('subtotalactiveprice', subt)
                                                    var subtotalregular = document.querySelector('.inc_cart_added_product_desc_subtotal_price_regular_text')
                                                    subtotalregular.setAttribute('subtotalregularprice', 0)
                                                }
                                                var prd_names = document.querySelector('.inc_cart_added_product_desc_title_text')
                                                // prd_names.innerHTML = p_name
                                                if (INC.config.empty_prod_details[0].p_name != undefined) {
                                                    prd_names.innerHTML = INC.config.empty_prod_details[0].p_name
                                                }
                                                if (INC.config.empty_prod_details[0].p_name != undefined) {
                                                    circle_img.src = INC.config.empty_prod_details[0].p_img
                                                }
                                                var prd_price = document.querySelector('.inc_cart_added_product_desc_price_active_text')
                                                if (prd_price != null && INC.config.empty_prod_details[0].p_activePrice != null) {
                                                    prd_price.innerHTML = "<span> 特価 </span>" + "¥" + formatter.format(INC.config.empty_prod_details[0].p_activePrice).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
                                                }

                                                var prd_prc = document.querySelector('.inc_cart_added_product_prc');
                                                prd_prc.innerHTML =  "¥" + formatter.format(INC.config.empty_prod_details[0].p_activePrice).replace('￥', '').replace('¥', '') 
                                            }
                                        }
                                        setTimeout(function() {
                                            if (document.querySelector('#colorbox') != null) {
                                                if (document.querySelector('#colorbox').style.display == "block") {
                                                    // clearInterval(succesalert)
                                                    document.querySelector('#cboxClose').click()
                                                }
                                            }
                                        }, 2000)

                                    }
                                }, 100)
                            }
                        }else{
                            clearInterval(checkquick)
                        }
                    },10)
                    break;
            }


        }

    });
}

INC.methods.irbReq_is_tc = function(productId, bundleCount, elementName) {
    var elementName = elementName || "";
    var productId = productId;
    var apiKey = INC.config.clientToken;
    var bundleReqCount = bundleCount || 5;
    var irbPATH = "//jprapidload.increasingly.co/increasingly_bundles?irb/";
    // if (INC.clientConfig.statusLoggedIn) {
    //     irbPATH = "//www.travisperkins.co.uk/bundles/increasingly_bundles?irb/"
    // }
    var irbReqParams =
        "product_ids=" + productId +
        "&category_id=" +
        "&api_key=" + apiKey +
        "&client_id=" +
        "&page_type=" + elementName +
        "&client_visitor_id=" + INC.config.ivid +
        "&is_tc=" + "1" +
        "&no_of_bundles=" + bundleReqCount;

    var irbReqURL1 = decodeURI(irbPATH + btoa(irbReqParams));
    var networkConfigObj = new INC.classes.NWConfig();
    networkConfigObj["url"] = irbReqURL1;

    // var param = networkConfigObj[params];
    // var nwConfigObj = new INC.classes.NWConfig(nwConfigObj);
    var xhr = new XMLHttpRequest();
    xhr.open("GET", networkConfigObj["url"], true);

    xhr.onload = function() {}
    // xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.onreadystatechange = function() {
        if (xhr.readyState == 4 && xhr.status === 200) {
            if (xhr.response != "") {

                if (INC.config.pageType == "pdp") {
                    cb_tc(JSON.parse(xhr.response));
                }
                // sessionStorage.setItem('bundleJSON',xhr.response)
            } else {
                // if(INC.config.pageType == "pdp"){
                //     var delay=2500
                // } else{
                //     var delay=1000
                // }
                // setTimeout(function(){

                //     if(INC.config.pageType == "pdp"){
                //         INC.config.empty_prod_details=[]
                //         var product_wrap = document.querySelector("#maincontent");
                //         var pdpprd_id = INC.methods.getProductIdFromWebPage();
                //         var Pid = INC.methods.getProductIdFromWebPage();
                //         INC.config.Product_id = pdpprd_id
                //         var elProductName = document.querySelector('.page-title span').innerText;
                //         var prc = null;
                //         var s_prc = null;
                //         if (document.querySelectorAll('.price-box.price-final_price')[0].querySelector('.old-price') != null) {
                //             prc = document.querySelectorAll('.price-box.price-final_price')[0].querySelector('.old-price').innerText.replace(/[^\d\.\,\s]+/g, '');
                //             s_prc = document.querySelectorAll('.price-box.price-final_price')[0].querySelector('.price').innerText.replace(/[^\d\.\,\s]+/g, '');
                //         }
                //         else{
                //             prc = document.querySelectorAll('.price-box.price-final_price')[0].querySelector('.price').innerText.replace(/[^\d\.\,\s]+/g, '');
                //         }
                //         if (parseFloat(s_prc) >= parseFloat(prc)) {
                //             prc = document.querySelector('.price-box.price-final_price .price').innerText.replace(/[^\d\.\,\s]+/g, '');
                //             s_prc = null;
                //         }

                //         var p_id=Pid
                //         var p_name=elProductName
                //         var p_img=""
                //         var p_img=product_wrap.querySelector('.fotorama-item .fotorama__active img').src
                //         var regularPrice ="";

                //         var regularPrice = parseFloat(prc);
                //         if(s_prc != null){
                //             var p_activePrice=parseFloat(s_prc);
                //         }else{
                //             var p_activePrice=parseFloat(prc);
                //         }

                //         var size=""
                //         if(document.querySelector('.m_variant-swatches li.active a') != null){
                //             size = document.querySelector('.m_variant-swatches li.active a').getAttribute('title')
                //         }
                //         INC.config.empty_prod_details.push({
                //             p_id:p_id,
                //             p_name:p_name,
                //             p_img:p_img,
                //             p_activePrice:p_activePrice,
                //             regularPrice:regularPrice,
                //             size:size
                //         })    
                //     }
                //     if(INC.config.pageType != "cartPage" && INC.config.pageType != "ticket"){
                //         if (INC.config.empty_prod_details[0] != undefined) {
                //         INC.config.pdpaddedProductList.push(INC.config.empty_prod_details[0].p_id)
                //         }
                //         INC.config.pdpaddedProductList.push("9517B002")
                //         INC.config.pdpaddedProductList.push("8267B001")
                //         if(typeof(response) != "object"){
                //             var ress = JSON.parse(ressponse_data);
                //         }else{
                //             var ress = ressponse_data;
                //         }
                //         if (INC.config.empty_prod_details[0] != undefined) {
                //         ress.Bundles[0].Products[0].ProductId = INC.config.empty_prod_details[0].p_id;

                //         ress.Bundles[0].Products[0].ProductName = INC.config.empty_prod_details[0].p_name;
                //         ress.Bundles[0].Products[0].Price = INC.config.empty_prod_details[0].p_activePrice;
                //         ress.Bundles[0].Products[0].SpecialPrice = INC.config.empty_prod_details[0].regularPrice;
                //         ress.Bundles[0].Products[0].ImageURL = INC.config.empty_prod_details[0].p_img;
                //         ress.Bundles[0].Products[0].size = INC.config.empty_prod_details[0].size;

                //         ress.Bundles[0].Products[1].ProductId = INC.config.empty_prod_details[0].p_id;
                //         ress.Bundles[0].Products[1].ProductName = INC.config.empty_prod_details[0].p_name;
                //         ress.Bundles[0].Products[1].Price = INC.config.empty_prod_details[0].p_activePrice;;
                //         ress.Bundles[0].Products[1].SpecialPrice = INC.config.empty_prod_details[0].regularPrice;
                //         ress.Bundles[0].Products[1].ImageURL = INC.config.empty_prod_details[0].p_img
                //         ress.Bundles[0].Products[0].size = INC.config.empty_prod_details[0].size;
                //         }
                //         cb_tc(ress);
                //     }
                // }, delay)

            }
        }
    }

    xhr.send(JSON.stringify(networkConfigObj["params"]));
}


INC.methods.getSelectorClassName = function(classNames, className) {
    return "." + classNames[className];
}
INC.methods.get_product_ratings = function(filed3, rating_containers) {
    if (filed3 != undefined && filed3 != "" && filed3 != 0 && filed3.split('|')[0] != "0.0" && filed3.split('|')[0] != "0") {
        var rating = filed3.split('|')[0];
        var reviewc = filed3.split('|')[1];
        if (rating == "" || rating == undefined) {
            rating = 0
        }
        // var gave_rat = filed4;
        var ratingAvg = filed3
        // rating = Math.round(rating * 2) / 2;
        rating = parseFloat(rating).toFixed(1)
        rating = rating.toString();
        var rating_m = null;
        //if (rating != 0 && rating != "" && rating != null) {
        var rating_container = rating_containers;
        if (rating != 0 && rating != 1 && rating != 2 && rating != 3 && rating != 4 && rating != 5) {
            rating_m = rating.replace(".", "-");
        }
        if (rating == 0) {
            rating = "0-0"
        }
        if (rating == 1) {
            rating = "1-0"
        }
        if (rating == 2) {
            rating = "2-0"
        }
        if (rating == 3) {
            rating = "3-0"
        }
        if (rating == 4) {
            rating = "4-0"
        }
        if (rating == 5) {
            rating = "5-0"
        }
        if (rating == "") {
            rating = 0;
        }
        if (rating_m != null) {
            rating_containers.classList.add("rating_" + rating_m);
        } else {
            rating_containers.classList.add("rating_" + rating);
        }


        var count = document.createElement('span');
        count.classList.add('rating_count')
        rating_containers.appendChild(count);
        var avg = document.createElement('span');
        avg.classList.add('rating_avg')
        if (reviewc == undefined) {
            count.textContent = "(0)";
        } else {
            if (reviewc.replace('-', '.').trim() != "") {
                count.textContent = "(" + reviewc.replace('-', '.').trim() + ")"
            }
        }
        var stars = document.createElement('span');
        stars.classList.add('rating_stars');
        stars.innerHTML = "★★★★★"
        rating_containers.appendChild(stars);
    } else {
        var stars = document.createElement('span');
        stars.innerHTML = "."
        stars.style.color = "#ffffff"
        stars.classList.add('rating_stars');
        stars.classList.add('noratings');
        rating_containers.appendChild(stars);
    }
}
INC.methods.getProductIdFromWebPage = function() {
    var product_id = ""
    if (document.querySelector('.product-number span') != null) {
        product_id = document.querySelector('.product-number span').getAttribute('data-masterid')
    } else if (dataLayerGDOall != null) {
        var dtLyr = dataLayerGDOall
        for(l1=0;l1<dtLyr.length;l1++){
            if (dtLyr[l1].ecommerce != null){
                product_id = dtLyr[l1].ecommerce.detail.products[0].id
            }
        }
    }
    INC.config.Product_id = product_id
    return product_id;
}

INC.methods.detectPageType = function() {
    if (document.querySelector('#str_contents #form2cart') != null) {
        return "pdp";
    } 
    if (document.querySelector('.main-content #form2cart') != null){
        return "pdp";
    }
    if (document.querySelector('#str_cart_title') != null) {
        return "cartPage";
    }
}
INC.methods.detectDeviceType = function() {
    if (window.innerWidth > 1590) {

    }
    return (window.innerWidth > 768) ? "desktop" : "mobile";
}
INC.methods.detectLanguage = function detectLanguage() {
    return "en";
}
INC.methods.showSidebar = function(client) {
    if (document.querySelector('.inc_sidebar_modal_block') != null) {
        var seidebar_pr_length = document.querySelectorAll('.inc_sidebar_modal_block .inc_product_module_block').length;
        if (document.querySelector('.inc_sidebar_cart_added_block') != null) {
            document.querySelector('.inc_sidebar_cart_added_block').classList.remove('active')
        }
        if (!(seidebar_pr_length > 2)) {
            document.querySelector('.inc_recommended_products_right_block').style.visibility = "hidden";
            document.querySelector('.inc_recommended_products_left_block').style.visibility = "hidden";

        }

        // setTimeout(function() {
        //     _isVisible._init({
        //         classSelector: ".inc_pdp_block source[data-src], .inc_sidebar_modal_block img[data-src], .inc_sidebar_modal_block source[data-src]",
        //         index: 0
        //     });
        // },2000)

        if (seidebar_pr_length > 2) {
            INC.clientConfig.slidevalue = 0
            document.querySelector('.inc_recommended_products_list_block').setAttribute('style', 'margin-left:0;')
            document.querySelector('.inc_recommended_products_right_block').style.visibility = "visible";
            document.querySelector('.inc_recommended_products_right_block .inc_recommended_products_right_btn_img').setAttribute("style", "pointer-events: auto;opacity:1");
            document.querySelector('.inc_recommended_products_right_block').style.visibility = "visible";
            document.querySelector('.inc_recommended_products_right_block .inc_recommeded_products_right_btn_block').setAttribute("style", "pointer-events: auto;opacity:1");
            document.querySelector('.inc_recommended_products_left_block').style.visibility = "visible";
            document.querySelector('.inc_recommended_products_left_block .inc_recommended_products_left_btn_block').style.visibility = "visible";
            document.querySelector('.inc_recommended_products_left_block .inc_recommended_products_left_btn_block .inc_recommended_products_left_btn_img').style.visibility = "visible";

            document.querySelector('.inc_recommended_products_left_block .inc_recommended_products_left_btn_block .inc_recommended_products_left_btn_img').setAttribute("style", "pointer-events: none;opacity:0.5");
            document.querySelector('.inc_recommended_products_left_block').setAttribute("style", "opacity:0.5");
        }
        var total_added_product = INC.config.pdpaddedProductList;

        var all_cate_tab = document.querySelectorAll('.inc_recommended_tabs_list_block .inc_recommended_tabs_list_item_text');
        if (all_cate_tab.length == 0) {
            if (document.querySelector('.inc_sidebar_modal_block') != null) {
                document.querySelector('.inc_sidebar_modal_block').setAttribute('id', 'inc_empty_sidebar')
            }
        }
        if (document.querySelector('#progress_bar_dialog') != null) {
            document.querySelector('#progress_bar_dialog').style.display = "none"
        }
        if (document.querySelector('.inc_sidebar_modal_block .inc_product_module_block') != null) {
            if (document.querySelector('.inc_cart_added_product_desc_title_text') != null && document.querySelector('.inc_cart_added_product_desc_title_text').innerText == "undefined") return;
            if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) && onloadpdp == true && window.innerWidth < 1337) {
                if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0) {
                    // if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && navigator.userAgent.toLowerCase().indexOf('chrome') == -1) {
                    setTimeout(function() {
                        if (document.querySelector('.inc_pdp_block') != null) {
                            collection_height = $(".inc_pdp_block").offset().top
                        } else if (document.querySelector('.inc_af_block') != null) {
                            collection_height = $(".inc_af_block").offset().top
                        }
                        document.querySelector('body').setAttribute('style', 'position: fixed;width:100%;')
                    }, 100)
                }
            } else if (INC.config.pageType == "productList" && window.innerWidth < 1337) {
                if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0) {
                    // if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && navigator.userAgent.toLowerCase().indexOf('chrome') == -1) {
                    setTimeout(function() {
                        document.querySelector('body').setAttribute('style', 'position: fixed;width:100%;')
                    }, 100)
                }
            }
            if (document.querySelector('.sidebar_outer') != null) {
                document.querySelector('.sidebar_outer').style.display = "block"
                document.querySelector('.inc_sidebar_modal_block').style.display = "block"
                document.querySelector('.sidebar_outer').classList.add('sidebar_outer_active')
            }
            document.querySelector('html').classList.add('inc_overlay');
            var elSidebarOverlay = document.querySelector(".inc_sidebar_overlay_block");
            if (elSidebarOverlay != null) {
                elSidebarOverlay.style.display = "block";
            }
            document.querySelector('.inc_sidebar_modal_block').style.display = "block";
            var classNames = INC.uiConfig.sidebar.className;
            var getSelectorClassName = INC.methods.getSelectorClassName;
            document.querySelector('.inc_sidebar_modal_block').classList.add("active");
            // if(typeof(jQuery) != "undefined"){
            //     setTimeout(function(){
            //         $('.inc_sidebar_modal_block.active').animate({ scrollTop: $('.inc_sidebar_modal_block.active').height() }, 'slow');
            //     },2000)
            // }

            if (document.querySelector('.inc_recommended_products_list_block .inc_product_module_block') == null) {
                if (document.querySelector('.inc_recommended_tabs_list_item_text') != null) {
                    document.querySelector('.inc_recommended_tabs_list_item_text').click()
                }
            }
        } else {
            if (document.querySelector('.inc_sidebar_modal_block') != null) {
                document.querySelector('.inc_sidebar_modal_block').classList.add('noRecom');
            }
            if (document.querySelector('.inc_cart_added_product_desc_title_text') != null && document.querySelector('.inc_cart_added_product_desc_title_text').innerText == "undefined") return;
            if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) && onloadpdp == true && window.innerWidth < 1337) {
                if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0) {
                    // if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && navigator.userAgent.toLowerCase().indexOf('chrome') == -1) {
                    setTimeout(function() {
                        if (document.querySelector('.inc_pdp_block') != null) {
                            collection_height = $(".inc_pdp_block").offset().top
                        } else if (document.querySelector('.inc_af_block') != null) {
                            collection_height = $(".inc_af_block").offset().top
                        }
                        document.querySelector('body').setAttribute('style', 'position: fixed;width:100%;')
                    }, 100)
                }
            } else if (INC.config.pageType == "productList" && window.innerWidth < 1337) {
                if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0) {
                    // if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && navigator.userAgent.toLowerCase().indexOf('chrome') == -1) {
                    setTimeout(function() {
                        document.querySelector('body').setAttribute('style', 'position: fixed;width:100%;')
                    }, 100)
                }
            }
            if (document.querySelector('.sidebar_outer') != null) {
                document.querySelector('.sidebar_outer').style.display = "block"
                document.querySelector('.inc_sidebar_modal_block').style.display = "block"
                document.querySelector('.sidebar_outer').classList.add('sidebar_outer_active')
            }
            document.querySelector('html').classList.add('inc_overlay');
            var elSidebarOverlay = document.querySelector(".inc_sidebar_overlay_block");
            if (elSidebarOverlay != null) {
                elSidebarOverlay.style.display = "block";
            }
            document.querySelector('.inc_sidebar_modal_block').style.display = "block";
            var classNames = INC.uiConfig.sidebar.className;
            var getSelectorClassName = INC.methods.getSelectorClassName;
            document.querySelector('.inc_sidebar_modal_block').classList.add("active");
            // if(typeof(jQuery) != "undefined"){
            //     setTimeout(function(){
            //         $('.inc_sidebar_modal_block.active').animate({ scrollTop: $('.inc_sidebar_modal_block.active').height() }, 'slow');
            //     },2000)
            // }

            document.querySelector('.inc_sidebar_recommended_block').style.display = "none"

        }

        // setTimeout(function(){
            if((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) &&  onloadpdp == true  && window.innerWidth < 1337){
                // if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && navigator.userAgent.toLowerCase().indexOf('chrome') == -1) {
                    setTimeout(function(){
                        if(document.querySelector('.inc_pdp_block') != null){
                            if (client == "client"){
                                collection_height= 0
                            } else {  
                                collection_height= 130
                            }
                        }else if(document.querySelector('.inc_af_block') != null){
                            collection_height=  $(".inc_af_block").offset().top
                        }
                        
                    },500)
                // }
            }

        // },500)

        setTimeout(function(){
            var inc_prod_img = document.querySelectorAll('.inc_recommended_products_list_block .inc_product_img_main_img img')
            for(im4=0;im4<inc_prod_img.length;im4++){
                // inc_prod_img[im4].setAttribute('style','left: 0 !important;position: relative;')
            }
        },300)
    }
    // document.querySelector('body').style.overflowY = "hidden";
}
INC.methods.hideSidebar = function() {

    
    var elSidebarOverlay = document.querySelector(".inc_sidebar_overlay_block");
    INC.config.pdpaddedProductList = []
    elSidebarOverlay.style.display = "none";
    var classNames = INC.uiConfig.sidebar.className;
    var getSelectorClassName = INC.methods.getSelectorClassName;
    document.querySelector('html').classList.remove('inc_overlay')
    document.querySelector(getSelectorClassName(classNames, "sidebarModalBlock")).classList.remove("active");
    document.querySelector(getSelectorClassName(classNames, "sidebarModalBlock")).style.display = "none"
    if (document.querySelector('#widget_minishopcart') != null) {
        // document.querySelector('#widget_minishopcart').click()
    }
    if (document.querySelector('.sidebar_outer') != null) {
        document.querySelector('.inc_sidebar_modal_block').style.display = "none"
        document.querySelector('.sidebar_outer').style.display = "none"
        document.querySelector('.sidebar_outer').classList.remove('sidebar_outer_active')
        document.querySelector('.inc_sidebar_modal_block').classList.remove('noRecom');

    }
    if (document.querySelector('#minishopcart_total') != null && document.querySelector('#miniBasketTabProdCount') != null) {
        document.querySelector('#minishopcart_total').innerText = document.querySelector('#miniBasketTabProdCount').innerText.trim()
    }
    document.querySelector('body').setAttribute('style', '')
    if (document.querySelector('.header-bg') != null) {
        document.querySelector('.header-bg').click()
    }
    setTimeout(function(){
        document.querySelector('body').classList.remove('hide_client_modal')
    },500)

    window.location.reload();
}

INC.methods.addProductToSidebarCart = function(findObj, qty, productBlock, client_add_btn, btn_addtocart, product_obj) {
    var dataStore = INC.dataStore;
    var classNames = INC.uiConfig.sidebar.className;
    var getSelectorClassName = this.getSelectorClassName;

    var sbBlock = document.querySelector(getSelectorClassName(classNames, "sidebarModalBlock"));

    function getViewElement(className) {
        if (sbBlock != null) {
            return sbBlock.querySelector(getSelectorClassName(classNames, className));
        }
    }
    var subtotal_activeprice = 0;
    var subtotal_regular = 0;
    if (document.querySelector('.inc_cart_added_product_desc_subtotal_price_block .inc_cart_added_product_desc_subtotal_price_active_text') != null) {
        var subtotal_activeprice = document.querySelector('.inc_cart_added_product_desc_subtotal_price_block .inc_cart_added_product_desc_subtotal_price_active_text').getAttribute('subtotalactiveprice')
    }
    if (document.querySelector('.inc_cart_added_product_desc_subtotal_price_block .inc_cart_added_product_desc_subtotal_price_regular_text') != null) {
        var subtotal_regular = document.querySelector('.inc_cart_added_product_desc_subtotal_price_block .inc_cart_added_product_desc_subtotal_price_regular_text').getAttribute('subtotalregularprice')
    }
    if (subtotal_activeprice == null) {
        subtotal_activeprice = 0
    }
    if (subtotal_regular == null) {
        subtotal_regular = 0
    }
    if (client_add_btn == "client_add_btn") {
        var subtotal_activeprice = 0;
        var subtotal_regular = 0;
    }

    var elHeadersubtotalactivetext = getViewElement("sidebarCartAddedProductDescSubTotalActiveText");
    var elHeadersubtotalregulartext = getViewElement("sidebarCartAddedProductDescSubTotalRegularText");
    var elHeaderItemCountFigureText = getViewElement("sidebarHeaderItemCountFigureText");
    var sidebarHeaderItemCountTitleText = getViewElement("sidebarHeaderItemCountTitleText");
    var sbCartBlock = getViewElement("sidebarCartAddedListBlock");

    var productObj = INC.dataStore.methods().getProductById(findObj, client_add_btn);
    if (Object.keys(productObj).length == 0) {
        if (product_obj != undefined && product_obj != null) {
            productObj = product_obj
        }
    }

    var productBlock = INC.methods.getElementChilds("sidebarCartAddedProductBlock", "sidebar");

    var elImg = productBlock.querySelector(getSelectorClassName(classNames, "sidebarCartAddedProductImg"));
    var elPrc = productBlock.querySelector(getSelectorClassName(classNames, "sidebarCartAddedProductPrc"));
    var elManu = productBlock.querySelector(getSelectorClassName(classNames, "sidebarCartAddedProductDescManuBlock"));
    var elTitleText = productBlock.querySelector(getSelectorClassName(classNames, "sidebarCartAddedProductDescTitleText"));
    var elPriceActiveText = productBlock.querySelector(getSelectorClassName(classNames, "sidebarCartAddedProductDescPriceActiveText"));
    var elPriceRegularText = productBlock.querySelector(getSelectorClassName(classNames, "sidebarCartAddedProductDescPriceRegularText"));
    var elAttsizeText = productBlock.querySelector(getSelectorClassName(classNames, "sidebarCartAddedProductDescAttSizeText"));
    var elAttColorText = productBlock.querySelector(getSelectorClassName(classNames, "sidebarCartAddedProductDescAttColorText"));

    var elImgTag = INC.methods.generateHTMLTags('img', {
        src: productObj.imageURL
    });
    if(onloadpdp == true){
        elImgTag.src = productObj.imageURL
    }
    if (Object.keys(productObj).length > 0) {
        elImgTag.setAttribute('onerror', "this.src='" + INC.config.noimage + "'");
    }
    elImg.appendChild(elImgTag);
    elImgTag.setAttribute('alt', productObj.name)
    if (productObj.MakerName != null){
        if (productObj.MakerName.length > 10){
            elManu.innerText = productObj.MakerName.substring(0, 10) + "...";
        } else {
            elManu.innerText = productObj.MakerName;
        }
    }
    // elManu.innerText = productObj.MakerName;
    elTitleText.innerHTML = productObj.name;

    //current  active prod
    var color = "";
    var size = "";
    if (document.querySelector('.inc_sidebar_modal_block.active') != null) {
        var just_check_prod_block = document.querySelector('.sidebar_outer .inc_product_module_block[data-id="' + productObj.id + '"]')
    } else {
        var just_check_prod_block = document.querySelector('.inc_product_module_block[data-id="' + productObj.id + '"]')
    }
    if (just_check_prod_block != null) {
        if (just_check_prod_block.querySelector('.inc_product_desc_att_size_list_item_img_block.active div') != null) {
            size = just_check_prod_block.querySelector('.inc_product_desc_att_size_list_item_img_block.active div').innerText
        }
        if (just_check_prod_block.querySelector('.inc_product_desc_att_color_list_item_block.active .inc_product_desc_att_color_list_item_img_block') != null) {
            color = just_check_prod_block.querySelector('.inc_product_desc_att_color_list_item_block.active .inc_product_desc_att_color_list_item_img_block').getAttribute('data-color')
        }
    }
    if (color != "") {
        elAttColorText.innerText = color + " | ";
    } else {
        elAttsizeText.innerText = size;
    }


    if (INC.config.usrIdfy == "nonLogin") { 
        // var activePrice = parseFloat(productObj.activePrice).toFixed(2).toString();
        // var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
        if (productObj.MemberPrices !=undefined && productObj.MemberPrc != "") {
            var activePrice = parseFloat(productObj.MemberPrices.split('|')[0].split('=')[1]).toFixed(2).toString();
            var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
        } else {
            if (productObj.worthPrice != null && productObj.worthPricee != ""){
                var activePrice = parseFloat(productObj.worthPrice.split('|')[0].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            }
        }
    } else if (INC.config.usrIdfy == "level0"){
        if (productObj.MemberPrices !=undefined && productObj.MemberPrc != "") {
            var activePrice = parseFloat(productObj.MemberPrices.split('|')[1].split('=')[1]).toFixed(2).toString();
            var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
        } else {
            if (productObj.worthPrice != null && productObj.worthPricee != ""){
                var activePrice = parseFloat(productObj.worthPrice.split('|')[1].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            }
        }
    } else if (INC.config.usrIdfy == "level1"){
        if (productObj.MemberPrices !=undefined && productObj.MemberPrc != ""){
            var activePrice = parseFloat(productObj.MemberPrices.split('|')[2].split('=')[1]).toFixed(2).toString();
            var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
        } else {
            if (productObj.worthPrice != null && productObj.worthPricee != ""){
                var activePrice = parseFloat(productObj.worthPrice.split('|')[2].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            }
        }
    } else if (INC.config.usrIdfy == "level2"){
        if (productObj.MemberPrices !=undefined && productObj.MemberPrc != ""){
            var activePrice = parseFloat(productObj.MemberPrices.split('|')[3].split('=')[1]).toFixed(2).toString();
            var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
        } else {
            if (productObj.worthPrice != null && productObj.worthPricee != ""){
                var activePrice = parseFloat(productObj.worthPrice.split('|')[3].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            }
        }
    } else if (INC.config.usrIdfy == "level3"){
        if (productObj.MemberPrices !=undefined && productObj.MemberPrc != ""){
            var activePrice = parseFloat(productObj.MemberPrices.split('|')[4].split('=')[1]).toFixed(2).toString();
            var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
        } else {
            if (productObj.worthPrice != null && productObj.worthPricee != ""){
                var activePrice = parseFloat(productObj.worthPrice.split('|')[4].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            }
        }
    } else if (INC.config.usrIdfy == "level4"){
       if (productObj.MemberPrices !=undefined && productObj.MemberPrc != ""){
            var activePrice = parseFloat(productObj.MemberPrices.split('|')[5].split('=')[1]).toFixed(2).toString();
            var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
        } else {
            if (productObj.worthPrice != null && productObj.worthPricee != ""){
                var activePrice = parseFloat(productObj.worthPrice.split('|')[5].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            }
        }
    }
    if(readCookie('ivid') == "79b8f4b809c89e702c1238dfcc0b24c72b3d7ba60b"){
        debugger
    }
    
    if (activePrice != regularPrice && regularPrice != "" && regularPrice != null && regularPrice != 0) {
        elPrc.innerText = "¥" + formatter.format(activePrice).replace('￥', '').replace('¥', '');
        elPriceActiveText.parentNode.parentNode.parentNode.classList.add('is_special_price')
        elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol +"<span> 特価 </span>"  +  "¥" +formatter.format(activePrice).replace('￥', '').replace('¥', '')+ "<span> ("+INC.config.prcText+") </span>"
        // elPriceRegularText.innerHTML = INC.clientConfig.regularPricePrefix + INC.clientConfig.currencySymbol + formatter.format(regularPrice) + "<span> ("+INC.config.prcText+") </span>"
    } else {
        elPrc.innerText = "¥" + formatter.format(activePrice).replace('￥', '').replace('¥', '');
        elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol +"<span> 価格 </span>"  +  "¥" +formatter.format(activePrice).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>"
    
    }
    // elPrc.innerText = "¥" + formatter.format(activePrice).replace('￥', '').replace('¥', '');
    // elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>" + "¥" + formatter.format(activePrice).replace('￥', '').replace('¥', '')+ "<span> ("+INC.config.prcText+") </span>"
    //"Price: " + 
    if (client_add_btn == "client_add_btn") {
        if (Object.keys(productObj).length > 0) { 
            if (subtotal_regular == "" && +regularPrice != 0 && regularPrice != "") {
                var subtotalactiveprice = +subtotal_activeprice + (+activePrice * qty)
                var subtotalregukarprice = +subtotal_activeprice + (+regularPrice * qty)
            } else {
                var subtotalactiveprice = +subtotal_activeprice + (+activePrice * qty)
                var subtotalregukarprice = +subtotal_regular + (+regularPrice * qty)
            }
        }
    } else {
        if (subtotal_regular == "" && +regularPrice != 0 && regularPrice != "") {
            var subtotalactiveprice = +subtotal_activeprice + (+activePrice * qty)
            var subtotalregukarprice = +subtotal_activeprice + (+regularPrice * qty)
        } else {
            var subtotalactiveprice = +subtotal_activeprice + (+activePrice * qty)
            var subtotalregukarprice = +subtotal_regular + (+regularPrice * qty)
        }
    }



    var old_qty = 0;
    // if(document.querySelector('.inc_header_item_count_title_text') != null){
    //     var old_qty = document.querySelector('.inc_header_item_count_title_text').innerText.split('Items')[0].split('Item')[0].replace('合計','').replace('点','').replace('(','').trim()
    // }
    if (sbCartBlock != null) {
        // if(Object.keys(productObj).length > 0){
        sbCartBlock.insertBefore(productBlock, sbCartBlock.querySelector(getSelectorClassName(classNames, "sidebarCartAddedProductBlock")));
        // }
    }
    if (elHeaderItemCountFigureText != undefined) {
        elHeaderItemCountFigureText.style.display = "none";
    }

    if (old_qty == "") {
        old_qty = 0
    }
    if (client_add_btn == "client_add_btn") {
        if (document.querySelector('#detail-quantity select') != null) {
            var sel_op = document.querySelector('#detail-quantity select');
            var p_qty = sel_op.options[sel_op.selectedIndex].getAttribute("value");
        } else {
            p_qty = 1
        }
        // sidebarHeaderItemCountTitleText.innerHTML = INC.config.TotalText + " 1 "  + INC.config.NosText;
    } else {
        // sidebarHeaderItemCountTitleText.innerHTML = INC.config.TotalText + " " +  (+old_qty + 1) + INC.config.NosText;

    }
    if (sbCartBlock != null) {
        if (sbCartBlock.querySelectorAll(getSelectorClassName(classNames, "sidebarCartAddedProductBlock")).length > 2) {
            getViewElement("sidebarCartAddedRightBtnBlock").style.visibility = "visible";
            getViewElement("sidebarCartAddedLeftBtnBlock").style.visibility = "visible";
        }
    }
    elHeadersubtotalactivetext.setAttribute('subtotalactiveprice', subtotalactiveprice)
    elHeadersubtotalregulartext.setAttribute('subtotalregularprice', subtotalregukarprice)
    elHeadersubtotalactivetext.parentNode.parentNode.parentNode.classList.remove('inc_special_price')
    if (+subtotalactiveprice != null && (+subtotalactiveprice < +subtotalregukarprice)) {
        if (Object.keys(productObj).length > 0) {
            elHeadersubtotalactivetext.parentNode.parentNode.parentNode.classList.add('inc_special_price')
            elHeadersubtotalactivetext.innerHTML = "<span>Now</span>" + INC.clientConfig.currencySymbol +"<span> 特価 </span>" + "¥" + formatter.format(subtotalactiveprice).replace('￥', '').replace('¥', '')+ "<span> ("+INC.config.prcText+") </span>"
            elHeadersubtotalregulartext.innerHTML = "<span>Was</span>" + INC.clientConfig.currencySymbol +"<span> 特価 </span>"+  "¥" +formatter.format(subtotalregukarprice).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>"
        }
        // elHeadersubtotalactivetext.style.color="#ee1c31"
    } else {
        // elHeadersubtotalactivetext.style.color="#000"
        if (Object.keys(productObj).length > 0) {
            elHeadersubtotalactivetext.innerHTML = INC.clientConfig.currencySymbol + "<span> 価格 </span>" +"¥" +formatter.format(subtotalactiveprice).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>"
        }
        elHeadersubtotalregulartext.innerHTML = ""
    }
    if (window.innerWidth > 767) {
        if (document.querySelectorAll('.inc_sidebar_cart_added_block .inc_cart_added_product_block').length > 6) {
            document.querySelector('.inc_sidebar_cart_added_block').classList.add('flex-start')
        }
    } else {
        if (document.querySelectorAll('.inc_sidebar_cart_added_block .inc_cart_added_product_block').length > 3) {
            document.querySelector('.inc_sidebar_cart_added_block').classList.add('flex-start')
        }
    }
    if (document.querySelectorAll('.inc_sidebar_cart_added_block .inc_cart_added_product_block').length > 7) {
        document.querySelector('.inc_sidebar_cart_added_block').classList.add('more_than_seven')
    }

    if (client_add_btn == "client_add_btn") {
        document.querySelector('.inc_cart_added_product_prc').innerText = ""
    }
}
INC.methods.createAMBlock = function(ticket) {
    
    document.querySelector('body').classList.add('inc_bundles');
    if (INC.dataStore.dataStoreObj.undefined == undefined) {
        var classNames = INC.uiConfig.am.className;
        var amBlock = this.getElementChilds("afModalBlock", "am");
        var getSelectorClassName = INC.methods.getSelectorClassName;

        function getViewElement(className) {
            return amBlock.querySelector(getSelectorClassName(classNames, className));
        }
        getViewElement("afProductListBlock").innerHTML = "";

        var elAmTitleText = getViewElement("afModalTitleText");

        var productListObj = INC.dataStore.dataStoreObj;
        var productListArray = Object.keys(productListObj);

        var amProductListBlock = getViewElement("afProductListBlock");

        var productIds = [];

        Array.prototype.forEach.call(document.querySelectorAll('.thumimage img'), function(elProductCode) {
            var cartId = elProductCode.src.split('/')[elProductCode.src.split('/').length-1]
            productIds.push(cartId.split('.')[0]);
        });
        if (productIds.length == 0) {
            Array.prototype.forEach.call(document.querySelectorAll('.thumimage img'), function(elProductCode) {
                var cartId = elProductCode.src.split('/')[elProductCode.src.split('/').length-1]
                productIds.push(cartId.split('.')[0]);
            });
        }
        var bundleProductsArray = INC.dataStore.bundleProductsArray;

        // productListArray.forEach(function (mainProductId) {
        bundleProductsArray.forEach(function(mainProductId) {
            if (productIds.indexOf(mainProductId) == -1) {
                if (window.innerWidth < 819) {
                    elAmTitleText.innerHTML = INC.config.BeforeYouChecktextMob;
                } else {
                    elAmTitleText.innerText = INC.config.BeforeYouChecktext;
                }
                var firstProductObjByMainId = INC.dataStore.methods().getFirstProductObjByMainId({
                    mainId: mainProductId
                });
                amProductListBlock.appendChild(INC.methods.createProductModuleBlock(firstProductObjByMainId.id, "am", false, amBlock));
            }
        });

        var amProductBlocks = amBlock.querySelectorAll(getSelectorClassName(classNames, "productBlock"));
        Array.prototype.forEach.call(amProductBlocks, function(productBlock) {
            productBlock.querySelector(getSelectorClassName(classNames, "productAddBlock")).addEventListener("click", function(e) {
                var productBlockNode = this.parentNode.parentNode.parentNode;
                if (this.parentNode.parentNode.className == "inc_product_desc_block") {
                    productBlockNode = this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
                }
                var sku = productBlockNode.getAttribute('data-sku');
                var findObj = new INC.classes.FindObj({
                    id: sku
                });
                var qty = productBlockNode.querySelector('.inc_product_modal_block .inc_product_desc_qty_block input').value

                var add_btn = productBlockNode.querySelector('.inc_product_desc_add_text')
                var add_btn_click = productBlockNode.querySelector(getSelectorClassName(classNames, "productAddText"));
                var add_prod_im = productBlockNode.querySelectorAll(getSelectorClassName(classNames, "productAddImg"));

                if (productBlockNode.querySelector('.img_color_swatch') != null) {
                    if (productBlockNode.querySelector(getSelectorClassName(classNames, "productModalBlock")).querySelector('.inc_product_desc_att_color_list_item_block.active') != null) {

                        if (INC.config.disablebtn == true) {
                            if (document.querySelector('.inc_product_modal_block.active') != null) {
                                document.querySelector('.inc_product_modal_block.active .inc_product_header_img').click()
                                productBlockNode.classList.add('active');
                                productBlockNode.querySelector('.inc_product_desc_add_text').innerText = INC.config.addingText
                            }
                            INC.config.disablebtn = false;
                            INC.methods.addProductToCart(findObj, qty, "am", productBlockNode, add_btn_click, add_prod_im, add_btn);
                        }
                    } else {
                        productBlockNode.querySelector('.img_color_swatch').click()
                    }
                } else if (productBlockNode.querySelector(getSelectorClassName(classNames, "productModalBlock")).querySelector('.inc_product_desc_att_size_list_item_img_block.avail') != null) {
                    if (productBlockNode.querySelector(getSelectorClassName(classNames, "productModalBlock")).querySelector('.inc_product_desc_att_size_list_item_img_block.avail.active') != null) {

                        if (INC.config.disablebtn == true) {
                            if (document.querySelector('.inc_product_modal_block.active') != null) {
                                document.querySelector('.inc_product_modal_block.active .inc_product_header_img').click()
                                productBlockNode.classList.add('active');
                                productBlockNode.querySelector('.inc_product_desc_add_text').innerText = INC.config.addingText
                            }
                            INC.config.disablebtn = false;
                            INC.methods.addProductToCart(findObj, qty, "am", productBlockNode, add_btn_click, add_prod_im, add_btn);
                        }
                    }
                } else {

                    if (INC.config.disablebtn == true) {
                        if (document.querySelector('.inc_product_modal_block.active') != null) {
                            document.querySelector('.inc_product_modal_block.active .inc_product_header_img').click()
                            productBlockNode.classList.add('active');
                            productBlockNode.querySelector('.inc_product_desc_add_text').innerText = INC.config.addingText
                        }
                        INC.config.disablebtn = false;
                        INC.methods.addProductToCart(findObj, qty, "am", productBlockNode, add_btn_click, add_prod_im, add_btn);
                    }
                }
            });
        });
        //s-cartpush
        if (amProductListBlock.querySelector('.inc_product_module_block') != null) {
            var elAMPosition2 = document.querySelector('.primary-secondary-container #primary');
            var elAMPosition = document.querySelector('.shopping-cart');
            var elAMPosition1 = document.querySelector('.s-cartpush');
            var elmobpos = document.querySelector('#cartContainer')
            INC.methods.clear();
            if (elAMPosition2 != null) {
                elAMPosition2.appendChild(amBlock)
            } else if (elAMPosition != null) {
                var cartpageel = elAMPosition.nextElementSibling
                cartpageel.parentNode.insertBefore(amBlock, cartpageel)
            } else if (elAMPosition1 != null) {
                var cartpageel = elAMPosition1.nextElementSibling
                cartpageel.parentNode.insertBefore(amBlock, cartpageel)
            } else if (elmobpos != null) {
                var cartpageel = elmobpos.nextElementSibling
                cartpageel.parentNode.insertBefore(amBlock, cartpageel)
            } else {
                var el = document.querySelector('.page-main .page-inner')
                el.insertBefore(amBlock, el.childNodes[5])
            }
            var prd_length = 3
            if (window.innerWidth > 820) {
                var prd_length = 4
            }

            amBlock.querySelector(getSelectorClassName(classNames, "afRightBtnBlock")).style.visibility = "hidden";
            amBlock.querySelector(getSelectorClassName(classNames, "afLeftBtnBlock")).style.visibility = "hidden";

            if (amBlock.parentNode != null) {
                // amBlock.querySelector(getSelectorClassName(classNames, "afLeftBtnImg")).setAttribute('title','Scroll left')
                // amBlock.querySelector(getSelectorClassName(classNames, "afRightBtnImg")).setAttribute('title','Scroll right')

                var productBlocks = amProductListBlock.querySelectorAll(getSelectorClassName(classNames, "productModuleBlock"));
                var sliderBtnCounter = 0;

                if (productBlocks.length > (prd_length + 1)) {
                    amBlock.querySelector(getSelectorClassName(classNames, "afRightBtnBlock")).style.visibility = "visible";
                    amBlock.querySelector(getSelectorClassName(classNames, "afLeftBtnBlock")).style.visibility = "visible";
                    amBlock.querySelector(getSelectorClassName(classNames, "afLeftBtnBlock")).setAttribute("style", "pointer-events: none;opacity:0.5");

                    amBlock.querySelector(getSelectorClassName(classNames, "afRightBtnImg")).style.visibility = "visible";
                    amBlock.querySelector(getSelectorClassName(classNames, "afLeftBtnImg")).style.visibility = "visible";
                    amBlock.querySelector(getSelectorClassName(classNames, "afLeftBtnImg")).setAttribute("style", "pointer-events: none;opacity:0.5");
                }

                amBlock.querySelector(getSelectorClassName(classNames, "afRightBtnBlock")).addEventListener("click", function() {
                    sliderBtnCounter++;
                    if (sliderBtnCounter >= productBlocks.length - (prd_length + 1)) {
                        sliderBtnCounter--;
                    }
                    var all_p_length = document.querySelectorAll('.inc_af_product-list_block .inc_product_module_block').length
                    // productBlocks[sliderBtnCounter - 1].style.display = "none";
                    var cc_ount = 2;
                    if (window.innerWidth > 991) {
                        cc_ount = 4
                        if (window.innerWidth > 1449) {
                            cc_ount = 4
                        }
                    }
                    var wid_sld = 215
                    if (window.innerWidth > 1590) {
                        var wid_sld = 215
                    }
                    if (+INC.clientConfig.slidevalue + +cc_ount < all_p_length) {
                        amBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "afLeftBtnBlock")).setAttribute("style", "pointer-events: auto;opacity:1");
                        amBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "afLeftBtnImg")).setAttribute("style", "pointer-events: auto;opacity:1");
                        INC.clientConfig.slidevalue++
                        INC.clientConfig.offset = (parseInt(INC.clientConfig.offset) - wid_sld) + 'px';
                        var menu = amBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "afProductListBlock"));
                        // menu.style['transitionDuration'] = '0.5s'
                        // menu.style['marginLeft'] = INC.clientConfig.offset
                        menu.setAttribute('style', 'margin-left:' + INC.clientConfig.offset + ';transition-duration:0.5s;-webkit-transition-duration:0.5s;-moz-transition-duration:0.5s;-ms-transition-duration:0.5s;-o-transition-duration:0.5s;')
                    }

                    if (+INC.clientConfig.slidevalue + +cc_ount == all_p_length) {
                        amBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "afRightBtnBlock")).setAttribute("style", "pointer-events: none;opacity:0.5");
                        amBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "afRightBtnImg")).setAttribute("style", "pointer-events: none;opacity:0.5");
                    }
                });

                amBlock.querySelector(getSelectorClassName(classNames, "afLeftBtnBlock")).addEventListener("click", function() {
                    sliderBtnCounter--;
                    if (sliderBtnCounter == -1) sliderBtnCounter = 0;
                    // productBlocks[sliderBtnCounter].style.display = "flex";
                    var all_p_length = document.querySelectorAll('.inc_af_product-list_block .inc_product_module_block').length
                    var wid_sld = 215
                    if (window.innerWidth > 1590) {
                        var wid_sld = 215
                    }
                    if (INC.clientConfig.slidevalue == -1) INC.clientConfig.slidevalue = 0;
                    if (INC.clientConfig.slidevalue > 0) {
                        amBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "afRightBtnBlock")).setAttribute("style", "pointer-events: auto;opacity:1");
                        amBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "afRightBtnImg")).setAttribute("style", "pointer-events: auto;opacity:1");
                        INC.clientConfig.slidevalue--
                        INC.clientConfig.offset = (parseInt(INC.clientConfig.offset) + wid_sld) + 'px';
                        var menu = amBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "afProductListBlock"));
                        // menu.style['transitionDuration'] = '0.5s'
                        // menu.style['marginLeft'] = INC.clientConfig.offset
                        menu.setAttribute('style', 'margin-left:' + INC.clientConfig.offset + ';transition-duration:0.5s;-webkit-transition-duration:0.5s;-moz-transition-duration:0.5s;-ms-transition-duration:0.5s;-o-transition-duration:0.5s;')
                    }
                    if (INC.clientConfig.slidevalue == 0) {
                        amBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "afLeftBtnBlock")).setAttribute("style", "pointer-events: none;opacity:0.5");
                        amBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "afLeftBtnImg")).setAttribute("style", "pointer-events: none;opacity:0.5");
                    }
                });
                
                setTimeout(function() {
                    if (document.querySelector('.inc_af_title_block') != null) {
                        document.querySelector('.inc_af_title_block').setAttribute('role', "contentinfo")
                    }
                    setTimeout(function() {
                        onloadpdp = true
                        onloadpdp_delete= true
                        // _isVisible._init({
                        //     classSelector: ".inc_pdp_block img[data-src], .inc_pdp_block source[data-src], .inc_sidebar_modal_block img[data-src], .inc_sidebar_modal_block source[data-src], .inc_af_block img[data-src], .inc_af_block source[data-src]",
                        //     index: 0
                        // });
                    }, 1000)
                    
                }, 100)
            }
        }
    }
}
INC.methods.createPDPBlock = function(sidebar) {
    if (document.querySelector('.aio-widget-frame.acquire_w_ui_status_max') != null) {
        document.querySelector('.aio-widget-frame.acquire_w_ui_status_max').classList.add('acquire_w_ui_status_min')
        document.querySelector('.aio-widget-frame.acquire_w_ui_status_max').classList.remove('acquire_w_ui_status_max')
    }
    document.querySelector('body').classList.add('inc_bundles');
    var empty_sidebarflag = false
    if (INC.dataStore.dataStoreObj[INC.config.Product_id] != undefined) {
        if (INC.dataStore.dataStoreObj[INC.config.Product_id][INC.config.Product_id] != undefined) {
            if (INC.dataStore.dataStoreObj[INC.config.Product_id][INC.config.Product_id].bundleId == "12345679") {
                empty_sidebarflag = true
            }
        }
    }
   
    if (sidebar != "sidebar") {
        if (INC.dataStore.dataStoreObj.undefined != undefined || empty_sidebarflag == false) {
            var classNames = INC.uiConfig.pdp.className;
            var pdpBlock = this.getElementChilds("pdpModalBlock", "pdp");
            pdpBlock.style.display="none";

            var getSelectorClassName = INC.methods.getSelectorClassName;
            Array.prototype.forEach.call(pdpBlock.querySelectorAll(getSelectorClassName(classNames, "productBlock")), function(block) {
                block.parentNode.removeChild(block);
            });

            function getViewElement(className) {
                return pdpBlock.querySelector(getSelectorClassName(classNames, className));
            }

            var modalTitle = getViewElement("pdpModalTitleText");
            var hTag = document.createElement('h2')
            hTag.innerText = INC.config.FBTTitle;
            modalTitle.appendChild(hTag);


            var productListObj = INC.dataStore.dataStoreObj;
            var pdpProductId = INC.dataStore.methods().getFirstProductObjByMainId({
                mainId: INC.dataStore.pdpProductId
            }).id;

           
            var mainProductBlock = this.createProductModuleBlock(pdpProductId, "pdp", false, pdpBlock);
            var bundleProductsArray = INC.dataStore.bundleProductsArray;
            var elPdpMainProductBlock = getViewElement("pdpModalMainProductBlock");
            var pdpBundleProductListItemsBlock = getViewElement("pdpBundleProductListItemsBlock");
            var elBundleCartAddedBlock = getViewElement("pdpBundleCartAddedBlock");
            var elBundleCartTitleBlock = getViewElement("pdpBundleCartTitleBlock");
            var elBundleCartSummaryViewBlock = getViewElement("pdpBundleCartSummaryViewBlock");
            pdpBundleProductListItemsBlock.innerHTML = "";
            var pdpmainid = INC.dataStore.methods().getFirstProductObjByMainId({
                mainId: INC.dataStore.pdpProductId
            })
            var productListItemBlock1 = this.createProductListItemBlock(pdpmainid, "pdp");
            pdpBundleProductListItemsBlock.appendChild(productListItemBlock1);

            elPdpMainProductBlock.innerHTML = "";
            var mainprodtitletext = document.createElement('div')
            mainprodtitletext.classList.add('mainprodtitletext')
            mainprodtitletext.innerText = "メインアイテム"
            mainprodtitletext.style.display = "none"
            elPdpMainProductBlock.appendChild(mainprodtitletext)
            elPdpMainProductBlock.appendChild(mainProductBlock);
            var mainProductHeader = getViewElement("productHeaderTitleText");
            mainProductHeader.innerText = "Main Product".toUpperCase();
            var elAttColorListBlock = getViewElement("productAttColorListBlock");

            var pdpBundleProductListMainBlock = getViewElement("pdpBundleProductListMainBlock");
            pdpBundleProductListMainBlock.innerHTML = "";


            bundleProductsArray.unshift(INC.dataStore.pdpProductId)

            var productVisibleCount = (bundleProductsArray.length > 6) ? 6 : bundleProductsArray.length;
           

            for (var i = 0; i < productVisibleCount; i++) {
                var firstProductObjByMainId = INC.dataStore.methods().getFirstProductObjByMainId({
                    mainId: bundleProductsArray[i]
                });
                var productBlock = this.createProductModuleBlock(firstProductObjByMainId.id, "pdp", true, pdpBlock);
                
                pdpBundleProductListMainBlock.appendChild(productBlock);

                var productListItemBlock = this.createProductListItemBlock(firstProductObjByMainId, "pdp");
                pdpBundleProductListItemsBlock.appendChild(productListItemBlock);
                var item_title_head = productBlock.querySelector('.inc_product_desc_title_text_header')
                item_title_head.innerHTML = "Current item"
                // item_title_head.style.textTransform = "none"
            }
            var header = getViewElement("pdpBundleProductHeaderText");
            if (header != null) {
                header.innerText = "一緒に購入されるアイテム"
                // header.style.display = "none"
                // header.style.textTransform = "none"
            }
            // if (INC.config.deviceType == "mobile") 
            // pdpBlock.querySelector(getSelectorClassName(classNames, "pdpBundleProductListItemBlock")).classList.add("active");
            pdpBundleProductListMainBlock.querySelector(getSelectorClassName(classNames, "productModuleBlock")).style.display = "block";

            var pdpBundleCartBlock = this.createPDPBundleCartBlock();
            var rpdpBundleCartBlock = pdpBlock.querySelector(getSelectorClassName(classNames, "pdpModalBundleCartBlock"));
            rpdpBundleCartBlock.parentNode.removeChild(rpdpBundleCartBlock);
            pdpBlock.querySelector(getSelectorClassName(classNames, "pdpModalBundleBlock")).appendChild(pdpBundleCartBlock);


            INC.methods.clear();


            var pdpBlockSibling = document.querySelector('#str_contents #recommendArea')
            var pdpBlockSibling1 = document.querySelector('#relGoodsArea')
            var pdpBlockSibling2 = document.querySelector('.coupon_campaign_area')
            var pdpBlockSibling3 = document.querySelector('#form2cart .favorite_area')
            //productDetails
            if (pdpBlockSibling != null) {
                pdpBlockSibling.parentNode.insertBefore(pdpBlock, pdpBlockSibling)
            } else if (pdpBlockSibling1 != null) {
                pdpBlockSibling1.parentNode.insertBefore(pdpBlock, pdpBlockSibling1)
            } else if (pdpBlockSibling2 != null) {
                pdpBlockSibling2.parentNode.insertBefore(pdpBlock, pdpBlockSibling2)
            } else if (pdpBlockSibling3 != null) {
                pdpBlockSibling3.parentNode.insertBefore(pdpBlock, pdpBlockSibling3)
            }

            var elProductAddBlock = document.querySelectorAll(getSelectorClassName(classNames, "productAddBlock"));



            var productBlocks = getViewElement("pdpBundleProductListBlock").querySelectorAll(getSelectorClassName(classNames, "productModuleBlock"));
            var inc_close_moreprod = getViewElement("pdpBundleProductListItemsWrapperHeaderclose")

            inc_close_moreprod.addEventListener('click', function() {
                document.querySelector('html').classList.remove('inc_overlay');
                document.querySelector('.inc_pdp_bundle_product_list_items_show_more_less_block').click()
                document.querySelector('html').classList.remove('inc_overlay');
            })

            getViewElement("pdpBundleProductLeftBtnBlock").setAttribute("style", "pointer-events: none;opacity:0.5");
            // if (isIE()){
            getViewElement("pdpBundleProductLeftBtnImg").setAttribute("style", "opacity:0.5");
            var sliderBtnCounter = 0;
            var lengthCount = productBlocks.length + 1
            if (window.innerWidth < 819) {
                var prd_length = 1
            } else {
                var prd_length = 4
            }
            if (productBlocks.length > prd_length) {
                getViewElement("pdpBundleProductRightBtnBlock").addEventListener("click", function() {
                    var prod_c = 1;
                    var width_prod = 215;
                    if (window.innerWidth > 819) {
                        prod_c = 4
                        if (isIE()){
                            width_prod = 173;
                        } else {
                            width_prod =173;
                        }
                    }

                    if (INC.clientConfig.slidevalue + prod_c < productBlocks.length) {
                        getViewElement("pdpBundleProductLeftBtnBlock").setAttribute("style", "pointer-events: auto;opacity:1");
                        getViewElement("pdpBundleProductLeftBtnImg").setAttribute("style", "opacity:1");
                        INC.clientConfig.slidevalue++
                        INC.clientConfig.offset = (parseInt(INC.clientConfig.offset) - width_prod) + 'px';
                        var menu = getViewElement("pdpBundleProductListMainBlock");
                        menu.setAttribute('style', 'margin-left:' + INC.clientConfig.offset + ';transition-duration:0.5s;-webkit-transition-duration:0.5s;-moz-transition-duration:0.5s;-ms-transition-duration:0.5s;-o-transition-duration:0.5s;')
                    }
                    if (INC.clientConfig.slidevalue + prod_c == productBlocks.length) {
                        getViewElement("pdpBundleProductRightBtnBlock").setAttribute("style", "pointer-events: none;opacity:0.5");
                        getViewElement("pdpBundleProductRightBtnImg").setAttribute("style", "opacity:0.5");
                    }
                    sliderBtnCounter++;
                    if (sliderBtnCounter > lengthCount - 3) {
                        sliderBtnCounter--;
                    }
                    
                });


                getViewElement("pdpBundleProductLeftBtnBlock").addEventListener("click", function() {
                    var prod_c = 1;
                    var width_prod = 215;
                    if (window.innerWidth > 819) {
                        prod_c = 4
                        if (isIE()){
                            width_prod = 173;
                        } else {
                            width_prod =173;
                        }
                    }
                    if (INC.clientConfig.slidevalue == -1) INC.clientConfig.slidevalue = 0;
                    if (INC.clientConfig.slidevalue > 0) {
                        getViewElement("pdpBundleProductRightBtnBlock").setAttribute("style", "pointer-events: auto;opacity:1");
                        getViewElement("pdpBundleProductRightBtnImg").setAttribute("style", "opacity:1");
                        INC.clientConfig.slidevalue--
                        INC.clientConfig.offset = (parseInt(INC.clientConfig.offset) + width_prod) + 'px';
                        var menu = getViewElement("pdpBundleProductListMainBlock");
                        menu.setAttribute('style', 'margin-left:' + INC.clientConfig.offset + ';transition-duration:0.5s;-webkit-transition-duration:0.5s;-moz-transition-duration:0.5s;-ms-transition-duration:0.5s;-o-transition-duration:0.5s;')
                    }
                    if (INC.clientConfig.slidevalue == 0) {
                        getViewElement("pdpBundleProductLeftBtnBlock").setAttribute("style", "pointer-events: none;opacity:0.5");
                        getViewElement("pdpBundleProductLeftBtnImg").setAttribute("style", "opacity:0.5");
                    }
                    sliderBtnCounter--;
                    if (sliderBtnCounter == -1) sliderBtnCounter = 0;
                });
            }

            if (!(productBlocks.length > prd_length)) {
                getViewElement("pdpBundleProductRightBtnBlock").style.visibility = "hidden";
                getViewElement("pdpBundleProductLeftBtnBlock").style.visibility = "hidden";
            }
            var client_var = "" 
            var sel_variant = ""
            var sel_varianttext = ""

            setTimeout(function() {
                var elBundleCartAddedBlock = getViewElement("pdpBundleCartAddedBlock");
                var elBundleCartSummaryViewBtnCount = getViewElement("pdpBundleCartSummaryViewBtnCount");
                var elBundleCartPriceRegularText = getViewElement("pdpBundleCartSummaryPriceRegularText");
                var elBundleCartPriceActiveText = getViewElement("pdpBundleCartSummaryPriceActiveText");
                var elBundleCartPriceActiveTextMsg = getViewElement("pdpBundleCartSummaryPriceActiveTextMsg");
                var elBundleCartTitleTextcount = getViewElement("pdpBundleCartTitleText");
                var elBundleCartTitleTextblock = getViewElement("pdpBundleCartTitleTextBlock");
                var elBundleCartTitleText = getViewElement("pdpBundleCartSummaryTitleText");
                var elBundleCartAddBtnText = getViewElement("pdpBundleCartSummaryAddBtnText");
                // elBundleCartAddBtnText.style.textTransform = "none"
                var total_qty_item = 0;
                var totalActivePrice = 0;
                // if (total_qty_item == 1){
                    if (window.innerWidth < 820){
                        elBundleCartTitleText.innerHTML = "<span>"+INC.config.TotalText+"</span>"+total_qty_item+"<span>"+"点"+"</span>" 
                    } else {
                        elBundleCartTitleText.innerHTML = "<span>"+INC.config.TotalText+"</span>"+"("+total_qty_item+"<span>"+"点"+")"+"</span>" 
                    }
                   elBundleCartAddBtnText.innerText = INC.config.AddToCartText 
                   elBundleCartAddBtnText.parentNode.parentNode.parentNode.classList.add('cartEmpty');
                   elBundleCartPriceActiveText.innerHTML =  INC.clientConfig.currencySymbol + "¥" +  formatter.format(totalActivePrice).replace('￥', '').replace('¥', '')+ "<span> ("+INC.config.prcText+") </span>";
                // }
            }, 20);
            setTimeout(function(){
                for (var i = 0; i <15; i++) {
                    if (typeof (elProductAddBlock[i]) != "undefined" && i % 2 != 0){
                        if (window.innerWidth < 820){
                            if (i == 1 || i == 3 || i==5 || i==7) {
                                var productBlockNode = elProductAddBlock[i].parentNode.parentNode.parentNode.parentNode.parentNode;
                                var module_block=elProductAddBlock[i].parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
                                var flag_check = INC.methods.checkVariantSelection(module_block)
                                if(flag_check == 1){
                                    elProductAddBlock[i].click();
                                }
                            }
                        } else {
                            if (i == 1 || i == 3 || i==5 || i==7 || i==9) {
                                
                                var productBlockNode = elProductAddBlock[i].parentNode.parentNode.parentNode.parentNode.parentNode;
                                var module_block=elProductAddBlock[i].parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
                                var flag_check = INC.methods.checkVariantSelection(module_block)
                                if(flag_check == 1){
                                    elProductAddBlock[i].click();
                                }
                            }
                        }
                    } 
                }
                if(document.querySelector('.inc_pdp_block') != null){
                    if (document.querySelector(".appeal_message") != null){ 
                        if (document.querySelector(".appeal_message").innerText.trim() == "在庫切れ" || document.querySelector(".appeal_message").innerText == "在庫なし"){
                            document.querySelector('.inc_pdp_block').style.display = "none"
                        } else {
                            document.querySelector('.inc_pdp_block').style.display = "block"
                        }
                    } else {
                        if (document.querySelector('.itemNoCart') != null){
                            if (document.querySelector('.itemNoCart').innerHTML == "<p>こちらの商品は<br>現在お取り扱いがございません</p>"){
                                document.querySelector('.inc_pdp_block').style.display = "none"
                            } else {
                                document.querySelector('.inc_pdp_block').style.display = "block"
                            }    
                        }
                    }
                }
            },50)
                
            setTimeout(function() {
                onloadpdp = true
                onloadpdp_delete= true
                var elselectsie=document.querySelectorAll('form select')
                for(et_=0;et_<elselectsie.length;et_++){
                    if(elselectsie[et_] != null){
                        if (document.querySelector('select.attChoice') == null){
                            selectautoselction(elselectsie[et_],'nonatt')
                        }else{
                            selectautoselction(elselectsie[et_])
                        }
                    }
                }
                var elsizeauto=document.querySelectorAll('#wear-slct-size label')
                for(es=0;es<elsizeauto.length;es++){
                    elsizeauto[es].addEventListener('click',function(e){
                        var elm = e.currentTarget
                        setTimeout(function(){
                            selectonclickoption(elm,'label')
                        },3000)
                    })
                }
                if (document.querySelector('#wear-clr-list li') != null){
                    var elsizeauto1=document.querySelectorAll('#wear-clr-list li')
                }else{
                    var elsizeauto1=document.querySelectorAll('#wear-clr-list')
                }
                for(es1=0;es1<elsizeauto1.length;es1++){
                    elsizeauto1[es1].addEventListener('click',function(e){
                        var elm = e.currentTarget
                        setTimeout(function(){
                            selectonclickoption(elm)
                        },3000)
                    })
                }
                var elselectsie=document.querySelectorAll('form select')
                for(et=0;et<elselectsie.length;et++){
                    if(elselectsie[et] != null){
                        if (document.querySelector('select.attChoice') == null){
                            elselectsie[et].addEventListener('change',function(e){
                                var elm = e.currentTarget
                                setTimeout(function(){
                                    selectautoselction(this,'nonatt')
                                },2000)
                            })
                        }else{
                            elselectsie[et].addEventListener('change',function(e){
                                var elm = e.currentTarget
                                setTimeout(function(){
                                    selectautoselction(this)
                                },2000)
                            })
                        }
                    }
                }
            }, 1000)
            setTimeout(function(){
                if (document.querySelector('#wear-clr-list li .is-active') != null){
                    var elsizeauto1=document.querySelector('#wear-clr-list li .is-active')
                }else{
                    var elsizeauto1=document.querySelector('#wear-clr-list .is-active')
                }
                
                if(elsizeauto1 == null){
                    if (document.querySelector('#wear-clr-list li') != null){
                        var elsize_=document.querySelectorAll('#wear-clr-list li')
                    }else{
                        var elsize_=document.querySelectorAll('#wear-clr-list')
                    }
                    for(es1_=0;es1_<elsize_.length;es1_++){
                        if(elsize_[es1_].querySelector('.cart_thumbnail_frame_select') != null){
                            if(elsize_[es1_].querySelector('.cart_thumbnail_frame_select').style.opacity != 0){
                                elsizeauto1 = elsize_[es1_].querySelector('a')
                                break;
                            }
                        }
                    }
                }

                //document.querySelector('#wear-clr-list li .cart_thumbnail_frame_select').style.opacity
                var elsizeauto=document.querySelector('#wear-slct-size .is-checked')
                if(elsizeauto1 != null){
                    var elms1=elsizeauto1.parentNode
                    if(elms1 != null){
                        selectonclickoption(elms1)
                    }
                }
                var zerEl = document.querySelector('#wear-slct-size input[type="radio"]:checked + .label-radio')
                if(zerEl != null){
                    selectonclickoption(zerEl,'label')
                }
                if(elsizeauto != null){
                    var elms=elsizeauto.parentNode
                    if(elms != null){
                        selectonclickoption(elms,'label')
                    }
                }
                
                if(elsizeauto1 == null || elsizeauto == null){
                    setTimeout(function(){
                        if (document.querySelector('#wear-clr-list li .is-active') != null){
                            var elsizeauto1=document.querySelector('#wear-clr-list li .is-active')
                        }else{
                            var elsizeauto1=document.querySelector('#wear-clr-list .is-active')
                        }
                        
                        if(elsizeauto1 == null){
                            if (document.querySelector('#wear-clr-list li') != null){
                                var elsize_=document.querySelectorAll('#wear-clr-list li')
                            }else{
                                var elsize_=document.querySelectorAll('#wear-clr-list')
                            }
                            for(es1_=0;es1_<elsize_.length;es1_++){
                                if(elsize_[es1_].querySelector('.cart_thumbnail_frame_select') != null){
                                    if(elsize_[es1_].querySelector('.cart_thumbnail_frame_select').style.opacity != 0){
                                        elsizeauto1 = elsize_[es1_].querySelector('a')
                                        break;
                                    }
                                }
                            }
                        }
                        var checkclients = true;
                        //document.querySelector('#wear-clr-list li .cart_thumbnail_frame_select').style.opacity
                        var elsizeauto=document.querySelector('#wear-slct-size .is-checked')
                        if(elsizeauto1 != null){
                            var elms1=elsizeauto1.parentNode
                            if(elms1 != null){
                                selectonclickoption(elms1)
                            }
                        }else{
                            checkclients = false;
                        }
                        if(elsizeauto != null){
                            var elms=elsizeauto.parentNode
                            if(elms != null){
                                selectonclickoption(elms,'label')
                            }
                        }else{
                            checkclients = false;
                        }
                        if(checkclients == false){
                            setTimeout(function(){
                                if (document.querySelector('#wear-clr-list li .is-active') != null){
                                    var elsizeauto1=document.querySelector('#wear-clr-list li .is-active')
                                }else{
                                    var elsizeauto1=document.querySelector('#wear-clr-list .is-active')
                                }
                                
                                if(elsizeauto1 == null){
                                    if (document.querySelector('#wear-clr-list li') != null){
                                        var elsize_=document.querySelectorAll('#wear-clr-list li')
                                    }else{
                                        var elsize_=document.querySelectorAll('#wear-clr-list')
                                    }
                                    for(es1_=0;es1_<elsize_.length;es1_++){
                                        if(elsize_[es1_].querySelector('.cart_thumbnail_frame_select') != null){
                                            if(elsize_[es1_].querySelector('.cart_thumbnail_frame_select').style.opacity != 0){
                                                elsizeauto1 = elsize_[es1_].querySelector('a')
                                                break;
                                            }
                                        }
                                    }
                                }
                                var elsizeauto=document.querySelector('#wear-slct-size .is-checked')
                                if(elsizeauto1 != null){
                                    var elms1=elsizeauto1.parentNode
                                    if(elms1 != null){
                                        selectonclickoption(elms1)
                                    }
                                }
                                if(elsizeauto != null){
                                    var elms=elsizeauto.parentNode
                                    if(elms != null){
                                        selectonclickoption(elms,'label')
                                    }
                                }
                            },3000)
                        }
                    },3000)
                }
            },3000)
        }

        this.trackingEvents("productPageVisit", { "product_id": INC.dataStore.pdpProductId });
    }

    if (sidebar == "sidebar") {
        // this.createSidebarBlock();
    }
    // this.trackingEvents("productPageVisit", { "product_id": INC.dataStore.pdpProductId });
    // this.trackingEvents("productPageVisit", { "product_id": INC.dataStore.pdpProductId });
    // this.trackingEvents("catalogProductView", { "product_id": INC.dataStore.pdpProductId });
  
}
function selectonclickoption(elment,labelt){
    INC.config.scroll = false;
    if(labelt == 'label'){
        if (document.querySelector('#wear-slct-size .label-radio.is-checked') != null){
            var size = document.querySelectorAll('#wear-slct-size .label-radio');
            for (z=0; z<size.length; z++){
                if(size[z].classList.contains('is-checked') == true){
                    var colortext = size[z].textContent.trim();
                }
            }
        }else if(elment != null){
            var colortext = elment.textContent.trim();
        }
    }else{
        if (document.querySelector('#wear-slct-clr')!=null){
            if (document.querySelectorAll('#wear-clr-list li') != null){
                if(elment != null){
                    if(elment.querySelector('a') != null){
                        if(elment.querySelector('a').getAttribute('data-color') != undefined){
                            var colortext = elment.querySelector('a').getAttribute('data-color').trim()  
                        }else if (document.querySelector('#wear-slct-clr dt #color-nm') != null){
                            var colortext = document.querySelector('#wear-slct-clr dt #color-nm').textContent.trim()
                        }
                    }else if (document.querySelector('#wear-slct-clr dt #color-nm') != null){
                        var colortext = document.querySelector('#wear-slct-clr dt #color-nm').textContent.trim()
                    }else if (document.querySelector('#wear-slct-clr .cart_thumbnail_frame_select') != null){
                        var colortext = elment.parentNode.getAttribute('data-color')
                    } else{
                        var colortext = elment.innerText.trim()
                    }
                }
            } else {
                if (document.querySelector('#wear-slct-clr dt #color-nm') != null){
                    var colortext = document.querySelector('#wear-slct-clr dt #color-nm').textContent.trim()
                }
            }
        }  
    }
     
    var textcolor = colortext
    if (textcolor != undefined) {
        textcolor = textcolor.trim().toLowerCase()
    }
    setTimeout(function(){
        if (textcolor != null) {
            var availvariant = document.querySelectorAll('.inc_pdp_bundle_product_list_block .inc_product_module_block select')
            for (var m4 in availvariant) {
                if(Object.prototype.hasOwnProperty.call(availvariant, m4)){
                    var alloptionss = availvariant[m4].querySelectorAll('option')
                    for (var h4 in alloptionss) {
                        if(Object.prototype.hasOwnProperty.call(alloptionss, h4)){
                            if (alloptionss[h4].getAttribute('datacolor') != null){
                                if (alloptionss[h4].getAttribute('datacolor').toLowerCase() == textcolor.toLowerCase()) {
                                    alloptionss[h4].selected = 'selected'
                                    if (availvariant[m4].getAttribute('onchange').replace('(this)', '') == "inc_onchange_variant") {
                                        inc_onchange_variant(availvariant[m4])
                                    } else if (availvariant[m4].getAttribute('onchange').replace('(this)', '') == "inc_onchange_color_variant") {
                                        inc_onchange_color_variant(availvariant[m4])
                                        break;
                                    } else if (availvariant[m4].getAttribute('onchange').replace('(this)', '') == "inc_onchange_size_variant") {
                                        inc_onchange_size_variant(availvariant[m4])
                                    }
                                }
                            } else if (alloptionss[h4].getAttribute('datasize') != null){
                                if (alloptionss[h4].getAttribute('datasize').toLowerCase() == textcolor.toLowerCase()) {
                                    alloptionss[h4].selected = 'selected'
                                    if (availvariant[m4].getAttribute('onchange').replace('(this)', '') == "inc_onchange_variant") {
                                        inc_onchange_variant(availvariant[m4])
                                    } else if (availvariant[m4].getAttribute('onchange').replace('(this)', '') == "inc_onchange_color_variant") {
                                        inc_onchange_color_variant(availvariant[m4])
                                        break;
                                    } else if (availvariant[m4].getAttribute('onchange').replace('(this)', '') == "inc_onchange_size_variant") {
                                        inc_onchange_size_variant(availvariant[m4])
                                    }
                                }
                            } else if (alloptionss[h4].getAttribute('datazero') != null){
                                if (alloptionss[h4].getAttribute('datazero').toLowerCase() == textcolor.toLowerCase()) {
                                    alloptionss[h4].selected = 'selected'
                                    if (availvariant[m4].getAttribute('onchange').replace('(this)', '') == "inc_onchange_variant") {
                                        inc_onchange_variant(availvariant[m4])
                                    } else if (availvariant[m4].getAttribute('onchange').replace('(this)', '') == "inc_onchange_color_variant") {
                                        inc_onchange_color_variant(availvariant[m4])
                                        break;
                                    } else if (availvariant[m4].getAttribute('onchange').replace('(this)', '') == "inc_onchange_size_variant") {
                                        inc_onchange_size_variant(availvariant[m4])
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        var clientClk = "client";
        if (document.querySelector('.inc_pdp_bundle_product_list_block .inc_product_module_block') != null){
            var mainModule = document.querySelector('.inc_pdp_bundle_product_list_block .inc_product_module_block');
            INC.methods.variantAutoSelection(mainModule, clientClk)
        }
    },200)
}
function selectautoselction(elm,nonatt){
    INC.config.scroll = false;
    if(nonatt == 'nonatt'){
        var variDrop = document.querySelectorAll('.variation_selection select')
    }else{
        var variDrop = document.querySelectorAll('.variation_selection dl')
    }
    
    var variArr = [];
    for (x1 = 0; x1 < variDrop.length; x1++) {
        if(nonatt == 'nonatt'){
            for (x = 0; x < variDrop.length; x++) {
                if (variDrop[x].classList.contains('is-selected')){
                    var b = variDrop[x].getAttribute('name').split('_').length
                    var variName = variDrop[x].getAttribute('name').split('_')[b - 1]
                    var selName = variDrop[x].parentNode.querySelector('select').getAttribute('name')
                    var selvar = variDrop[x].parentNode.querySelector('select[name="' + selName + '"]');
                    sel_variant = selvar.options[selvar.selectedIndex].getAttribute("value").trim();
                    variArr.push(selvar.options[selvar.selectedIndex].innerText)
                }
            }
        }else{
            if (variDrop[x1].querySelector('select').classList.contains('is-selected')){
                var b = variDrop[x1].querySelector('select').getAttribute('name').split('_').length
                var variName = variDrop[x1].querySelector('select').getAttribute('name').split('_')[b - 1]
                var selName = variDrop[x1].querySelector('select').getAttribute('name')
                var selvar = variDrop[x1].querySelector('select[name="' + selName + '"]');
                sel_variant = selvar.options[selvar.selectedIndex].getAttribute("value").trim();
                variArr.push(selvar.options[selvar.selectedIndex].innerText)
            }
        }
    }

    if (variArr.length > 0) {
        for (x2 = 0; x2 < variArr.length; x2++) {
            var sel_text = variArr[x2];
            var availvariant = document.querySelectorAll('.inc_pdp_bundle_product_list_block .inc_product_module_block select')
            
            for (m2 = 0; m2 < availvariant.length; m2++) {
                var alloptionss = availvariant[m2].querySelectorAll('option')
                for (h2 = 0; h2 < alloptionss.length; h2++) {
                    if (alloptionss[h2].getAttribute('datasize') != null){
                        if (alloptionss[h2].getAttribute('datasize').toLowerCase() == sel_text.toLowerCase()) {
                            alloptionss[h2].selected = 'selected'
                            if (availvariant[m2].getAttribute('onchange').replace('(this)', '') == "inc_onchange_variant") {
                                inc_onchange_variant(availvariant[m2])
                            } else if (availvariant[m2].getAttribute('onchange').replace('(this)', '') == "inc_onchange_color_variant") {
                                inc_onchange_color_variant(availvariant[m2])
                            } else if (availvariant[m2].getAttribute('onchange').replace('(this)', '') == "inc_onchange_size_variant") {
                                inc_onchange_size_variant(availvariant[m2])
                            }
                        }
                    } else if (alloptionss[h2].getAttribute('datacolor') != null){
                        if (alloptionss[h2].getAttribute('datacolor').toLowerCase() == sel_text.toLowerCase()) {
                            alloptionss[h2].selected = 'selected'
                            if (availvariant[m2].getAttribute('onchange').replace('(this)', '') == "inc_onchange_variant") {
                                inc_onchange_variant(availvariant[m2])
                            } else if (availvariant[m2].getAttribute('onchange').replace('(this)', '') == "inc_onchange_color_variant") {
                                inc_onchange_color_variant(availvariant[m2])
                            } else if (availvariant[m2].getAttribute('onchange').replace('(this)', '') == "inc_onchange_size_variant") {
                                inc_onchange_size_variant(availvariant[m2])
                            }
                        }
                    } else if (alloptionss[h2].getAttribute('datazero') != null){
                        if (alloptionss[h2].getAttribute('datazero').toLowerCase() == sel_text.toLowerCase()) {
                            alloptionss[h2].selected = 'selected'
                            if (availvariant[m2].getAttribute('onchange').replace('(this)', '') == "inc_onchange_variant") {
                                inc_onchange_variant(availvariant[m2])
                            } else if (availvariant[m2].getAttribute('onchange').replace('(this)', '') == "inc_onchange_color_variant") {
                                inc_onchange_color_variant(availvariant[m2])
                            } else if (availvariant[m2].getAttribute('onchange').replace('(this)', '') == "inc_onchange_size_variant") {
                                inc_onchange_size_variant(availvariant[m2])
                            }
                        }
                    }
                }
            }
         // break;
        }
    }
    var clientClk = "client";
    if (document.querySelector('.inc_pdp_bundle_product_list_block .inc_product_module_block') != null){
        var mainModule = document.querySelector('.inc_pdp_bundle_product_list_block .inc_product_module_block');
        INC.methods.variantAutoSelection(mainModule, clientClk)
    }
}
INC.methods.createPDPBundleCartBlock = function() {
    var classNames = INC.uiConfig.pdp.className;
    var pdpBundleCartBlock = this.getElementChilds("pdpModalBundleCartBlock", "pdp");
    var getSelectorClassName = INC.methods.getSelectorClassName;

    function getViewElement(className) {
        return pdpBundleCartBlock.querySelector(getSelectorClassName(classNames, className));
    }


    var elBundleCartTitleBlock = getViewElement("pdpBundleCartTitleBlock");
    var elBundleCartTitleText = getViewElement("pdpBundleCartTitleText");
    var elBundleCartAddedBlock = getViewElement("pdpBundleCartAddedBlock");
    var elBundleCartSummaryViewBlock = getViewElement("pdpBundleCartSummaryViewBlock");
    var elBundleCartSummaryViewBtnText = getViewElement("pdpBundleCartSummaryViewBtnText");
    var elBundleCartAddBtnBlock = getViewElement("pdpBundleCartSummaryAddBtnBlock");
    var elBundleCartAddBtnTxtBlock = getViewElement("pdpBundleCartSummaryAddBtnTxtBlock")
    var elBundleCartAddBlock = getViewElement("pdpBundleCartSummaryAddBlock");
    var elBundleCartsummaryBlock = getViewElement("pdpBundleCartSummaryBlock");
    var elBundlePriceBlock = getViewElement("pdpBundleCartSummaryPriceBlock")
    var elBundleCartTitleTextblock = getViewElement("pdpBundleCartTitleTextBlock");

    elBundleCartTitleText.innerText = "追加したアイテム";
    elBundleCartTitleText.style.display = "none"
    // elBundleCartTitleText.style.textTransform = "none"

    if (window.innerWidth < 820) {
        elBundleCartTitleBlock.addEventListener('click', function() {
            var cartsummaryel = this.parentNode.parentNode.parentNode;
            this.classList.toggle('inc_active')
            document.querySelector('body').setAttribute('style', '')
            document.querySelector('html').classList.remove('inc_overlay');
            document.querySelector('body').classList.toggle('inc_mobile_overlay');
            cartsummaryel.querySelector('.inc_pdp_bundle_cart_block').classList.toggle('active')
            cartsummaryel.querySelector('.inc_pdp_bundle_cart_overlay_block').classList.toggle('active')
            cartsummaryel.querySelector('.inc_pdp_bundle_cart_added_block').classList.toggle('active')
            cartsummaryel.querySelector('.inc_pdp_bundle_cart_title_block').classList.toggle('active')
            cartsummaryel.querySelector('.inc_pdp_bundle_cart_summary_view_block ').classList.toggle('active')

            if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null)) {
                // 
                // if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && window.innerWidth < 1337) {
                // if (window.innerWidth < 1337) {
                //     if (document.querySelector('.inc_pdp_block') != null) {
                //         // $("html, body").animate({
                //         //     scrollTop: $(".inc_pdp_block").offset().top - 140
                //         // }, 0);
                //     } else if (document.querySelector('.inc_af_block') != null) {
                //         $("html, body").animate({
                //             scrollTop: $(".inc_af_block").offset().top - 140
                //         }, 0);
                //     }
                // }
            }
        })

        var inc_added_img_block = generate_html_tag('div', 'inc_added_img_block')
        var inc_added_item_img_block = generate_html_tag('div', 'inc_added_item_img_block')
        inc_added_img_block.appendChild(inc_added_item_img_block)
        elBundlePriceBlock.parentNode.insertBefore(inc_added_img_block, elBundlePriceBlock)


    }


    var inc_checkout_exclude_item_block = generate_html_tag('div', 'inc_checkout_exclude_item_block')
    var inc_checkout_exclude_item_text = generate_html_tag('div', 'inc_checkout_exclude_item_text')
    // inc_checkout_exclude_item_text.innerText = INC.config.ExcItemAlreadyinCartText
    inc_checkout_exclude_item_block.appendChild(inc_checkout_exclude_item_text)
    elBundleCartAddBlock.parentNode.insertBefore(inc_checkout_exclude_item_block, elBundleCartAddBlock)

    var inc_collect_point_checkout_block = generate_html_tag('div', 'inc_collect_point_checkout_block')
    var inc_collect_point_text = generate_html_tag('div', 'inc_collect_point_text')
    inc_collect_point_checkout_block.appendChild(inc_collect_point_text)

    // elBundleCartsumaryBlock.appendChild(inc_collect_point_checkout_block)

    //elBundleCartsummaryBlock
    var elBundleCartTitleImgBlock = getViewElement("pdpBundleCartTitleImgBlock");
    elBundleCartTitleImgBlock.addEventListener('click', function() {
        // elBundleCartTitleBlock.classList.toggle('active');
        // elBundleCartAddedBlock.classList.toggle('active');
        // elBundleCartSummaryViewBlock.classList.toggle('active');
        // pdpBundleCartBlock.classList.toggle('active');
        // document.querySelector('body').classList.toggle('inc_mobile_overlay');
        // document.querySelector('.inc_pdp_bundle_cart_overlay_block').classList.toggle('active');
    });

    elBundleCartSummaryViewBtnText.innerText = "追加したアイテム";
    elBundleCartSummaryViewBlock.addEventListener('click', function() {
        document.querySelector('body').classList.add('inc_mobile_overlay');
        document.querySelector('body').setAttribute('style', 'position: fixed;width:100%;')
        elBundleCartTitleBlock.classList.toggle('active');
        elBundleCartAddedBlock.classList.toggle('active');
        elBundleCartSummaryViewBlock.classList.toggle('active');
        pdpBundleCartBlock.classList.toggle('active');
        document.querySelector('.inc_pdp_bundle_cart_overlay_block').classList.toggle('active');
    });

    elBundleCartAddBtnTxtBlock.innerText = "商品価格の反映にタイムラグがある場合がございます。最新の価格は商品ページまたはカートにてご確認ください。"
    elBundleCartAddBtnBlock.addEventListener("click", function(e) {
        INC.clientConfig.offset = 0;
        INC.clientConfig.slidevalue = 0;
        if (window.innerWidth < 819) {
            var prd_length = 2
        } else {
            var prd_length = 4
        }
        document.querySelector('.inc_pdp_bundle_product_list_main_block').setAttribute('style', 'margin-left: 0')
        if (document.querySelectorAll('.inc_pdp_block .inc_product_module_block').length-1 > prd_length) {
            document.querySelector('.inc_pdp_bundle_product_left-btn_block').setAttribute('style', 'pointer-events: none;opacity:0.5')
            // if (isIE()){
            document.querySelector('.inc_pdp_bundle_product_left-btn_img').setAttribute('style', 'opacity:0.5')
            // }
            document.querySelector('.inc_pdp_bundle_product_right-btn_block').setAttribute('style', 'pointer-events: auto;opacity:1')
            // if (isIE()){
            document.querySelector('.inc_pdp_bundle_product_right-btn_img').setAttribute('style', 'opacity:1')
            // }
        }

        if (INC.config.disablebtn == true) {
            var btn_cart = e.target
            if (btn_cart.className == "inc_pdp_bundle_cart_summary_add_btn_text_block"){
                btn_cart = btn_cart.querySelector(".inc_pdp_bundle_cart_summary_add_btn_text")
            } 
            INC.config.disablebtn = false
            btn_cart.classList.add('inc_loading')
            btn_cart.parentNode.parentNode.classList.add('inc_hide_icon')
            INC.methods.createSidebarBlock();
            INC.methods.addBundleToCart(btn_cart);
        }
    });

    return pdpBundleCartBlock;
}
INC.methods.createSidebarBlock = function() {
    var dataStore = INC.dataStore;
    var classNames = INC.uiConfig.sidebar.className;
    var sbBlock = this.getElementChilds("sidebarModalBlock", "sidebar");
    var sidebar_dialoge_block = document.createElement('div')
    sidebar_dialoge_block.classList.add('sidebar_outer')
    // sidebar_dialoge_block.style.display="none"
    sidebar_dialoge_block.appendChild(sbBlock)
    var getSelectorClassName = INC.methods.getSelectorClassName;

    function getViewElement(className) {
        return sbBlock.querySelector(getSelectorClassName(classNames, className));
    }
    getViewElement("sidebarCartAddedListBlock").innerHTML = "";

    var elHeaderContinueText = getViewElement("sidebarHeaderContinueText");
    var elHeaderTitleText = getViewElement("sidebarHeaderTitleText");
    var elHeaderTitleSubText = getViewElement("sidebarHeaderSubTitleText");
    var elHeaderItemCountBlock = getViewElement("sidebarHeaderItemCountBlock");
    var elHeaderItemCountTitleText = getViewElement("sidebarHeaderItemCountTitleText");
    var elHeaderItemCountFigureText = getViewElement("sidebarHeaderItemCountFigureText");
    var elRecommendedTitleText = getViewElement("sidebarRecommendedTitleText");
    var elRecommendedTabsListBlock = getViewElement("sidebarRecommendedTabsListBlock");
    var elRecommendedProductsBlock = getViewElement("sidebarRecommendedProductsBlock");
    var elRecommendedProductsListBlock = getViewElement("sidebarRecommendedProductsListBlock");
    var elCheckoutContinueBtnText = getViewElement("sidebarCheckoutContinueBtnText");
    var elCheckoutBasketBtnText = getViewElement("sidebarCheckoutBasketBtnText");
    var elheaditemblock = getViewElement("sidebarHeaderItemBlock");
    var elheadtitleblock = getViewElement("sidebarHeaderTitleBlock");
    var elrectitleblock = getViewElement("sidebarRecommendedTitleBlock");
    var elcheckoutblock = getViewElement("sidebarCheckoutBlock");
    var elrecblock = getViewElement("sidebarRecommendedTabsBlock");
    var elcardaddelist = getViewElement("sidebarRecommendedProductsListBlock")
    var eladedblk = getViewElement("sidebarCartAddedListBlock")
    var elsidebarheadblock = getViewElement("sidebarHeaderBlock")


    elheaditemblock.addEventListener('click', function() {

        // var cnt = document.querySelector('.inc_header_item_count_title_text').innerText.toLocaleLowerCase().split('more')[0]
        var cnt = document.querySelector('.inc_header_item_count_title_text').getAttribute('added_counts')

        if (cnt >= 1) {
            if (document.querySelector('.inc_sidebar_cart_added_block').classList.contains('active') == true) {
                document.querySelector('.inc_sidebar_cart_added_block').classList.remove('active')
                var alladdedprodlength = document.querySelectorAll('.inc_cart_added_product_block').length;
                var morecount = 2
                if (window.innerWidth < 820) {
                    morecount = 1
                }

                if (alladdedprodlength > morecount) {
                    var tcount = alladdedprodlength - morecount + " more item(s)"
                    document.querySelector('.inc_header_item_count_title_text').innerText = "+" + tcount
                    document.querySelector('.inc_header_item_count_title_text').setAttribute('added_counts', (alladdedprodlength - morecount))
                } else {
                    document.querySelector('.inc_header_item_count_title_text').innerText = ""
                }
            } else {
                document.querySelector('.inc_header_item_count_title_text').innerText = "Show less"
                document.querySelector('.inc_sidebar_cart_added_block').classList.add('active')
            }
        }
    })


    var close_sisebar_icon = generate_html_tag('span', 'close_sisebar_icon')
    elheadtitleblock.appendChild(close_sisebar_icon)
    //role="contentinfo"
    elheaditemblock.setAttribute('role', "banner")
    elrectitleblock.setAttribute('role', "banner")
    elheadtitleblock.setAttribute('role', "banner")
    // elheadtitleblock.setAttribute('aria-level',"1")
    // elheaditemblock.setAttribute('aria-level',"2")
    // elrectitleblock.setAttribute('aria-level',"3")
    elcheckoutblock.setAttribute('role', "contentinfo")
    elRecommendedProductsListBlock.setAttribute('role', "contentinfo")
    elRecommendedProductsListBlock.setAttribute('tabindex', 0)
    elrecblock.setAttribute('role', "contentinfo")
    eladedblk.setAttribute('role', "contentinfo")



    elHeaderContinueText.innerText = "Back";
    elHeaderTitleText.innerText = INC.config.ItemAddedToCarttext;
    // elHeaderTitleText.style.textTransform = "none"
    elHeaderTitleSubText.innerText = INC.config.ExcItemAlreadyinCartText
    // elHeaderItemCountTitleText.setAttribute('style', 'text-transform: none;')
    if (Object.keys(dataStore.bundleCartProducts).length == 1) {
        // elHeaderItemCountTitleText.innerText = "(" + Object.keys(dataStore.bundleCartProducts).length+" Item)";
    } else {
        // elHeaderItemCountTitleText.innerText = "(" + Object.keys(dataStore.bundleCartProducts).length+" Items)";
    }
    elRecommendedTitleText.innerText = INC.config.OtherCustAlsoBoughtText;
    // elRecommendedTitleText.style.textTransform = "none"
    elCheckoutContinueBtnText.innerText = INC.config.ContinueShopping;
    // elCheckoutContinueBtnText.style.textTransform = "none"

    var elCheckoutLink = document.createElement('a');
    elCheckoutLink.href = INC.clientConfig.checkoutLink;
    var elCheckoutTextDiv = document.createElement('div');
    elCheckoutTextDiv.innerText = INC.config.CartText;
    // elCheckoutTextDiv.style.textTransform = "none"
    elCheckoutTextDiv.setAttribute('draggable', 'false');
    elCheckoutLink.appendChild(elCheckoutTextDiv);
    elCheckoutBasketBtnText.appendChild(elCheckoutLink);


    

    var productCategoriesArray = dataStore.methods().getUniqueCatergories();

    elRecommendedTabsListBlock.innerHTML = "";
    var category_count = 0
    elRecommendedTabsListBlock.classList.add('inc_categ_' + Object.keys(productCategoriesArray).length)
    if (elRecommendedTabsListBlock.querySelector(getSelectorClassName(classNames, "sidebarRecommendedTabsListItemBlock")) != null) {
        elRecommendedTabsListBlock.querySelector(getSelectorClassName(classNames, "sidebarRecommendedTabsListItemBlock")).click();
    } else {
        elRecommendedTitleText.style.display = "none";
    }


    getViewElement("sidebarHeaderContinueBlock").addEventListener("click", function() {
        if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) && onloadpdp == true && window.innerWidth < 1337) {
            if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && navigator.userAgent.toLowerCase().indexOf('chrome') == -1) {
                document.querySelector('body').style.position = "relative"
            }
        }
        
        document.querySelector('html').classList.remove('inc_overlay');
        INC.methods.hideSidebar();
        INC.config.pdpaddedProductList = []
        INC.clientConfig.offset = 0;
        INC.clientConfig.slidevalue = 0;
    });

    getViewElement("sidebarCheckoutContinueBlock").addEventListener("click", function() {
        if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) && onloadpdp == true && window.innerWidth < 1337) {
            if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && navigator.userAgent.toLowerCase().indexOf('chrome') == -1) {
                document.querySelector('body').style.position = "relative"
            }
        }
        
        document.querySelector('html').classList.remove('inc_overlay');
        INC.clientConfig.offset = 0;
        INC.config.pdpaddedProductList = []
        INC.clientConfig.slidevalue = 0;
        INC.methods.hideSidebar();
    });

    getViewElement("sidebarCheckoutBasketBlock").addEventListener("click", function() {
        window.location.href = INC.clientConfig.checkoutLink;
        // document.cookie = "openCartSlider=1; path=/";
        // window.location.reload();
    });

    var addedProductBlocks = "";
    var addedSliderBtnCounter = 0;


    getViewElement("sidebarCartAddedRightBtnBlock").style.visibility = "hidden";
    getViewElement("sidebarCartAddedLeftBtnBlock").style.visibility = "hidden";
    // getViewElement("sidebarCartAddedLeftBtnBlock").setAttribute("style", "pointer-events: none;opacity:0.5");
    
    var body = document.querySelector('body');
    
    var elSideBarOverlayBlock = document.createElement('div');
    elSideBarOverlayBlock.setAttribute("class", "inc_sidebar_overlay_block");
    elSideBarOverlayBlock.addEventListener("click", function() {
        if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) && onloadpdp == true && window.innerWidth < 1337) {
            if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && navigator.userAgent.toLowerCase().indexOf('chrome') == -1) {
                document.querySelector('body').style.position = "relative"
            }
        }
        document.querySelector('html').classList.remove('inc_overlay');
        INC.methods.hideSidebar();
        INC.config.pdpaddedProductList = []
        INC.clientConfig.offset = 0;
        INC.clientConfig.slidevalue = 0;
    });
    close_sisebar_icon.addEventListener("click", function() {
        if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) && onloadpdp == true && window.innerWidth < 1337) {
            if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && navigator.userAgent.toLowerCase().indexOf('chrome') == -1) {
                document.querySelector('body').style.position = "relative"
            }
        }
        document.querySelector('html').classList.remove('inc_overlay');
        INC.methods.hideSidebar();
        INC.config.pdpaddedProductList = []
        INC.clientConfig.offset = 0;
        INC.clientConfig.slidevalue = 0;
    });
    elSideBarOverlayBlock.style.display = "none";
    if(INC.config.pageType == "pdp"){
        var pdpBlockSiblingsb = document.querySelector('.inc_pdp_block')
        var pdpBlockSiblingsb1 = document.querySelector('#relGoodsArea')
        var pdpBlockSiblingsb2 = document.querySelector('.coupon_campaign_area')
        var pdpBlockSiblingsb3 = document.querySelector('#form2cart .favorite_area')
        //productDetails
        if (pdpBlockSiblingsb != null) {
            var sibelm=pdpBlockSiblingsb.nextElementSibling
            sibelm.parentNode.insertBefore(sidebar_dialoge_block, sibelm)
            sibelm.parentNode.insertBefore(elSideBarOverlayBlock, sibelm)
        } else if (pdpBlockSiblingsb1 != null) {
            pdpBlockSiblingsb1.parentNode.insertBefore(sidebar_dialoge_block, pdpBlockSiblingsb1)
            pdpBlockSiblingsb1.parentNode.insertBefore(elSideBarOverlayBlock, pdpBlockSiblingsb1)
        } else if (pdpBlockSiblingsb2 != null) {
            pdpBlockSiblingsb2.parentNode.insertBefore(sidebar_dialoge_block, pdpBlockSiblingsb2)
            pdpBlockSiblingsb2.parentNode.insertBefore(elSideBarOverlayBlock, pdpBlockSiblingsb2)
        } else if (pdpBlockSiblingsb3 != null) {
            pdpBlockSiblingsb3.parentNode.insertBefore(sidebar_dialoge_block, pdpBlockSiblingsb3)
            pdpBlockSiblingsb3.parentNode.insertBefore(elSideBarOverlayBlock, pdpBlockSiblingsb3)
        }
    }else{
        body.appendChild(elSideBarOverlayBlock);
    }
    

    if (INC.dataStore.dataStoreObj.undefined != undefined) {
        if (document.querySelector('.inc_recommended_products_block') != null) {
            document.querySelector('.inc_recommended_products_block').style.display = "none"
        }
        if (document.querySelector('.s7staticimage img') != null && document.querySelector('.inc_cart_added_product_img') != null) {
            var p_img = document.querySelector('.s7staticimage img').src
            document.querySelector('.inc_cart_added_product_img').src = p_img
        }
    }
    setTimeout(function() {
        if (document.querySelector('.inc_recommended_products_list_block') != null) {
            document.querySelector('.inc_recommended_products_list_block').setAttribute('role', "contentinfo")
        }
    }, 100)

}
INC.methods.updateSidebarBlock = function(errFlag) {
    var subtotalactiveprice = 0
    var subtotalregukarprice = 0
    var dataStore = INC.dataStore;
    var classNames = INC.uiConfig.sidebar.className;
    var getSelectorClassName = this.getSelectorClassName;
    var sbBlock = document.querySelector(getSelectorClassName(classNames, "sidebarModalBlock"));

    function getViewElement(className) {
        return sbBlock.querySelector(getSelectorClassName(classNames, className));
    }

    var sidebarHeaderItemCountTitleText = getViewElement("sidebarHeaderItemCountTitleText");
    var elHeaderItemCountFigureText = getViewElement("sidebarHeaderItemCountFigureText");
    var elHeadersubtotalactivetext = getViewElement("sidebarCartAddedProductDescSubTotalActiveText");
    var elHeadersubtotalregulartext = getViewElement("sidebarCartAddedProductDescSubTotalRegularText");
    var sbCartBlock = getViewElement("sidebarCartAddedListBlock");
    sbCartBlock.innerHTML = "";

    var bundleCartProductsArray = Object.keys(dataStore.bundleCartProducts);
    // sidebarHeaderItemCountTitleText.innerHTML = INC.config.TotalText + " " +  Object.keys(dataStore.bundleCartProducts).length + INC.config.NosText;

    var headerItemCountFigureText = 0;
    var subtotalactiveprice = 0
    var subtotalregukarprice = 0
    bundleCartProductsArray.forEach(function(productSKU) {
        var findObj = new INC.classes.FindObj({
            sku: productSKU
        });
        var productObj = INC.dataStore.methods().getProductBySKU(findObj);
        var productBlock = INC.methods.getElementChilds("sidebarCartAddedProductBlock", "sidebar");
        //current  active prod
        var color = "";
        var size = "";
        var just_check_prod_block = document.querySelector('.inc_product_module_block[data-main_id="' + productObj.mainId + '"]')
        if (just_check_prod_block != null) {
            if (just_check_prod_block.querySelector('.inc_product_desc_att_size_list_item_img_block.active div') != null) {
                size = just_check_prod_block.querySelector('.inc_product_desc_att_size_list_item_img_block.active div').innerText
            }
            if (just_check_prod_block.querySelector('.inc_product_desc_att_color_list_item_block.active .inc_product_desc_att_color_list_item_img_block') != null) {
                color = just_check_prod_block.querySelector('.inc_product_desc_att_color_list_item_block.active .inc_product_desc_att_color_list_item_img_block').getAttribute('data-color')
            }
        }
        productBlock.style.userSelect = "none";

        var elImg = productBlock.querySelector(getSelectorClassName(classNames, "sidebarCartAddedProductImg"));
        var elPrc = productBlock.querySelector(getSelectorClassName(classNames, "sidebarCartAddedProductPrc"));
        var elManu = productBlock.querySelector(getSelectorClassName(classNames, "sidebarCartAddedProductDescManuBlock"));
        var elTitleText = productBlock.querySelector(getSelectorClassName(classNames, "sidebarCartAddedProductDescTitleText"));
        var elPriceActiveText = productBlock.querySelector(getSelectorClassName(classNames, "sidebarCartAddedProductDescPriceActiveText"));
        var elPriceRegularText = productBlock.querySelector(getSelectorClassName(classNames, "sidebarCartAddedProductDescPriceRegularText"));
        var elAttColorText = productBlock.querySelector(getSelectorClassName(classNames, "sidebarCartAddedProductDescAttColorText"));
        var elAttsizeText = productBlock.querySelector(getSelectorClassName(classNames, "sidebarCartAddedProductDescAttSizeText"));
        var elImgTag = INC.methods.generateHTMLTags('img', {
            src: productObj.imageURL
        });
        if(onloadpdp == true){
            elImgTag.src = productObj.imageURL
        }
        elImg.appendChild(elImgTag);
        elImgTag.setAttribute('alt', productObj.name)
        if (productObj.MakerName != null){
            if (productObj.MakerName.length > 10){
                elManu.innerText = productObj.MakerName.substring(0, 10) + "...";
            } else {
                elManu.innerText = productObj.MakerName;
            }
        }
        // elManu.innerText = productObj.MakerName;
        elTitleText.innerHTML = productObj.name;
        if (color != "") {
            elAttColorText.innerText = color;
        } else {
            elAttsizeText.innerText = size;
        }


        
        if (INC.config.usrIdfy == "nonLogin") { 
            // var activePrice = parseFloat(productObj.activePrice).toFixed(2).toString();
            // var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            if (productObj.MemberPrices !=undefined && productObj.MemberPrc != "") {
                var activePrice = parseFloat(productObj.MemberPrices.split('|')[0].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            } else {
                if (productObj.worthPrice != null && productObj.worthPricee != ""){
                    var activePrice = parseFloat(productObj.worthPrice.split('|')[0].split('=')[1]).toFixed(2).toString();
                    var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
                }
            }
        } else if (INC.config.usrIdfy == "level0"){
            if (productObj.MemberPrices !=undefined && productObj.MemberPrc != "") {
                var activePrice = parseFloat(productObj.MemberPrices.split('|')[1].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            } else {
                if (productObj.worthPrice != null && productObj.worthPricee != ""){
                    var activePrice = parseFloat(productObj.worthPrice.split('|')[1].split('=')[1]).toFixed(2).toString();
                    var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
                }
            }
        } else if (INC.config.usrIdfy == "level1"){
            if (productObj.MemberPrices !=undefined && productObj.MemberPrc != ""){
                var activePrice = parseFloat(productObj.MemberPrices.split('|')[2].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            } else {
                if (productObj.worthPrice != null && productObj.worthPricee != ""){
                    var activePrice = parseFloat(productObj.worthPrice.split('|')[2].split('=')[1]).toFixed(2).toString();
                    var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
                }
            }
        } else if (INC.config.usrIdfy == "level2"){
            if (productObj.MemberPrices !=undefined && productObj.MemberPrc != ""){
                var activePrice = parseFloat(productObj.MemberPrices.split('|')[3].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            } else {
                if (productObj.worthPrice != null && productObj.worthPricee != ""){
                    var activePrice = parseFloat(productObj.worthPrice.split('|')[3].split('=')[1]).toFixed(2).toString();
                    var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
                }
            }
        } else if (INC.config.usrIdfy == "level3"){
            if (productObj.MemberPrices !=undefined && productObj.MemberPrc != ""){
                var activePrice = parseFloat(productObj.MemberPrices.split('|')[4].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            } else {
                if (productObj.worthPrice != null && productObj.worthPricee != ""){
                    var activePrice = parseFloat(productObj.worthPrice.split('|')[4].split('=')[1]).toFixed(2).toString();
                    var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
                }
            }
        } else if (INC.config.usrIdfy == "level4"){
           if (productObj.MemberPrices !=undefined && productObj.MemberPrc != ""){
                var activePrice = parseFloat(productObj.MemberPrices.split('|')[5].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            } else {
                if (productObj.worthPrice != null && productObj.worthPricee != ""){
                    var activePrice = parseFloat(productObj.worthPrice.split('|')[5].split('=')[1]).toFixed(2).toString();
                    var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
                }
            }
        }
        
        if (activePrice != regularPrice && regularPrice != "" && regularPrice != null && regularPrice != 0) {
            elPrc.innerText = "¥" + formatter.format(activePrice).replace('￥', '').replace('¥', '');
            elPriceActiveText.parentNode.parentNode.parentNode.classList.add('is_special_price')
            elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol +"<span> 特価 </span>"  +  "¥" +formatter.format(activePrice * dataStore.bundleCartProducts[productSKU]).replace('￥', '').replace('¥', '')+ "<span> ("+INC.config.prcText+") </span>"
            // elPriceRegularText.innerHTML = INC.clientConfig.regularPricePrefix + INC.clientConfig.currencySymbol + formatter.format(regularPrice) + "<span> ("+INC.config.prcText+") </span>"
        } else {
            elPrc.innerText = "¥" + formatter.format(activePrice).replace('￥', '').replace('¥', '');
            elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol +"<span> 価格 </span>"  +  "¥" +formatter.format(activePrice * dataStore.bundleCartProducts[productSKU]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>"
        
        }
        // elPrc.innerHTML = "特価" + formatter.format(activePrice).replace('￥', '').replace('¥', '') + "¥";
        subtotalactiveprice = (+subtotalactiveprice + (+productObj.activePrice * dataStore.bundleCartProducts[productSKU]));
        subtotalregukarprice = (+subtotalregukarprice + (+productObj.regularPrice * dataStore.bundleCartProducts[productSKU]));
        // elPriceActiveText.innerHTML = "<span> 特価 </span>" +"¥" + formatter.format(activePrice * dataStore.bundleCartProducts[productSKU]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>"
        
            //"Price: " + 
            sbCartBlock.appendChild(productBlock);

        if (INC.clientConfig.OOS.length > 0){
            if (INC.clientConfig.OOS.indexOf(productObj.mainId) >= 0) {
                for (e = 0; e < INC.clientConfig.OOS.length; e++) {
                     if (INC.clientConfig.OOS[e] == productObj.mainId){
                        elPriceActiveText.innerText = "在庫切れ"
                        elPriceActiveText.parentNode.parentNode.parentNode.parentNode.parentNode.classList.add('oss')
                     }
                }
            }
        }

    });
    
    

    if (+subtotalactiveprice != null && (+subtotalactiveprice < +subtotalregukarprice)) {
        elHeadersubtotalactivetext.setAttribute('subtotalActiveprice', subtotalactiveprice)
        elHeadersubtotalregulartext.setAttribute('subtotalRegularprice', subtotalregukarprice)
        elHeadersubtotalactivetext.innerHTML = INC.clientConfig.currencySymbol +"<span> 特価 </span>" +  "¥" +formatter.format(subtotalactiveprice).replace('￥', '').replace('¥', '')+ "<span> ("+INC.config.prcText+") </span>"
        elHeadersubtotalregulartext.innerHTML = INC.clientConfig.currencySymbol +"<span> 特価 </span>" + "¥" + formatter.format(subtotalregukarprice).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>"
        // elHeadersubtotalactivetext.style.color="#ee1c31"
    } else {
        elHeadersubtotalactivetext.setAttribute('subtotalActiveprice', subtotalactiveprice)
        // elHeadersubtotalactivetext.style.color="#000"
        elHeadersubtotalregulartext.setAttribute('subtotalRegularprice', subtotalregukarprice)
        elHeadersubtotalactivetext.innerHTML = INC.clientConfig.currencySymbol +  "¥" +formatter.format(subtotalregukarprice).replace('￥', '').replace('¥', '')+ "<span> ("+INC.config.prcText+") </span>"
        elHeadersubtotalregulartext.innerHTML = ""
    }
   
    // sidebarHeaderItemCountTitleText.innerHTML = INC.config.TotalText + " " +  Object.keys(dataStore.bundleCartProducts).length + INC.config.NosText;

    if (bundleCartProductsArray.length > 2) {
        getViewElement("sidebarCartAddedRightBtnBlock").style.visibility = "visible";
        getViewElement("sidebarCartAddedLeftBtnBlock").style.visibility = "visible";
    }

    if (!(bundleCartProductsArray.length > 2)) {
        getViewElement("sidebarCartAddedRightBtnBlock").style.visibility = "hidden";
        getViewElement("sidebarCartAddedLeftBtnBlock").style.visibility = "hidden";
    }
    if (window.innerWidth > 767) {
        if (document.querySelectorAll('.inc_sidebar_cart_added_block .inc_cart_added_product_block').length > 5) {
            document.querySelector('.inc_sidebar_cart_added_block').classList.add('flex-start')
        }
    } else {
        if (document.querySelectorAll('.inc_sidebar_cart_added_block .inc_cart_added_product_block').length > 3) {
            document.querySelector('.inc_sidebar_cart_added_block').classList.add('flex-start')
        }
    }



    setTimeout(function(){
        var inc_prod_img = document.querySelectorAll('.inc_recommended_products_list_block .inc_product_img_main_img img')
        for(im=0;im<inc_prod_img.length;im++){
            // inc_prod_img[im].setAttribute('style','left: 0 !important;position: relative;')
        }
    },300)
}


INC.methods.updateSidebarProductsList = function(elRecommendedProductsListBlock, productCategory) {

    var classNames = INC.uiConfig.sidebar.className;
    var getSelectorClassName = INC.methods.getSelectorClassName;
    var productListArray = INC.dataStore.bundleProductsArray;
    var dupl_sidebar_prod = []

    for (var i = 0; i < productListArray.length; i++) {
        // var findObj = new INC.classes.FindObj({ id: productListArray[i] });
        var firstProductObjByMainId = INC.dataStore.methods().getFirstProductObjByMainId({
            mainId: productListArray[i]
        });
        if (firstProductObjByMainId["categoryId"] == productCategory) {
            if (INC.dataStore.dataStoreObj.undefined == undefined) {
                //|| INC.dataStore.dataStoreObj[INC.config.Product_id][INC.config.Product_id].bundleId != "12345679"
                if (dupl_sidebar_prod.indexOf(firstProductObjByMainId.id) == -1) {
                    dupl_sidebar_prod.push(firstProductObjByMainId.id)
                    var productBlock = INC.methods.createProductModuleBlock(firstProductObjByMainId.id, "sidebar", false, elRecommendedProductsListBlock);

                    productBlock.querySelector(getSelectorClassName(classNames, "productAddBlock")).addEventListener("click", function(e) {
                       

                        var productBlockNode = this.parentNode.parentNode.parentNode;
                        if (this.parentNode.parentNode.className == "inc_product_desc_block") {
                            productBlockNode = this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
                        }
                        // var productQtyInputText = productBlockNode.querySelector(getSelectorClassName(classNames, "productQtyInputText"));
                        var sku = productBlockNode.getAttribute('data-sku');
                        var findObj = new INC.classes.FindObj({
                            id: sku
                        });
                        // var qty = productQtyInputText.innerText;
                        var qty = productBlockNode.querySelector('.inc_product_modal_block .inc_product_desc_qty_block input').value;
                        var add_btn_click = productBlockNode.querySelector(getSelectorClassName(classNames, "productAddText"));
                        var add_prod_im = productBlockNode.querySelectorAll(getSelectorClassName(classNames, "productAddImg"));
                        var dataid = productBlockNode.getAttribute('data-id');
                        var added_maxqtyel = document.querySelector('.inc_cart_added_product_block.max_qty_reach[data-id="' + dataid + '"]')
                        if (added_maxqtyel == null) {
                            setTimeout(function() {
                                // var elAddImg = getViewElement("productAddImg");
                                Array.prototype.forEach.call(productBlockNode.querySelectorAll(getSelectorClassName(classNames, "productAddImg")), function(el) {
                                    el.classList.remove("checked");
                                });

                            }, 2000);
                            var add_btn_click = productBlockNode.querySelector(getSelectorClassName(classNames, "productAddText"));
                            var add_prod_im = productBlockNode.querySelectorAll(getSelectorClassName(classNames, "productAddImg"));
                            var add_btn = productBlockNode.querySelector('.inc_product_desc_add_text')
                            if (productBlockNode.querySelector('.img_color_swatch') != null) {
                                if (productBlockNode.querySelector(getSelectorClassName(classNames, "productModalBlock")).querySelector('.inc_product_desc_att_color_list_item_block.active') != null) {
                                    if (INC.config.disablebtn == true) {
                                        INC.config.disablebtn = false;
                                        INC.methods.addProductToCart(findObj, qty, "sidebar", productBlockNode, add_btn_click, add_prod_im, add_btn);
                                    }
                                } else {
                                    productBlockNode.querySelector('.img_color_swatch').click()
                                }
                            } else if (productBlockNode.querySelector(getSelectorClassName(classNames, "productModalBlock")).querySelector('.inc_product_desc_att_size_list_item_img_block.avail') != null) {
                                if (productBlockNode.querySelector(getSelectorClassName(classNames, "productModalBlock")).querySelector('.inc_product_desc_att_size_list_item_img_block.avail.active') != null) {
                                    if (INC.config.disablebtn == true) {
                                        INC.config.disablebtn = false;
                                        INC.methods.addProductToCart(findObj, qty, "sidebar", productBlockNode, add_btn_click, add_prod_im, add_btn);
                                    }
                                }
                            } else {
                                if (INC.config.disablebtn == true) {
                                    INC.config.disablebtn = false;
                                    INC.methods.addProductToCart(findObj, qty, "sidebar", productBlockNode, add_btn_click, add_prod_im, add_btn);
                                }
                            }
                        } else {
                            var add_btn_click = productBlockNode.querySelector(getSelectorClassName(classNames, "productAddText"));
                            add_btn_click.innerText = INC.config.AddText;
                            Array.prototype.forEach.call(add_btn_click, function(el) {
                                el.innerText = INC.config.AddText;
                            });
                            var add_btn = productBlockNode.querySelector('.inc_product_desc_add_text')
                            if (add_btn != undefined) {
                                add_btn.parentNode.parentNode.setAttribute("style", "pointer-events: auto;opacity: 1;");
                            }
                            INC.config.disablebtn = true
                            $('.inc_sidebar_modal_block.active').animate({
                                scrollTop: $('.inc_sidebar_cart_added_block.active').height()
                            }, 'fast');
                        }
                    });
                    elRecommendedProductsListBlock.appendChild(productBlock);
                }
            }
        };
    }

   
    INC.clientConfig.offset = 0;
    INC.clientConfig.slidevalue = 0;
    elRecommendedProductsListBlock.setAttribute('style', 'margin-left: 0')

    if (!(elRecommendedProductsListBlock.childNodes.length > 3)) {
        elRecommendedProductsListBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "sidebarRecommendedProductsRightBlock")).style.visibility = "hidden";
        elRecommendedProductsListBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "sidebarRecommendedProductsLeftBlock")).style.visibility = "hidden";
        elRecommendedProductsListBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "sidebarRecommendedProductsLeftBlock")).setAttribute("style", "pointer-events: none;opacity:0.5;visibility: hidden;");
    }

    if (elRecommendedProductsListBlock.childNodes.length > 3) {
        elRecommendedProductsListBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "sidebarRecommendedProductsRightBlock")).style.visibility = "visible";
        elRecommendedProductsListBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "sidebarRecommendedProductsLeftBlock")).style.visibility = "visible";
        elRecommendedProductsListBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "sidebarRecommendedProductsLeftBlock")).setAttribute("style", "pointer-events: none;opacity:0.5");
    }
    // if (isIE()){
    elRecommendedProductsListBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "sidebarRecommendedProductsLeftBtnImg")).setAttribute("style", "opacity:0.5");
    // }
    var sliderBtnCounter = 0;

    var productBlocks = elRecommendedProductsListBlock.querySelectorAll(getSelectorClassName(classNames, "productModuleBlock"));
    elRecommendedProductsListBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "sidebarRecommendedProductsRightBtnBlock")).addEventListener("click", function() {
        var productBlocks = document.querySelectorAll('.inc_recommended_products_list_block .inc_product_module_block')
        if (INC.clientConfig.slidevalue + 1 < productBlocks.length) {
            elRecommendedProductsListBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "sidebarRecommendedProductsLeftBtnBlock")).setAttribute("style", "pointer-events: auto;opacity:1");
            elRecommendedProductsListBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "sidebarRecommendedProductsLeftBlock")).setAttribute("style", "pointer-events: auto;opacity:1");
            // if (isIE()){
            elRecommendedProductsListBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "sidebarRecommendedProductsLeftBtnImg")).setAttribute("style", "opacity:1");
            // }
            INC.clientConfig.slidevalue++
            var slide_w = 245
            if (window.innerWidth > 1590) {
                var slide_w = 245
            }
            if (isIE()) {
                var slide_w = 245
            }
            INC.clientConfig.offset = (parseInt(INC.clientConfig.offset) - slide_w) + 'px';
            var menu = elRecommendedProductsListBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "sidebarRecommendedProductsListBlock"));
            // menu.style['transitionDuration'] = '0.5s'
            // menu.style['marginLeft'] = INC.clientConfig.offset
            menu.setAttribute('style', 'margin-left:' + INC.clientConfig.offset + ';transition-duration:0.5s;-webkit-transition-duration:0.5s;-moz-transition-duration:0.5s;-ms-transition-duration:0.5s;-o-transition-duration:0.5s;')
        }
        var cc_ount = 1;

        if (window.innerWidth > 819) {
            cc_ount = 2
        }

        if (+INC.clientConfig.slidevalue + +cc_ount == productBlocks.length) {
            elRecommendedProductsListBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "sidebarRecommendedProductsRightBtnBlock")).setAttribute("style", "pointer-events: none;opacity:0.5");
            document.querySelector('.inc_recommended_products_right_btn_img').setAttribute("style", "pointer-events: none;opacity:0.5");
            // if (isIE()){
            elRecommendedProductsListBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "sidebarRecommendedProductsRightBtnImg")).setAttribute("style", "opacity:0.5");
            // }
        }
        sliderBtnCounter++;
        if (sliderBtnCounter > productBlocks.length - cc_ount) {
            sliderBtnCounter--;
        }
        
    });

    elRecommendedProductsListBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "sidebarRecommendedProductsLeftBtnBlock")).addEventListener("click", function() {
        var productBlocks = document.querySelectorAll('.inc_recommended_products_list_block .inc_product_module_block')
        if (INC.clientConfig.slidevalue == -1) INC.clientConfig.slidevalue = 0;
        if (INC.clientConfig.slidevalue > 0) {
            var slide_w = 245
            if (window.innerWidth > 1590) {
                var slide_w = 245
            }
            if (isIE()) {
                var slide_w = 245
            }
            elRecommendedProductsListBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "sidebarRecommendedProductsRightBtnBlock")).setAttribute("style", "pointer-events: auto;opacity:1");
            document.querySelector('.inc_recommended_products_right_btn_img').setAttribute("style", "pointer-events: auto;opacity:1");
            // if (isIE()){
            elRecommendedProductsListBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "sidebarRecommendedProductsRightBtnImg")).setAttribute("style", "opacity:1");
            // }
            INC.clientConfig.slidevalue--
            INC.clientConfig.offset = (parseInt(INC.clientConfig.offset) + slide_w) + 'px';
            var menu = elRecommendedProductsListBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "sidebarRecommendedProductsListBlock"));
            // menu.style['transitionDuration'] = '0.5s'
            // menu.style['marginLeft'] = INC.clientConfig.offset
            menu.setAttribute('style', 'margin-left:' + INC.clientConfig.offset + ';transition-duration:0.5s;-webkit-transition-duration:0.5s;-moz-transition-duration:0.5s;-ms-transition-duration:0.5s;-o-transition-duration:0.5s;')
        }
        if (INC.clientConfig.slidevalue == 0) {
            elRecommendedProductsListBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "sidebarRecommendedProductsLeftBtnBlock")).setAttribute("style", "pointer-events: none;opacity:0.5");
            elRecommendedProductsListBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "sidebarRecommendedProductsLeftBlock")).setAttribute("style", "pointer-events: none;opacity:0.5");
            // if (isIE()){
            elRecommendedProductsListBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "sidebarRecommendedProductsLeftBtnImg")).setAttribute("style", "opacity:0.5");
            // }
        }
        sliderBtnCounter--;
        if (sliderBtnCounter == -1) sliderBtnCounter = 0;
    });
    // setTimeout(function(){
    //     var inc_prod_img = document.querySelectorAll('.inc_recommended_products_list_block .inc_product_img_main_img img')
    //     for(im1=0;im1<inc_prod_img.length;im1++){
    //         // inc_prod_img[im1].setAttribute('style','left: 0 !important;position: relative;')
    //     }
    //     // _isVisible._init({
    //     //     classSelector: ".inc_pdp_block img[data-src], .inc_pdp_block source[data-src], .inc_sidebar_modal_block img[data-src], .inc_sidebar_modal_block source[data-src], .inc_af_block img[data-src], .inc_af_block source[data-src]",
    //     //     index: 0
    //     // });
    // },300)
}
INC.methods.sendBundleClickTracking = function(productId) {

    var pageType = "";
    var getSelectorClassName = INC.methods.getSelectorClassName;

    switch (INC.config.pageType) {
        case "pdp":
            pageType = "107";
            break;
        case "productList":
            pageType = "101";
            break;
        case "cartPage":
            pageType = "103";
            break;
        case "ticket":
            pageType = "103";
            break;
        case "other":
            pageType = "101";
    }

    if (document.querySelector('.inc_sidebar_modal_block.active') == null && INC.config.pageType == "pdp") {
        pageType = "100";
    }

    INC.methods.trackingEvents("bundleProductClickTracking", {
        "product_id": productId,
        "core_product_id": INC.dataStore.pdpProductId
    }, pageType);

}

INC.methods.createProductModuleBlock = function(pdpProductId, blockType, bundleProductListCheck, parentblock) {
    if (INC.dataStore.dataStoreObj.undefined == undefined) {
        // || INC.dataStore.dataStoreObj[INC.config.Product_id][INC.config.Product_id].bundleId != "12345679"
        var classNames = INC.uiConfig[blockType].className;
        var findObj = new INC.classes.FindObj({
            id: pdpProductId
        });
        var productObj = INC.dataStore.methods().getProductById(findObj);
        var getSelectorClassName = this.getSelectorClassName;

        var productModuleBlock = this.getElementChilds("productModuleBlock", blockType);
        productModuleBlock.style.userSelect = "none";
        productModuleBlock.setAttribute('data-id', productObj.id);
        productModuleBlock.setAttribute('data-sku', productObj.sku);
        productModuleBlock.setAttribute('data-main_id', productObj.mainId);
        productModuleBlock.setAttribute('data-bundle_id', productObj.bundleId);
        productModuleBlock.setAttribute('data_main_variant', productObj.mainProdVariant);
        productModuleBlock.classList.add(productObj.ProductType)
        productModuleBlock.setAttribute('style','user-select:auto !important')

        function getViewElement(className) {
            return productModuleBlock.querySelector(getSelectorClassName(classNames, className));
        }

        var elProductShowcaseBlock = getViewElement("productShowcaseBlock");
        var elProductModalBlock = getViewElement("productModalBlock");

        elProductShowcaseBlock.innerHTML = "";
        elProductModalBlock.innerHTML = "";
        if (elProductShowcaseBlock != null) {
            elProductShowcaseBlock.setAttribute('role', "contentinfo")
        }
        if (elProductModalBlock != null) {
            elProductModalBlock.setAttribute('role', "contentinfo")
        }
        var productShowcaseBlock = INC.methods.createProductShowcaseBlock(pdpProductId, blockType, bundleProductListCheck, parentblock);
        // var productShowcaseBlock = INC.methods.createProductModalBlock(pdpProductId, blockType, bundleProductListCheck);
        var productModalBlock = INC.methods.createProductModalBlock(pdpProductId, blockType, bundleProductListCheck, parentblock);

        elProductShowcaseBlock.appendChild(productShowcaseBlock);
        elProductModalBlock.appendChild(productModalBlock);

        

        return productModuleBlock;
    }
}

INC.methods.createProductShowcaseBlock = function(pdpProductId, blockType, bundleProductListCheck, parentblock) {
    var classNames = INC.uiConfig[blockType].className;
    var productBlock = this.getElementChilds("productBlock", blockType);
    var findObj = new INC.classes.FindObj({
        id: pdpProductId
    });
    var productObj = INC.dataStore.methods().getProductById(findObj);
    // var productColorText = p©roductObj["option"]["0"].text;
    var getSelectorClassName = this.getSelectorClassName;


    // if(window.innerWidth < 820){
    //     var price_html = productBlock.querySelector('.inc_product_desc_att_block').innerHTML
    //     var price_sibling=productBlock.querySelector('.inc_product_desc_title_block')
    //     var html_prc_block = document.createElement('div');
    //     html_prc_block.classList.add('inc_product_desc_att_block')
    //     html_prc_block.innerHTML = price_html
    //     var price_html_rem = productBlock.querySelector('.inc_product_desc_att_block');
    //     price_html_rem.parentNode.removeChild(price_html_rem);
    //     price_sibling.appendChild(html_prc_block);
    // }
    productBlock.setAttribute('data-id', productObj.id);
    productBlock.setAttribute('data-sku', productObj.sku);
    productBlock.setAttribute('data-main_id', productObj.mainId);
    productBlock.setAttribute('data-bundle_id', productObj.bundleId);
    productBlock.setAttribute('data_main_variant', productObj.mainProdVariant);
    productBlock.classList.add(productObj.ProductType)

    function getViewElement(className) {
        return productBlock.querySelector(getSelectorClassName(classNames, className));
    }



    var elHeaderInfoBlck = getViewElement("productInfoMainBlock");
    var elHeader = getViewElement("productHeaderMainBlock");
    var elInfoText = getViewElement("productInfoText");
    var elImgBlock = getViewElement("productImgBlock");
    var elImgGalleryListBlock = getViewElement("productImgGalleryListBlock");
    var elTitleBlock = getViewElement("productTitleBlock");
    var elTitleTextBlock = getViewElement("productTitleTextBlock");
    var elTitleText = getViewElement("productTitleText");
    var elMTitleBlock = getViewElement("productMaufactureTextBlock");
    var elMTitleText = getViewElement("productMaufactureText")
    var elproductPriceBlock = getViewElement("productPriceBlock");
    var elproductPriceLabel = getViewElement("productPriceLabel");
    var elPriceActiveText = getViewElement("productPriceActiveText");
    var elPriceActiveMsg = getViewElement("productPriceActiveTextMsg");
    var elPriceRegularText = getViewElement("productPriceRegularText");
    var elAttBlock = getViewElement("productAttBlock");
    var eleditblock = getViewElement("productAttEditBlock");
    var elAttColorBlock = getViewElement("productAttColorBlock");
    var elAttColorTitleText = getViewElement("productAttColorTitleText");
    var elAttColorTitleTextSelected = getViewElement("productAttColorTitleTextSelected");
    var elAttColorListBlock = getViewElement("productAttColorListBlock");
    var elAttSizeBlock = getViewElement("productAttSizeBlock");
    var elAttSizeTitleBlock = getViewElement("productAttSizeTitleBlock");
    var elAttSizeTitleText = getViewElement("productAttSizeTitleText");
    var elAttSizeTitleTextSelected = getViewElement("productAttSizeTitleTextSelected");
    var elAttSizeListBlock = getViewElement("productAttSizeListBlock");
    var elPackOfListBlock = getViewElement("productPackOfListBlock");
    var elQtyBlock = getViewElement("productQtyBlock");
    var elQtyInputText = getViewElement("productQtyInputText");
    var elQtyDownBlock = getViewElement("productQtyDownBlock");
    var elQtyUpBlock = getViewElement("productQtyUpBlock");
    var elAddBlock = getViewElement("productAddBlock");
    var elAddText = getViewElement("productAddText");
    var elAddImg = getViewElement("productAddImg");
    var elratingsBlock = getViewElement("productRatingsBlock");
    var elFullDesctext = getViewElement("productInfoFullDescText");
    var elworthPrice = getViewElement("productPriceWorthText");
    var elzoomicon = getViewElement("productImgMainZoomBtnImg");
    var elzoomtext = getViewElement("productImgMainZoomBtnText");
    var fulldescblock = getViewElement("productInfoFullDescBlock");
    var img_block = getViewElement("productImgMainImgBlock");
    var elzoomblock = getViewElement("productImgMainZoomBlock");
    var elpackof = getViewElement("productPackOfBlock")
    elzoomblock.style.display = "none"
    elpackof.style.display = "none"
    var eldescrpionblock = getViewElement("productDescBlock");
    var inc_collect_point_block = generate_html_tag('div', 'inc_collect_point_block')


    elHeaderInfoBlck.setAttribute('data-id', productObj.id);
    elHeaderInfoBlck.setAttribute('data-sku', productObj.sku);
    elHeaderInfoBlck.setAttribute('data-main_id', productObj.mainId);
    elHeaderInfoBlck.setAttribute('data-bundle_id', productObj.bundleId);

    eldescrpionblock.appendChild(inc_collect_point_block)

    elHeader.querySelector(getSelectorClassName(classNames, "productHeaderImgBlock")).addEventListener("click", function() {
        productBlock.parentNode.classList.remove("active");
    });


    // elworthPrice.innerText = productObj.reviewsCount
    var elImgMainImg = elImgBlock.querySelector(getSelectorClassName(classNames, "productImgMainImg"));
    
    var elImgTag1 = this.generateHTMLTags('img', {
        src: productObj.imageURLMain
    });
    if(onloadpdp == true){
        elImgTag1.src = productObj.imageURLMain
    }
    elImgTag1.setAttribute('role', 'img')
    elImgTag1.setAttribute('aria-label', 'Image')
    elImgTag1.setAttribute('alt', productObj.nameMain.toLocaleLowerCase())
    elImgTag1.setAttribute('data-mouseover', productObj["otherImageList"])
    elImgTag1.setAttribute('data-imageURL', productObj["imageURLMain"])
    var productLink = document.createElement('a');
    if(blockType == "pdp" &&  INC.config.Product_id !=  productObj.mainId) {
        productLink.href = productObj.url+"?car=gr-dmg-bundle";
    } else {
        productLink.setAttribute('style','cursor: default; text-decoration: none;')
    }
    productLink.appendChild(elImgTag1);
    productLink.setAttribute('data-eventcategory', "gr-dmg-bundle")
    productLink.setAttribute('otherImageList', productObj["otherImageList"])
    productLink.setAttribute('imageURL', productObj["imageURLMain"])
    add_swipe(productLink)

    elImgMainImg.appendChild(productLink);
    elImgMainImg.addEventListener("click", function(e) {
        e.preventDefault();
        getTrackingPixel()
        INC.methods.sendBundleClickTracking(productBlock.getAttribute('data-main_id'));
        if(blockType == "pdp" &&  INC.config.Product_id !=  productObj.mainId) {
            var href = productBlock.querySelector('.inc_product_img_main_img a').href

            setTimeout(function(){
                window.location.href = href;
                // +"?car=gr-dmg-bundle"
            },1500)
        }
    });
    
    if (INC.config.Product_id == productObj.mainId){
        var pMainPrd = document.createElement('div');
        pMainPrd.classList.add('pMainPrd')
        pMainPrd.innerText = "閲覧中";
        elImgMainImg.appendChild(pMainPrd)
    }
   
    elzoomicon.setAttribute('title', INC.config.ViewDetailsText)
    var elImgMainZoomImgBlock = elImgBlock.querySelector(getSelectorClassName(classNames, "productImgMainZoomBtnImgBlock"));
    elzoomtext.innerText = "Quick view"

    elImgMainZoomImgBlock.addEventListener('click', function() {
        if (productBlock.querySelector('.close_read_more') != null) {
            productBlock.querySelector('.close_read_more').click()
        }

        if (productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_header_block') != null) {
            productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_header_block').click()
        }
        if (document.querySelector('.inc_sidebar_modal_block.active') == null) {
            if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) && onloadpdp == true && window.innerWidth < 1337) {
                if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && navigator.userAgent.toLowerCase().indexOf('chrome') == -1) {
                    document.querySelector('body').style.position = "relative"
                }
            }
            if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) && onloadpdp == true) {
                // 
                // if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && window.innerWidth < 1337) {
                setTimeout(function(){
                    if(document.querySelector('.inc_pdp_block') != null){
                        collection_height= $(".inc_pdp_block").offset().top
                    }else if(document.querySelector('.inc_af_block') != null){
                        collection_height=  $(".inc_af_block").offset().top
                    }
                    document.querySelector('body').setAttribute('style','position: fixed;width:100%;')
                },500)
            }
            document.querySelector('html').classList.remove('inc_overlay');
        }
        if (document.querySelector('.inc_sidebar_modal_block.active') != null) {
            document.querySelector('.inc_sidebar_modal_block.active').classList.remove('overflow_visible')
        }
        Array.prototype.forEach.call(document.querySelectorAll(getSelectorClassName(classNames, "productModalBlock")), function(el) {
            el.classList.remove("active");
        });
        if (document.querySelector('.inc_sidebar_modal_block.active') == null) {
            if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) && onloadpdp == true && window.innerWidth < 1337) {
                if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0) {
                    // if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && navigator.userAgent.toLowerCase().indexOf('chrome') == -1) {
                    setTimeout(function() {
                        if (document.querySelector('.inc_pdp_block') != null) {
                            collection_height = $(".inc_pdp_block").offset().top
                        } else if (document.querySelector('.inc_af_block') != null) {
                            collection_height = $(".inc_af_block").offset().top
                        }
                        document.querySelector('body').setAttribute('style', 'position: fixed;width:100%;')
                    }, 100)
                }
            }
            document.querySelector('html').classList.add('inc_overlay');
        }
        if (document.querySelector('.inc_sidebar_modal_block.active') != null) {
            document.querySelector('.inc_sidebar_modal_block.active').classList.add('overflow_visible')
        }
        this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "productModalBlock")).classList.add("active");
        // if(window.innerWidth < 820){
        //     $('.inc_product_modal_block.active .inc_product_block').animate({ scrollTop: $('.inc_product_img_block').height() - 100}, 'fast');
        // }
    });

    var elImgMainZoomTextBlock = elImgBlock.querySelector(getSelectorClassName(classNames, "productImgMainZoomBtnTextBlock"));

    elImgMainZoomTextBlock.style.display = "none";
    elImgMainZoomTextBlock.addEventListener('click', function() {
        if (productBlock.querySelector('.close_read_more') != null) {
            productBlock.querySelector('.close_read_more').click()
        }
        if (productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_header_block') != null) {
            productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_header_block').click()
        }
        if (document.querySelector('.inc_sidebar_modal_block.active') == null) {
            if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) && onloadpdp == true && window.innerWidth < 1337) {
                if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && navigator.userAgent.toLowerCase().indexOf('chrome') == -1) {

                    document.querySelector('body').style.position = "relative"
                }
            }
            if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) && onloadpdp == true) {
                // 
                // if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && window.innerWidth < 1337) {
                if (window.innerWidth < 1337) {
                    // if (document.querySelector('.inc_pdp_block') != null) {
                    //     collection_height = $(".inc_pdp_block").offset().top
                    // } else if (document.querySelector('.inc_af_block') != null) {
                    //     collection_height = $(".inc_af_block").offset().top
                    // }
                    document.querySelector('body').setAttribute('style', 'position: fixed;width:100%;')
                    // $("html, body").animate({ scrollTop:  collection_height }, 0);
                }
            }
            document.querySelector('html').classList.remove('inc_overlay');
        }
        if (document.querySelector('.inc_sidebar_modal_block.active') != null) {
            document.querySelector('.inc_sidebar_modal_block.active').classList.remove('overflow_visible')
        }
        Array.prototype.forEach.call(document.querySelectorAll(getSelectorClassName(classNames, "productModalBlock")), function(el) {
            el.classList.remove("active");
        });
        if (document.querySelector('.inc_sidebar_modal_block.active') == null) {
            if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) && onloadpdp == true && window.innerWidth < 1337) {
                if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0) {
                    // if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && navigator.userAgent.toLowerCase().indexOf('chrome') == -1) {
                    setTimeout(function() {
                        if (document.querySelector('.inc_pdp_block') != null) {
                            collection_height = $(".inc_pdp_block").offset().top
                        } else if (document.querySelector('.inc_af_block') != null) {
                            collection_height = $(".inc_af_block").offset().top
                        }
                        document.querySelector('body').setAttribute('style', 'position: fixed;width:100%;')
                    }, 100)
                }
            }
            document.querySelector('html').classList.add('inc_overlay');
        }
        if (document.querySelector('.inc_sidebar_modal_block.active') != null) {
            document.querySelector('.inc_sidebar_modal_block.active').classList.add('overflow_visible')
        }
        this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "productModalBlock")).classList.add("active");
        
    });

    var elImgMainZoomText = elImgBlock.querySelector(getSelectorClassName(classNames, "productImgMainZoomBtnText"));

    elImgGalleryListBlock.innerHTML = "";

    if ((productObj.otherImageList != null) && (productObj.otherImageList.length >= 1) && (productObj.otherImageList[productObj.otherImageList.length - 1] != "")) {
        var otimg = 0;
        productObj.otherImageList.forEach(function(otherImgURL) {
            var elOtherImgTag = INC.methods.generateHTMLTags('img', {
                src: otherImgURL
            });
            elOtherImgTag.setAttribute('role', 'img')
            elOtherImgTag.setAttribute('aria-label', 'Image')
            elOtherImgTag.setAttribute('alt', productObj.name)
            elOtherImgTag.setAttribute('onerror', "this.src='" + productObj.imageURL + "'");

            var elImgGalleryListItemBlock = INC.methods.getElementChilds("productImgGalleryListItemBlock", blockType);

            var elImgGalleryListItemImg = elImgGalleryListItemBlock.querySelector(getSelectorClassName(classNames, "productImgGalleryListItemImg"));

            elImgGalleryListItemImg.appendChild(elOtherImgTag);
            elImgGalleryListItemBlock.setAttribute('index', otimg)
            elImgGalleryListItemBlock.addEventListener("click", function() {

                Array.prototype.forEach.call(productBlock.querySelectorAll(getSelectorClassName(classNames, "productImgGalleryListItemBlock")), function(galleryListItemBlock) {
                    galleryListItemBlock.classList.remove("active");
                });

                elImgGalleryListItemBlock.classList.add("active");

                elImgMainImg.querySelector('img').src = otherImgURL;
                elImgMainImg.querySelector('img').setAttribute('onerror', "this.src='" + productObj.imageURL + "'");
                var inc_prod_img1 = productBlock.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_img_main_img a img')
                // inc_prod_img1.setAttribute('style','left: 0 !important;position: relative;')
                setTimeout(function(){
                    var inc_prod_img1 = productBlock.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_img_main_img a img')
                    // inc_prod_img1.setAttribute('style','left: 0 !important;position: relative;')
                },300)
            })

            elImgGalleryListBlock.appendChild(elImgGalleryListItemBlock);
            if (otimg == 0) {
                // elImgGalleryListItemBlock.classList.add('active')
            }
            otimg++;
            if (productObj.otherImageList.length > 5) {
                elImgGalleryListItemBlock.parentNode.classList.add("flex-start")
            }
        });

        // elImgGalleryListBlock.querySelector(getSelectorClassName(classNames, "productImgGalleryListItemBlock")).click();
    } else {
        elImgMainZoomImgBlock.style.display = "none"
    }

    if (INC.config.Product_id !=  productObj.mainId){
        elTitleTextBlock.addEventListener("click", function() {

            getTrackingPixel()
            INC.methods.sendBundleClickTracking(productBlock.getAttribute('data-main_id'));
            var href = productBlock.querySelector('.inc_product_img_main_img a').href
            setTimeout(function() {
                window.location.href = href;
            }, 1500)
            
        });
    }
    var pMTitleDiv = document.createElement('div');
    if (productObj.MakerName != null){
        if (window.innerWidth < 820){
            pMTitleDiv.innerText = productObj.MakerName + " " + productObj.manufacturer;
        } else {
            if (productObj.MakerName.length > 10){
                pMTitleDiv.innerText = productObj.MakerName.substring(0, 10) + "...";
            } else {
                pMTitleDiv.innerText = productObj.MakerName;
            }
        }
    }
    
    
    //elratingsBlock
    var field1 = productObj.Filed3;
    INC.methods.get_product_ratings(field1, elratingsBlock);
    var pLink = document.createElement('a');
    if(blockType == "pdp" &&  INC.config.Product_id ==  productObj.mainId) {
        pLink.setAttribute('style','cursor: default; text-decoration: none;')
    }else{
        pLink.href = productObj.url+"?car=gr-dmg-bundle";
    }
    // pLink.setAttribute('style', 'text-transform: unset;')
    if (productObj.MakerName != null){
        pLink.setAttribute('title', productObj.MakerName)
    }
    pLink.setAttribute('data-eventcategory', "gr-dmg-bundle")
    pLink.appendChild(pMTitleDiv);
    elMTitleText.appendChild(pLink);


    var pTitleDiv = document.createElement('div');
    pTitleDiv.innerText = productObj.nameMain;
    
    //elratingsBlock
    var field1 = productObj.Filed3;
    INC.methods.get_product_ratings(field1, elratingsBlock);
    var pLink = document.createElement('a');
    if(blockType == "pdp" &&  INC.config.Product_id ==  productObj.mainId) {
        pLink.setAttribute('style','cursor: default; text-decoration: none;')
    }else{
        pLink.href = productObj.url+"?car=gr-dmg-bundle";
    }
    // pLink.setAttribute('style', 'text-transform: unset;')
    pLink.setAttribute('title', productObj.nameMain)
    pLink.setAttribute('data-eventcategory', "gr-dmg-bundle")
    pLink.appendChild(pTitleDiv);
    elTitleText.appendChild(pLink);

   
    var productLink = document.createElement('a');
    if(blockType == "pdp" &&  INC.config.Product_id !=  productObj.mainId) {
        productLink.href = productObj.url+"?car=gr-dmg-bundle";
    } else {
        productLink.setAttribute('style','cursor: default; text-decoration: none;')
    }
    
    elproductPriceBlock.appendChild(productLink);

    elproductPriceBlock.addEventListener("click", function(e) {
        e.preventDefault();
        getTrackingPixel()
        INC.methods.sendBundleClickTracking(productBlock.getAttribute('data-main_id'));
        if(blockType == "pdp" &&  INC.config.Product_id !=  productObj.mainId) {
            var href = productBlock.querySelector('a').href

            setTimeout(function(){
                window.location.href = href+"?car=gr-dmg-bundle";
            },1500)
        }
    });
    
    if (INC.config.usrIdfy == "nonLogin") { 
        // var activePrice = parseFloat(productObj.activePrice).toFixed(2).toString();
        // var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
        if (productObj.MemberPrices !=undefined && productObj.MemberPrc != "") {
            var activePrice = parseFloat(productObj.MemberPrices.split('|')[0].split('=')[1]).toFixed(2).toString();
            var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
        } else {
            if (productObj.worthPrice != null && productObj.worthPricee != ""){
                var activePrice = parseFloat(productObj.worthPrice.split('|')[0].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            }
        }
    } else if (INC.config.usrIdfy == "level0"){
        if (productObj.MemberPrices !=undefined && productObj.MemberPrc != "") {
            var activePrice = parseFloat(productObj.MemberPrices.split('|')[1].split('=')[1]).toFixed(2).toString();
            var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
        } else {
            if (productObj.worthPrice != null && productObj.worthPricee != ""){
                var activePrice = parseFloat(productObj.worthPrice.split('|')[1].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            }
        }
        if (productObj.genericField != null){
            if (productObj.genericField.indexOf('-') > 1){
                if (productObj.genericField.split('|')[1].split('-')[0] != productObj.genericField.split('|')[1].split('-')[1]){
                    if (productBlock.querySelector('.inc_product_desc_add_block').classList.contains('Inc_checked') == false){
                        elproductPriceLabel.innerHTML = INC.clientConfig.currencySymbol +"<span> 特価 </span>" + "¥" +formatter.format(productObj.genericField.split('|')[1].split('-')[0].replace('mp4=','').replace('.0','')
                        ).replace('￥', '').replace('¥', '') + "～" + "<span> ("+INC.config.prcText+") </span>"
                    }
                }
            }
        }
    } else if (INC.config.usrIdfy == "level1"){
        if (productObj.MemberPrices !=undefined && productObj.MemberPrc != ""){
            var activePrice = parseFloat(productObj.MemberPrices.split('|')[2].split('=')[1]).toFixed(2).toString();
            var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
        } else {
            if (productObj.worthPrice != null && productObj.worthPricee != ""){
                var activePrice = parseFloat(productObj.worthPrice.split('|')[2].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            }
        }
        if (productObj.genericField != null){
            if (productObj.genericField.indexOf('-') > 1){
                if (productObj.genericField.split('|')[2].split('-')[0] != productObj.genericField.split('|')[2].split('-')[1]){
                    if (productBlock.querySelector('.inc_product_desc_add_block').classList.contains('Inc_checked') == false){
                        elproductPriceLabel.innerHTML = INC.clientConfig.currencySymbol +"<span> 特価 </span>" + "¥" +formatter.format(productObj.genericField.split('|')[2].split('-')[0].replace('mp4=','').replace('.0','')
                        ).replace('￥', '').replace('¥', '') + "～" + "<span> ("+INC.config.prcText+") </span>"
                    }
                }
            }
        }
    } else if (INC.config.usrIdfy == "level2"){
        if (productObj.MemberPrices !=undefined && productObj.MemberPrc != ""){
            var activePrice = parseFloat(productObj.MemberPrices.split('|')[3].split('=')[1]).toFixed(2).toString();
            var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
        } else {
            if (productObj.worthPrice != null && productObj.worthPricee != ""){
                var activePrice = parseFloat(productObj.worthPrice.split('|')[3].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            }
        }
        if (productObj.genericField != null){
            if (productObj.genericField.indexOf('-') > 1){
                if (productObj.genericField.split('|')[3].split('-')[0] != productObj.genericField.split('|')[3].split('-')[1]){
                    if (productBlock.querySelector('.inc_product_desc_add_block').classList.contains('Inc_checked') == false){
                        productBlock.querySelector('.inc_product_desc_add_block').classList.add('showLabel');
                        elproductPriceLabel.innerHTML = INC.clientConfig.currencySymbol +"<span> 特価 </span>" + "¥" +formatter.format(productObj.genericField.split('|')[3].split('-')[0].replace('mp4=','').replace('.0','')
                        ).replace('￥', '').replace('¥', '') + "～" + "<span> ("+INC.config.prcText+") </span>"
                    }
                }
            }
        }
    } else if (INC.config.usrIdfy == "level3"){
        if (productObj.MemberPrices !=undefined && productObj.MemberPrc != ""){
            var activePrice = parseFloat(productObj.MemberPrices.split('|')[4].split('=')[1]).toFixed(2).toString();
            var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
        } else {
            if (productObj.worthPrice != null && productObj.worthPricee != ""){
                var activePrice = parseFloat(productObj.worthPrice.split('|')[4].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            }
        }
        if (productObj.genericField != null){
            if (productObj.genericField.indexOf('-') > 1){
                if (productObj.genericField.split('|')[4].split('-')[0] != productObj.genericField.split('|')[4].split('-')[1]){
                    if (productBlock.querySelector('.inc_product_desc_add_block').classList.contains('Inc_checked') == false){
                        elproductPriceLabel.innerHTML = INC.clientConfig.currencySymbol +"<span> 特価 </span>" + "¥" +formatter.format(productObj.genericField.split('|')[4].split('-')[0].replace('mp4=','').replace('.0','')
                        ).replace('￥', '').replace('¥', '') + "～" + "<span> ("+INC.config.prcText+") </span>"
                    }
                }
            }
        }
    } else if (INC.config.usrIdfy == "level4"){
       if (productObj.MemberPrices !=undefined && productObj.MemberPrc != ""){
            var activePrice = parseFloat(productObj.MemberPrices.split('|')[5].split('=')[1]).toFixed(2).toString();
            var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
        } else {
            if (productObj.worthPrice != null && productObj.worthPricee != ""){
                var activePrice = parseFloat(productObj.worthPrice.split('|')[5].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            }
        }
        if (productObj.genericField != null){
            if (productObj.genericField.indexOf('-') > 1){
                if (productObj.genericField.split('|')[5].split('-')[0] != productObj.genericField.split('|')[5].split('-')[1]){
                    if (productBlock.querySelector('.inc_product_desc_add_block').classList.contains('Inc_checked') == false){
                        setTimeout(function(){
                            if (productBlock.querySelector('.inc_product_desc_titlprc_block .inc_product_desc_price_block') != null){
                                productBlock.querySelector('.inc_product_desc_titlprc_block .inc_product_desc_price_block').classList.add('showPriceLabel')
                            }
                        },500)
                        elproductPriceLabel.innerHTML = INC.clientConfig.currencySymbol +"<span> 特価 </span>" + "¥" +formatter.format(productObj.genericField.split('|')[5].split('-')[0].replace('mp4=','').replace('.0','')
                        ).replace('￥', '').replace('¥', '') + "～" + "<span> ("+INC.config.prcText+") </span>"
                    }
                }
            }
        }
    }
    // var worthPrice = parseFloat(productObj.worthPrice).toFixed(2).toString();


    // elPriceActiveMsg.innerText = " + VAT"
    elPriceRegularText.innerText = "";
    if (activePrice != regularPrice && regularPrice != "" && regularPrice != null && regularPrice != 0) {
        elPriceActiveText.parentNode.parentNode.parentNode.classList.add('is_special_price')
        elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol +"<span> 特価 </span>"  +  "¥" +formatter.format(activePrice).replace('￥', '').replace('¥', '')+ "<span> ("+INC.config.prcText+") </span>"
        elPriceRegularText.innerHTML = INC.clientConfig.regularPricePrefix + INC.clientConfig.currencySymbol + formatter.format(regularPrice) + "<span> ("+INC.config.prcText+") </span>"
    } else {
        elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol +"<span> 価格 </span>"  +  "¥" +formatter.format(activePrice).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>"

    }

    if (productBlock.querySelector('.pc_promo_div') == null && productObj.ProductLevelDiscountMessage != null && productObj.ProductLevelDiscountMessage != "") {
        var inc_offer = generate_html_tag('div', 'inc_offer')
        inc_offer.innerText = ""
        elImgBlock.appendChild(inc_offer)
        var ec_promo_div = document.createElement('div');
        ec_promo_div.classList.add('pc_promo_div')
        ec_promo_div.classList.add('active')
        var ec_promo_span = document.createElement('span');
        ec_promo_span.classList.add('pc_promo_span')

        ec_promo_span.classList.add('red_promo')
        ec_promo_span.innerHTML = productObj.ProductLevelDiscountMessage.split('|')[0].replace("_", " ")
        ec_promo_span.setAttribute('title', productObj.ProductLevelDiscountMessage.split('|')[0].replace("_", " "))
        ec_promo_div.appendChild(ec_promo_span);

        var elPrice_blck = elproductPriceBlock;
        if (window.innerWidth > 819) {
            var view = elAttBlock
        } else {
            var view = elAttBlock
        }
        if (view != null || view != undefined) {
            view.parentNode.insertBefore(ec_promo_div, view);
        }
        if (parentblock != undefined) {
            parentblock.classList.add('promos_available')
        }
        var inc_promo_popup = generate_html_tag('div', 'inc_promo_popup')
        var inc_promo_dialoge = generate_html_tag('div', 'inc_promo_dialoge')
        var inc_close_promo = generate_html_tag('span', 'inc_close_promo')
        inc_promo_dialoge.appendChild(inc_close_promo)
        var inc_promo_heading = generate_html_tag('div', 'inc_promo_heading')
        inc_promo_heading.innerText = ""
        inc_promo_dialoge.appendChild(inc_promo_heading)
        var inc_promo_sub_heading = generate_html_tag('div', 'inc_promo_sub_heading')
        // inc_promo_sub_heading.innerText = "You can combine promotions but only one offer code can be used per transaction"
        inc_promo_dialoge.appendChild(inc_promo_sub_heading)
        var inc_promo_text_block = generate_html_tag('div', 'inc_promo_text_block')

        var ec_promo_div_popup = document.createElement('div');
        ec_promo_div_popup.classList.add('ec_promo_div_popup')
        if (productObj.ProductLevelDiscountMessage.split("|")[0] != "" && productObj.ProductLevelDiscountMessage.split("|")[0] != "null" && productObj.ProductLevelDiscountMessage.split("|")[0] != "undefined") {
            ec_promo_div_popup.classList.add('inc_active')
        }
        var ec_promo_span_popup = document.createElement('span');
        ec_promo_span_popup.classList.add('ec_promo_span_popup')
        ec_promo_span_popup.classList.add('red_promo')
        if (productObj.ProductLevelDiscountMessage.split("|")[0] != "null" && productObj.ProductLevelDiscountMessage.split("|")[0] != "undefined") {
            ec_promo_span_popup.innerHTML = productObj.ProductLevelDiscountMessage.split("|")[0]
        }
        ec_promo_div_popup.appendChild(ec_promo_span_popup);


        if (productObj.ProductLevelDiscountMessage.split("|")[1] != undefined) {
            var ec_promo_div_popup1 = document.createElement('div');
            ec_promo_div_popup1.classList.add('ec_promo_div_popup')
            if (productObj.ProductLevelDiscountMessage.split("|")[1] != "") {
                ec_promo_div_popup1.classList.add('inc_active')
            }
            var ec_promo_span_popup1 = document.createElement('span');
            ec_promo_span_popup1.classList.add('ec_promo_span_popup')

            ec_promo_span_popup1.classList.add('red_promo')
            ec_promo_span_popup1.innerHTML = productObj.ProductLevelDiscountMessage.split("|")[1]
            ec_promo_div_popup1.appendChild(ec_promo_span_popup1);

        }
        if (productObj.ProductLevelDiscountMessage.split("|")[2] != undefined) {
            var ec_promo_div_popup2 = document.createElement('div');
            ec_promo_div_popup2.classList.add('ec_promo_div_popup')
            if (productObj.ProductLevelDiscountMessage.split("|")[2] != "") {
                ec_promo_div_popup2.classList.add('inc_active')
            }
            var ec_promo_span_popup2 = document.createElement('span');
            ec_promo_span_popup2.classList.add('ec_promo_span_popup')

            ec_promo_span_popup2.classList.add('red_promo')
            ec_promo_span_popup2.innerHTML = productObj.ProductLevelDiscountMessage.split("|")[2]
            ec_promo_div_popup2.appendChild(ec_promo_span_popup2);

        }
        if (productObj.ProductLevelDiscountMessage.split("|")[2] != undefined) {
            inc_promo_text_block.appendChild(ec_promo_div_popup)
            inc_promo_text_block.appendChild(ec_promo_div_popup1)
            inc_promo_text_block.appendChild(ec_promo_div_popup2)
        } else if (productObj.ProductLevelDiscountMessage.split("|")[1] != undefined) {
            inc_promo_text_block.appendChild(ec_promo_div_popup)
            inc_promo_text_block.appendChild(ec_promo_div_popup1)
        } else {
            inc_promo_text_block.appendChild(ec_promo_div_popup)
        }
        inc_promo_dialoge.appendChild(inc_promo_text_block)
        inc_promo_popup.appendChild(inc_promo_dialoge)
        productBlock.appendChild(inc_promo_popup)

        ec_promo_div.addEventListener('click', function() {
            if (productBlock.querySelector('.inc_promo_popup') != null) {
                if (document.querySelector('.inc_sidebar_modal_block.active') != null) {
                    document.querySelector('.inc_sidebar_modal_block.active').classList.add('overflow_visible')
                }
                document.querySelector('html').classList.add('inc_overlay_promo');
                productBlock.querySelector('.inc_promo_popup').classList.add('inc_active')
            }

        })
        inc_close_promo.addEventListener('click', function() {
            document.querySelector('html').classList.remove('inc_overlay_promo');
            this.parentNode.parentNode.classList.remove('inc_active')
            if (document.querySelector('.inc_sidebar_modal_block.active') != null) {
                document.querySelector('.inc_sidebar_modal_block.active').classList.remove('overflow_visible')
            }
        })

    } else {
        var ec_promo_div = document.createElement('div');
        ec_promo_div.classList.add('pc_promo_div')
        ec_promo_div.classList.add('empty');
        var elPrice_blck = elproductPriceBlock;
        if (window.innerWidth > 819) {
            var view = elAttBlock
        } else {
            var view = elAttBlock
        }
        if (view != null || view != undefined) {
            view.parentNode.insertBefore(ec_promo_div, view);
        }
    }
    eleditblock.addEventListener("click", function() {
        if (productBlock.querySelector('.close_read_more') != null) {
            productBlock.querySelector('.close_read_more').click()
        }

        if (productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_header_block') != null) {
            productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_header_block').click()
        }
        if (document.querySelector('.inc_sidebar_modal_block.active') == null) {
            if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) && onloadpdp == true && window.innerWidth < 1337) {
                if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && navigator.userAgent.toLowerCase().indexOf('chrome') == -1) {
                    document.querySelector('body').style.position = "relative"
                }
            }
            if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) && onloadpdp == true) {
                // 
                // if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && window.innerWidth < 1337) {
                if (window.innerWidth < 1337) {
                    // if (document.querySelector('.inc_pdp_block') != null) {
                    //     // $("html, body").animate({
                    //     //     scrollTop: $(".inc_pdp_block").offset().top - 130
                    //     // }, 0);
                    // } else if (document.querySelector('.inc_af_block') != null) {
                    //     $("html, body").animate({
                    //         scrollTop: $(".inc_af_block").offset().top - 130
                    //     }, 0);
                    // }
                }
            }
            document.querySelector('html').classList.remove('inc_overlay');
        }
        if (document.querySelector('.inc_sidebar_modal_block.active') != null) {
            document.querySelector('.inc_sidebar_modal_block.active').classList.remove('overflow_visible')
        }
        Array.prototype.forEach.call(document.querySelectorAll(getSelectorClassName(classNames, "productModalBlock")), function(el) {
            el.classList.remove("active");
        });
        if (document.querySelector('.inc_sidebar_modal_block.active') == null) {
            if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) && onloadpdp == true && window.innerWidth < 1337) {
                if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0) {
                    // if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && navigator.userAgent.toLowerCase().indexOf('chrome') == -1) {
                    setTimeout(function() {
                        if (document.querySelector('.inc_pdp_block') != null) {
                            collection_height = $(".inc_pdp_block").offset().top
                        } else if (document.querySelector('.inc_af_block') != null) {
                            collection_height = $(".inc_af_block").offset().top
                        }
                        document.querySelector('body').setAttribute('style', 'position: fixed;width:100%;')
                    }, 100)
                }
            }
            document.querySelector('html').classList.add('inc_overlay');
        }
        if (document.querySelector('.inc_sidebar_modal_block.active') != null) {
            document.querySelector('.inc_sidebar_modal_block.active').classList.add('overflow_visible')
        }
        this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "productModalBlock")).classList.add("active")
        // if(window.innerWidth < 820){
        //     $('.inc_product_modal_block.active .inc_product_block').animate({ scrollTop: $('.inc_product_img_block').height() - 100}, 'fast');
        // }
    });
    elAttBlock.addEventListener("click", function() {
        if (productBlock.querySelector('.close_read_more') != null) {
            productBlock.querySelector('.close_read_more').click()
        }

        var productModuleBlock = productBlock.parentNode.parentNode
        var flag_check = INC.methods.checkVariantSelection(productModuleBlock)

        if (productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_header_block') != null) {
            productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_header_block').click()
        }
        if (document.querySelector('.inc_sidebar_modal_block.active') == null) {
            if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) && onloadpdp == true && window.innerWidth < 1337) {
                if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && navigator.userAgent.toLowerCase().indexOf('chrome') == -1) {
                    document.querySelector('body').style.position = "relative"
                }
            }
            if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) && onloadpdp == true && window.innerWidth < 1337) {
                // 
                // if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && window.innerWidth < 1337) {
                if (window.innerWidth < 819) {
                    if (document.querySelector('.inc_pdp_block') != null) {
                        collection_height = $(".inc_pdp_block").offset().top
                    } else if (document.querySelector('.inc_af_block') != null) {
                        collection_height = $(".inc_af_block").offset().top
                    }
                    // document.querySelector('body').setAttribute('style', 'position: fixed;width:100%;')
                }
            }
            document.querySelector('html').classList.remove('inc_overlay');
        }
        if (document.querySelector('.inc_sidebar_modal_block.active') != null) {
            document.querySelector('.inc_sidebar_modal_block.active').classList.remove('overflow_visible')
        }
        Array.prototype.forEach.call(document.querySelectorAll(getSelectorClassName(classNames, "productModalBlock")), function(el) {
            el.classList.remove("active");
        });
        if (document.querySelector('.inc_sidebar_modal_block.active') == null) {
            if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) && onloadpdp == true && window.innerWidth < 1337) {
                if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0) {
                    // if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && navigator.userAgent.toLowerCase().indexOf('chrome') == -1) {
                    setTimeout(function() {
                        if (window.innerWidth < 819) {
                            // if (document.querySelector('.inc_pdp_block') != null) {
                            //     // scrollTop: $(".customer_review").offset().top - 25
                            // } else if (document.querySelector('.inc_af_block') != null) {
                            //     collection_height = $(".inc_af_block").offset().top
                            // }
                            // document.querySelector('body').setAttribute('style', 'position: fixed;width:100%;')
                        }
                    }, 100)
                }
            }
            document.querySelector('html').classList.add('inc_overlay');
        }
        if (document.querySelector('.inc_sidebar_modal_block.active') != null) {
            document.querySelector('.inc_sidebar_modal_block.active').classList.add('overflow_visible')
        }
        if (this.parentNode.parentNode.parentNode.parentNode.parentNode.classList.contains('inc_product_module_block') == true) {
            this.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "productModalBlock")).classList.add("active")
        } else {
            this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "productModalBlock")).classList.add("active")
        }
        var inc_prod_img1 = productBlock.querySelector('.inc_product_img_main_img img')
        var inc_prd_mod1 =  productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_img_main_img img')
        // inc_prd_mod1.setAttribute('style','left: 0 !important;position: relative;')
        // inc_prod_img1.setAttribute('style','left: 0 !important;position: relative;')
        setTimeout(function(){
            var inc_prod_img2 = productBlock.querySelectorAll('.inc_product_img_main_img img')
            var inc_prd_mod2 =  productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_img_main_img img')
            for(im2=0;im2<inc_prod_img2.length;im2++){
                // inc_prod_img2[im2].setAttribute('style','left: 0 !important;position: relative;')
            }
            for(im3=0;im3<inc_prd_mod2.length;im3++){
                // inc_prd_mod2[im3].setAttribute('style','left: 0 !important;position: relative;')
            }
            var inc_prod_img1 = productBlock.querySelector('.inc_product_img_main_img img')
            // inc_prod_img1.setAttribute('style','left: 0 !important;position: relative;')
            var inc_prd_mod1 =  productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_img_main_img img')
            // inc_prd_mod1.setAttribute('style','left: 0 !important;position: relative;')
        },300)
        var inc_prod_img1 = productBlock.querySelector('.inc_product_img_main_img img')
        // inc_prod_img1.setAttribute('style','left: 0 !important;position: relative;')
        var inc_prod_img1 = productBlock.querySelector('.inc_product_img_main_img img')
        // inc_prod_img1.setAttribute('style','left: 0 !important;position: relative;')
        var inc_prd_mod1 =  productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_img_main_img img')
        // inc_prd_mod1.setAttribute('style','left: 0 !important;position: relative;')

        // if(window.innerWidth < 820){
        //     $('.inc_product_modal_block.active .inc_product_block').animate({ scrollTop: $('.inc_product_img_block').height() - 100}, 'fast');
        // }
    });

    var elQtyInput = this.generateHTMLTags('input');
    elQtyInput.setAttribute('type', "number");
    elQtyInput.setAttribute('aria-label', "quantity");
    elQtyInput.setAttribute('min', 1);
    elQtyInput.setAttribute('max', 99);
    elQtyInput.setAttribute('maxlength', 2);
    elQtyInput.value = 1;
    elQtyInput.setAttribute('old_qty', '1');
    elQtyInput.setAttribute('pattern', '[0-9]');
    elQtyInput.setAttribute("onkeydown", "if(event.key==='.'){event.preventDefault();}");
    elQtyInput.setAttribute('onKeyPress', 'if(this.value.length==2) return false;');

    elQtyBlock.addEventListener("click", function() {
        if (productBlock.querySelector('.close_read_more') != null) {
            productBlock.querySelector('.close_read_more').click()
        }
        if (productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_header_block') != null) {
            productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_header_block').click()
        }
        Array.prototype.forEach.call(document.querySelectorAll(getSelectorClassName(classNames, "productPackOfListBlock")), function(el) {
            el.classList.remove("active");
        });
        elQtyBlock.classList.toggle("active");
    });

    var elPackOfArrray = [];
    var qty_c = 99
    for (var i = 0; i < qty_c; i++) elPackOfArrray.push(i);
    elPackOfArrray.forEach(function(i) {
        var elPackOfItemBlock1 = INC.methods.getElementChilds("productPackOfItemBlock", blockType);
        elPackOfItemBlock1.querySelector(getSelectorClassName(classNames, "productPackOfItemTitleText")).innerText = "";
        elPackOfItemBlock1.querySelector(getSelectorClassName(classNames, "productPackOfItemQuantityText")).innerText = i + 1;
        elPackOfListBlock.appendChild(elPackOfItemBlock1);

        elPackOfItemBlock1.addEventListener("click", function() {
            elPackOfListBlock.classList.remove("active");
            elQtyInput.value = i + 1;
            var sku = productBlock.getAttribute('data-sku');
            var qty = parseInt(elQtyInput.value);

            if (elAddText.innerText == "Added" || elAddText.innerText == "Update" || elAddText.innerText == INC.config.AddedText || elAddText.innerText == INC.config.UpdateText) {
                INC.methods.updateBundleCart({
                    sku: sku,
                    qty: qty
                }, "add");
            }
        });
    });
    elQtyInputText.appendChild(elQtyInput);



    elQtyInput.addEventListener("keydown", function() {
        // if (document.querySelector('.inc_sidebar_modal_block.active') != null) {
        //     INC.config.user_interaction_modal = false
        //     if(typeof(clear_modal) != "undefined"){
        //         clearInterval(clear_modal)
        //     }
        // }
        // elQtyInput.value = (elQtyInput.value - 1 < 1) ? 1 : elQtyInput.value - 1;
        var prod_card = elQtyInput.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
        elPackOfListBlock.classList.remove("active");
        setTimeout(function() {
            if (elQtyInput.value.length == 0) elQtyInput.value = 1;
            if (elQtyInput.value == 0) elQtyInput.value = 1;
            if (elQtyInput.value > 99) elQtyInput.value = 99;

            var productModuleBlock = productBlock.parentNode.parentNode;

            var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

            showcaseProductBlock.querySelector(getSelectorClassName(classNames, "productQtyInputText")).querySelector('input').value = parseInt(elQtyInput.value);

            var id = productBlock.getAttribute('data-id');
            var qty = parseInt(elQtyInput.value);
            var main_id = productBlock.getAttribute('data-main_id');
            var bundle_id = productBlock.getAttribute('data-bundle_id');
            var pname = productBlock.querySelector('.inc_product_desc_title_text').innerText;
            var pprice = productBlock.querySelector('.inc_product_desc_price_active_text').innerText.replace('$', '');
            prod_card.querySelector('.inc_product_modal_block .inc_product_desc_qty_input_block input').value = elQtyInput.value
            if (elAddText.innerText == "Added") {
                INC.methods.updateBundleCart({
                    sku: id,
                    qty: qty
                }, "add", main_id, bundle_id, pname, pprice);
            }
        }, 50);

    });

    elQtyInputText.appendChild(elQtyInput);

    elQtyDownBlock.addEventListener('click', function() {
        // if (document.querySelector('.inc_sidebar_modal_block.active') != null) {
        //     INC.config.user_interaction_modal = false
        //     if(typeof(clear_modal) != "undefined"){
        //         clearInterval(clear_modal)
        //     }
        // }
        if (productBlock.querySelector('.close_read_more') != null) {
            productBlock.querySelector('.close_read_more').click()
        }
        if (productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_header_block') != null) {
            productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_header_block').click()
        }
        var prod_card = elQtyInput.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
        elQtyInput.value = (elQtyInput.value - 1 < 1) ? 1 : elQtyInput.value - 1;

        var productModuleBlock = productBlock.parentNode.parentNode;

        var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

        showcaseProductBlock.querySelector(getSelectorClassName(classNames, "productQtyInputText")).querySelector('input').value = parseInt(elQtyInput.value);
        prod_card.querySelector('.inc_product_modal_block .inc_product_desc_qty_input_block input').value = elQtyInput.value
        var id = productBlock.getAttribute('data-id');
        var qty = parseInt(elQtyInput.value);
        var main_id = productBlock.getAttribute('data-main_id');
        var bundle_id = productBlock.getAttribute('data-bundle_id');
        var pname = productBlock.querySelector('.inc_product_desc_title_text').innerText;
        var pprice = productBlock.querySelector('.inc_product_desc_price_active_text').innerText.replace('$', '');
        if (elAddText.innerText == "Added" || elAddText.innerText == "Update" || elAddText.innerText == INC.config.UpdateText) {
            INC.methods.updateBundleCart({
                sku: id,
                qty: qty
            }, "add", main_id, bundle_id, pname, pprice);
        }
    });

    elQtyUpBlock.addEventListener('click', function() {
        // if (document.querySelector('.inc_sidebar_modal_block.active') != null) {
        //     INC.config.user_interaction_modal = false
        //     if(typeof(clear_modal) != "undefined"){
        //         clearInterval(clear_modal)
        //     }
        // }
        if (productBlock.querySelector('.close_read_more') != null) {
            productBlock.querySelector('.close_read_more').click()
        }
        if (productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_header_block') != null) {
            productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_header_block').click()
        }
        var prod_card = elQtyInput.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
        elQtyInput.value = (parseInt(elQtyInput.value) + 1 > 99) ? 99 : parseInt(elQtyInput.value) + 1;

        var productModuleBlock = productBlock.parentNode.parentNode;

        var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

        showcaseProductBlock.querySelector(getSelectorClassName(classNames, "productQtyInputText")).querySelector('input').value = parseInt(elQtyInput.value);
        prod_card.querySelector('.inc_product_modal_block .inc_product_desc_qty_input_block input').value = elQtyInput.value
        var id = productBlock.getAttribute('data-id');
        var qty = parseInt(elQtyInput.value);
        var main_id = productBlock.getAttribute('data-main_id');
        var bundle_id = productBlock.getAttribute('data-bundle_id');
        var pname = productBlock.querySelector('.inc_product_desc_title_text').innerText;
        var pprice = productBlock.querySelector('.inc_product_desc_price_active_text').innerText.replace('$', '');
        if (elAddText.innerText == "Added" || elAddText.innerText == "Update" || elAddText.innerText == INC.config.UpdateText) {
            INC.methods.updateBundleCart({
                sku: id,
                qty: qty
            }, "add", main_id, bundle_id, pname, pprice);
        }
    });

    findObj = new INC.classes.FindObj({
        mainId: productObj.mainId
    });

    var productColorsObj = INC.dataStore.methods().getProductColorsObj(findObj);
    if (productColorsObj.colorArray.length == 0) {
        var productSizesObj = INC.dataStore.methods().getProductSizesObj(findObj);
    }

    if (productColorsObj.colorArray.length > 0) {
        elAttColorListBlock.innerHTML = "";
        if (productColorsObj["colorArray"].length > 0) {
            var elImgColorSwatch = document.createElement('div');
            elImgColorSwatch.classList.add("img_color_swatch");
            elImgColorSwatch.style.display = "none"
            var elImgColorSwatchCount = document.createElement('div');
            elImgColorSwatchCount.classList.add("img_color_swatch_count");
            elImgColorSwatchCount.style.display = "none"
            elImgColorSwatchCount.innerText = productColorsObj["colorArray"].length;

            elImgMainZoomTextBlock.style.display = "none";
            elImgMainZoomText.appendChild(elImgColorSwatch);
            elImgMainZoomText.appendChild(elImgColorSwatchCount);
        }
    }
    var sizezero = INC.dataStore.methods().getProductopt0Obj(findObj)
    // if (productColorsObj["colorArray"].length == 0 && sizezero["att0Array"].length == 0) {
    //     elAttSizeTitleText.innerText = INC.config.ViewDetailsText;
    //     elAttBlock.style.visibility = "hidden"
    // } else if (productColorsObj["colorArray"].length > 0) {

    //     elAttSizeTitleText.innerText = "オプションを選択";
    // } else if (sizezero["att0Array"].length > 0) {
    //     elAttSizeTitleText.innerText = "オプションを選択";
    // }


    switch (blockType) {
        case "pdp":
            elAddText.innerText = INC.config.AddText;
            break;
        case "sidebar":
        case "am":
            elAddText.innerText = INC.config.AddToCartText;
            break;
    }
    elAddBlock.addEventListener("click", function () {
        if(productBlock.querySelector('.close_read_more') != null){
            productBlock.querySelector('.close_read_more').click()
        }
        if(productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_header_block') != null){
            productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_header_block').click()
        }
        var productModuleBlock = productBlock.parentNode.parentNode;
        var flag_check = INC.methods.checkVariantSelection(productModuleBlock)
        var modalProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productModalBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));
        var sku = productBlock.getAttribute('data-sku');
        var mainId = productBlock.getAttribute('data-main_id');
        var main_id = productBlock.getAttribute('data-main_id');
        var bundle_id = productBlock.getAttribute('data-bundle_id');
        var pname=productBlock.querySelector('.inc_product_desc_title_text').innerText;
        var pprice=productBlock.querySelector('.inc_product_desc_price_active_text').innerText.replace('$','');
        var qty = parseInt(elQtyInput.value);
        var prod_card = elAddText.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;
        if(document.querySelector('.inc_sidebar_modal_block.active') == null && document.querySelector('.inc_af_block') == null){
            if(flag_check == 1 || onloadpdp == false || onloadpdp_delete == false){
                
                switch (elAddText.innerText.trim()) {

                    
                    case INC.config.AddText: 
                        if(onloadpdp == false || productModuleBlock.querySelector('.inc_product_modal_block.active') != null || productModuleBlock.querySelector('.inc_product_desc_att_block.config_avail.elipsis_inc') != null){
                            elAddText.innerText = INC.config.AddedText;
                            elAddText.classList.add('added');
                            elAddText.parentNode.parentNode.classList.add('Inc_checked');
                            
                            elAddText.parentNode.parentNode.parentNode.classList.add('active');
                            modalProductBlock.querySelector(getSelectorClassName(classNames, "productAddText")).innerText = INC.config.UpdateText;
                            productBlock.classList.add('inc_checked')
                            var pListItemBlock = document.querySelector(getSelectorClassName(classNames, "pdpBundleProductListItemBlock") + "[data-main_id=\"" + mainId + "\"]");
                            if (pListItemBlock != null) {
                                pListItemBlock.classList.add('product_added');
                                pListItemBlock.querySelector(getSelectorClassName(classNames, "pdpBundleProductListItemAddedBtnImg")).classList.add("checked");
                            }
                            elAddImg.classList.add("checked");
                            modalProductBlock.querySelector(getSelectorClassName(classNames, "productAddImg")).classList.add("checked");

                            if (INC.config.pageType == "pdp" && blockType == "pdp") INC.methods.updateBundleCart({ sku: sku, qty: qty}, "add",main_id,bundle_id,pname,pprice);
                            if(productModuleBlock != null){
                                if(productModuleBlock.querySelector('.inc_product_modal_block.active') != null){
                                    productModuleBlock.querySelector('.inc_product_modal_block.active').classList.remove('active')
                                }
                            }

                            if(document.querySelector('.inc_sidebar_modal_block.active') == null){
                                document.querySelector('html').classList.remove('inc_overlay');
                                if((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) && onloadpdp == true   && window.innerWidth < 1337){
                                    if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0) {
                                        document.querySelector('body').style.position = "relative"
                                    }
                                }
                                
                                setTimeout(function() {
                                    INC.config.scroll = true;
                                }, 100);
                            }
                            if(document.querySelector('.inc_sidebar_modal_block.active') != null){
                                document.querySelector('.inc_sidebar_modal_block.active').classList.remove('overflow_visible')
                            }
                            if(productBlock.querySelector('.close_read_more') != null){
                                productBlock.querySelector('.close_read_more').click()
                            }
                            if(productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_header_block') != null){
                                productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_header_block').click()
                            }
                            if (productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_qty_input_text input').value != productBlock.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_qty_input_text input').value) {
                                productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_qty_input_text input').value = productBlock.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_qty_input_text input').value
                            }
                            if(productModuleBlock.querySelector('.inc_product_modal_block.active') != null){
                                productModuleBlock.querySelector('.inc_product_modal_block.active').classList.remove("active");
                            }
                        }else{
                            productModuleBlock.querySelector('.inc_product_desc_att_block').click()
                        }
                        break;
                    case INC.config.AddedText:
                        // if(Object.keys(INC.dataStore.bundleCartProducts).length != 1){
                            if(modalProductBlock.querySelector(getSelectorClassName(classNames, "productAddText")).innerText != INC.config.UpdateText && productModuleBlock.querySelector('.inc_product_modal_block.active') != null){
                                elAddText.innerText = INC.config.AddText;
                                elAddText.classList.remove('added');
                                elAddText.parentNode.parentNode.classList.remove('Inc_checked');
                                elAddText.parentNode.parentNode.parentNode.classList.remove('active');
                                modalProductBlock.querySelector(getSelectorClassName(classNames, "productAddText")).innerText = "選択する";
                                productBlock.classList.remove('inc_checked')
                                var pListItemBlock = document.querySelector(getSelectorClassName(classNames, "pdpBundleProductListItemBlock") + "[data-main_id=\"" + mainId + "\"]");
                                if (pListItemBlock != null) {
                                    pListItemBlock.classList.remove('product_added');
                                    pListItemBlock.querySelector(getSelectorClassName(classNames, "pdpBundleProductListItemAddedBtnImg")).classList.remove("checked");
                                }
                                elAddImg.classList.remove("checked");
                                modalProductBlock.querySelector(getSelectorClassName(classNames, "productAddImg")).classList.remove("checked");
                                if (INC.config.pageType == "pdp" && blockType == "pdp") INC.methods.updateBundleCart({ sku: sku, qty: qty }, "sub",main_id,bundle_id,pname,pprice);
                            }else{
                                if(productModuleBlock.querySelector('.inc_product_modal_block.active') == null){
                                    elAddText.innerText = INC.config.AddText;
                                    elAddText.classList.remove('added');
                                    elAddText.parentNode.parentNode.classList.remove('Inc_checked');
                                    elAddText.parentNode.parentNode.parentNode.classList.remove('active');
                                    modalProductBlock.querySelector(getSelectorClassName(classNames, "productAddText")).innerText = "選択する";
                                    productBlock.classList.remove('inc_checked')
                                    var pListItemBlock = document.querySelector(getSelectorClassName(classNames, "pdpBundleProductListItemBlock") + "[data-main_id=\"" + mainId + "\"]");
                                    if (pListItemBlock != null) {
                                        pListItemBlock.classList.remove('product_added');
                                        pListItemBlock.querySelector(getSelectorClassName(classNames, "pdpBundleProductListItemAddedBtnImg")).classList.remove("checked");
                                    }
                                    elAddImg.classList.remove("checked");
                                    modalProductBlock.querySelector(getSelectorClassName(classNames, "productAddImg")).classList.remove("checked");
                                    if (INC.config.pageType == "pdp" && blockType == "pdp") INC.methods.updateBundleCart({ sku: sku, qty: qty }, "sub",main_id,bundle_id,pname,pprice);
                                }
                            }
                            if(productModuleBlock != null){
                                if(productModuleBlock.querySelector('.inc_product_modal_block.active') != null){
                                    productModuleBlock.querySelector('.inc_product_modal_block.active').classList.remove('active')
                                }
                                 if((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) &&  onloadpdp == true  && window.innerWidth < 1337){
                                    document.querySelector('html').classList.remove('inc_overlay');
                                    if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && navigator.userAgent.toLowerCase().indexOf('chrome') == -1) {
                                        document.querySelector('body').style.position = "relative"
                                    }
                                }
                                // if (onloadpdp == false){
                                    setTimeout(function() {
                                        if((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) &&  onloadpdp == true && INC.config.scroll == true){
                                            
                                        }
                                        INC.config.scroll = true;
                                    }, 100);
                                // }
                            }
                           
                        // }
                        
                        break;
                }
            }else {
                if(document.querySelector('.inc_product_modal_block.active') == null){
                    switch (elAddText.textContent) {
                        case INC.config.AddText:
                            if(document.querySelector('.inc_product_modal_block.active') == null){
                                productModuleBlock.querySelector('.inc_product_desc_att_block').click()
                                
                            }
                            break;
                        case INC.config.AddedText:
                            if(modalProductBlock.querySelector(getSelectorClassName(classNames, "productAddText")).innerText != INC.config.UpdateText && productModuleBlock.querySelector('.inc_product_modal_block.active') != null){
                                elAddText.innerText = INC.config.AddText;
                                elAddText.classList.remove('added');
                                elAddText.parentNode.parentNode.classList.remove('Inc_checked');
                                elAddText.parentNode.parentNode.parentNode.classList.remove('active');
                                modalProductBlock.querySelector(getSelectorClassName(classNames, "productAddText")).innerText = "選択する";
                                productBlock.classList.remove('inc_checked')
                                var pListItemBlock = document.querySelector(getSelectorClassName(classNames, "pdpBundleProductListItemBlock") + "[data-main_id=\"" + mainId + "\"]");
                                if (pListItemBlock != null) {
                                    pListItemBlock.classList.remove('product_added');
                                    pListItemBlock.querySelector(getSelectorClassName(classNames, "pdpBundleProductListItemAddedBtnImg")).classList.remove("checked");
                                }
                                elAddImg.classList.remove("checked");
                                modalProductBlock.querySelector(getSelectorClassName(classNames, "productAddImg")).classList.remove("checked");
                                if (INC.config.pageType == "pdp" && blockType == "pdp") INC.methods.updateBundleCart({ sku: sku, qty: qty }, "sub",main_id,bundle_id,pname,pprice);
                            }else{
                                if(productModuleBlock.querySelector('.inc_product_modal_block.active') == null){
                                    elAddText.innerText = INC.config.AddText;
                                    elAddText.classList.remove('added');
                                    elAddText.parentNode.parentNode.classList.remove('Inc_checked');
                                    elAddText.parentNode.parentNode.parentNode.classList.remove('active');
                                    modalProductBlock.querySelector(getSelectorClassName(classNames, "productAddText")).innerText = "選択する";
                                    productBlock.classList.remove('inc_checked')
                                    var pListItemBlock = document.querySelector(getSelectorClassName(classNames, "pdpBundleProductListItemBlock") + "[data-main_id=\"" + mainId + "\"]");
                                    if (pListItemBlock != null) {
                                        pListItemBlock.classList.remove('product_added');
                                        pListItemBlock.querySelector(getSelectorClassName(classNames, "pdpBundleProductListItemAddedBtnImg")).classList.remove("checked");
                                    }
                                    elAddImg.classList.remove("checked");
                                    modalProductBlock.querySelector(getSelectorClassName(classNames, "productAddImg")).classList.remove("checked");
                                    if (INC.config.pageType == "pdp" && blockType == "pdp") INC.methods.updateBundleCart({ sku: sku, qty: qty }, "sub",main_id,bundle_id,pname,pprice);
                                }
                            }
                            if(productModuleBlock != null){
                                if(productModuleBlock.querySelector('.inc_product_modal_block.active') != null){
                                    productModuleBlock.querySelector('.inc_product_modal_block.active').classList.remove('active')
                                }
                            }
                            break;
                    }
                    // productModuleBlock.querySelector('.inc_product_desc_att_block').click()
                }
            }
        }else{
            if(flag_check == 1){
                elAddText.textContent = INC.config.addingText;
                elAddText.parentNode.parentNode.setAttribute("style", "pointer-events: none;opacity: 0.5;");
            }else{
                if(document.querySelector('.inc_product_modal_block.active') == null){
                    productModuleBlock.querySelector('.inc_product_desc_att_block').click()
                   
                }
            }
        }
    });

    return productBlock;
}

INC.methods.createProductModalBlock = function(pdpProductId, blockType, bundleProductListCheck, parentblock) {
    var classNames = INC.uiConfig[blockType].className;
    var productBlock = this.getElementChilds("productBlock", blockType);
    var findObj = new INC.classes.FindObj({
        id: pdpProductId
    });
    var productObj = INC.dataStore.methods().getProductById(findObj);
    // var productColorText = productObj["option"]["0"].text;
    var getSelectorClassName = this.getSelectorClassName;

    productBlock.setAttribute('data-id', productObj.id);
    productBlock.setAttribute('data-sku', productObj.sku);
    productBlock.setAttribute('data-main_id', productObj.mainId);
    productBlock.setAttribute('data-bundle_id', productObj.bundleId);
    productBlock.setAttribute('data_main_variant', productObj.mainProdVariant);
    productBlock.classList.add(productObj.ProductType)

    var main_prod_id = productObj.mainId

    function getViewElement(className) {
        return productBlock.querySelector(getSelectorClassName(classNames, className));
    }

    var elHeaderInfoBlck = getViewElement("productInfoMainBlock");
    var elHeader = getViewElement("productHeaderMainBlock");
    var elInfoText = getViewElement("productInfoText");
    var elImgBlock = getViewElement("productImgBlock");
    var elImgGalleryListBlock = getViewElement("productImgGalleryListBlock");
    var elTitleBlock = getViewElement("productTitleBlock");
    var elTitleText = getViewElement("productTitleText");
    var elMTitleBlock = getViewElement("productMaufactureTextBlock");
    var elMTitleText = getViewElement("productMaufactureText")
    var elproductPriceBlock = getViewElement("productPriceBlock");
    var elproductPriceLabel = getViewElement("productPriceLabel");
    var elPriceActiveText = getViewElement("productPriceActiveText");
    var elPriceActiveMsg = getViewElement("productPriceActiveTextMsg");
    var elPriceRegularText = getViewElement("productPriceRegularText");
    var elAttBlock = getViewElement("productAttBlock");
    var elAttColorBlock = getViewElement("productAttColorBlock");
    var elAttColorTitleText = getViewElement("productAttColorTitleText");
    var elAttColorTitleTextSelected = getViewElement("productAttColorTitleTextSelected");
    var elAttColorListBlock = getViewElement("productAttColorListBlock");
    var elAttSizeBlock = getViewElement("productAttSizeBlock");
    var elAttSizeTitleBlock = getViewElement("productAttSizeTitleBlock");
    var elAttSizeTitleText = getViewElement("productAttSizeTitleText");
    var elAttSizeTitleTextSelected = getViewElement("productAttSizeTitleTextSelected");
    var elAttSizeListBlock = getViewElement("productAttSizeListBlock");
    var elAtt0ListBlock = getViewElement("productAttzeroListBlock");
    var elAtt3ListBlock = getViewElement("productAttthirdListBlock");
    var elAtt4ListBlock = getViewElement("productAttfourthListBlock");

    var elAtt0Block = getViewElement("productAttzeroBlock");
    var elAtt3Block = getViewElement("productAttthirdBlock");
    var elAtt4Block = getViewElement("productAttfourthBlock");
    var elAtt0TitleTextSelected = getViewElement("productAttzeroTitleTextSelected");
    var elAtt0TitleText = getViewElement("productAttzeroTitleText");
    var elAtt3TitleTextSelected = getViewElement("productAttthirdTitleTextSelected");
    var elAtt3TitleText = getViewElement("productAttthirdTitleText");
    var elAtt4TitleTextSelected = getViewElement("productAttfourthTitleTextSelected");
    var elAtt4TitleText = getViewElement("productAttfourthTitleText");

    var elPackOfListBlock = getViewElement("productPackOfListBlock");
    var elQtyBlock = getViewElement("productQtyBlock");
    var elQtyInputText = getViewElement("productQtyInputText");
    var elQtyDownBlock = getViewElement("productQtyDownBlock");
    var elQtyUpBlock = getViewElement("productQtyUpBlock");
    var elAddBlock = getViewElement("productAddBlock");
    var elAddText = getViewElement("productAddText");
    var elAddImg = getViewElement("productAddImg");
    var elratingsBlock = getViewElement("productRatingsBlock");
    var elFullDesctext = getViewElement("productInfoFullDescText");
    var elworthPrice = getViewElement("productPriceWorthText");
    var elGalleryRightArrow = getViewElement("productImgGalleryRightBlock");
    var elGallerylefttArrow = getViewElement("productImgGalleryLeftBlock");
    var fulldescblock = getViewElement("productInfoFullDescBlock");
    var fullDescHeaderText = getViewElement("productInfoFullDescDescHeaderText")
    var fullDescShippingHeaderText = getViewElement("productInfoFullDescShippingHeaderText")
    var fullDescShippingText = getViewElement("productInfoFullDescShippingText")
    var elzoomplus = getViewElement("productImgMainZoomBtnImg");
    var elzoomminus = getViewElement("productImgMainZoomminusImg");
    var elzoomreturn = getViewElement("productImgMainZoomRuturnImg");
    var img_block = getViewElement("productImgMainImgBlock");
    var elcolortitleblock = getViewElement("productAttColorTitleBlock");
    var elzerotitleblock = getViewElement("productAttzeroTitleBlock");
    var eldescrpionblock = getViewElement("productDescBlock");
    var elProductDescriptionText = getViewElement("productDescriptionHeaderTitleText")
    var elMaindescription = getViewElement("productDescriptionMainBlock")
    var elviewdetailheader = getViewElement("productHeaderBlock")
    var eldescheader = getViewElement("productDescriptionHeaderBlock")
    var elInfomain = getViewElement("productInfoMainBlock")
    var elcloseblk = getViewElement("productHeaderImgBlock")
    var elprdqtyinputblock = getViewElement("productQtyInputBlock");
    var elp_var_title = getViewElement("productAddTitle");

    elHeaderInfoBlck.setAttribute('data-id', productObj.id);
    elHeaderInfoBlck.setAttribute('data-sku', productObj.sku);
    elHeaderInfoBlck.setAttribute('data-main_id', productObj.mainId);
    elHeaderInfoBlck.setAttribute('data-bundle_id', productObj.bundleId);

    elviewdetailheader.classList.add('active')
    elInfomain.classList.add('active')
    elcloseblk.classList.add('outer')
    elviewdetailheader.addEventListener('click', function(e) {
        if (productBlock.querySelector('.inc_product_description_main_block.desc_avail') != null) {
            productBlock.querySelector('.inc_product_description_main_block.desc_avail').classList.remove('active')
        }
        productBlock.querySelector('.inc_product_Description_header_block').classList.remove('active')
        this.classList.add('active')
        productBlock.querySelector('.inc_product_info_main_block').classList.add('active')
    })

    eldescheader.addEventListener('click', function(e) {
        if (productBlock.querySelector('.inc_product_description_main_block.desc_avail') != null) {
            productBlock.querySelector('.inc_product_info_main_block').classList.remove('active')
            productBlock.querySelector('.inc_product_description_main_block').classList.add('active')
        }

        productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_header_block').classList.remove('active')
        this.classList.add('active')

        $(".inc_product_modal_block.active .inc_product_block .inc_product_description_main_block").animate({
            scrollTop: 0
        }, 0);
    })

    // elworthPrice.innerText = productObj.reviewsCount

    var inc_collect_point_block = generate_html_tag('div', 'inc_collect_point_block')


    img_block.setAttribute('role', 'img')
    img_block.setAttribute('aria-label', 'Image')

    elzoomplus.addEventListener('click', function() {
        this.parentNode.classList.add('active')
        var mainimgel = this.parentNode.parentNode.parentNode.parentNode
        if (window.innerWidth < 1200) {
            mainimgel.querySelector('.inc_product_img_main_img img').setAttribute('style', 'height:200%;')
            mainimgel.querySelector('.inc_product_img_main_img img').style.maxWidth = "300px"
        } else {
            mainimgel.querySelector('.inc_product_img_main_img img').style.maxWidth = "272px"
        }
    })
    elzoomminus.addEventListener('click', function() {
        this.parentNode.classList.remove('active')
        var mainimgel = this.parentNode.parentNode.parentNode.parentNode
        if (window.innerWidth < 1200) {
            mainimgel.querySelector('.inc_product_img_main_img img').style.maxWidth = ""
            mainimgel.querySelector('.inc_product_img_main_img img').setAttribute('style', 'height:100%;')
        } else {
            mainimgel.querySelector('.inc_product_img_main_img img').style.maxWidth = ""
        }
    })
    elzoomreturn.addEventListener('click', function() {
        this.parentNode.classList.remove('active')
        var mainimgel = this.parentNode.parentNode.parentNode.parentNode
        mainimgel.querySelector('.inc_product_img_main_img img').style.maxWidth = ""
        if (window.innerWidth < 1200) {
            mainimgel.querySelector('.inc_product_img_main_img img').style.maxWidth = ""
            mainimgel.querySelector('.inc_product_img_main_img img').setAttribute('style', 'height:100%;')
        } else {
            mainimgel.querySelector('.inc_product_img_main_img img').style.maxWidth = ""
        }
    })

    elHeader.querySelector(getSelectorClassName(classNames, "productHeaderImgBlock")).addEventListener("click", function() {
        if (document.querySelector('.inc_sidebar_modal_block.active') == null) {
            document.querySelector('html').classList.remove('inc_overlay');
            if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) && onloadpdp == true && window.innerWidth < 1337) {
                if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0) {
                    document.querySelector('body').style.position = "relative"
                }
            }
            if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null)) {

                // if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && window.innerWidth < 1337) {
                if (window.innerWidth < 819) {
                    // if (document.querySelector('.inc_pdp_block') != null) {
                    //     // var a = document.querySelector(".recommend_area")
                    //     // a.scrollIntoView();
                    // } else if (document.querySelector('.inc_af_block') != null) {
                    //     $("html, body").animate({
                    //         scrollTop: $(".inc_af_block").offset().top - 150
                    //     }, 0);
                    // }
                    // $("html, body").animate({ scrollTop:  collection_height }, 0);
                }
            }

        }
        if (document.querySelector('.inc_sidebar_modal_block.active') != null) {
            document.querySelector('.inc_sidebar_modal_block.active').classList.remove('overflow_visible')
        }
        if (productBlock.querySelector('.close_read_more') != null) {
            productBlock.querySelector('.close_read_more').click()
        }
        if (productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_header_block') != null) {
            productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_header_block').click()
        }
        if (productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_qty_input_text input').value != productBlock.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_qty_input_text input').value) {
            productBlock.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_qty_input_text input').value = productBlock.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_qty_input_text input').value
        }
        productBlock.parentNode.classList.remove("active");
    });

    var elImgMainImg = elImgBlock.querySelector(getSelectorClassName(classNames, "productImgMainImg"));
    var elImgTag1 = this.generateHTMLTags('img', {
        src: productObj.imageURLMain
    });
    if(onloadpdp == true){
        elImgTag1.src = productObj.imageURLMain
    }
    elImgTag1.setAttribute('role', 'img')
    elImgTag1.setAttribute('aria-label', 'Image')
    elImgTag1.setAttribute('alt', productObj.nameMain.toLocaleLowerCase())
    var productLink = document.createElement('a');
    if(blockType == "pdp" &&  INC.config.Product_id ==  productObj.mainId) {
        productLink.setAttribute('style','cursor: default;text-decoration: none;')
    } else {
        productLink.href = productObj.url+"?car=gr-dmg-bundle";
    }
    
    productLink.appendChild(elImgTag1);
    productLink.setAttribute('otherImageList', productObj["otherImageList"])
    productLink.setAttribute('imageURL', productObj["imageURLMain"])
    add_swipe(productLink)



    elImgMainImg.appendChild(productLink);
    elImgMainImg.addEventListener("click", function() {
        INC.methods.sendBundleClickTracking(productBlock.getAttribute('data-main_id'));
    });

    elImgGalleryListBlock.innerHTML = "";

    if ((productObj.otherImageList != null) && productObj.otherImageList.length >= 1) {
        var otimg = 0
        productObj.otherImageList.forEach(function(otherImgURL) {
            var elOtherImgTag = INC.methods.generateHTMLTags('img', {
                src: otherImgURL
            });
            elOtherImgTag.setAttribute('alt', productObj.name)
            elOtherImgTag.setAttribute('role', 'img')
            elOtherImgTag.setAttribute('aria-label', 'Image')
            elOtherImgTag.setAttribute('onerror', "this.src='" + productObj.imageURL + "'");

            var elImgGalleryListItemBlock = INC.methods.getElementChilds("productImgGalleryListItemBlock", blockType);

            var elImgGalleryListItemImg = elImgGalleryListItemBlock.querySelector(getSelectorClassName(classNames, "productImgGalleryListItemImg"));

            elImgGalleryListItemImg.appendChild(elOtherImgTag);
            elImgGalleryListItemBlock.setAttribute('index', otimg)
            elImgGalleryListItemBlock.addEventListener("click", function() {
                Array.prototype.forEach.call(productBlock.querySelectorAll(getSelectorClassName(classNames, "productImgGalleryListItemBlock")), function(galleryListItemBlock) {
                    galleryListItemBlock.classList.remove("active");
                });

                elImgGalleryListItemBlock.classList.add("active");

                elImgMainImg.querySelector('img').src = otherImgURL;
                elImgMainImg.querySelector('img').setAttribute('onerror', "this.src='" + productObj.imageURL + "'");
                var activedots = elImgGalleryListItemBlock
                if (activedots != null) {
                    INC.config.inc_slideIndex = +activedots.getAttribute('index') + 1
                }
            })

            elImgGalleryListBlock.appendChild(elImgGalleryListItemBlock);
            if (otimg == 0) {
                // elImgGalleryListItemBlock.classList.add('active')
            }
            otimg++;
            if (productObj.otherImageList.length > 5) {
                elImgGalleryListItemBlock.parentNode.classList.add("flex-start")
            }

            var inc_prod_img1 = productBlock.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_img_main_img a img')
            // inc_prod_img1.setAttribute('style','left: 0 !important;position: relative;')
            setTimeout(function(){
                var inc_prod_img1 = productBlock.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_img_main_img a img')
                // inc_prod_img1.setAttribute('style','left: 0 !important;position: relative;')
            },100)
        });

        // elImgGalleryListBlock.querySelector(getSelectorClassName(classNames, "productImgGalleryListItemBlock")).click();
    }
    var pMTitleDiv = document.createElement('div');
    if (productObj.MakerName != null){
        var txtCount = productObj.manufacturer.length +  productObj.MakerName.length
        var mark_Manu =  productObj.MakerName + " " + productObj.manufacturer;
        if (window.innerWidth < 820){
            // if (txtCount > 25){
            //     pMTitleDiv.innerText = mark_Manu.substring(0, 25) + "...";
            // } else {
                pMTitleDiv.innerText = productObj.MakerName + " " + productObj.manufacturer;
            // }
        } else {
            // if (txtCount > 17){
            //     pMTitleDiv.innerText = mark_Manu.substring(0, 17) + "...";;
            // } else {
                pMTitleDiv.innerText = productObj.MakerName + " " + productObj.manufacturer;
            // }
        }
    }
    
    //elratingsBlock
    var field1 = productObj.Filed3;
    INC.methods.get_product_ratings(field1, elratingsBlock);
    var pLink = document.createElement('a');
    if(blockType == "pdp" &&  INC.config.Product_id ==  productObj.mainId) {
        pLink.setAttribute('style','cursor: default;text-decoration: none;')
    }else{
        if (INC.config.Product_id !=  productObj.mainId){
            pLink.href = productObj.url+"?car=gr-dmg-bundle";
        }
    }
    pLink.setAttribute('title', productObj.nameMain)
    pLink.appendChild(pMTitleDiv);
    elMTitleText.appendChild(pLink);

    var pTitleDiv = document.createElement('div');
    pTitleDiv.innerText = productObj.nameMain;

    
    var field1 = productObj.Filed3;
    INC.methods.get_product_ratings(field1, elratingsBlock);
    var pLink = document.createElement('a');
    if(blockType == "pdp" &&  INC.config.Product_id ==  productObj.mainId) {
        pLink.setAttribute('style','cursor: default;text-decoration: none;')
    }else{
        if (INC.config.Product_id !=  productObj.mainId){
            pLink.href = productObj.url+"?car=gr-dmg-bundle";
        }
    }
    pLink.setAttribute('title', productObj.nameMain)
    pLink.appendChild(pTitleDiv);
    elTitleText.appendChild(pLink);

    var productLink = document.createElement('a');
    if(blockType == "pdp" &&  INC.config.Product_id !=  productObj.mainId) {
        productLink.href = productObj.url+"?car=gr-dmg-bundle";
    } else {
        productLink.setAttribute('style','cursor: default; text-decoration: none;')
    }
    
    elproductPriceBlock.appendChild(productLink);

    elproductPriceBlock.addEventListener("click", function(e) {
        e.preventDefault();
        getTrackingPixel()
        INC.methods.sendBundleClickTracking(productBlock.getAttribute('data-main_id'));
        if(blockType == "pdp" &&  INC.config.Product_id !=  productObj.mainId) {
            var href = productBlock.querySelectorAll('a')[1].href

            setTimeout(function(){
                window.location.href = href;
            },1500)
        }
    });

    if (productObj.description != "") {
        elProductDescriptionText.innerHTML = INC.config.DescriptionText;
        elProductDescriptionText.classList.add('desc_avail')
        elMaindescription.classList.add('desc_avail')

        if (window.innerWidth < 820) {
            newdescription = "<span class='desc_mobile_title'>" + INC.config.DescriptionText + "</span>"
            elMaindescription.innerHTML = newdescription + productObj.description;
            // elInfoText.innerHTML = productObj.description;
        } else {
            elMaindescription.innerHTML = productObj.description;
        }
    }

    if (INC.config.usrIdfy == "nonLogin") { 
        // var activePrice = parseFloat(productObj.activePrice).toFixed(2).toString();
        // var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
        if (productObj.MemberPrices !=undefined && productObj.MemberPrc != "") {
            var activePrice = parseFloat(productObj.MemberPrices.split('|')[0].split('=')[1]).toFixed(2).toString();
            var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
        } else {
            if (productObj.worthPrice != null && productObj.worthPricee != ""){
                var activePrice = parseFloat(productObj.worthPrice.split('|')[0].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            }
        }
    } else if (INC.config.usrIdfy == "level0"){
        if (productObj.MemberPrices !=undefined && productObj.MemberPrc != "") {
            var activePrice = parseFloat(productObj.MemberPrices.split('|')[1].split('=')[1]).toFixed(2).toString();
            var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
        } else {
            if (productObj.worthPrice != null && productObj.worthPricee != ""){
                var activePrice = parseFloat(productObj.worthPrice.split('|')[1].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            }
        }
        if (productObj.genericField != null){
            if (productObj.genericField.indexOf('-') > 1){
                if (productObj.genericField.split('|')[1].split('-')[0] != productObj.genericField.split('|')[1].split('-')[1]){
                    if (productBlock.querySelector('.inc_product_desc_add_block').classList.contains('Inc_checked') == false){
                        elproductPriceLabel.innerHTML = INC.clientConfig.currencySymbol +"<span> 特価 </span>" + "¥" +formatter.format(productObj.genericField.split('|')[1].split('-')[0].replace('mp4=','').replace('.0','')
                        ).replace('￥', '').replace('¥', '') + "～" + "<span> ("+INC.config.prcText+") </span>"
                    }
                }
            }
        }
    } else if (INC.config.usrIdfy == "level1"){
        if (productObj.MemberPrices !=undefined && productObj.MemberPrc != ""){
            var activePrice = parseFloat(productObj.MemberPrices.split('|')[2].split('=')[1]).toFixed(2).toString();
            var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
        } else {
            if (productObj.worthPrice != null && productObj.worthPricee != ""){
                var activePrice = parseFloat(productObj.worthPrice.split('|')[2].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            }
        }
        if (productObj.genericField != null){
            if (productObj.genericField.indexOf('-') > 1){
                if (productObj.genericField.split('|')[2].split('-')[0] != productObj.genericField.split('|')[2].split('-')[1]){
                    if (productBlock.querySelector('.inc_product_desc_add_block').classList.contains('Inc_checked') == false){
                        elproductPriceLabel.innerHTML = INC.clientConfig.currencySymbol +"<span> 特価 </span>" + "¥" +formatter.format(productObj.genericField.split('|')[2].split('-')[0].replace('mp4=','').replace('.0','')
                        ).replace('￥', '').replace('¥', '') + "～" + "<span> ("+INC.config.prcText+") </span>"
                    }
                }
            }
        }
    } else if (INC.config.usrIdfy == "level2"){
        if (productObj.MemberPrices !=undefined && productObj.MemberPrc != ""){
            var activePrice = parseFloat(productObj.MemberPrices.split('|')[3].split('=')[1]).toFixed(2).toString();
            var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
        } else {
            if (productObj.worthPrice != null && productObj.worthPricee != ""){
                var activePrice = parseFloat(productObj.worthPrice.split('|')[3].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            }
        }
        if (productObj.genericField != null){
            if (productObj.genericField.indexOf('-') > 1){
                if (productObj.genericField.split('|')[3].split('-')[0] != productObj.genericField.split('|')[3].split('-')[1]){
                    if (productBlock.querySelector('.inc_product_desc_add_block').classList.contains('Inc_checked') == false){
                        productBlock.querySelector('.inc_product_desc_add_block').classList.add('showLabel');
                        elproductPriceLabel.innerHTML = INC.clientConfig.currencySymbol +"<span> 特価 </span>" + "¥" +formatter.format(productObj.genericField.split('|')[3].split('-')[0].replace('mp4=','').replace('.0','')
                        ).replace('￥', '').replace('¥', '') + "～" + "<span> ("+INC.config.prcText+") </span>"
                    }
                }
            }
        }
    } else if (INC.config.usrIdfy == "level3"){
        if (productObj.MemberPrices !=undefined && productObj.MemberPrc != ""){
            var activePrice = parseFloat(productObj.MemberPrices.split('|')[4].split('=')[1]).toFixed(2).toString();
            var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
        } else {
            if (productObj.worthPrice != null && productObj.worthPricee != ""){
                var activePrice = parseFloat(productObj.worthPrice.split('|')[4].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            }
        }
        if (productObj.genericField != null){
            if (productObj.genericField.indexOf('-') > 1){
                if (productObj.genericField.split('|')[4].split('-')[0] != productObj.genericField.split('|')[4].split('-')[1]){
                    if (productBlock.querySelector('.inc_product_desc_add_block').classList.contains('Inc_checked') == false){
                        elproductPriceLabel.innerHTML = INC.clientConfig.currencySymbol +"<span> 特価 </span>" + "¥" +formatter.format(productObj.genericField.split('|')[4].split('-')[0].replace('mp4=','').replace('.0','')
                        ).replace('￥', '').replace('¥', '') + "～" + "<span> ("+INC.config.prcText+") </span>"
                    }
                }
            }
        }
    } else if (INC.config.usrIdfy == "level4"){
       if (productObj.MemberPrices !=undefined && productObj.MemberPrc != ""){
            var activePrice = parseFloat(productObj.MemberPrices.split('|')[5].split('=')[1]).toFixed(2).toString();
            var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
        } else {
            if (productObj.worthPrice != null && productObj.worthPricee != ""){
                var activePrice = parseFloat(productObj.worthPrice.split('|')[5].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            }
        }
        if (productObj.genericField != null){
            if (productObj.genericField.indexOf('-') > 1){
                if (productObj.genericField.split('|')[5].split('-')[0] != productObj.genericField.split('|')[5].split('-')[1]){
                    if (productBlock.querySelector('.inc_product_desc_add_block').classList.contains('Inc_checked') == false){
                        
                        setTimeout(function(){
                            if (productBlock.querySelector('.inc_product_desc_titlprc_block .inc_product_desc_price_block') != null){
                                productBlock.querySelector('.inc_product_desc_titlprc_block .inc_product_desc_price_block').classList.add('showPriceLabel')
                            }
                        },500)
                        elproductPriceLabel.innerHTML = INC.clientConfig.currencySymbol +"<span> 特価 </span>" + "¥" +formatter.format(productObj.genericField.split('|')[5].split('-')[0].replace('mp4=','').replace('.0','')
                        ).replace('￥', '').replace('¥', '') + "～" + "<span> ("+INC.config.prcText+") </span>"
                    }
                }
            }
        }
    }
    // var worthPrice = parseFloat(productObj.worthPrice).toFixed(2).toString();

    elPriceRegularText.innerText = "";

    if (activePrice != regularPrice && regularPrice != "" && regularPrice != null && regularPrice != 0) {
        elPriceActiveText.parentNode.parentNode.parentNode.classList.add('is_special_price')
        elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>" + "¥" +  formatter.format(activePrice).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>"
        elPriceRegularText.innerHTML = INC.clientConfig.regularPricePrefix + "<span> 特価 </span>" + INC.clientConfig.currencySymbol +
            formatter.format(regularPrice) + "<span> ("+INC.config.prcText+") </span>"
    } else {
        elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol + "<span> 価格 </span>"  + "¥" +  formatter.format(activePrice).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>"
    }
    //


    if (productBlock.querySelector('.pc_promo_div') == null && productObj.ProductLevelDiscountMessage != null && productObj.ProductLevelDiscountMessage != "") {
        var allpromolength = productObj.ProductLevelDiscountMessage.split("|").length
        var ec_promo_div_main = document.createElement('div');
        ec_promo_div_main.classList.add('ec_promo_div_main')
        var ec_promo_div = document.createElement('div');
        ec_promo_div.classList.add('pc_promo_div')
        ec_promo_div_main.classList.add('only_' + allpromolength)
        if (allpromolength > 3) {
            ec_promo_div.classList.add('morethan3')
        }

        if (productObj.offer != "" && productObj.offer != null) {
            var offer_block = document.createElement('div')
            offer_block.classList.add('inc_offer_block')
            var offer_text = document.createElement('a')
            offer_text.setAttribute('href', productObj.offer);
            offer_text.setAttribute('target', 'target');
            offer_text.classList.add('inc_offer_text')
            offer_text.innerText = "Offers"
            offer_block.appendChild(offer_text)
        }
        if (productObj.ProductLevelDiscountMessage.split("|")[0] != "" && productObj.ProductLevelDiscountMessage.split("|")[0] != "null" && productObj.ProductLevelDiscountMessage.split("|")[0] != "undefined") {
            ec_promo_div.classList.add('inc_active')
        }
        var ec_promo_span = document.createElement('span');
        ec_promo_span.classList.add('pc_promo_span')

        ec_promo_span.classList.add('red_promo')
        if (productObj.ProductLevelDiscountMessage.split("|")[0] != "null" && productObj.ProductLevelDiscountMessage.split("|")[0] != "undefined") {
            ec_promo_span.innerHTML = productObj.ProductLevelDiscountMessage.split("|")[0]
        }
        ec_promo_div.appendChild(ec_promo_span);



        var inc_avail_offer_block = document.createElement('div');
        inc_avail_offer_block.classList.add('inc_avail_offer_block')
        var in_available_offer = document.createElement('div');
        in_available_offer.innerText = "Available Offer"
        in_available_offer.classList.add('in_available_offer')
        inc_avail_offer_block.appendChild(in_available_offer);


        if (productObj.ProductLevelDiscountMessage.split("|")[1] != undefined) {
            in_available_offer.innerText = "Available Offers"
            var ec_promo_div1 = document.createElement('div');
            ec_promo_div1.classList.add('pc_promo_div')
            if (productObj.ProductLevelDiscountMessage.split("|")[1] != "") {
                ec_promo_div1.classList.add('inc_active')
            }
            var ec_promo_span1 = document.createElement('span');
            ec_promo_span1.classList.add('pc_promo_span')

            ec_promo_span1.classList.add('red_promo')
            ec_promo_span1.innerHTML = productObj.ProductLevelDiscountMessage.split("|")[1]
            ec_promo_div1.appendChild(ec_promo_span1);

        }
        if (productObj.ProductLevelDiscountMessage.split("|")[2] != undefined) {
            in_available_offer.innerText = "Available Offers"
            var ec_promo_div2 = document.createElement('div');
            ec_promo_div2.classList.add('pc_promo_div')
            if (productObj.ProductLevelDiscountMessage.split("|")[2] != "") {
                ec_promo_div2.classList.add('inc_active')
            }
            var ec_promo_span2 = document.createElement('span');
            ec_promo_span2.classList.add('pc_promo_span')

            ec_promo_span2.classList.add('red_promo')
            ec_promo_span2.innerHTML = productObj.ProductLevelDiscountMessage.split("|")[2]
            ec_promo_div2.appendChild(ec_promo_span2);

        }

        if (productObj.ProductLevelDiscountMessage.split("|")[3] != undefined) {
            var ec_promo_div3 = document.createElement('div');
            ec_promo_div3.classList.add('pc_promo_div')
            if (productObj.ProductLevelDiscountMessage.split("|")[3] != "") {
                ec_promo_div3.classList.add('inc_active')
            }
            var ec_promo_span3 = document.createElement('span');
            ec_promo_span3.classList.add('pc_promo_span')

            ec_promo_span3.classList.add('red_promo')
            ec_promo_span3.innerHTML = productObj.ProductLevelDiscountMessage.split("|")[3]
            ec_promo_div3.appendChild(ec_promo_span3);

        }
        if (productObj.ProductLevelDiscountMessage.split("|")[4] != undefined) {
            var ec_promo_div4 = document.createElement('div');
            ec_promo_div4.classList.add('pc_promo_div')
            if (productObj.ProductLevelDiscountMessage.split("|")[4] != "") {
                ec_promo_div4.classList.add('inc_active')
            }
            var ec_promo_span4 = document.createElement('span');
            ec_promo_span4.classList.add('pc_promo_span')

            ec_promo_span4.classList.add('red_promo')
            ec_promo_span4.innerHTML = productObj.ProductLevelDiscountMessage.split("|")[4]
            ec_promo_div4.appendChild(ec_promo_span4);

        }
        if (productObj.ProductLevelDiscountMessage.split("|")[5] != undefined) {
            var ec_promo_div5 = document.createElement('div');
            ec_promo_div5.classList.add('pc_promo_div')
            if (productObj.ProductLevelDiscountMessage.split("|")[5] != "") {
                ec_promo_div5.classList.add('inc_active')
            }
            var ec_promo_span5 = document.createElement('span');
            ec_promo_span5.classList.add('pc_promo_span')

            ec_promo_span5.classList.add('red_promo')
            ec_promo_span5.innerHTML = productObj.ProductLevelDiscountMessage.split("|")[5]
            ec_promo_div5.appendChild(ec_promo_span5);

        }
        if (productObj.ProductLevelDiscountMessage.split("|")[6] != undefined) {
            var ec_promo_div6 = document.createElement('div');
            ec_promo_div6.classList.add('pc_promo_div')
            if (productObj.ProductLevelDiscountMessage.split("|")[6] != "") {
                ec_promo_div6.classList.add('inc_active')
            }
            var ec_promo_span6 = document.createElement('span');
            ec_promo_span6.classList.add('pc_promo_span')

            ec_promo_span6.classList.add('red_promo')
            ec_promo_span6.innerHTML = productObj.ProductLevelDiscountMessage.split("|")[6]
            ec_promo_div6.appendChild(ec_promo_span6);

        }
        if (productObj.ProductLevelDiscountMessage.split("|")[7] != undefined) {
            var ec_promo_div7 = document.createElement('div');
            ec_promo_div7.classList.add('pc_promo_div')
            if (productObj.ProductLevelDiscountMessage.split("|")[7] != "") {
                ec_promo_div7.classList.add('inc_active')
            }
            var ec_promo_span7 = document.createElement('span');
            ec_promo_span7.classList.add('pc_promo_span')

            ec_promo_span7.classList.add('red_promo')
            ec_promo_span7.innerHTML = productObj.ProductLevelDiscountMessage.split("|")[7]
            ec_promo_div7.appendChild(ec_promo_span7);

        }
        var elPrice_blck = getViewElement("productInfoBlock");
        var view = elAttBlock

        if (productObj.ProductLevelDiscountMessage.split("|")[7] != undefined) {
            ec_promo_div_main.appendChild(ec_promo_div)
            ec_promo_div_main.appendChild(ec_promo_div1)
            ec_promo_div_main.appendChild(ec_promo_div2)
            ec_promo_div_main.appendChild(ec_promo_div3)
            ec_promo_div_main.appendChild(ec_promo_div4)
            ec_promo_div_main.appendChild(ec_promo_div5)
            ec_promo_div_main.appendChild(ec_promo_div6)
            ec_promo_div_main.appendChild(ec_promo_div7)
            view.parentNode.insertBefore(ec_promo_div_main, view);
        } else if (productObj.ProductLevelDiscountMessage.split("|")[6] != undefined) {
            ec_promo_div_main.appendChild(ec_promo_div)
            ec_promo_div_main.appendChild(ec_promo_div1)
            ec_promo_div_main.appendChild(ec_promo_div2)
            ec_promo_div_main.appendChild(ec_promo_div3)
            ec_promo_div_main.appendChild(ec_promo_div4)
            ec_promo_div_main.appendChild(ec_promo_div5)
            ec_promo_div_main.appendChild(ec_promo_div6)
            view.parentNode.insertBefore(ec_promo_div_main, view);
        } else if (productObj.ProductLevelDiscountMessage.split("|")[5] != undefined) {
            ec_promo_div_main.appendChild(ec_promo_div)
            ec_promo_div_main.appendChild(ec_promo_div1)
            ec_promo_div_main.appendChild(ec_promo_div2)
            ec_promo_div_main.appendChild(ec_promo_div3)
            ec_promo_div_main.appendChild(ec_promo_div4)
            ec_promo_div_main.appendChild(ec_promo_div5)
            view.parentNode.insertBefore(ec_promo_div_main, view);
        } else if (productObj.ProductLevelDiscountMessage.split("|")[4] != undefined) {
            ec_promo_div_main.appendChild(ec_promo_div)
            ec_promo_div_main.appendChild(ec_promo_div1)
            ec_promo_div_main.appendChild(ec_promo_div2)
            ec_promo_div_main.appendChild(ec_promo_div3)
            ec_promo_div_main.appendChild(ec_promo_div4)
            view.parentNode.insertBefore(ec_promo_div_main, view);
        } else if (productObj.ProductLevelDiscountMessage.split("|")[3] != undefined) {
            ec_promo_div_main.appendChild(ec_promo_div)
            ec_promo_div_main.appendChild(ec_promo_div1)
            ec_promo_div_main.appendChild(ec_promo_div2)
            ec_promo_div_main.appendChild(ec_promo_div3)
            view.parentNode.insertBefore(ec_promo_div_main, view);
        } else if (productObj.ProductLevelDiscountMessage.split("|")[2] != undefined) {
            ec_promo_div_main.appendChild(ec_promo_div)
            ec_promo_div_main.appendChild(ec_promo_div1)
            ec_promo_div_main.appendChild(ec_promo_div2)
            view.parentNode.insertBefore(ec_promo_div_main, view);
        } else if (productObj.ProductLevelDiscountMessage.split("|")[1] != undefined) {
            ec_promo_div_main.appendChild(ec_promo_div)
            ec_promo_div_main.appendChild(ec_promo_div1)
            view.parentNode.insertBefore(ec_promo_div_main, view);
        } else {
            ec_promo_div_main.appendChild(ec_promo_div)
            view.parentNode.insertBefore(ec_promo_div_main, view);
        }

    } else {
        var ec_promo_div = document.createElement('div');
        ec_promo_div.classList.add('pc_promo_div')
        ec_promo_div.classList.add('empty');
        var elPrice_blck = getViewElement("productInfoBlock");
        var view = elAttBlock
        if (view != null || view != undefined) {
            view.parentNode.insertBefore(ec_promo_div, view);
        }
    }

    if (window.innerWidth < 820) {
        var elPrice_blckpoints = getViewElement("productInfoBlock");
        elPrice_blckpoints.parentNode.insertBefore(inc_collect_point_block, elPrice_blckpoints)
    } else {
        eldescrpionblock.appendChild(inc_collect_point_block)
    }
    var qty_title = document.createElement('label')
    qty_title.innerText = INC.config.qtyText
    elQtyBlock.parentNode.insertBefore(qty_title, elQtyBlock);
    var elQtyInput = this.generateHTMLTags('input');
    elQtyInput.setAttribute("readonly", "");
    elQtyInput.setAttribute('type', 'number');
    elQtyInput.setAttribute('min', 1);
    elQtyInput.setAttribute('max', 99999);
    elQtyInput.setAttribute('maxlength', 5);
    elQtyInput.value = 1;
    elQtyInput.setAttribute('old_qty', '1');
    elQtyInput.setAttribute('placeholder', 'Type...');
    elQtyInput.setAttribute('pattern', '/^-?\d+\.?\d*$/');
    elQtyInput.setAttribute('onKeyPress', 'if(this.value.length==4) return false;');

    elprdqtyinputblock.addEventListener("click", function() {
        var elm = elprdqtyinputblock.parentNode.parentNode.parentNode
        // Array.prototype.forEach.call(document.querySelectorAll(getSelectorClassName(classNames, "productPackOfListBlock")), function (el) {
        //     el.classList.remove("active");
        // });
        elQtyBlock.classList.toggle("active");
        elPackOfListBlock.classList.toggle("active");


    });



    elQtyInput.addEventListener("keydown", function(e) {

        setTimeout(function() {
            //if (elQtyInput.value.length < 5) {
            if (elQtyInput.value != "" && elQtyInput.value < 11) {
                var elm = elQtyInput.parentNode.parentNode.parentNode.parentNode.parentNode
                var product_block = elQtyInput.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;
                if (elQtyInput.value.length == 0) elQtyInput.value = 1;
                if (elQtyInput.value == 0) elQtyInput.value = 1;
                if (elQtyInput.value == "") elQtyInput.value = 1;
                if (elQtyInput.value > 99999) elQtyInput.value = 99999;

                var id = productBlock.getAttribute('data-id');
                var qty = parseInt(elQtyInput.value);

                if (elAddText.innerText == "Added" || elAddText.innerText == "Update" || elAddText.innerText == INC.config.AddedText || elAddText.innerText == INC.config.UpdateText) {
                    INC.methods.updateBundleCart({
                        sku: id,
                        qty: qty
                    }, "add");
                }
                elQtyInput.setAttribute('old_qty', qty)
                if (product_block.querySelector('.inc_product_desc_pack_of_item_block.active') != null) {
                    product_block.querySelector('.inc_product_desc_pack_of_item_block.active').classList.remove('active')
                }
                if (product_block.querySelector('.inc_product_desc_pack_of_item_block[index_val="' + qty + '"]') != null) {
                    product_block.querySelector('.inc_product_desc_pack_of_item_block[index_val="' + qty + '"]').classList.add('active')
                }

            }

        }, 50);

    });
    var elPackOfArrray = [];
    var qty_c = 99

    for (var i = 0; i < qty_c; i++) elPackOfArrray.push(i);
    elPackOfArrray.forEach(function(i) {
        var elPackOfItemBlock1 = INC.methods.getElementChilds("productPackOfItemBlock", blockType);
        elPackOfItemBlock1.querySelector(getSelectorClassName(classNames, "productPackOfItemTitleText")).innerText = "";
        elPackOfItemBlock1.querySelector(getSelectorClassName(classNames, "productPackOfItemQuantityText")).innerText = i + 1;
        elPackOfListBlock.appendChild(elPackOfItemBlock1);

        elPackOfItemBlock1.addEventListener("click", function() {
            elPackOfListBlock.classList.remove("active");
            elQtyInput.value = i + 1;
            var sku = productBlock.getAttribute('data-sku');
            var qty = parseInt(elQtyInput.value);
            //inc_product_desc_qty_block
            productBlock.querySelector('.inc_product_desc_qty_block').classList.remove('active')
            productBlock.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_qty_input_text input').value = qty;
            if (elAddText.innerText == "Added" || elAddText.innerText == "Update" || elAddText.innerText == INC.config.AddedText || elAddText.innerText == INC.config.UpdateText) {
                if (productBlock.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_add_text').textContent != "選択する") {
                    INC.methods.updateBundleCart({
                        sku: sku,
                        qty: qty
                    }, "add");
                }
            }
        });
    });
    elQtyInputText.appendChild(elQtyInput);

    elQtyDownBlock.addEventListener('click', function() {

        elQtyInput.value = (elQtyInput.value - 1 < 1) ? 1 : elQtyInput.value - 1;

        var id = productBlock.getAttribute('data-id');
        var qty = parseInt(elQtyInput.value);

        if (elAddText.innerText == "Added" || elAddText.innerText == "Update" || elAddText.innerText == INC.config.AddedText || elAddText.innerText == INC.config.UpdateText) {
            INC.methods.updateBundleCart({
                sku: id,
                qty: qty
            }, "add");
        }
        elQtyInput.setAttribute('old_qty', qty)
        var productModuleBlock = productBlock.parentNode.parentNode;

        var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

        showcaseProductBlock.querySelector(getSelectorClassName(classNames, "productQtyInputText")).querySelector('input').value = parseInt(elQtyInput.value);
    });

    elQtyUpBlock.addEventListener('click', function() {

        elQtyInput.value = parseInt(elQtyInput.value) + 1;

        var id = productBlock.getAttribute('data-id');
        var qty = parseInt(elQtyInput.value);

        if (elAddText.innerText == "Added" || elAddText.innerText == "Update" || elAddText.innerText == INC.config.AddedText || elAddText.innerText == INC.config.UpdateText) {
            INC.methods.updateBundleCart({
                sku: id,
                qty: qty
            }, "add");
        }
        elQtyInput.setAttribute('old_qty', qty)

        var productModuleBlock = productBlock.parentNode.parentNode;

        var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

        showcaseProductBlock.querySelector(getSelectorClassName(classNames, "productQtyInputText")).querySelector('input').value = parseInt(elQtyInput.value);
    });
    findObj = new INC.classes.FindObj({
        mainId: productObj.mainId
    });

    if (INC.dataStore.methods().getProductColorsObj(findObj).colorArray.length == 0 && INC.dataStore.methods().getProductopt0Obj(findObj).att0Array.length == 0) {
        elHeader.querySelector(getSelectorClassName(classNames, "productHeaderTitleText")).innerText = INC.config.ViewDetailsText;
    } else {
        if (INC.dataStore.methods().getProductopt0Obj(findObj).att0Array.length > 0) {
            if (INC.dataStore.methods().getProductopt0Obj(findObj).att0Array[0] != undefined) {
                elHeader.querySelector(getSelectorClassName(classNames, "productHeaderTitleText")).innerText = INC.config.ColorSizeText;
            } else {
                elHeader.querySelector(getSelectorClassName(classNames, "productHeaderTitleText")).innerText = INC.config.ColorSizeText;
            }
        } else if (INC.dataStore.methods().getProductColorsObj(findObj).colorArray.length > 0) {
            elHeader.querySelector(getSelectorClassName(classNames, "productHeaderTitleText")).innerText = INC.config.ColorSizeText;
        }
    }
    
    var productColorsObj = INC.dataStore.methods().getProductColorsObj(findObj);

    var productSizesObj = INC.dataStore.methods().getProductSizesObj(findObj);

    var product0Obj = INC.dataStore.methods().getProductopt0Obj(findObj);

    var product3Obj = INC.dataStore.methods().getProductopt3Obj(findObj);

    var product4Obj = INC.dataStore.methods().getProductopt4Obj(findObj);

    // if  (readCookie('ivid') == "44bf6be5c73bce6f001a2b594cea4fad9d783a0bc2"){
    //     debugger
    // }
    
    var check_main_s = true
    var first_attr_acode = ["カラー", "左右", "ボール数",  "サイズ", "シャフト重量", "ライ角", "巻番号", "数量", "バックライン", "サイズ/幅", "サイズ/数量", "バックライン/サイズ", "長さ", "番手", "シャフト", "口径/バックライン","左右/サイズ", "番手/ロフト", "フレックス/長さ"  , "フレックス/サイズ"  ,"ロフト/フレックス", "口径/バックライン/サイズ", "フレックス",  "番手/フレックス",  "長さ/ライ角","ロフト", "ロフト/バウンス角", "長さ/シャフト重量", "Flex", "Irons"];
    if (product0Obj["att0Array"][0] != undefined && product0Obj.att0Array.length > 0 && productSizesObj.sizeArray.length == 0 && productColorsObj.colorArray.length > 0) {
        if (first_attr_acode.indexOf(product0Obj["att0Array"][0].code) == -1) {
            check_main_s = false;
        }
    }

    if (productObj.ProductType == "configurable") {
        elAttBlock.classList.add('configurable_avail')
        elAttBlock.setAttribute('style','user-select:auto !important')
        elAttBlock.classList.add(Object.keys(productObj.option).length)
    } else {
        elAttBlock.classList.add('simple')
        elAttBlock.setAttribute('style','userSelect:auto !important')
    }

    

    if (check_main_s) {
        if (productColorsObj.colorArray.length > 0) {
            elAttColorListBlock.innerHTML = "";
            var one_attr_flag = false
            if (productColorsObj["colorArray"].length == 1) {
                one_attr_flag = true
            }

            if (productColorsObj["colorArray"][0].code != "Color") {
                var selectvariantwrap = generate_html_tag('div', 'selectvariantwrap')
                var selectvariant = generate_html_tag('select', 'inc_variant_color_tag')
                selectvariant.setAttribute('id', 'variant_inc_avail_color')
                selectvariant.setAttribute('onchange', 'inc_onchange_color_variant(this)')
                selectvariantwrap.classList.add(productColorsObj["colorArray"][0].code)
                var variantLabel = generate_html_tag('label', 'variantLabel')
                variantLabel.innerText = productColorsObj["colorArray"][0].code;
                selectvariantwrap.appendChild(variantLabel)
                selectvariantwrap.appendChild(selectvariant)
                elAttBlock.appendChild(selectvariantwrap)
                var variantoptioncolor = generate_html_tag('option','variantoptioncolor')
                variantoptioncolor.textContent = "選択してください";
                variantoptioncolor.setAttribute('disabled','disabled')
                variantoptioncolor.setAttribute('selected','selected')
                variantoptioncolor.setAttribute('data-size', "");
                variantoptioncolor.setAttribute("datasize", "");
                variantoptioncolor.setAttribute('data-option', "");
                selectvariant.appendChild(variantoptioncolor)
                productColorsObj["colorArray"].forEach(function(sizeObj) {
                    var variantoption = generate_html_tag('option', 'variantoption')
                    variantoption.innerText = sizeObj["text"];
                    variantoption.setAttribute('data-color', sizeObj["text"]);
                    variantoption.setAttribute("datacolor", sizeObj["text"].toLocaleLowerCase());
                    variantoption.setAttribute('data-option', "1");
                    variantoption.setAttribute('title', sizeObj["text"].toUpperCase());
                    variantoption.setAttribute('ImgURLC', sizeObj["ImgURLC"]);
                    if(productColorsObj["colorArray"].length == 1){
                        variantoption.selected = 'selected'
                        setTimeout(function() {
                            INC.methods.updateSelectedTxt(productBlock)
                        }, 100);
                    }
                    selectvariant.appendChild(variantoption)

                });
            } else {
                elAttColorBlock.classList.add('colour_attr_avail')
            }
            if (productColorsObj["colorArray"].length > 0) {
                productColorsObj["colorArray"].forEach(function(colorObj) {
                    elAttColorBlock.classList.add("active");
                    elAttColorTitleText.innerText = "Color";
                    var attColorBlock = INC.methods.generateHTMLTags('div', {
                        class: classNames["productAttColorListItemBlock"]
                    })
                    var attColorImgBlock = INC.methods.generateHTMLTags('div', {
                        class: classNames["productAttColorListItemImgBlock"]
                    });
                    var attColorImg = INC.methods.generateHTMLTags('div', {
                        class: classNames["productAttColorListItemImg"]
                    });
                    var attColorTextBlock = INC.methods.generateHTMLTags('div', {
                        class: classNames["productAttColorListItemTextBlock"]
                    });
                    var attColorText = INC.methods.generateHTMLTags('div', {
                        class: classNames["productAttColorListItemText"]
                    });

                    attColorImgBlock.addEventListener("click", function() {

                        var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                        var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                        var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                        var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                        if (atteditbutton != null) {
                            atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                            atteditbutton.innerText = "編集"
                        }


                        if (productBlock.querySelector('.close_read_more') != null) {
                            productBlock.querySelector('.close_read_more').click()
                        }
                        var colorText = this.getAttribute("data-color")
                        elAttBlock.setAttribute("data-color", colorText);

                        if (atteditbutton != null) {
                            atteditbutton.parentNode.classList.add('active')
                        }
                        if (this.parentNode.parentNode != null) {
                            var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_color_list_item_img')

                            for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                all_color_list_item_img[cl].parentNode.parentNode.classList.remove("active");
                            }
                        }

                        this.parentNode.classList.add("active");
                        if (colorText != "Color") {
                            elAttColorTitleTextSelected.innerText = colorText;
                            //third
                        }
                        var sel_size = elAttBlock.getAttribute('data-size')
                        findObj = new INC.classes.FindObj({
                            mainId: productObj.mainId,
                            colorText: colorText
                        });

                        var product0Obj = INC.dataStore.methods().getProductopt0Obj(findObj,this);

                        var selcopzero = elAttSizeListBlock.parentNode.parentNode.querySelector('.inc_variant_zero_tag')
                        if (selcopzero != null) {
                            selcopzero.innerHTML = ""
                        }
                        
                        // selcopsize.appendChild(variantLabel)
                        if (product0Obj.att0Array.length > 0) {
                            selcopzero.setAttribute('id', 'variant_inc_avail_zero')
                            selcopzero.setAttribute('onchange', 'inc_onchange_variant(this)')
                            var variantoptionzero1z = generate_html_tag('option','variantoptionzero1')
                            variantoptionzero1z.textContent = "選択してください";
                            variantoptionzero1z.setAttribute('disabled','disabled')
                            variantoptionzero1z.setAttribute('selected','selected')
                            variantoptionzero1z.setAttribute('data-size', "");
                            variantoptionzero1z.setAttribute("datasize", "");
                            variantoptionzero1z.setAttribute('data-option', "");
                            selcopzero.appendChild(variantoptionzero1z)
                            var sel_avail = false;
                            product0Obj['att0Array'].forEach(function(sizeObj) {
                                var variantoptionz = generate_html_tag('option', 'variantoption')
                                variantoptionz.innerText = sizeObj["text"];
                                variantoptionz.setAttribute('data-size', sizeObj["text"]);
                                variantoptionz.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                variantoptionz.setAttribute('data-option', "1");
                                variantoptionz.setAttribute('title', sizeObj["text"].toUpperCase());
                                variantoptionz.setAttribute('ImgURLC', sizeObj["ImgURLC"]);
                                if(product0Obj['att0Array'].length == 1){
                                    variantoptionz.selected = 'selected'
                                    setTimeout(function() {
                                        INC.methods.updateSelectedTxt(productBlock)
                                    }, 100);
                                    sel_avail = true
                                    elAttBlock.setAttribute("data-zero", sizeObj["text"]);
                                    prod_modal_attr_block.setAttribute("data-zero", sizeObj["text"]);
                                }else if(elAtt0Block.parentNode.getAttribute('data-zero') != null){
                                    if(sizeObj["text"].toLocaleLowerCase() == elAtt0Block.parentNode.getAttribute('data-zero').toLocaleLowerCase()){
                                        variantoptionz.selected = 'selected'
                                        sel_avail = true
                                    }
                                }
                                selcopzero.appendChild(variantoptionz)
                        
                            });
                            if(sel_avail == false){
                                elAttBlock.setAttribute("data-zero", '');
                                prod_modal_attr_block.setAttribute("data-zero", '');
                            }else{
                                var moduleblck=elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode
                                INC.methods.checkVariantSelection(moduleblck)
                            }
                            if (product0Obj["att0Array"][0].code != "Color") {
                                findObj = new INC.classes.FindObj({
                                    mainId: productObj.mainId
                                });
                                elAtt0ListBlock.innerHTML = "";
                                var product0Obj = product0Obj;
                                var productSizeText = "";
                                if (product0Obj["att0Array"].length > 0) {
                                    elAtt0TitleText.innerText = product0Obj["att0Array"][0].code;
                                    elAtt0Block.classList.add("active");
                                    product0Obj["att0Array"].forEach(function(sizeObj) {
                                        var attSizeBlock0 = INC.methods.generateHTMLTags('div', {
                                            class: classNames["productAttSizeListItemBlock"]
                                        });
                                        var attSizeImgBlock0 = INC.methods.generateHTMLTags('div', {
                                            class: classNames["productAttSizeListItemImgBlock"]
                                        });
                                        var attSizeImg0 = INC.methods.generateHTMLTags('div', {
                                            class: classNames["productAttSizeListItemImg"]
                                        });
                                        attSizeImgBlock0.addEventListener("click", function(e) {
                                            
                                            var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                                            var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                                            // var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                                            var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                                            if (atteditbutton != null) {
                                                atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                                                atteditbutton.innerText = "編集"
                                            }
                        
                        
                                            if (productBlock.querySelector('.close_read_more') != null) {
                                                productBlock.querySelector('.close_read_more').click()
                                            }
                                            var attr_text = this.getAttribute("data-size");
                        
                                            elAttBlock.setAttribute("data-zero", attr_text);
                        
                                            if (atteditbutton != null) {
                                                atteditbutton.parentNode.classList.add('active')
                                            }
                        
                                            var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_zero_list_block .inc_product_desc_att_size_list_item_img_block')
                        
                                            for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                                all_color_list_item_img[cl].classList.remove("active");
                                            }
                        
                                            this.classList.add("active");
                        
                                            elAtt0TitleTextSelected.innerText = attr_text;
                        
                                            var sel_size = elAttBlock.getAttribute('data-size')
                                            findObj = new INC.classes.FindObj({
                                                mainId: productObj.mainId,
                                                colorText: attr_text
                                            });
                                            findObj.sizeText = sel_size
                        
                                            findObj = new INC.classes.FindObj({
                                                mainId: productObj.mainId,
                                                colorText: "",
                                                sizeText: attr_text
                                            });
                        
                                            var productSizesObj = INC.dataStore.methods().getProductSizesObj(findObj, this);
                        
                                            elAttSizeListBlock.innerHTML = "";
                                            var selcopsize = elAttSizeListBlock.parentNode.parentNode.querySelector('.inc_variant_size_tag')
                                            if (selcopsize != null) {
                                                selcopsize.innerHTML = ""
                                            }
                                            var productSizesObj = INC.dataStore.methods().getProductSizesObj(findObj, this);
                        
                                            if (productSizesObj["sizeArray"][0] != undefined) {
                                                if (productSizesObj["sizeArray"][0].code == "Color") {
                                                    productColorsObj = INC.dataStore.methods().getProductSizesObj(findObj, this);
                                                    productSizesObj = INC.dataStore.methods().getProductColorsObj(findObj, this);
                                                }
                                            }
                        
                        
                                            if (productSizesObj["sizeArray"].length > 0) {
                                                elAttSizeBlock.classList.add("active");
                                                var variantLabel = generate_html_tag('label', 'variantLabel')
                                                variantLabel.innerText = productSizesObj["sizeArray"][0].code;
                                                selcopsize.appendChild(variantLabel)
                                                var variantoptionsize2 = generate_html_tag('option','variantoptionsize2')
                                                variantoptionsize2.textContent = "選択してください";
                                                variantoptionsize2.setAttribute('disabled','disabled')
                                                variantoptionsize2.setAttribute('selected','selected')
                                                variantoptionsize2.setAttribute('data-size', "");
                                                variantoptionsize2.setAttribute("datasize", "");
                                                variantoptionsize2.setAttribute('data-option', "");
                                                selectvariant.appendChild(variantoptionsize2)
                                                productSizesObj["sizeArray"].forEach(function(sizeObj) {
                                                    var variantoption = generate_html_tag('option', 'variantoption')
                                                    variantoption.innerText = sizeObj["text"];
                                                    variantoption.setAttribute('data-size', sizeObj["text"]);
                                                    variantoption.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                                    variantoption.setAttribute('data-option', "1");
                                                    variantoption.setAttribute('title', sizeObj["text"].toUpperCase());
                                                    variantoption.setAttribute('ImgURLC', sizeObj["ImgURLC"]);
                                                    // if(productSizesObj["sizeArray"].length == 1){
                                                    //     variantoption.selected = 'selected'
                                                    // }else if (elAttSizeListBlock.parentNode.parentNode.getAttribute('data-size') != null) {
                                                    //     if (sizeObj["text"].toLocaleLowerCase() == elAttSizeListBlock.parentNode.parentNode.getAttribute('data-size').toLocaleLowerCase()) {
                                                    //         variantoption.selected = 'selected'
                                                    //     }
                                                    // }
                                                    if(productSizesObj["sizeArray"].length == 1){
                                                        variantoption.selected = 'selected'
                                                        setTimeout(function() {
                                                            INC.methods.updateSelectedTxt(productBlock)
                                                        }, 100);
                                                        sel_avail = true
                                                        elAttBlock.setAttribute("data-size", sizeObj["text"]);
                                                        prod_modal_attr_block.setAttribute("data-size", sizeObj["text"]);
                                                    }else if(elAttSizeBlock.parentNode.getAttribute('data-size') != null){
                                                        
                                                        if(sizeObj["text"].toLocaleLowerCase() == elAttSizeBlock.parentNode.getAttribute('data-size').toLocaleLowerCase()){
                                                            variantoption.selected = 'selected'
                                                            sel_avail = true
                                                        }
                                                    }
                                                    selcopsize.appendChild(variantoption)
                                                });
                                                if(sel_avail == false){
                                                    elAttBlock.setAttribute("data-size", '');
                                                    prod_modal_attr_block.setAttribute("data-size", '');
                                                }else{
                                                    var moduleblck=elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode
                                                    INC.methods.checkVariantSelection(moduleblck)
                                                }
                                                productSizesObj["sizeArray"].forEach(function(sizeObj) {
                                                    var attSizeBlock = INC.methods.generateHTMLTags('div', {
                                                        class: classNames["productAttSizeListItemBlock"]
                                                    });
                                                    var attSizeImgBlock = INC.methods.generateHTMLTags('div', {
                                                        class: classNames["productAttSizeListItemImgBlock"]
                                                    });
                                                    var attSizeImg = INC.methods.generateHTMLTags('div', {
                                                        class: classNames["productAttSizeListItemImg"]
                                                    });
                        
                                                    attSizeImgBlock.addEventListener("click", function() {
                                                        var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                                                        var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                                                        var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                                                        var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                                                        if (atteditbutton != null) {
                                                            atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                                                            atteditbutton.innerText = "編集"
                                                        }
                        
                        
                                                        if (productBlock.querySelector('.close_read_more') != null) {
                                                            productBlock.querySelector('.close_read_more').click()
                                                        }
                                                        var attr_text = this.getAttribute("data-size")
                                                        elAttSizeBlock.classList.add("active");
                                                        elAttSizeTitleTextSelected.innerText = attr_text;
                                                        elAttBlock.setAttribute("data-size", attr_text);
                        
                                                        if (atteditbutton != null) {
                                                            atteditbutton.parentNode.classList.add('active')
                                                        }
                        
                                                        var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_size_block .inc_product_desc_att_size_list_item_img_block')
                        
                                                        for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                                            all_color_list_item_img[cl].classList.remove("active");
                                                        }
                        
                                                        this.classList.add("active");
                                                        var sel_size = elAttBlock.getAttribute('data-size')
                                                        findObj = new INC.classes.FindObj({
                                                            mainId: productObj.mainId,
                                                            colorText: attr_text
                                                        });
                                                        findObj.sizeText = sel_size
                        
                                                        findObj = new INC.classes.FindObj({
                                                            mainId: productObj.mainId,
                                                            colorText: "",
                                                            sizeText: attr_text
                                                        });
                                                        
                                                        //third
                                                        var sel_size = elAttBlock.getAttribute('data-size')
                                                        findObj = new INC.classes.FindObj({
                                                            mainId: productObj.mainId,
                                                            colorText: attr_text
                                                        });
                                                        findObj.sizeText = sel_size
                                                        elAtt3ListBlock.innerHTML = "";
                        
                                                        var product3rdObj = INC.dataStore.methods().getProductopt3Obj(findObj, this);
                                                        if (product3rdObj["att3Array"].length > 0) {
                                                            elAttSizeBlock.classList.add("active");
                        
                                                            product3rdObj["att3Array"].forEach(function(sizeObj) {
                                                                var attSizeBlock3 = INC.methods.generateHTMLTags('div', {
                                                                    class: classNames["productAttthirdListItemBlock"]
                                                                });
                                                                var attSizeImgBlock3 = INC.methods.generateHTMLTags('div', {
                                                                    class: classNames["productAttthirdListItemImgBlock"]
                                                                });
                                                                var attSizeImg3 = INC.methods.generateHTMLTags('div', {
                                                                    class: classNames["productAttthirdListItemImg"]
                                                                });
                        
                                                                attSizeImgBlock3.addEventListener("click", function() {
                                                                    var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                                                                    var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                                                                    var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                                                                    var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                                                                    if (atteditbutton != null) {
                                                                        atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                                                                        atteditbutton.innerText = "編集"
                                                                    }
                        
                        
                                                                    if (productBlock.querySelector('.close_read_more') != null) {
                                                                        productBlock.querySelector('.close_read_more').click()
                                                                    }
                                                                    var attr_text = this.getAttribute("data-size")
                        
                                                                    elAttBlock.setAttribute("data-third", attr_text);
                        
                                                                    if (atteditbutton != null) {
                                                                        atteditbutton.parentNode.classList.add('active')
                                                                    }
                        
                                                                    var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_third_list_item_img_block')
                        
                                                                    for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                                                        all_color_list_item_img[cl].classList.remove("active");
                                                                    }
                                                                    var attr_text = this.getAttribute("data-size")
                                                                    this.classList.add("active");
                                                                    elAtt3TitleTextSelected.innerText = attr_text;;
                        
                                                                    INC.methods.updateProductBlock(productBlock, findObj, blockType);
                        
                                                                    var productModuleBlock = productBlock.parentNode.parentNode;
                        
                                                                    var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));
                        
                                                                    INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                                                                    var size_text = ""
                        
                                                                });
                        
                                                                if (productSizeText.length == 0) {
                                                                    productSizeText = sizeObj["text"];
                                                                }
                        
                                                                attSizeImg3.innerText = sizeObj["text"];
                                                                attSizeImgBlock3.setAttribute('data-size', sizeObj["text"]);
                                                                attSizeImgBlock3.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                                                attSizeImgBlock3.setAttribute('data-option', "3");
                                                                attSizeImgBlock3.appendChild(attSizeImg3);
                                                                elAtt3ListBlock.appendChild(attSizeImgBlock3);
                                                                if (attSizeImgBlock3.getAttribute('data-size').toLocaleLowerCase() == elAttSizeBlock.querySelector('.inc_product_desc_att_size_title_text_selected').innerText.toLocaleLowerCase()) {
                                                                    attSizeImgBlock3.classList.add('active')
                                                                }
                                                            });
                                                            var third_el_bl = elAtt3ListBlock.querySelector(getSelectorClassName(classNames, "productAttthirdListItemImgBlock"))
                                                            //                        
                                                            if (third_el_bl.parentNode.querySelector('.inc_product_desc_att_third_list_item_img_block.active') == null) {
                                                                third_el_bl.click();
                                                            }
                                                        }
                                                        //end 
                        
                                                        INC.methods.updateProductBlock(productBlock, findObj, blockType);
                        
                                                        var productModuleBlock = productBlock.parentNode.parentNode;
                        
                                                        var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));
                        
                                                        INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                                                        var zero_text = elAttBlock.getAttribute('data-zero');
                                                        var size_text = elAttBlock.getAttribute('data-size');
                                                        var color_text = elAttBlock.getAttribute('data-color');
                                                        var third_text = elAttBlock.getAttribute('data-third');
                        
                                                        var sel_attr_text = ""
                                                        
                                                        if (color_text != "" && color_text != null) {
                                                            if (sel_attr_text == "" || sel_attr_text == undefined) {
                                                                sel_attr_text = color_text
                                                            } else {
                                                                sel_attr_text = color_text
                                                            }
                                                        }
                                                        if (zero_text != "" && zero_text != null) {
                                                            if (sel_attr_text == "") {
                                                                sel_attr_text = zero_text
                                                            } else {
                                                                sel_attr_text = sel_attr_text + " / " + zero_text
                                                            }
                                                        }
                                                        if (size_text != "" && size_text != null) {
                                                            sel_attr_text = sel_attr_text + " / " + size_text
                                                        }
                                                        // if (third_text != "") {
                                                        //     sel_attr_text = sel_attr_text + " / " + third_text
                                                        // }
                                                        var pr_mod_elm = productBlock.parentNode.parentNode
                                                        if (sel_attr_text != "オプションを選択"){
                                                            if (pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text') != null && sel_attr_text != "") {
                                                                pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text').innerText = sel_attr_text
                                                                pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text').setAttribute('title', sel_attr_text)
                                                            }
                                                        }
                        
                                                        productModuleBlock.querySelector('.inc_product_modal_block .inc_product_desc_add_err_text_block').innerText = ""
                                                    });
                                                    if(productSizesObj["sizeArray"].length == 1){
                                                        elAttBlock.setAttribute("data-size", sizeObj["text"]);
                                                        attSizeImgBlock.classList.add('active')
                                                    }
                                                    if (productSizeText.length == 0) {
                                                        productSizeText = sizeObj["text"];
                                                    }
                                                    attSizeImgBlock.classList.add('avail')
                                                    attSizeImg.innerText = sizeObj["text"];
                                                    attSizeImgBlock.setAttribute('data-size', sizeObj["text"]);
                                                    attSizeImgBlock.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                                    attSizeImgBlock.setAttribute('data-option', "2");
                                                    attSizeImgBlock.appendChild(attSizeImg);
                                                    elAttSizeListBlock.appendChild(attSizeImgBlock);
                                                    if (attSizeImgBlock.getAttribute('data-size').toLocaleLowerCase() == elAttSizeBlock.querySelector('.inc_product_desc_att_size_title_text_selected').innerText.toLocaleLowerCase()) {
                                                        attSizeImgBlock.classList.add('active')
                                                    }
                                                });
                                                var size_el_bl = elAttSizeListBlock.querySelector(getSelectorClassName(classNames, "productAttSizeListItemImgBlock"))
                                                //                        
                                                if (size_el_bl.parentNode.querySelector('.inc_product_desc_att_size_list_item_img_block.active') == null) {
                                                    // size_el_bl.click();
                                                }
                        
                                            }else{
                                                elAttBlock.setAttribute("data-size", "");
                                            }
                        
                                            findObj = new INC.classes.FindObj({
                                                mainId: productObj.mainId,
                                                colorText: "",
                                                sizeText: attr_text
                                            });
                        
                        
                        
                                            //third
                        
                                            findObj = new INC.classes.FindObj({
                                                mainId: productObj.mainId,
                                                colorText: attr_text
                                            });
                                            var sel_size = elAttBlock.getAttribute('data-size')
                                            findObj.sizeText = sel_size
                                            elAtt3ListBlock.innerHTML = "";
                        
                                            var product3rdObj = INC.dataStore.methods().getProductopt3Obj(findObj, this);
                        
                                            var inc_variant_tag = elAtt3ListBlock.parentNode.parentNode.querySelector('.inc_variant_tag')
                                            if (inc_variant_tag != null) {
                                                inc_variant_tag.innerHTML = "";
                                            }
                                            if (product3rdObj["att3Array"].length > 0) {
                                                elAttSizeBlock.classList.add("active");
                                                var variantLabel = generate_html_tag('label', 'variantLabel')
                                                variantLabel.innerText = product3rdObj["att3Array"][0].code;
                                                inc_variant_tag.appendChild(variantLabel)
                                                var variantoptionthird6 = generate_html_tag('option','variantoptionthird6')
                                                variantoptionthird6.textContent = "選択してください";
                                                variantoptionthird6.setAttribute('disabled','disabled')
                                                variantoptionthird6.setAttribute('selected','selected')
                                                variantoptionthird6.setAttribute('data-size', "");
                                                variantoptionthird6.setAttribute("datasize", "");
                                                variantoptionthird6.setAttribute('data-option', "");
                                                selectvariant.appendChild(variantoptionthird6)
                                                product3rdObj["att3Array"].forEach(function(att3Array) {
                                                    var variantoption = generate_html_tag('option', 'variantoption')
                                                    variantoption.innerText = att3Array["text"];
                                                    variantoption.setAttribute('data-size', att3Array["text"]);
                                                    variantoption.setAttribute("datasize", att3Array["text"].toLocaleLowerCase());
                                                    variantoption.setAttribute('data-option', "1");
                                                    variantoption.setAttribute('title', att3Array["text"].toUpperCase());
                                                    variantoption.setAttribute('ImgURLC', att3Array["ImgURLC"]);
                                                    if(product3rdObj["att3Array"].length == 1){
                                                        variantoption.selected = 'selected'
                                                        setTimeout(function() {
                                                            INC.methods.updateSelectedTxt(productBlock)
                                                        }, 100);
                                                        sel_avail = true
                                                        elAttBlock.setAttribute("data-third", att3Array["text"]);
                                                        prod_modal_attr_block.setAttribute("data-third", att3Array["text"]);
                                                    }else if (elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third') != null) {
                                                        
                                                        if (att3Array["text"].toLocaleLowerCase() == elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third').toLocaleLowerCase()) {
                                                            sel_avail = true
                                                            variantoption.selected = 'selected'
                                                        }
                                                    }
                                                    inc_variant_tag.appendChild(variantoption)
                                                });
                                                if(sel_avail == false){
                                                    elAttBlock.setAttribute("data-third", '');
                                                    prod_modal_attr_block.setAttribute("data-third", '');
                                                }else{
                                                    var moduleblck=elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode
                                                    INC.methods.checkVariantSelection(moduleblck)
                                                }
                                                product3rdObj["att3Array"].forEach(function(sizeObj) {
                                                    var attSizeBlock3 = INC.methods.generateHTMLTags('div', {
                                                        class: classNames["productAttthirdListItemBlock"]
                                                    });
                                                    var attSizeImgBlock3 = INC.methods.generateHTMLTags('div', {
                                                        class: classNames["productAttthirdListItemImgBlock"]
                                                    });
                                                    var attSizeImg3 = INC.methods.generateHTMLTags('div', {
                                                        class: classNames["productAttthirdListItemImg"]
                                                    });
                        
                                                    attSizeImgBlock3.addEventListener("click", function() {
                                                        var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                                                        var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                                                        var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                                                        var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                                                        if (atteditbutton != null) {
                                                            atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                                                            atteditbutton.innerText = "編集"
                                                        }
                        
                        
                                                        if (productBlock.querySelector('.close_read_more') != null) {
                                                            productBlock.querySelector('.close_read_more').click()
                                                        }
                                                        var attr_text = this.getAttribute("data-size")
                        
                                                        elAttBlock.setAttribute("data-third", attr_text);
                        
                                                        if (atteditbutton != null) {
                                                            atteditbutton.parentNode.classList.add('active')
                                                        }
                        
                                                        var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_third_list_item_img_block')
                        
                                                        for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                                            all_color_list_item_img[cl].classList.remove("active");
                                                        }
                                                        var attr_text = this.getAttribute("data-size")
                                                        this.classList.add("active");
                                                        elAtt3TitleTextSelected.innerText = attr_text;;
                        
                                                        INC.methods.updateProductBlock(productBlock, findObj, blockType);
                        
                                                        var productModuleBlock = productBlock.parentNode.parentNode;
                        
                                                        var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));
                        
                                                        INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                                                        var size_text = ""
                        
                                                    });
                        
                                                    if (productSizeText.length == 0) {
                                                        productSizeText = sizeObj["text"];
                                                    }
                        
                                                    attSizeImg3.innerText = sizeObj["text"];
                                                    attSizeImgBlock3.setAttribute('data-size', sizeObj["text"]);
                                                    attSizeImgBlock3.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                                    attSizeImgBlock3.setAttribute('data-option', "3");
                                                    attSizeImgBlock3.appendChild(attSizeImg3);
                                                    elAtt3ListBlock.appendChild(attSizeImgBlock3);
                                                    if (attSizeImgBlock3.getAttribute('data-size').toLocaleLowerCase() == elAttSizeBlock.querySelector('.inc_product_desc_att_size_title_text_selected').innerText.toLocaleLowerCase()) {
                                                        attSizeImgBlock3.classList.add('active')
                                                    }
                                                });
                                                var third_el_bl = elAtt3ListBlock.querySelector(getSelectorClassName(classNames, "productAttthirdListItemImgBlock"))
                                                //                        
                                                if (third_el_bl.parentNode.querySelector('.inc_product_desc_att_third_list_item_img_block.active') == null) {
                                                    third_el_bl.click();
                                                }
                                            }
                                            //end 
                        
                                            INC.methods.updateProductBlock(productBlock, findObj, blockType);
                        
                                            var productModuleBlock = productBlock.parentNode.parentNode;
                        
                                            var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));
                        
                                            INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                                            var zero_text = elAttBlock.getAttribute('data-zero');
                                            var size_text = elAttBlock.getAttribute('data-size');
                                            var color_text = elAttBlock.getAttribute('data-color');
                                            var third_text = elAttBlock.getAttribute('data-third');
                        
                                            var sel_attr_text = ""
                                            
                                            if (color_text != "" && color_text != null) {
                                                if (sel_attr_text == "" || sel_attr_text == undefined) {
                                                    sel_attr_text = color_text
                                                } else {
                                                    sel_attr_text = color_text
                                                }
                                            }
                                            if (zero_text != "" && zero_text != null) {
                                                if (sel_attr_text == "") {
                                                    sel_attr_text = zero_text
                                                } else {
                                                    sel_attr_text = sel_attr_text + " / " + zero_text
                                                }
                                            }
                                            if (size_text != "" && size_text != null) {
                                                sel_attr_text = sel_attr_text + " / " + size_text
                                            }
                                            // if (third_text != "") {
                                            //     sel_attr_text = sel_attr_text + " / " + third_text
                                            // }
                                            var pr_mod_elm = productBlock.parentNode.parentNode
                                            if (sel_attr_text != "オプションを選択"){
                                                if (pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text') != null && sel_attr_text != "") {
                                                    pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text').innerText = sel_attr_text
                                                    pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text').setAttribute('title', sel_attr_text)
                                                }
                                            }
                        
                                            productModuleBlock.querySelector('.inc_product_modal_block .inc_product_desc_add_err_text_block').innerText = ""
                        
                                        });
                        
                                        if(product0Obj['att0Array'].length == 1){
                                            elAttBlock.setAttribute("data-zero", sizeObj["text"]);
                                            attSizeImgBlock0.classList.add('active')
                                        }
                                        attSizeImgBlock0.classList.add('avail')
                                        if (productSizeText.length == 0) {
                                            productSizeText = sizeObj["text"];
                                        }
                                        var reg = new RegExp('^[A-Z]|XS|S|M|L|XL|XXL|XXXL|XX|XXXXL|2XL|3XL|4XL$');
                                        var chckType = sizeObj["text"];
                        
                                        reg.test(chckType);
                        
                        
                                        attSizeImg0.innerText = sizeObj["text"];
                                        attSizeImgBlock0.setAttribute('data-size', sizeObj["text"]);
                                        attSizeImgBlock0.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                        attSizeImgBlock0.setAttribute('data-option', "1");
                                        if (product0Obj["att0Array"][0].code == "size") {
                                            attSizeImgBlock0.setAttribute('title', sizeObj["text"].toUpperCase());
                                        } else if (product0Obj["att0Array"][0].code == "letter") {
                                            attSizeImgBlock0.setAttribute('title', "Letter" + " " + sizeObj["text"].toUpperCase());
                                        } else if (product0Obj["att0Array"][0].code == "choose") {
                                            attSizeImgBlock0.setAttribute('title', "Number " + sizeObj["text"].toUpperCase());
                                        } else {
                                            attSizeImgBlock0.setAttribute('title', sizeObj["text"].toUpperCase());
                                        }
                        
                                        attSizeImgBlock0.appendChild(attSizeImg0);
                                        elAtt0ListBlock.appendChild(attSizeImgBlock0);
                        
                                    });
                        
                                }
                            }
                        }
                        elAttSizeListBlock.innerHTML = "";
                        
                        var selcopsize = elAttSizeListBlock.parentNode.parentNode.querySelector('.inc_variant_size_tag')
                        if (selcopsize != null) {
                            selcopsize.innerHTML = ""
                        }
                        var productSizesObj = INC.dataStore.methods().getProductSizesObj(findObj, this);

                        if (productSizesObj["sizeArray"][0] != undefined) {
                            if (productSizesObj["sizeArray"][0].code == "Color") {
                                productColorsObj = INC.dataStore.methods().getProductSizesObj(findObj, this);
                                productSizesObj = INC.dataStore.methods().getProductColorsObj(findObj, this);
                            }
                        }


                        if (productSizesObj["sizeArray"].length > 0) {
                            elAttSizeBlock.classList.add("active");
                            var variantLabel = generate_html_tag('label', 'variantLabel')
                            variantLabel.innerText = productSizesObj["sizeArray"][0].code;
                            selcopsize.appendChild(variantLabel)
                            var variantoptionsize = generate_html_tag('option','variantoptionsize')
                            variantoptionsize.textContent = "選択してください";
                            variantoptionsize.setAttribute('disabled','disabled')
                            variantoptionsize.setAttribute('selected','selected')
                            variantoptionsize.setAttribute('data-size', "");
                            variantoptionsize.setAttribute("datasize", "");
                            variantoptionsize.setAttribute('data-option', "");
                            selectvariant.appendChild(variantoptionsize)
                            var sel_avail = false;
                            productSizesObj["sizeArray"].forEach(function(sizeObj) {
                                var variantoption = generate_html_tag('option', 'variantoption')
                                variantoption.innerText = sizeObj["text"];
                                variantoption.setAttribute('data-size', sizeObj["text"]);
                                variantoption.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                variantoption.setAttribute('data-option', "1");
                                variantoption.setAttribute('title', sizeObj["text"].toUpperCase());
                                variantoption.setAttribute('ImgURLC', sizeObj["ImgURLC"]);
                                // if(productSizesObj["sizeArray"].length == 1){
                                //     variantoption.selected = 'selected'
                                // }else if (elAttSizeListBlock.parentNode.parentNode.getAttribute('data-size') != null) {
                                //     if (sizeObj["text"].toLocaleLowerCase() == elAttSizeListBlock.parentNode.parentNode.getAttribute('data-size').toLocaleLowerCase()) {
                                //         variantoption.selected = 'selected'
                                //     }
                                // }
                                if(productSizesObj["sizeArray"].length == 1){
                                    variantoption.selected = 'selected'
                                    setTimeout(function() {
                                        INC.methods.updateSelectedTxt(productBlock)
                                    }, 100);
                                    sel_avail = true
                                    elAttBlock.setAttribute("data-size", sizeObj["text"]);
                                    prod_modal_attr_block.setAttribute("data-size", sizeObj["text"]);
                                }else if(elAttSizeBlock.parentNode.getAttribute('data-size') != null){
                                    if(sizeObj["text"].toLocaleLowerCase() == elAttSizeBlock.parentNode.getAttribute('data-size').toLocaleLowerCase()){
                                        variantoption.selected = 'selected'
                                        sel_avail = true
                                    }
                                }
                                selcopsize.appendChild(variantoption)
                            });
                            if(sel_avail == false){
                                elAttBlock.setAttribute("data-size", '');
                                prod_modal_attr_block.setAttribute("data-size", '');
                            }else{
                                var moduleblck=elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode
                                INC.methods.checkVariantSelection(moduleblck)
                            }
                            productSizesObj["sizeArray"].forEach(function(sizeObj) {
                                var attSizeBlock = INC.methods.generateHTMLTags('div', {
                                    class: classNames["productAttSizeListItemBlock"]
                                });
                                var attSizeImgBlock = INC.methods.generateHTMLTags('div', {
                                    class: classNames["productAttSizeListItemImgBlock"]
                                });
                                var attSizeImg = INC.methods.generateHTMLTags('div', {
                                    class: classNames["productAttSizeListItemImg"]
                                });

                                attSizeImgBlock.addEventListener("click", function() {
                                    
                                    var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                                    var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                                    var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                                    var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                                    if (atteditbutton != null) {
                                        atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                                        atteditbutton.innerText = "編集"
                                    }


                                    if (productBlock.querySelector('.close_read_more') != null) {
                                        productBlock.querySelector('.close_read_more').click()
                                    }
                                    var attr_text = this.getAttribute("data-size")
                                    elAttSizeBlock.classList.add("active");
                                    elAttSizeTitleTextSelected.innerText = attr_text;
                                    elAttBlock.setAttribute("data-size", attr_text);

                                    if (atteditbutton != null) {
                                        atteditbutton.parentNode.classList.add('active')
                                    }

                                    var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_size_list_item_img_block')

                                    for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                        all_color_list_item_img[cl].classList.remove("active");
                                    }

                                    this.classList.add("active");
                                    var sel_size = elAttBlock.getAttribute('data-size')
                                    findObj = new INC.classes.FindObj({
                                        mainId: productObj.mainId,
                                        colorText: attr_text
                                    });
                                    findObj.sizeText = sel_size

                                    findObj = new INC.classes.FindObj({
                                        mainId: productObj.mainId,
                                        colorText: "",
                                        sizeText: attr_text
                                    });


                                    //third
                                    var sel_size = elAttBlock.getAttribute('data-size')
                                    findObj = new INC.classes.FindObj({
                                        mainId: productObj.mainId,
                                        colorText: attr_text
                                    });
                                    findObj.sizeText = sel_size
                                    elAtt3ListBlock.innerHTML = "";

                                    var product3rdObj = INC.dataStore.methods().getProductopt3Obj(findObj, this);
                                    if (product3rdObj["att3Array"].length > 0) {
                                        elAttSizeBlock.classList.add("active");

                                        product3rdObj["att3Array"].forEach(function(sizeObj) {
                                            var attSizeBlock3 = INC.methods.generateHTMLTags('div', {
                                                class: classNames["productAttthirdListItemBlock"]
                                            });
                                            var attSizeImgBlock3 = INC.methods.generateHTMLTags('div', {
                                                class: classNames["productAttthirdListItemImgBlock"]
                                            });
                                            var attSizeImg3 = INC.methods.generateHTMLTags('div', {
                                                class: classNames["productAttthirdListItemImg"]
                                            });

                                            attSizeImgBlock3.addEventListener("click", function() {
                                                var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                                                var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                                                var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                                                var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                                                if (atteditbutton != null) {
                                                    atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                                                    atteditbutton.innerText = "編集"
                                                }


                                                if (productBlock.querySelector('.close_read_more') != null) {
                                                    productBlock.querySelector('.close_read_more').click()
                                                }
                                                var attr_text = this.getAttribute("data-size")

                                                elAttBlock.setAttribute("data-third", attr_text);

                                                if (atteditbutton != null) {
                                                    atteditbutton.parentNode.classList.add('active')
                                                }

                                                var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_third_list_item_img_block')

                                                for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                                    all_color_list_item_img[cl].classList.remove("active");
                                                }
                                                var attr_text = this.getAttribute("data-size")
                                                this.classList.add("active");
                                                elAtt3TitleTextSelected.innerText = attr_text;;

                                                INC.methods.updateProductBlock(productBlock, findObj, blockType);

                                                var productModuleBlock = productBlock.parentNode.parentNode;

                                                var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

                                                INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                                                var size_text = ""

                                            });

                                            if (productSizeText.length == 0) {
                                                productSizeText = sizeObj["text"];
                                            }

                                            attSizeImg3.innerText = sizeObj["text"];
                                            attSizeImgBlock3.setAttribute('data-size', sizeObj["text"]);
                                            attSizeImgBlock3.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                            attSizeImgBlock3.setAttribute('data-option', "3");
                                            attSizeImgBlock3.appendChild(attSizeImg3);
                                            elAtt3ListBlock.appendChild(attSizeImgBlock3);
                                            if (attSizeImgBlock3.getAttribute('data-size').toLocaleLowerCase() == elAttSizeBlock.querySelector('.inc_product_desc_att_size_title_text_selected').innerText.toLocaleLowerCase()) {
                                                attSizeImgBlock3.classList.add('active')
                                            }
                                        });
                                        var third_el_bl = elAtt3ListBlock.querySelector(getSelectorClassName(classNames, "productAttthirdListItemImgBlock"))
                                        //                        
                                        if (third_el_bl.parentNode.querySelector('.inc_product_desc_att_third_list_item_img_block.active') == null) {
                                            third_el_bl.click();
                                        }
                                    }
                                    //end 

                                    INC.methods.updateProductBlock(productBlock, findObj, blockType);

                                    var productModuleBlock = productBlock.parentNode.parentNode;

                                    var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

                                    INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                                    var zero_text = elAttBlock.getAttribute('data-zero');
                                    var size_text = elAttBlock.getAttribute('data-size');
                                    var color_text = elAttBlock.getAttribute('data-color');
                                    var third_text = elAttBlock.getAttribute('data-third');

                                    var sel_attr_text = ""
                                    
                                    if (color_text != "" && color_text != null) {
                                        if (sel_attr_text == "" || sel_attr_text == undefined) {
                                            sel_attr_text = color_text
                                        } else {
                                            sel_attr_text = color_text
                                        }
                                    }
                                    if (zero_text != "" && zero_text != null) {
                                        if (sel_attr_text == "") {
                                            sel_attr_text = zero_text
                                        } else {
                                            sel_attr_text = sel_attr_text + " / " + zero_text
                                        }
                                    }
                                    if (size_text != "" && size_text != null) {
                                        sel_attr_text = sel_attr_text + " / " + size_text
                                    }
                                    // if (third_text != "") {
                                    //     sel_attr_text = sel_attr_text + " / " + third_text
                                    // }
                                    var pr_mod_elm = productBlock.parentNode.parentNode
                                    if (sel_attr_text != "オプションを選択"){
                                        if (pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text') != null && sel_attr_text != "") {
                                            pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text').innerText = sel_attr_text
                                            pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text').setAttribute('title', sel_attr_text)
                                        }
                                    }

                                    productModuleBlock.querySelector('.inc_product_modal_block .inc_product_desc_add_err_text_block').innerText = ""
                                });
                                if(productSizesObj["sizeArray"].length == 1){
                                    elAttBlock.setAttribute("data-size", sizeObj["text"]);
                                    attSizeImgBlock.classList.add('active')
                                }
                                if (productSizeText.length == 0) {
                                    productSizeText = sizeObj["text"];
                                }
                                attSizeImgBlock.classList.add('avail')
                                attSizeImg.innerText = sizeObj["text"];
                                attSizeImgBlock.setAttribute('data-size', sizeObj["text"]);
                                attSizeImgBlock.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                attSizeImgBlock.setAttribute('data-option', "2");
                                attSizeImgBlock.appendChild(attSizeImg);
                                elAttSizeListBlock.appendChild(attSizeImgBlock);
                                if (attSizeImgBlock.getAttribute('data-size').toLocaleLowerCase() == elAttSizeBlock.querySelector('.inc_product_desc_att_size_title_text_selected').innerText.toLocaleLowerCase()) {
                                    attSizeImgBlock.classList.add('active')
                                }
                            });
                            var size_el_bl = elAttSizeListBlock.querySelector(getSelectorClassName(classNames, "productAttSizeListItemImgBlock"))
                            //                        
                            if (size_el_bl.parentNode.querySelector('.inc_product_desc_att_size_list_item_img_block.active') == null) {
                                // size_el_bl.click();
                            }

                        }else{
                            elAttBlock.setAttribute("data-size", "");
                        }
                        // findObj.sizeText=sel_size
                        elAtt3ListBlock.innerHTML = "";
                        var inc_variant_tag = elAtt3ListBlock.parentNode.parentNode.querySelector('.inc_variant_tag')
                        if (inc_variant_tag != null) {
                            inc_variant_tag.innerHTML = "";
                        }
                        var check_clr_click_mai_attr = true
                        var first_attr_acodec = ["カラー", "左右", "ボール数",  "サイズ", "シャフト重量", "ライ角", "巻番号", "数量", "バックライン", "サイズ/幅", "サイズ/数量", "バックライン/サイズ", "長さ",  "番手","シャフト", "口径/バックライン", "左右/サイズ", "番手/ロフト", "フレックス/長さ"  , "フレックス/サイズ"  , "ロフト/フレックス", "口径/バックライン/サイズ", "フレックス",  "番手/フレックス",  "長さ/ライ角","ロフト", "ロフト/バウンス角", "長さ/シャフト重量", "Irons", "Size"];
                        var product0Obj1 = INC.dataStore.methods().getProductopt0Obj(findObj);
                        var productSizesObj2 = INC.dataStore.methods().getProductSizesObj(findObj);
                        var productColorsObj3 = INC.dataStore.methods().getProductColorsObj(findObj);
                        if (product0Obj["att0Array"][0] != undefined && product0Obj1.att0Array.length > 0 && productSizesObj2.sizeArray.length == 0 && productColorsObj3.colorArray.length > 0) {
                            if (first_attr_acode.indexOf(product0Obj1["att0Array"][0].code) == -1) {
                                check_clr_click_mai_attr = false;
                            }
                        }
                        if (check_clr_click_mai_attr == true) {
                            var product3rdObj = INC.dataStore.methods().getProductopt3Obj(findObj, this);
                            if (product3rdObj["att3Array"].length > 0) {
                                elAtt3Block.classList.add("active");
                                var variantLabel = generate_html_tag('label', 'variantLabel')
                                variantLabel.innerText = product3rdObj["att3Array"][0].code;
                                inc_variant_tag.appendChild(variantLabel)
                                var variantoptionthird = generate_html_tag('option','variantoptionthird')
                                variantoptionthird.textContent = "選択してください";
                                variantoptionthird.setAttribute('disabled','disabled')
                                variantoptionthird.setAttribute('selected','selected')
                                variantoptionthird.setAttribute('data-size', "");
                                variantoptionthird.setAttribute("datasize", "");
                                variantoptionthird.setAttribute('data-option', "");
                                selectvariant.appendChild(variantoptionthird)
                                var sel_avail = false;
                                product3rdObj["att3Array"].forEach(function(att3Array) {
                                    var variantoption = generate_html_tag('option', 'variantoption')
                                    variantoption.innerText = att3Array["text"];
                                    variantoption.setAttribute('data-size', att3Array["text"]);
                                    variantoption.setAttribute("datasize", att3Array["text"].toLocaleLowerCase());
                                    variantoption.setAttribute('data-option', "1");
                                    variantoption.setAttribute('title', att3Array["text"].toUpperCase());
                                    variantoption.setAttribute('ImgURLC', att3Array["ImgURLC"]);
                                    // if (elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third') != null) {
                                    //     if (att3Array["text"].toLocaleLowerCase() == elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third').toLocaleLowerCase()) {
                                    //         variantoption.selected = 'selected'
                                    //     }
                                    // }
                                    if(product3rdObj["att3Array"].length == 1){
                                        variantoption.selected = 'selected'
                                        setTimeout(function() {
                                            INC.methods.updateSelectedTxt(productBlock)
                                        }, 100);
                                        sel_avail = true
                                        elAttBlock.setAttribute("data-third", att3Array["text"]);
                                        prod_modal_attr_block.setAttribute("data-third", att3Array["text"]);
                                    }else if (elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third') != null) {
                                        
                                        if (att3Array["text"].toLocaleLowerCase() == elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third').toLocaleLowerCase()) {
                                            sel_avail = true
                                            variantoption.selected = 'selected'
                                        }
                                    }

                                    inc_variant_tag.appendChild(variantoption)
                                });

                                if(sel_avail == false){
                                    elAttBlock.setAttribute("data-third", '');
                                    prod_modal_attr_block.setAttribute("data-third", '');
                                }else{
                                    var moduleblck=elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode
                                    INC.methods.checkVariantSelection(moduleblck)
                                }
                                product3rdObj["att3Array"].forEach(function(sizeObj) {
                                    var attSizeBlock3 = INC.methods.generateHTMLTags('div', {
                                        class: classNames["productAttthirdListItemBlock"]
                                    });
                                    var attSizeImgBlock3 = INC.methods.generateHTMLTags('div', {
                                        class: classNames["productAttthirdListItemImgBlock"]
                                    });
                                    var attSizeImg3 = INC.methods.generateHTMLTags('div', {
                                        class: classNames["productAttthirdListItemImg"]
                                    });

                                    attSizeImgBlock3.addEventListener("click", function() {
                                        var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                                        var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                                        var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                                        var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                                        if (atteditbutton != null) {
                                            atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                                            atteditbutton.innerText = "編集"
                                        }


                                        if (productBlock.querySelector('.close_read_more') != null) {
                                            productBlock.querySelector('.close_read_more').click()
                                        }
                                        var attr_text = this.getAttribute("data-size")

                                        elAttBlock.setAttribute("data-third", attr_text);

                                        if (atteditbutton != null) {
                                            atteditbutton.parentNode.classList.add('active')
                                        }

                                        var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_third_list_item_img_block')

                                        for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                            all_color_list_item_img[cl].classList.remove("active");
                                        }
                                        var attr_text = this.getAttribute("data-size")
                                        this.classList.add("active");
                                        elAtt3TitleTextSelected.innerText = attr_text;;

                                        INC.methods.updateProductBlock(productBlock, findObj, blockType);

                                        var productModuleBlock = productBlock.parentNode.parentNode;

                                        var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

                                        INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                                        var size_text = ""

                                    });

                                    if (productSizeText.length == 0) {
                                        productSizeText = sizeObj["text"];
                                    }

                                    attSizeImg3.innerText = sizeObj["text"];
                                    attSizeImgBlock3.setAttribute('data-size', sizeObj["text"]);
                                    attSizeImgBlock3.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                    attSizeImgBlock3.setAttribute('data-option', "3");
                                    attSizeImgBlock3.appendChild(attSizeImg3);
                                    elAtt3ListBlock.appendChild(attSizeImgBlock3);
                                    if (attSizeImgBlock3.getAttribute('data-size').toLocaleLowerCase() == elAttSizeBlock.querySelector('.inc_product_desc_att_size_title_text_selected').innerText.toLocaleLowerCase()) {
                                        attSizeImgBlock3.classList.add('active')
                                    }
                                });

                            }
                        } else {
                            elAtt3ListBlock.innerHTML = "";
                            var product3rdObj = INC.dataStore.methods().getProductopt0Obj(findObj, this);
                            if (product3rdObj["att0Array"].length > 0) {
                                elAtt3Block.classList.add("active");
                                var variantLabel = generate_html_tag('label', 'variantLabel')
                                variantLabel.innerText = product3rdObj["att0Array"][0].code;
                                inc_variant_tag.appendChild(variantLabel)
                                var variantoptionzero = generate_html_tag('option','variantoptionzero')
                                variantoptionzero.textContent = "選択してください";
                                variantoptionzero.setAttribute('disabled','disabled')
                                variantoptionzero.setAttribute('selected','selected')
                                variantoptionzero.setAttribute('data-size', "");
                                variantoptionzero.setAttribute("datasize", "");
                                variantoptionzero.setAttribute('data-option', "");
                                selectvariant.appendChild(variantoptionzero)
                                var sel_avail = false;
                                product3rdObj["att0Array"].forEach(function(att0Array) {
                                    var variantoption = generate_html_tag('option', 'variantoption')
                                    variantoption.innerText = att0Array["text"];
                                    variantoption.setAttribute('data-size', att0Array["text"]);
                                    variantoption.setAttribute("datasize", att0Array["text"].toLocaleLowerCase());
                                    variantoption.setAttribute('data-option', "1");
                                    variantoption.setAttribute('title', att0Array["text"].toUpperCase());
                                    variantoption.setAttribute('ImgURLC', att0Array["ImgURLC"]);
                                    // if (elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third') != null) {
                                    //     if (att0Array["text"].toLocaleLowerCase() == elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third').toLocaleLowerCase()) {
                                    //         variantoption.selected = 'selected'
                                    //     }
                                    // }
                                    if(product3rdObj["att3Array"].length == 1){
                                        variantoption.selected = 'selected'
                                        setTimeout(function() {
                                            INC.methods.updateSelectedTxt(productBlock)
                                        }, 100);
                                        sel_avail = true
                                        elAttBlock.setAttribute("data-third", att3Array["text"]);
                                        prod_modal_attr_block.setAttribute("data-third", att3Array["text"]);
                                    }else if (elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third') != null) {
                                        
                                        if (att3Array["text"].toLocaleLowerCase() == elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third').toLocaleLowerCase()) {
                                            sel_avail = true
                                            variantoption.selected = 'selected'
                                        }
                                    }
                                    inc_variant_tag.appendChild(variantoption)
                                });
                                if(sel_avail == false){
                                    elAttBlock.setAttribute("data-third", '');
                                    prod_modal_attr_block.setAttribute("data-third", '');
                                }else{
                                    var moduleblck=elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode
                                    INC.methods.checkVariantSelection(moduleblck)
                                }
                                product3rdObj["att0Array"].forEach(function(sizeObj) {

                                    var attSizeBlock3 = INC.methods.generateHTMLTags('div', {
                                        class: classNames["productAttthirdListItemBlock"]
                                    });
                                    var attSizeImgBlock3 = INC.methods.generateHTMLTags('div', {
                                        class: classNames["productAttthirdListItemImgBlock"]
                                    });
                                    var attSizeImg3 = INC.methods.generateHTMLTags('div', {
                                        class: classNames["productAttthirdListItemImg"]
                                    });

                                    attSizeImgBlock3.addEventListener("click", function() {
                                        var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                                        var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                                        var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                                        var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                                        if (atteditbutton != null) {
                                            atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                                            atteditbutton.innerText = "編集"
                                        }


                                        if (productBlock.querySelector('.close_read_more') != null) {
                                            productBlock.querySelector('.close_read_more').click()
                                        }
                                        var attr_text = this.getAttribute("data-size")

                                        elAttBlock.setAttribute("data-third", attr_text);

                                        if (atteditbutton != null) {
                                            atteditbutton.parentNode.classList.add('active')
                                        }

                                        var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_third_list_item_img_block')

                                        for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                            all_color_list_item_img[cl].classList.remove("active");
                                        }
                                        var attr_text = this.getAttribute("data-size")
                                        this.classList.add("active");
                                        elAtt3TitleTextSelected.innerText = attr_text;;

                                        INC.methods.updateProductBlock(productBlock, findObj, blockType);

                                        var productModuleBlock = productBlock.parentNode.parentNode;

                                        var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

                                        INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                                        var size_text = ""

                                    });

                                    // if (productSizeText.length == 0) {
                                    //     productSizeText = sizeObj["text"];
                                    // }

                                    attSizeImg3.innerText = sizeObj["text"];
                                    attSizeImgBlock3.setAttribute('data-size', sizeObj["text"]);
                                    attSizeImgBlock3.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                    attSizeImgBlock3.setAttribute('data-option', "3");
                                    attSizeImgBlock3.appendChild(attSizeImg3);
                                    elAtt3ListBlock.appendChild(attSizeImgBlock3);
                                    if (attSizeImgBlock3.getAttribute('data-size').toLocaleLowerCase() == elAttSizeBlock.querySelector('.inc_product_desc_att_size_title_text_selected').innerText.toLocaleLowerCase()) {
                                        attSizeImgBlock3.classList.add('active')
                                    }
                                });
                                var third_el_bl = elAtt3ListBlock.querySelector(getSelectorClassName(classNames, "productAttthirdListItemImgBlock"))
                                //                        
                                if (third_el_bl.parentNode.querySelector('.inc_product_desc_att_third_list_item_img_block.active') == null) {
                                    third_el_bl.click();
                                }
                            }
                        }
                        //end 

                        INC.methods.updateProductBlock(productBlock, findObj, blockType);

                        var productModuleBlock = productBlock.parentNode.parentNode;

                        var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

                        INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                        var zero_text = elAttBlock.getAttribute('data-zero');
                        var size_text = elAttBlock.getAttribute('data-size');
                        var color_text = elAttBlock.getAttribute('data-color');
                        var third_text = elAttBlock.getAttribute('data-third');

                        var sel_attr_text = ""
                        
                        if (color_text != "" && color_text != null) {
                            if (sel_attr_text == "" || sel_attr_text == undefined) {
                                sel_attr_text = color_text
                            } else {
                                sel_attr_text = color_text
                            }
                        }
                        if (zero_text != "" && zero_text != null) {
                            if (sel_attr_text == "") {
                                sel_attr_text = zero_text
                            } else {
                                sel_attr_text = sel_attr_text + " / " + zero_text
                            }
                        }
                        if (size_text != "" && size_text != null) {
                            sel_attr_text = sel_attr_text + " / " + size_text
                        }
                        // if (third_text != "") {
                        //     sel_attr_text = sel_attr_text + " / " + third_text
                        // }
                        var pr_mod_elm = productBlock.parentNode.parentNode
                        if (sel_attr_text != "オプションを選択"){
                            if (pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text') != null && sel_attr_text != "") {
                                pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text').innerText = sel_attr_text
                                pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text').setAttribute('title', sel_attr_text)
                            }
                        }
                        productModuleBlock.querySelector('.inc_product_modal_block .inc_product_desc_add_err_text_block').innerText = ""
                    });


                    if(productColorsObj["colorArray"].length == 1){
                        elAttBlock.setAttribute("data-color", colorObj["text"]);
                        attColorImgBlock.classList.add('active')
                    }
                    attColorImg.style.backgroundColor = colorObj["colorCode"];


                    if (colorObj["imgSrc"].length > 0) {
                        if (colorObj["colorCode"] == "") {
                            //{ src: colorObj["imgSrc"] }
                            var colorImg = INC.methods.generateHTMLTags('img');
                            colorImg.setAttribute('alt', colorObj["text"])
                            colorImg.setAttribute('title', colorObj["text"])
                            colorImg.setAttribute('src', colorObj["imgSrc"])
                            if (productObj.categoryName != "") {
                                colorImg.classList.add(productObj.categoryName.replace(/\s/g, ''))
                            }
                            //
                            attColorImg.appendChild(colorImg);
                        }
                    }

                    var colorTitle = INC.methods.generateHTMLTags('a');
                    colorTitle.innerText = colorObj["text"]
                    colorTitle.title = colorObj["text"].toUpperCase();
                    colorTitle.addEventListener('click', function(e) {
                        e.preventDefault();
                    })
                    attColorImg.appendChild(colorTitle);
                    attColorImgBlock.setAttribute('data-color', colorObj["text"]);
                    attColorImgBlock.setAttribute("datacolor", colorObj["text"].toLocaleLowerCase());
                    attColorImgBlock.setAttribute('data-option', "0");


                    attColorImgBlock.appendChild(attColorImg);
                    attColorBlock.appendChild(attColorImgBlock);
                    elAttColorListBlock.appendChild(attColorBlock);
                    var prod_id = productBlock.getAttribute('data-main_id');
                    if (one_attr_flag == true) {
                        setTimeout(function() {
                            if (INC.methods.getProductIdFromWebPage() == prod_id) {
                                // attColorImgBlock.click()
                            }
                        }, 0)
                    }
                });

            }
        }

        if (product0Obj.att0Array.length > 0) {
            var selectvariantwrap = generate_html_tag('div', 'selectvariantwrap')
            var selectvariant = generate_html_tag('select', 'inc_variant_zero_tag')
            selectvariant.setAttribute('id', 'variant_inc_avail_zero')
            selectvariant.setAttribute('onchange', 'inc_onchange_variant(this)')
            selectvariantwrap.classList.add(product0Obj["att0Array"][0].code.replace('/',''))
            var variantLabel = generate_html_tag('label', 'variantLabel')
            variantLabel.innerText = product0Obj["att0Array"][0].code;
            selectvariantwrap.appendChild(variantLabel)
            selectvariantwrap.appendChild(selectvariant)
            elAttBlock.appendChild(selectvariantwrap)
            var variantoptionzero1 = generate_html_tag('option','variantoptionzero1')
            variantoptionzero1.textContent = "選択してください";
            variantoptionzero1.setAttribute('disabled','disabled')
            variantoptionzero1.setAttribute('selected','selected')
            variantoptionzero1.setAttribute('data-size', "");
            variantoptionzero1.setAttribute("datasize", "");
            variantoptionzero1.setAttribute('data-option', "");
            selectvariant.appendChild(variantoptionzero1)
            var sel_avail = false;
            product0Obj['att0Array'].forEach(function(sizeObj) {
                var variantoption = generate_html_tag('option', 'variantoption')
                variantoption.innerText = sizeObj["text"];
                variantoption.setAttribute('data-size', sizeObj["text"]);
                variantoption.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                variantoption.setAttribute('data-option', "1");
                variantoption.setAttribute('title', sizeObj["text"].toUpperCase());
                variantoption.setAttribute('ImgURLC', sizeObj["ImgURLC"]);
                // if(product0Obj['att0Array'].length == 1){
                //     variantoption.selected = 'selected'
                // }
                if(product0Obj['att0Array'].length == 1){
                    variantoption.selected = 'selected'
                    setTimeout(function() {
                        INC.methods.updateSelectedTxt(productBlock)
                    }, 100);
                    sel_avail = true
                    elAttBlock.setAttribute("data-zero", sizeObj["text"]);
                }
                selectvariant.appendChild(variantoption)

            });
            
            if (product0Obj["att0Array"][0].code != "Color") {
                findObj = new INC.classes.FindObj({
                    mainId: productObj.mainId
                });
                elAtt0ListBlock.innerHTML = "";
                var product0Obj = product0Obj;
                var productSizeText = "";
                if (product0Obj["att0Array"].length > 0) {
                    elAtt0TitleText.innerText = product0Obj["att0Array"][0].code;
                    elAtt0Block.classList.add("active");
                    product0Obj["att0Array"].forEach(function(sizeObj) {
                        var attSizeBlock0 = INC.methods.generateHTMLTags('div', {
                            class: classNames["productAttSizeListItemBlock"]
                        });
                        var attSizeImgBlock0 = INC.methods.generateHTMLTags('div', {
                            class: classNames["productAttSizeListItemImgBlock"]
                        });
                        var attSizeImg0 = INC.methods.generateHTMLTags('div', {
                            class: classNames["productAttSizeListItemImg"]
                        });
                        attSizeImgBlock0.addEventListener("click", function(e) {
                            
                            var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                            var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                            // var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                            var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                            if (atteditbutton != null) {
                                atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                                atteditbutton.innerText = "編集"
                            }


                            if (productBlock.querySelector('.close_read_more') != null) {
                                productBlock.querySelector('.close_read_more').click()
                            }
                            var attr_text = this.getAttribute("data-size");

                            elAttBlock.setAttribute("data-zero", attr_text);

                            if (atteditbutton != null) {
                                atteditbutton.parentNode.classList.add('active')
                            }

                            var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_zero_list_block .inc_product_desc_att_size_list_item_img_block')

                            for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                all_color_list_item_img[cl].classList.remove("active");
                            }

                            this.classList.add("active");

                            elAtt0TitleTextSelected.innerText = attr_text;

                            var sel_size = elAttBlock.getAttribute('data-size')
                            findObj = new INC.classes.FindObj({
                                mainId: productObj.mainId,
                                colorText: attr_text
                            });
                            findObj.sizeText = sel_size

                            findObj = new INC.classes.FindObj({
                                mainId: productObj.mainId,
                                colorText: "",
                                sizeText: attr_text
                            });

                            var productSizesObj = INC.dataStore.methods().getProductSizesObj(findObj, this);

                            elAttSizeListBlock.innerHTML = "";
                            var selcopsize = elAttSizeListBlock.parentNode.parentNode.querySelector('.inc_variant_size_tag')
                            if (selcopsize != null) {
                                selcopsize.innerHTML = ""
                            }
                            var productSizesObj = INC.dataStore.methods().getProductSizesObj(findObj, this);

                            if (productSizesObj["sizeArray"][0] != undefined) {
                                if (productSizesObj["sizeArray"][0].code == "Color") {
                                    productColorsObj = INC.dataStore.methods().getProductSizesObj(findObj, this);
                                    productSizesObj = INC.dataStore.methods().getProductColorsObj(findObj, this);
                                }
                            }


                            if (productSizesObj["sizeArray"].length > 0) {
                                elAttSizeBlock.classList.add("active");
                                var variantLabel = generate_html_tag('label', 'variantLabel')
                                variantLabel.innerText = productSizesObj["sizeArray"][0].code;
                                selcopsize.appendChild(variantLabel)
                                var variantoptionsize2 = generate_html_tag('option','variantoptionsize2')
                                variantoptionsize2.textContent = "選択してください";
                                variantoptionsize2.setAttribute('disabled','disabled')
                                variantoptionsize2.setAttribute('selected','selected')
                                variantoptionsize2.setAttribute('data-size', "");
                                variantoptionsize2.setAttribute("datasize", "");
                                variantoptionsize2.setAttribute('data-option', "");
                                selectvariant.appendChild(variantoptionsize2)
                                productSizesObj["sizeArray"].forEach(function(sizeObj) {
                                    var variantoption = generate_html_tag('option', 'variantoption')
                                    variantoption.innerText = sizeObj["text"];
                                    variantoption.setAttribute('data-size', sizeObj["text"]);
                                    variantoption.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                    variantoption.setAttribute('data-option', "1");
                                    variantoption.setAttribute('title', sizeObj["text"].toUpperCase());
                                    variantoption.setAttribute('ImgURLC', sizeObj["ImgURLC"]);
                                    // if(productSizesObj["sizeArray"].length == 1){
                                    //     variantoption.selected = 'selected'
                                    // }else if (elAttSizeListBlock.parentNode.parentNode.getAttribute('data-size') != null) {
                                    //     if (sizeObj["text"].toLocaleLowerCase() == elAttSizeListBlock.parentNode.parentNode.getAttribute('data-size').toLocaleLowerCase()) {
                                    //         variantoption.selected = 'selected'
                                    //     }
                                    // }
                                    if(productSizesObj["sizeArray"].length == 1){
                                        variantoption.selected = 'selected'
                                        sel_avail = true
                                        elAttBlock.setAttribute("data-size", sizeObj["text"]);
                                        prod_modal_attr_block.setAttribute("data-size", sizeObj["text"]);
                                    }else if(elAttSizeBlock.parentNode.getAttribute('data-size') != null){
                                        elAttBlock.setAttribute("data-size", "");
                                        if(sizeObj["text"].toLocaleLowerCase() == elAttSizeBlock.parentNode.getAttribute('data-size').toLocaleLowerCase()){
                                            // variantoption.selected = 'selected'
                                            // sel_avail = true
                                        }
                                    }
                                    selcopsize.appendChild(variantoption)
                                });
                                if(sel_avail == false){
                                    elAttBlock.setAttribute("data-size", '');
                                    prod_modal_attr_block.setAttribute("data-size", '');
                                }else{
                                    var moduleblck=elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode
                                    INC.methods.checkVariantSelection(moduleblck)
                                }
                                productSizesObj["sizeArray"].forEach(function(sizeObj) {
                                    var attSizeBlock = INC.methods.generateHTMLTags('div', {
                                        class: classNames["productAttSizeListItemBlock"]
                                    });
                                    var attSizeImgBlock = INC.methods.generateHTMLTags('div', {
                                        class: classNames["productAttSizeListItemImgBlock"]
                                    });
                                    var attSizeImg = INC.methods.generateHTMLTags('div', {
                                        class: classNames["productAttSizeListItemImg"]
                                    });

                                    attSizeImgBlock.addEventListener("click", function() {
                                        var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                                        var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                                        var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                                        var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                                        if (atteditbutton != null) {
                                            atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                                            atteditbutton.innerText = "編集"
                                        }


                                        if (productBlock.querySelector('.close_read_more') != null) {
                                            productBlock.querySelector('.close_read_more').click()
                                        }
                                        var attr_text = this.getAttribute("data-size")
                                        elAttSizeBlock.classList.add("active");
                                        elAttSizeTitleTextSelected.innerText = attr_text;
                                        elAttBlock.setAttribute("data-size", attr_text);

                                        if (atteditbutton != null) {
                                            atteditbutton.parentNode.classList.add('active')
                                        }

                                        var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_size_block .inc_product_desc_att_size_list_item_img_block')

                                        for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                            all_color_list_item_img[cl].classList.remove("active");
                                        }

                                        this.classList.add("active");
                                        var sel_size = elAttBlock.getAttribute('data-size')
                                        findObj = new INC.classes.FindObj({
                                            mainId: productObj.mainId,
                                            colorText: attr_text
                                        });
                                        findObj.sizeText = sel_size

                                        findObj = new INC.classes.FindObj({
                                            mainId: productObj.mainId,
                                            colorText: "",
                                            sizeText: attr_text
                                        });
                                        

                                        //third
                                        var sel_size = elAttBlock.getAttribute('data-size')
                                        findObj = new INC.classes.FindObj({
                                            mainId: productObj.mainId,
                                            colorText: attr_text
                                        });
                                        findObj.sizeText = sel_size
                                        elAtt3ListBlock.innerHTML = "";

                                        var product3rdObj = INC.dataStore.methods().getProductopt3Obj(findObj, this);
                                        if (product3rdObj["att3Array"].length > 0) {
                                            elAttSizeBlock.classList.add("active");

                                            product3rdObj["att3Array"].forEach(function(sizeObj) {
                                                var attSizeBlock3 = INC.methods.generateHTMLTags('div', {
                                                    class: classNames["productAttthirdListItemBlock"]
                                                });
                                                var attSizeImgBlock3 = INC.methods.generateHTMLTags('div', {
                                                    class: classNames["productAttthirdListItemImgBlock"]
                                                });
                                                var attSizeImg3 = INC.methods.generateHTMLTags('div', {
                                                    class: classNames["productAttthirdListItemImg"]
                                                });

                                                attSizeImgBlock3.addEventListener("click", function() {
                                                    var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                                                    var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                                                    var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                                                    var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                                                    if (atteditbutton != null) {
                                                        atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                                                        atteditbutton.innerText = "編集"
                                                    }


                                                    if (productBlock.querySelector('.close_read_more') != null) {
                                                        productBlock.querySelector('.close_read_more').click()
                                                    }
                                                    var attr_text = this.getAttribute("data-size")

                                                    elAttBlock.setAttribute("data-third", attr_text);

                                                    if (atteditbutton != null) {
                                                        atteditbutton.parentNode.classList.add('active')
                                                    }

                                                    var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_third_list_item_img_block')

                                                    for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                                        all_color_list_item_img[cl].classList.remove("active");
                                                    }
                                                    var attr_text = this.getAttribute("data-size")
                                                    this.classList.add("active");
                                                    elAtt3TitleTextSelected.innerText = attr_text;;

                                                    INC.methods.updateProductBlock(productBlock, findObj, blockType);

                                                    var productModuleBlock = productBlock.parentNode.parentNode;

                                                    var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

                                                    INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                                                    var size_text = ""

                                                });

                                                if (productSizeText.length == 0) {
                                                    productSizeText = sizeObj["text"];
                                                }

                                                attSizeImg3.innerText = sizeObj["text"];
                                                attSizeImgBlock3.setAttribute('data-size', sizeObj["text"]);
                                                attSizeImgBlock3.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                                attSizeImgBlock3.setAttribute('data-option', "3");
                                                attSizeImgBlock3.appendChild(attSizeImg3);
                                                elAtt3ListBlock.appendChild(attSizeImgBlock3);
                                                if (attSizeImgBlock3.getAttribute('data-size').toLocaleLowerCase() == elAttSizeBlock.querySelector('.inc_product_desc_att_size_title_text_selected').innerText.toLocaleLowerCase()) {
                                                    attSizeImgBlock3.classList.add('active')
                                                }
                                            });
                                            var third_el_bl = elAtt3ListBlock.querySelector(getSelectorClassName(classNames, "productAttthirdListItemImgBlock"))
                                            //                        
                                            if (third_el_bl.parentNode.querySelector('.inc_product_desc_att_third_list_item_img_block.active') == null) {
                                                third_el_bl.click();
                                            }
                                        }
                                        //end 

                                        INC.methods.updateProductBlock(productBlock, findObj, blockType);

                                        var productModuleBlock = productBlock.parentNode.parentNode;

                                        var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

                                        INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                                        var zero_text = elAttBlock.getAttribute('data-zero');
                                        var size_text = elAttBlock.getAttribute('data-size');
                                        var color_text = elAttBlock.getAttribute('data-color');
                                        var third_text = elAttBlock.getAttribute('data-third');

                                        var sel_attr_text = ""
                                        
                                        if (color_text != "" && color_text != null) {
                                            if (sel_attr_text == "" || sel_attr_text == undefined) {
                                                sel_attr_text = color_text
                                            } else {
                                                sel_attr_text = color_text
                                            }
                                        }
                                        if (zero_text != "" && zero_text != null) {
                                            if (sel_attr_text == "") {
                                                sel_attr_text = zero_text
                                            } else {
                                                sel_attr_text = sel_attr_text + " / " + zero_text
                                            }
                                        }
                                        if (size_text != "" && size_text != null) {
                                            sel_attr_text = sel_attr_text + " / " + size_text
                                        }
                                        // if (third_text != "") {
                                        //     sel_attr_text = sel_attr_text + " / " + third_text
                                        // }
                                        var pr_mod_elm = productBlock.parentNode.parentNode
                                        if (sel_attr_text != "オプションを選択"){
                                            if (pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text') != null && sel_attr_text != "") {
                                                pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text').innerText = sel_attr_text
                                                pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text').setAttribute('title', sel_attr_text)
                                            }
                                        }

                                        productModuleBlock.querySelector('.inc_product_modal_block .inc_product_desc_add_err_text_block').innerText = ""
                                    });
                                    if(productSizesObj["sizeArray"].length == 1){
                                        elAttBlock.setAttribute("data-size", sizeObj["text"]);
                                        attSizeImgBlock.classList.add('active')
                                    }
                                    if (productSizeText.length == 0) {
                                        productSizeText = sizeObj["text"];
                                    }
                                    attSizeImgBlock.classList.add('avail')
                                    attSizeImg.innerText = sizeObj["text"];
                                    attSizeImgBlock.setAttribute('data-size', sizeObj["text"]);
                                    attSizeImgBlock.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                    attSizeImgBlock.setAttribute('data-option', "2");
                                    attSizeImgBlock.appendChild(attSizeImg);
                                    elAttSizeListBlock.appendChild(attSizeImgBlock);
                                    if (attSizeImgBlock.getAttribute('data-size').toLocaleLowerCase() == elAttSizeBlock.querySelector('.inc_product_desc_att_size_title_text_selected').innerText.toLocaleLowerCase()) {
                                        attSizeImgBlock.classList.add('active')
                                    }
                                });
                                var size_el_bl = elAttSizeListBlock.querySelector(getSelectorClassName(classNames, "productAttSizeListItemImgBlock"))
                                //                        
                                if (size_el_bl.parentNode.querySelector('.inc_product_desc_att_size_list_item_img_block.active') == null) {
                                    // size_el_bl.click();
                                }

                            }else{
                                elAttBlock.setAttribute("data-size", "");
                            }

                            findObj = new INC.classes.FindObj({
                                mainId: productObj.mainId,
                                colorText: "",
                                sizeText: attr_text
                            });



                            //third

                            findObj = new INC.classes.FindObj({
                                mainId: productObj.mainId,
                                colorText: attr_text
                            });
                            var sel_size = elAttBlock.getAttribute('data-size')
                            findObj.sizeText = sel_size
                            elAtt3ListBlock.innerHTML = "";

                            var product3rdObj = INC.dataStore.methods().getProductopt3Obj(findObj, this);

                            var inc_variant_tag = elAtt3ListBlock.parentNode.parentNode.querySelector('.inc_variant_tag')
                            if (inc_variant_tag != null) {
                                inc_variant_tag.innerHTML = "";
                            }
                            if (product3rdObj["att3Array"].length > 0) {
                                elAttSizeBlock.classList.add("active");
                                var variantLabel = generate_html_tag('label', 'variantLabel')
                                variantLabel.innerText = product3rdObj["att3Array"][0].code;
                                inc_variant_tag.appendChild(variantLabel)
                                var variantoptionthird6 = generate_html_tag('option','variantoptionthird6')
                                variantoptionthird6.textContent = "選択してください";
                                variantoptionthird6.setAttribute('disabled','disabled')
                                variantoptionthird6.setAttribute('selected','selected')
                                variantoptionthird6.setAttribute('data-size', "");
                                variantoptionthird6.setAttribute("datasize", "");
                                variantoptionthird6.setAttribute('data-option', "");
                                selectvariant.appendChild(variantoptionthird6)
                                product3rdObj["att3Array"].forEach(function(att3Array) {
                                    var variantoption = generate_html_tag('option', 'variantoption')
                                    variantoption.innerText = att3Array["text"];
                                    variantoption.setAttribute('data-size', att3Array["text"]);
                                    variantoption.setAttribute("datasize", att3Array["text"].toLocaleLowerCase());
                                    variantoption.setAttribute('data-option', "1");
                                    variantoption.setAttribute('title', att3Array["text"].toUpperCase());
                                    variantoption.setAttribute('ImgURLC', att3Array["ImgURLC"]);
                                    // if (elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third') != null) {
                                    //     if (att3Array["text"].toLocaleLowerCase() == elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third').toLocaleLowerCase()) {
                                    //         variantoption.selected = 'selected'
                                    //     }
                                    // }
                                    if(product3rdObj["att3Array"].length == 1){
                                        variantoption.selected = 'selected'
                                        sel_avail = true
                                        elAttBlock.setAttribute("data-third", att3Array["text"]);
                                        prod_modal_attr_block.setAttribute("data-third", att3Array["text"]);
                                    }else if (elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third') != null) {
                                        
                                        if (att3Array["text"].toLocaleLowerCase() == elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third').toLocaleLowerCase()) {
                                            variantoption.selected = 'selected'
                                            sel_avail = true
                                        }
                                    }
                                    inc_variant_tag.appendChild(variantoption)
                                });
                                if(sel_avail == false){
                                    elAttBlock.setAttribute("data-third", '');
                                    prod_modal_attr_block.setAttribute("data-third", '');
                                }else{
                                    var moduleblck=elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode
                                    INC.methods.checkVariantSelection(moduleblck)
                                }
                                product3rdObj["att3Array"].forEach(function(sizeObj) {
                                    var attSizeBlock3 = INC.methods.generateHTMLTags('div', {
                                        class: classNames["productAttthirdListItemBlock"]
                                    });
                                    var attSizeImgBlock3 = INC.methods.generateHTMLTags('div', {
                                        class: classNames["productAttthirdListItemImgBlock"]
                                    });
                                    var attSizeImg3 = INC.methods.generateHTMLTags('div', {
                                        class: classNames["productAttthirdListItemImg"]
                                    });

                                    attSizeImgBlock3.addEventListener("click", function() {
                                        var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                                        var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                                        var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                                        var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                                        if (atteditbutton != null) {
                                            atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                                            atteditbutton.innerText = "編集"
                                        }


                                        if (productBlock.querySelector('.close_read_more') != null) {
                                            productBlock.querySelector('.close_read_more').click()
                                        }
                                        var attr_text = this.getAttribute("data-size")

                                        elAttBlock.setAttribute("data-third", attr_text);

                                        if (atteditbutton != null) {
                                            atteditbutton.parentNode.classList.add('active')
                                        }

                                        var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_third_list_item_img_block')

                                        for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                            all_color_list_item_img[cl].classList.remove("active");
                                        }
                                        var attr_text = this.getAttribute("data-size")
                                        this.classList.add("active");
                                        elAtt3TitleTextSelected.innerText = attr_text;;

                                        INC.methods.updateProductBlock(productBlock, findObj, blockType);

                                        var productModuleBlock = productBlock.parentNode.parentNode;

                                        var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

                                        INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                                        var size_text = ""

                                    });

                                    if (productSizeText.length == 0) {
                                        productSizeText = sizeObj["text"];
                                    }

                                    attSizeImg3.innerText = sizeObj["text"];
                                    attSizeImgBlock3.setAttribute('data-size', sizeObj["text"]);
                                    attSizeImgBlock3.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                    attSizeImgBlock3.setAttribute('data-option', "3");
                                    attSizeImgBlock3.appendChild(attSizeImg3);
                                    elAtt3ListBlock.appendChild(attSizeImgBlock3);
                                    if (attSizeImgBlock3.getAttribute('data-size').toLocaleLowerCase() == elAttSizeBlock.querySelector('.inc_product_desc_att_size_title_text_selected').innerText.toLocaleLowerCase()) {
                                        attSizeImgBlock3.classList.add('active')
                                    }
                                });
                                var third_el_bl = elAtt3ListBlock.querySelector(getSelectorClassName(classNames, "productAttthirdListItemImgBlock"))
                                //                        
                                if (third_el_bl.parentNode.querySelector('.inc_product_desc_att_third_list_item_img_block.active') == null) {
                                    third_el_bl.click();
                                }
                            }
                            //end 

                            INC.methods.updateProductBlock(productBlock, findObj, blockType);

                            var productModuleBlock = productBlock.parentNode.parentNode;

                            var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

                            INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                            var zero_text = elAttBlock.getAttribute('data-zero');
                            var size_text = elAttBlock.getAttribute('data-size');
                            var color_text = elAttBlock.getAttribute('data-color');
                            var third_text = elAttBlock.getAttribute('data-third');

                            var sel_attr_text = ""
                            
                            if (color_text != "" && color_text != null) {
                                if (sel_attr_text == "" || sel_attr_text == undefined) {
                                    sel_attr_text = color_text
                                } else {
                                    sel_attr_text = color_text
                                }
                            }
                            if (zero_text != "" && zero_text != null) {
                                if (sel_attr_text == "") {
                                    sel_attr_text = zero_text
                                } else {
                                    sel_attr_text = sel_attr_text + " / " + zero_text
                                }
                            }
                            if (size_text != "" && size_text != null) {
                                sel_attr_text = sel_attr_text + " / " + size_text
                            }
                            // if (third_text != "") {
                            //     sel_attr_text = sel_attr_text + " / " + third_text
                            // }
                            var pr_mod_elm = productBlock.parentNode.parentNode
                            if (sel_attr_text != "オプションを選択"){
                                if (pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text') != null && sel_attr_text != "") {
                                    pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text').innerText = sel_attr_text
                                    pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text').setAttribute('title', sel_attr_text)
                                }
                            }

                            productModuleBlock.querySelector('.inc_product_modal_block .inc_product_desc_add_err_text_block').innerText = ""

                        });

                        if(product0Obj['att0Array'].length == 1){
                            elAttBlock.setAttribute("data-zero", sizeObj["text"]);
                            attSizeImgBlock0.classList.add('active')
                        }
                        attSizeImgBlock0.classList.add('avail')
                        if (productSizeText.length == 0) {
                            productSizeText = sizeObj["text"];
                        }
                        var reg = new RegExp('^[A-Z]|XS|S|M|L|XL|XXL|XXXL|XX|XXXXL|2XL|3XL|4XL$');
                        var chckType = sizeObj["text"];

                        reg.test(chckType);


                        attSizeImg0.innerText = sizeObj["text"];
                        attSizeImgBlock0.setAttribute('data-size', sizeObj["text"]);
                        attSizeImgBlock0.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                        attSizeImgBlock0.setAttribute('data-option', "1");
                        if (product0Obj["att0Array"][0].code == "size") {
                            attSizeImgBlock0.setAttribute('title', sizeObj["text"].toUpperCase());
                        } else if (product0Obj["att0Array"][0].code == "letter") {
                            attSizeImgBlock0.setAttribute('title', "Letter" + " " + sizeObj["text"].toUpperCase());
                        } else if (product0Obj["att0Array"][0].code == "choose") {
                            attSizeImgBlock0.setAttribute('title', "Number " + sizeObj["text"].toUpperCase());
                        } else {
                            attSizeImgBlock0.setAttribute('title', sizeObj["text"].toUpperCase());
                        }

                        attSizeImgBlock0.appendChild(attSizeImg0);
                        elAtt0ListBlock.appendChild(attSizeImgBlock0);

                    });

                }
            }
        }

        if (productSizesObj.sizeArray.length > 0) {
            if (productSizesObj["sizeArray"][0].code != "Color") {
                findObj = new INC.classes.FindObj({
                    mainId: productObj.mainId
                });

                elAttSizeListBlock.innerHTML = "";
                var productSizeText = "";
                var selectvariantwrap = generate_html_tag('div', 'selectvariantwrap')
                if (productSizesObj["sizeArray"][0].code == "ロフト/バウンス角"){
                    selectvariantwrap.classList.add(productSizesObj["sizeArray"][0].code.replace('/',''))
                }
                var selectvariant = generate_html_tag('select', 'inc_variant_size_tag')
                selectvariant.setAttribute('id', 'variant_inc_avail_size')
                selectvariant.setAttribute('onchange', 'inc_onchange_size_variant(this)')
                var variantLabel = generate_html_tag('label', 'variantLabel')
                variantLabel.innerText = productSizesObj["sizeArray"][0].code;
                selectvariantwrap.appendChild(variantLabel)
                selectvariantwrap.appendChild(selectvariant)
                elAttBlock.appendChild(selectvariantwrap)
                var variantoptionsize7 = generate_html_tag('option','variantoptionsize7')
                variantoptionsize7.textContent = "選択してください";
                variantoptionsize7.setAttribute('disabled','disabled')
                variantoptionsize7.setAttribute('selected','selected')
                variantoptionsize7.setAttribute('data-size', "");
                variantoptionsize7.setAttribute("datasize", "");
                variantoptionsize7.setAttribute('data-option', "");
                selectvariant.appendChild(variantoptionsize7)
                var sel_avail = false;
                productSizesObj["sizeArray"].forEach(function(sizeObj) {
                    var variantoption = generate_html_tag('option', 'variantoption')
                    variantoption.innerText = sizeObj["text"];
                    variantoption.setAttribute('data-size', sizeObj["text"]);
                    variantoption.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                    variantoption.setAttribute('data-option', "1");
                    variantoption.setAttribute('title', sizeObj["text"].toUpperCase());
                    variantoption.setAttribute('ImgURLC', sizeObj["ImgURLC"]);
                    // if(productSizesObj["sizeArray"].length == 1){
                    //     variantoption.selected = 'selected'
                    // }
                    if(productSizesObj["sizeArray"].length == 1){
                        variantoption.selected = 'selected'
                        sel_avail = true
                        elAttBlock.setAttribute("data-size", sizeObj["text"]);
                    }
                    selectvariant.appendChild(variantoption)

                });
                
                if (productSizesObj["sizeArray"].length > 0) {
                    elAttSizeTitleText.innerText = productSizesObj["sizeArray"][0].code;
                    elAttSizeBlock.classList.add("active");
                    productSizesObj["sizeArray"].forEach(function(sizeObj) {

                        var attSizeBlock = INC.methods.generateHTMLTags('div', {
                            class: classNames["productAttSizeListItemBlock"]
                        });
                        var attSizeImgBlock = INC.methods.generateHTMLTags('div', {
                            class: classNames["productAttSizeListItemImgBlock"]
                        });
                        var attSizeImg = INC.methods.generateHTMLTags('div', {
                            class: classNames["productAttSizeListItemImg"]
                        });

                        attSizeImgBlock.classList.add('avail')
                        attSizeImgBlock.addEventListener("click", function() {
                            var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                            var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                            var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                            var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                            if (atteditbutton != null) {
                                atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                                atteditbutton.innerText = "編集"
                            }


                            if (productBlock.querySelector('.close_read_more') != null) {
                                productBlock.querySelector('.close_read_more').click()
                            }
                            var attr_text = this.getAttribute("data-size")
                            elAttSizeBlock.classList.add("active");
                            elAttSizeTitleTextSelected.innerText = attr_text;
                            elAttBlock.setAttribute("data-size", attr_text);

                            if (atteditbutton != null) {
                                atteditbutton.parentNode.classList.add('active')
                            }
                            if (this.parentNode != null) {
                                var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_size_block .inc_product_desc_att_size_list_item_img_block')

                                for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                    all_color_list_item_img[cl].classList.remove("active");
                                }
                            }

                            this.classList.add("active");
                            var sel_size = elAttBlock.getAttribute('data-size')
                            findObj = new INC.classes.FindObj({
                                mainId: productObj.mainId,
                                colorText: attr_text
                            });
                            findObj.sizeText = sel_size

                            findObj = new INC.classes.FindObj({
                                mainId: productObj.mainId,
                                colorText: "",
                                sizeText: attr_text
                            });
                            

                            // //third
                            // var sel_size = elAttBlock.getAttribute('data-size')
                            // findObj = new INC.classes.FindObj({
                            //     mainId: productObj.mainId,
                            //     colorText: attr_text
                            // });
                            // findObj.sizeText = sel_size
                            elAtt3ListBlock.innerHTML = "";
                            var inc_variant_tag = elAtt3ListBlock.parentNode.parentNode.querySelector('.inc_variant_tag')
                            if (inc_variant_tag != null) {
                                inc_variant_tag.innerHTML = "";
                            }
                            var product3rdObj = INC.dataStore.methods().getProductopt3Obj(findObj, this);
                            if (product3rdObj["att3Array"].length > 0) {
                                elAttSizeBlock.classList.add("active");
                                var variantLabel = generate_html_tag('label', 'variantLabel')
                                variantLabel.innerText = product3rdObj["att3Array"][0].code;
                                inc_variant_tag.appendChild(variantLabel)
                                var variantoptionthird21 = generate_html_tag('option','variantoptionthird21')
                                variantoptionthird21.textContent = "選択してください";
                                variantoptionthird21.setAttribute('disabled','disabled')
                                variantoptionthird21.setAttribute('selected','selected')
                                variantoptionthird21.setAttribute('data-size', "");
                                variantoptionthird21.setAttribute("datasize", "");
                                variantoptionthird21.setAttribute('data-option', "");
                                selectvariant.appendChild(variantoptionthird21)
                                var sel_avail = false;
                                product3rdObj["att3Array"].forEach(function(att3Array) {
                                    var variantoption = generate_html_tag('option', 'variantoption')
                                    variantoption.innerText = att3Array["text"];
                                    variantoption.setAttribute('data-size', att3Array["text"]);
                                    variantoption.setAttribute("datasize", att3Array["text"].toLocaleLowerCase());
                                    variantoption.setAttribute('data-option', "1");
                                    variantoption.setAttribute('title', att3Array["text"].toUpperCase());
                                    variantoption.setAttribute('ImgURLC', att3Array["ImgURLC"]);
                                    // if (elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third') != null) {
                                    //     if (att3Array["text"].toLocaleLowerCase() == elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third').toLocaleLowerCase()) {
                                    //         variantoption.selected = 'selected'
                                    //     }
                                    // }
                                    if(product3rdObj["att3Array"].length == 1){
                                        variantoption.selected = 'selected'
                                        sel_avail = true
                                        elAttBlock.setAttribute("data-third", att3Array["text"]);
                                        prod_modal_attr_block.setAttribute("data-third", att3Array["text"]);
                                    }else if (elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third') != null) {
                                        
                                        if (att3Array["text"].toLocaleLowerCase() == elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third').toLocaleLowerCase()) {
                                            sel_avail = true
                                            variantoption.selected = 'selected'
                                        }
                                    }
                                    inc_variant_tag.appendChild(variantoption)
                                });
                                if(sel_avail == false){
                                    elAttBlock.setAttribute("data-third", '');
                                    prod_modal_attr_block.setAttribute("data-third", '');
                                }else{
                                    var moduleblck=elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode
                                    INC.methods.checkVariantSelection(moduleblck)
                                }
                                product3rdObj["att3Array"].forEach(function(sizeObj) {
                                    var attSizeBlock3 = INC.methods.generateHTMLTags('div', {
                                        class: classNames["productAttthirdListItemBlock"]
                                    });
                                    var attSizeImgBlock3 = INC.methods.generateHTMLTags('div', {
                                        class: classNames["productAttthirdListItemImgBlock"]
                                    });
                                    var attSizeImg3 = INC.methods.generateHTMLTags('div', {
                                        class: classNames["productAttthirdListItemImg"]
                                    });

                                    attSizeImgBlock3.addEventListener("click", function() {
                                        var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                                        var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                                        var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                                        var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                                        if (atteditbutton != null) {
                                            atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                                            atteditbutton.innerText = "編集"
                                        }


                                        if (productBlock.querySelector('.close_read_more') != null) {
                                            productBlock.querySelector('.close_read_more').click()
                                        }
                                        var attr_text = this.getAttribute("data-size")

                                        elAttBlock.setAttribute("data-third", attr_text);

                                        if (atteditbutton != null) {
                                            atteditbutton.parentNode.classList.add('active')
                                        }

                                        var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_third_list_item_img_block')

                                        for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                            all_color_list_item_img[cl].classList.remove("active");
                                        }
                                        var attr_text = this.getAttribute("data-size")
                                        this.classList.add("active");
                                        elAtt3TitleTextSelected.innerText = attr_text;;

                                        INC.methods.updateProductBlock(productBlock, findObj, blockType);

                                        var productModuleBlock = productBlock.parentNode.parentNode;

                                        var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

                                        INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                                        var size_text = ""

                                    });

                                    if (productSizeText.length == 0) {
                                        productSizeText = sizeObj["text"];
                                    }

                                    attSizeImg3.innerText = sizeObj["text"];
                                    attSizeImgBlock3.setAttribute('data-size', sizeObj["text"]);
                                    attSizeImgBlock3.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                    attSizeImgBlock3.setAttribute('data-option', "3");
                                    attSizeImgBlock3.appendChild(attSizeImg3);
                                    elAtt3ListBlock.appendChild(attSizeImgBlock3);
                                    if (attSizeImgBlock3.getAttribute('data-size').toLocaleLowerCase() == elAttSizeBlock.querySelector('.inc_product_desc_att_size_title_text_selected').innerText.toLocaleLowerCase()) {
                                        attSizeImgBlock3.classList.add('active')
                                    }
                                });

                            }
                            //end 

                            INC.methods.updateProductBlock(productBlock, findObj, blockType);

                            var productModuleBlock = productBlock.parentNode.parentNode;

                            var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

                            INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                            var zero_text = elAttBlock.getAttribute('data-zero');
                            var size_text = elAttBlock.getAttribute('data-size');
                            var color_text = elAttBlock.getAttribute('data-color');
                            var third_text = elAttBlock.getAttribute('data-third');

                            var sel_attr_text = ""
                            
                            if (color_text != "" && color_text != null) {
                                if (sel_attr_text == "" || sel_attr_text == undefined) {
                                    sel_attr_text = color_text
                                } else {
                                    sel_attr_text = color_text
                                }
                            }
                            if (zero_text != "" && zero_text != null) {
                                if (sel_attr_text == "") {
                                    sel_attr_text = zero_text
                                } else {
                                    sel_attr_text = sel_attr_text + " / " + zero_text
                                }
                            }
                            if (size_text != "" && size_text != null) {
                                sel_attr_text = sel_attr_text + " / " + size_text
                            }
                            // if (third_text != "") {
                            //     sel_attr_text = sel_attr_text + " / " + third_text
                            // }

                            var pr_mod_elm = productBlock.parentNode.parentNode
                            if (sel_attr_text != "オプションを選択"){
                                if (pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text') != null && sel_attr_text != "") {
                                    pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text').innerText = sel_attr_text
                                    pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text').setAttribute('title', sel_attr_text)
                                }
                            }
                            productModuleBlock.querySelector('.inc_product_modal_block .inc_product_desc_add_err_text_block').innerText = ""
                        });
                        if(productSizesObj["sizeArray"].length == 1){
                            elAttBlock.setAttribute("data-size", sizeObj["text"]);
                            attSizeImgBlock.classList.add('active')
                        }
                        if (productSizeText.length == 0) {
                            productSizeText = sizeObj["text"];
                        }
                        var reg = new RegExp('^[A-Z]|XS|S|M|L|XL|XXL|XXXL|XX|XXXXL|2XL|3XL|4XL$');
                        var chckType = sizeObj["text"];

                        reg.test(chckType);


                        attSizeImg.innerText = sizeObj["text"];
                        attSizeImgBlock.setAttribute('data-size', sizeObj["text"]);
                        attSizeImgBlock.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                        attSizeImgBlock.setAttribute('data-option', "2");
                        if (productSizesObj["sizeArray"][0].code == "size") {
                            attSizeImgBlock.setAttribute('title', sizeObj["text"].toUpperCase());
                        } else if (productSizesObj["sizeArray"][0].code == "letter") {
                            attSizeImgBlock.setAttribute('title', "Letter" + " " + sizeObj["text"].toUpperCase());
                        } else if (productSizesObj["sizeArray"][0].code == "choose") {
                            attSizeImgBlock.setAttribute('title', "Number " + sizeObj["text"].toUpperCase());
                        } else {
                            attSizeImgBlock.setAttribute('title', sizeObj["text"].toUpperCase());
                        }

                        attSizeImgBlock.appendChild(attSizeImg);
                        elAttSizeListBlock.appendChild(attSizeImgBlock);

                    });

                }
            }
        }

    }

    if (check_main_s != true) {
        if (productColorsObj.colorArray.length > 0) {
            elAttColorListBlock.innerHTML = "";
            var one_attr_flag = false
            if (productColorsObj["colorArray"].length == 1) {
                one_attr_flag = true
            }

            if (productColorsObj["colorArray"][0].code != "Color") {
                var selectvariantwrap = generate_html_tag('div', 'selectvariantwrap')
                selectvariantwrap.classList.add(productColorsObj["colorArray"][0].code)
                var selectvariant = generate_html_tag('select', 'inc_variant_color_tag')
                selectvariant.setAttribute('id', 'variant_inc_avail_color')
                selectvariant.setAttribute('onchange', 'inc_onchange_color_variant(this)')
                var variantLabel = generate_html_tag('label', 'variantLabel')
                variantLabel.innerText = productColorsObj["colorArray"][0].code;
                selectvariantwrap.appendChild(variantLabel)
                selectvariantwrap.appendChild(selectvariant)
                elAttBlock.appendChild(selectvariantwrap)
                var variantoptioncolor42 = generate_html_tag('option','variantoptioncolor42')
                variantoptioncolor42.textContent = "選択してください";
                variantoptioncolor42.setAttribute('disabled','disabled')
                variantoptioncolor42.setAttribute('selected','selected')
                variantoptioncolor42.setAttribute('data-size', "");
                variantoptioncolor42.setAttribute("datasize", "");
                variantoptioncolor42.setAttribute('data-option', "");
                selectvariant.appendChild(variantoptioncolor42)
                productColorsObj["colorArray"].forEach(function(sizeObj) {
                    var variantoption = generate_html_tag('option', 'variantoption')
                    variantoption.innerText = sizeObj["text"];
                    variantoption.setAttribute('data-color', sizeObj["text"]);
                    variantoption.setAttribute("datacolor", sizeObj["text"].toLocaleLowerCase());
                    variantoption.setAttribute('data-option', "1");
                    variantoption.setAttribute('title', sizeObj["text"].toUpperCase());
                    variantoption.setAttribute('ImgURLC', sizeObj["ImgURLC"]);
                    selectvariant.appendChild(variantoption)
                    if(productColorsObj["colorArray"].length == 1){
                        variantoption.selected = 'selected'
                    }
                });
            } else {
                elAttColorBlock.classList.add('colour_attr_avail')
            }
            if (productColorsObj["colorArray"].length > 0) {
                productColorsObj["colorArray"].forEach(function(colorObj) {
                    elAttColorBlock.classList.add("active");
                    elAttColorTitleText.innerText = "Color";
                    var attColorBlock = INC.methods.generateHTMLTags('div', {
                        class: classNames["productAttColorListItemBlock"]
                    })
                    var attColorImgBlock = INC.methods.generateHTMLTags('div', {
                        class: classNames["productAttColorListItemImgBlock"]
                    });
                    var attColorImg = INC.methods.generateHTMLTags('div', {
                        class: classNames["productAttColorListItemImg"]
                    });
                    var attColorTextBlock = INC.methods.generateHTMLTags('div', {
                        class: classNames["productAttColorListItemTextBlock"]
                    });
                    var attColorText = INC.methods.generateHTMLTags('div', {
                        class: classNames["productAttColorListItemText"]
                    });

                    attColorImgBlock.addEventListener("click", function() {

                        var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                        var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                        var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                        var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                        if (atteditbutton != null) {
                            atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                            atteditbutton.innerText = "編集"
                        }


                        if (productBlock.querySelector('.close_read_more') != null) {
                            productBlock.querySelector('.close_read_more').click()
                        }
                        var colorText = this.getAttribute("data-color")
                        elAttBlock.setAttribute("data-color", colorText);

                        if (atteditbutton != null) {
                            atteditbutton.parentNode.classList.add('active')
                        }

                        var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_color_list_item_img')

                        for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                            all_color_list_item_img[cl].parentNode.parentNode.classList.remove("active");
                        }

                        this.parentNode.classList.add("active");
                        if (colorText != "Color") {
                            elAttColorTitleTextSelected.innerText = colorText;
                        }
                        //third
                        var sel_size = elAttBlock.getAttribute('data-size')
                        findObj = new INC.classes.FindObj({
                            mainId: productObj.mainId,
                            colorText: colorText
                        });
                        var product0Obj = INC.dataStore.methods().getProductopt0Obj(findObj,this);
                        var selcopzero = elAttSizeListBlock.parentNode.parentNode.querySelector('.inc_variant_zero_tag')
                        if (selcopzero != null) {
                            selcopzero.innerHTML = ""
                        }
                        // selcopsize.appendChild(variantLabel)
                        if (product0Obj.att0Array.length > 0) {
                            selcopzero.setAttribute('id', 'variant_inc_avail_zero')
                            selcopzero.setAttribute('onchange', 'inc_onchange_variant(this)')
                            var variantoptionzero1z = generate_html_tag('option','variantoptionzero1')
                            variantoptionzero1z.textContent = "選択してください";
                            variantoptionzero1z.setAttribute('disabled','disabled')
                            variantoptionzero1z.setAttribute('selected','selected')
                            variantoptionzero1z.setAttribute('data-size', "");
                            variantoptionzero1z.setAttribute("datasize", "");
                            variantoptionzero1z.setAttribute('data-option', "");
                            selcopzero.appendChild(variantoptionzero1z)
                            product0Obj['att0Array'].forEach(function(sizeObj) {
                                var variantoptionz = generate_html_tag('option', 'variantoption')
                                variantoptionz.innerText = sizeObj["text"];
                                variantoptionz.setAttribute('data-size', sizeObj["text"]);
                                variantoptionz.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                variantoptionz.setAttribute('data-option', "1");
                                variantoptionz.setAttribute('title', sizeObj["text"].toUpperCase());
                                variantoptionz.setAttribute('ImgURLC', sizeObj["ImgURLC"]);
                                if(product0Obj['att0Array'].length == 1){
                                    variantoptionz.selected = 'selected'
                                }
                                selcopzero.appendChild(variantoptionz)
                        
                            });
                            if (product0Obj["att0Array"][0].code != "Color") {
                                findObj = new INC.classes.FindObj({
                                    mainId: productObj.mainId
                                });
                                elAtt0ListBlock.innerHTML = "";
                                var product0Obj = product0Obj;
                                var productSizeText = "";
                                if (product0Obj["att0Array"].length > 0) {
                                    elAtt0TitleText.innerText = product0Obj["att0Array"][0].code;
                                    elAtt0Block.classList.add("active");
                                    product0Obj["att0Array"].forEach(function(sizeObj) {
                                        var attSizeBlock0 = INC.methods.generateHTMLTags('div', {
                                            class: classNames["productAttSizeListItemBlock"]
                                        });
                                        var attSizeImgBlock0 = INC.methods.generateHTMLTags('div', {
                                            class: classNames["productAttSizeListItemImgBlock"]
                                        });
                                        var attSizeImg0 = INC.methods.generateHTMLTags('div', {
                                            class: classNames["productAttSizeListItemImg"]
                                        });
                                        attSizeImgBlock0.addEventListener("click", function(e) {
                                            
                                            var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                                            var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                                            // var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                                            var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                                            if (atteditbutton != null) {
                                                atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                                                atteditbutton.innerText = "編集"
                                            }
                        
                        
                                            if (productBlock.querySelector('.close_read_more') != null) {
                                                productBlock.querySelector('.close_read_more').click()
                                            }
                                            var attr_text = this.getAttribute("data-size");
                        
                                            elAttBlock.setAttribute("data-zero", attr_text);
                        
                                            if (atteditbutton != null) {
                                                atteditbutton.parentNode.classList.add('active')
                                            }
                        
                                            var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_zero_list_block .inc_product_desc_att_size_list_item_img_block')
                        
                                            for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                                all_color_list_item_img[cl].classList.remove("active");
                                            }
                        
                                            this.classList.add("active");
                        
                                            elAtt0TitleTextSelected.innerText = attr_text;
                        
                                            var sel_size = elAttBlock.getAttribute('data-size')
                                            findObj = new INC.classes.FindObj({
                                                mainId: productObj.mainId,
                                                colorText: attr_text
                                            });
                                            findObj.sizeText = sel_size
                        
                                            findObj = new INC.classes.FindObj({
                                                mainId: productObj.mainId,
                                                colorText: "",
                                                sizeText: attr_text
                                            });
                        
                                            var productSizesObj = INC.dataStore.methods().getProductSizesObj(findObj, this);
                        
                                            elAttSizeListBlock.innerHTML = "";
                                            var selcopsize = elAttSizeListBlock.parentNode.parentNode.querySelector('.inc_variant_size_tag')
                                            if (selcopsize != null) {
                                                selcopsize.innerHTML = ""
                                            }
                                            var productSizesObj = INC.dataStore.methods().getProductSizesObj(findObj, this);
                        
                                            if (productSizesObj["sizeArray"][0] != undefined) {
                                                if (productSizesObj["sizeArray"][0].code == "Color") {
                                                    productColorsObj = INC.dataStore.methods().getProductSizesObj(findObj, this);
                                                    productSizesObj = INC.dataStore.methods().getProductColorsObj(findObj, this);
                                                }
                                            }
                        
                        
                                            if (productSizesObj["sizeArray"].length > 0) {
                                                elAttSizeBlock.classList.add("active");
                                                var variantLabel = generate_html_tag('label', 'variantLabel')
                                                variantLabel.innerText = productSizesObj["sizeArray"][0].code;
                                                selcopsize.appendChild(variantLabel)
                                                var variantoptionsize2 = generate_html_tag('option','variantoptionsize2')
                                                variantoptionsize2.textContent = "選択してください";
                                                variantoptionsize2.setAttribute('disabled','disabled')
                                                variantoptionsize2.setAttribute('selected','selected')
                                                variantoptionsize2.setAttribute('data-size', "");
                                                variantoptionsize2.setAttribute("datasize", "");
                                                variantoptionsize2.setAttribute('data-option', "");
                                                selectvariant.appendChild(variantoptionsize2)
                                                var sel_avail = false;
                                                productSizesObj["sizeArray"].forEach(function(sizeObj) {
                                                    var variantoption = generate_html_tag('option', 'variantoption')
                                                    variantoption.innerText = sizeObj["text"];
                                                    variantoption.setAttribute('data-size', sizeObj["text"]);
                                                    variantoption.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                                    variantoption.setAttribute('data-option', "1");
                                                    variantoption.setAttribute('title', sizeObj["text"].toUpperCase());
                                                    variantoption.setAttribute('ImgURLC', sizeObj["ImgURLC"]);
                                                    // if(productSizesObj["sizeArray"].length == 1){
                                                    //     variantoption.selected = 'selected'
                                                    // }else if (elAttSizeListBlock.parentNode.parentNode.getAttribute('data-size') != null) {
                                                    //     if (sizeObj["text"].toLocaleLowerCase() == elAttSizeListBlock.parentNode.parentNode.getAttribute('data-size').toLocaleLowerCase()) {
                                                    //         variantoption.selected = 'selected'
                                                    //     }
                                                    // }
                                                    if(productSizesObj["sizeArray"].length == 1){
                                                        variantoption.selected = 'selected'
                                                        sel_avail = true
                                                        elAttBlock.setAttribute("data-size", sizeObj["text"]);
                                                        prod_modal_attr_block.setAttribute("data-size", sizeObj["text"]);
                                                    }else if(elAttSizeBlock.parentNode.getAttribute('data-size') != null){
                                                        if(sizeObj["text"].toLocaleLowerCase() == elAttSizeBlock.parentNode.getAttribute('data-size').toLocaleLowerCase()){
                                                            variantoption.selected = 'selected'
                                                            sel_avail = true
                                                        }
                                                    }
                                                    selcopsize.appendChild(variantoption)
                                                });
                                                if(sel_avail == false){
                                                    elAttBlock.setAttribute("data-size", '');
                                                    prod_modal_attr_block.setAttribute("data-size", '');
                                                }else{
                                                    var moduleblck=elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode
                                                    INC.methods.checkVariantSelection(moduleblck)
                                                }
                                                productSizesObj["sizeArray"].forEach(function(sizeObj) {
                                                    var attSizeBlock = INC.methods.generateHTMLTags('div', {
                                                        class: classNames["productAttSizeListItemBlock"]
                                                    });
                                                    var attSizeImgBlock = INC.methods.generateHTMLTags('div', {
                                                        class: classNames["productAttSizeListItemImgBlock"]
                                                    });
                                                    var attSizeImg = INC.methods.generateHTMLTags('div', {
                                                        class: classNames["productAttSizeListItemImg"]
                                                    });
                        
                                                    attSizeImgBlock.addEventListener("click", function() {
                                                        var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                                                        var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                                                        var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                                                        var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                                                        if (atteditbutton != null) {
                                                            atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                                                            atteditbutton.innerText = "編集"
                                                        }
                        
                        
                                                        if (productBlock.querySelector('.close_read_more') != null) {
                                                            productBlock.querySelector('.close_read_more').click()
                                                        }
                                                        var attr_text = this.getAttribute("data-size")
                                                        elAttSizeBlock.classList.add("active");
                                                        elAttSizeTitleTextSelected.innerText = attr_text;
                                                        elAttBlock.setAttribute("data-size", attr_text);
                        
                                                        if (atteditbutton != null) {
                                                            atteditbutton.parentNode.classList.add('active')
                                                        }
                        
                                                        var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_size_block .inc_product_desc_att_size_list_item_img_block')
                        
                                                        for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                                            all_color_list_item_img[cl].classList.remove("active");
                                                        }
                        
                                                        this.classList.add("active");
                                                        var sel_size = elAttBlock.getAttribute('data-size')
                                                        findObj = new INC.classes.FindObj({
                                                            mainId: productObj.mainId,
                                                            colorText: attr_text
                                                        });
                                                        findObj.sizeText = sel_size
                        
                                                        findObj = new INC.classes.FindObj({
                                                            mainId: productObj.mainId,
                                                            colorText: "",
                                                            sizeText: attr_text
                                                        });
                                                        
                        
                                                        //third
                                                        var sel_size = elAttBlock.getAttribute('data-size')
                                                        findObj = new INC.classes.FindObj({
                                                            mainId: productObj.mainId,
                                                            colorText: attr_text
                                                        });
                                                        findObj.sizeText = sel_size
                                                        elAtt3ListBlock.innerHTML = "";
                        
                                                        var product3rdObj = INC.dataStore.methods().getProductopt3Obj(findObj, this);
                                                        if (product3rdObj["att3Array"].length > 0) {
                                                            elAttSizeBlock.classList.add("active");
                        
                                                            product3rdObj["att3Array"].forEach(function(sizeObj) {
                                                                var attSizeBlock3 = INC.methods.generateHTMLTags('div', {
                                                                    class: classNames["productAttthirdListItemBlock"]
                                                                });
                                                                var attSizeImgBlock3 = INC.methods.generateHTMLTags('div', {
                                                                    class: classNames["productAttthirdListItemImgBlock"]
                                                                });
                                                                var attSizeImg3 = INC.methods.generateHTMLTags('div', {
                                                                    class: classNames["productAttthirdListItemImg"]
                                                                });
                        
                                                                attSizeImgBlock3.addEventListener("click", function() {
                                                                    var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                                                                    var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                                                                    var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                                                                    var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                                                                    if (atteditbutton != null) {
                                                                        atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                                                                        atteditbutton.innerText = "編集"
                                                                    }
                        
                        
                                                                    if (productBlock.querySelector('.close_read_more') != null) {
                                                                        productBlock.querySelector('.close_read_more').click()
                                                                    }
                                                                    var attr_text = this.getAttribute("data-size")
                        
                                                                    elAttBlock.setAttribute("data-third", attr_text);
                        
                                                                    if (atteditbutton != null) {
                                                                        atteditbutton.parentNode.classList.add('active')
                                                                    }
                        
                                                                    var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_third_list_item_img_block')
                        
                                                                    for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                                                        all_color_list_item_img[cl].classList.remove("active");
                                                                    }
                                                                    var attr_text = this.getAttribute("data-size")
                                                                    this.classList.add("active");
                                                                    elAtt3TitleTextSelected.innerText = attr_text;;
                        
                                                                    INC.methods.updateProductBlock(productBlock, findObj, blockType);
                        
                                                                    var productModuleBlock = productBlock.parentNode.parentNode;
                        
                                                                    var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));
                        
                                                                    INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                                                                    var size_text = ""
                        
                                                                });
                        
                                                                if (productSizeText.length == 0) {
                                                                    productSizeText = sizeObj["text"];
                                                                }
                        
                                                                attSizeImg3.innerText = sizeObj["text"];
                                                                attSizeImgBlock3.setAttribute('data-size', sizeObj["text"]);
                                                                attSizeImgBlock3.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                                                attSizeImgBlock3.setAttribute('data-option', "3");
                                                                attSizeImgBlock3.appendChild(attSizeImg3);
                                                                elAtt3ListBlock.appendChild(attSizeImgBlock3);
                                                                if (attSizeImgBlock3.getAttribute('data-size').toLocaleLowerCase() == elAttSizeBlock.querySelector('.inc_product_desc_att_size_title_text_selected').innerText.toLocaleLowerCase()) {
                                                                    attSizeImgBlock3.classList.add('active')
                                                                }
                                                            });
                                                            var third_el_bl = elAtt3ListBlock.querySelector(getSelectorClassName(classNames, "productAttthirdListItemImgBlock"))
                                                            //                        
                                                            if (third_el_bl.parentNode.querySelector('.inc_product_desc_att_third_list_item_img_block.active') == null) {
                                                                third_el_bl.click();
                                                            }
                                                        }
                                                        //end 
                        
                                                        INC.methods.updateProductBlock(productBlock, findObj, blockType);
                        
                                                        var productModuleBlock = productBlock.parentNode.parentNode;
                        
                                                        var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));
                        
                                                        INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                                                        var zero_text = elAttBlock.getAttribute('data-zero');
                                                        var size_text = elAttBlock.getAttribute('data-size');
                                                        var color_text = elAttBlock.getAttribute('data-color');
                                                        var third_text = elAttBlock.getAttribute('data-third');
                        
                                                        var sel_attr_text = ""
                                                        
                                                        if (color_text != "" && color_text != null) {
                                                            if (sel_attr_text == "" || sel_attr_text == undefined) {
                                                                sel_attr_text = color_text
                                                            } else {
                                                                sel_attr_text = color_text
                                                            }
                                                        }
                                                        if (zero_text != "" && zero_text != null) {
                                                            if (sel_attr_text == "") {
                                                                sel_attr_text = zero_text
                                                            } else {
                                                                sel_attr_text = sel_attr_text + " / " + zero_text
                                                            }
                                                        }
                                                        if (size_text != "" && size_text != null) {
                                                            sel_attr_text = sel_attr_text + " / " + size_text
                                                        }
                                                        // if (third_text != "") {
                                                        //     sel_attr_text = sel_attr_text + " / " + third_text
                                                        // }
                                                        var pr_mod_elm = productBlock.parentNode.parentNode
                                                        if (sel_attr_text != "オプションを選択"){
                                                            if (pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text') != null && sel_attr_text != "") {
                                                                pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text').innerText = sel_attr_text
                                                                pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text').setAttribute('title', sel_attr_text)
                                                            }
                                                        }
                        
                                                        productModuleBlock.querySelector('.inc_product_modal_block .inc_product_desc_add_err_text_block').innerText = ""
                                                    });
                                                    if(productSizesObj["sizeArray"].length == 1){
                                                        elAttBlock.setAttribute("data-size", sizeObj["text"]);
                                                        attSizeImgBlock.classList.add('active')
                                                    }
                                                    if (productSizeText.length == 0) {
                                                        productSizeText = sizeObj["text"];
                                                    }
                                                    attSizeImgBlock.classList.add('avail')
                                                    attSizeImg.innerText = sizeObj["text"];
                                                    attSizeImgBlock.setAttribute('data-size', sizeObj["text"]);
                                                    attSizeImgBlock.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                                    attSizeImgBlock.setAttribute('data-option', "2");
                                                    attSizeImgBlock.appendChild(attSizeImg);
                                                    elAttSizeListBlock.appendChild(attSizeImgBlock);
                                                    if (attSizeImgBlock.getAttribute('data-size').toLocaleLowerCase() == elAttSizeBlock.querySelector('.inc_product_desc_att_size_title_text_selected').innerText.toLocaleLowerCase()) {
                                                        attSizeImgBlock.classList.add('active')
                                                    }
                                                });
                                                var size_el_bl = elAttSizeListBlock.querySelector(getSelectorClassName(classNames, "productAttSizeListItemImgBlock"))
                                                //                        
                                                if (size_el_bl.parentNode.querySelector('.inc_product_desc_att_size_list_item_img_block.active') == null) {
                                                    // size_el_bl.click();
                                                }
                        
                                            }else{
                                                elAttBlock.setAttribute("data-size", "");
                                            }
                        
                                            findObj = new INC.classes.FindObj({
                                                mainId: productObj.mainId,
                                                colorText: "",
                                                sizeText: attr_text
                                            });
                        
                        
                        
                                            //third
                        
                                            findObj = new INC.classes.FindObj({
                                                mainId: productObj.mainId,
                                                colorText: attr_text
                                            });
                                            var sel_size = elAttBlock.getAttribute('data-size')
                                            findObj.sizeText = sel_size
                                            elAtt3ListBlock.innerHTML = "";
                        
                                            var product3rdObj = INC.dataStore.methods().getProductopt3Obj(findObj, this);
                        
                                            var inc_variant_tag = elAtt3ListBlock.parentNode.parentNode.querySelector('.inc_variant_tag')
                                            if (inc_variant_tag != null) {
                                                inc_variant_tag.innerHTML = "";
                                            }
                                            if (product3rdObj["att3Array"].length > 0) {
                                                elAttSizeBlock.classList.add("active");
                                                var variantLabel = generate_html_tag('label', 'variantLabel')
                                                variantLabel.innerText = product3rdObj["att3Array"][0].code;
                                                inc_variant_tag.appendChild(variantLabel)
                                                var variantoptionthird6 = generate_html_tag('option','variantoptionthird6')
                                                variantoptionthird6.textContent = "選択してください";
                                                variantoptionthird6.setAttribute('disabled','disabled')
                                                variantoptionthird6.setAttribute('selected','selected')
                                                variantoptionthird6.setAttribute('data-size', "");
                                                variantoptionthird6.setAttribute("datasize", "");
                                                variantoptionthird6.setAttribute('data-option', "");
                                                selectvariant.appendChild(variantoptionthird6)
                                                var sel_avail = false;
                                                product3rdObj["att3Array"].forEach(function(att3Array) {
                                                    var variantoption = generate_html_tag('option', 'variantoption')
                                                    variantoption.innerText = att3Array["text"];
                                                    variantoption.setAttribute('data-size', att3Array["text"]);
                                                    variantoption.setAttribute("datasize", att3Array["text"].toLocaleLowerCase());
                                                    variantoption.setAttribute('data-option', "1");
                                                    variantoption.setAttribute('title', att3Array["text"].toUpperCase());
                                                    variantoption.setAttribute('ImgURLC', att3Array["ImgURLC"]);
                                                    // if (elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third') != null) {
                                                    //     if (att3Array["text"].toLocaleLowerCase() == elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third').toLocaleLowerCase()) {
                                                    //         variantoption.selected = 'selected'
                                                    //     }
                                                    // }
                                                    if(product3rdObj["att3Array"].length == 1){
                                                        variantoption.selected = 'selected'
                                                        sel_avail = true
                                                        elAttBlock.setAttribute("data-third", att3Array["text"]);
                                                        prod_modal_attr_block.setAttribute("data-third", att3Array["text"]);
                                                    }else if (elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third') != null) {
                                                        
                                                        if (att3Array["text"].toLocaleLowerCase() == elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third').toLocaleLowerCase()) {
                                                            sel_avail = true
                                                            variantoption.selected = 'selected'
                                                        }
                                                    }
                                                    inc_variant_tag.appendChild(variantoption)
                                                });
                                                if(sel_avail == false){
                                                    elAttBlock.setAttribute("data-third", '');
                                                    prod_modal_attr_block.setAttribute("data-third", '');
                                                }else{
                                                    var moduleblck=elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode
                                                    INC.methods.checkVariantSelection(moduleblck)
                                                }
                                                product3rdObj["att3Array"].forEach(function(sizeObj) {
                                                    var attSizeBlock3 = INC.methods.generateHTMLTags('div', {
                                                        class: classNames["productAttthirdListItemBlock"]
                                                    });
                                                    var attSizeImgBlock3 = INC.methods.generateHTMLTags('div', {
                                                        class: classNames["productAttthirdListItemImgBlock"]
                                                    });
                                                    var attSizeImg3 = INC.methods.generateHTMLTags('div', {
                                                        class: classNames["productAttthirdListItemImg"]
                                                    });
                        
                                                    attSizeImgBlock3.addEventListener("click", function() {
                                                        var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                                                        var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                                                        var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                                                        var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                                                        if (atteditbutton != null) {
                                                            atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                                                            atteditbutton.innerText = "編集"
                                                        }
                        
                        
                                                        if (productBlock.querySelector('.close_read_more') != null) {
                                                            productBlock.querySelector('.close_read_more').click()
                                                        }
                                                        var attr_text = this.getAttribute("data-size")
                        
                                                        elAttBlock.setAttribute("data-third", attr_text);
                        
                                                        if (atteditbutton != null) {
                                                            atteditbutton.parentNode.classList.add('active')
                                                        }
                        
                                                        var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_third_list_item_img_block')
                        
                                                        for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                                            all_color_list_item_img[cl].classList.remove("active");
                                                        }
                                                        var attr_text = this.getAttribute("data-size")
                                                        this.classList.add("active");
                                                        elAtt3TitleTextSelected.innerText = attr_text;;
                        
                                                        INC.methods.updateProductBlock(productBlock, findObj, blockType);
                        
                                                        var productModuleBlock = productBlock.parentNode.parentNode;
                        
                                                        var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));
                        
                                                        INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                                                        var size_text = ""
                        
                                                    });
                        
                                                    if (productSizeText.length == 0) {
                                                        productSizeText = sizeObj["text"];
                                                    }
                        
                                                    attSizeImg3.innerText = sizeObj["text"];
                                                    attSizeImgBlock3.setAttribute('data-size', sizeObj["text"]);
                                                    attSizeImgBlock3.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                                    attSizeImgBlock3.setAttribute('data-option', "3");
                                                    attSizeImgBlock3.appendChild(attSizeImg3);
                                                    elAtt3ListBlock.appendChild(attSizeImgBlock3);
                                                    if (attSizeImgBlock3.getAttribute('data-size').toLocaleLowerCase() == elAttSizeBlock.querySelector('.inc_product_desc_att_size_title_text_selected').innerText.toLocaleLowerCase()) {
                                                        attSizeImgBlock3.classList.add('active')
                                                    }
                                                });
                                                var third_el_bl = elAtt3ListBlock.querySelector(getSelectorClassName(classNames, "productAttthirdListItemImgBlock"))
                                                //                        
                                                if (third_el_bl.parentNode.querySelector('.inc_product_desc_att_third_list_item_img_block.active') == null) {
                                                    third_el_bl.click();
                                                }
                                            }
                                            //end 
                        
                                            INC.methods.updateProductBlock(productBlock, findObj, blockType);
                        
                                            var productModuleBlock = productBlock.parentNode.parentNode;
                        
                                            var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));
                        
                                            INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                                            var zero_text = elAttBlock.getAttribute('data-zero');
                                            var size_text = elAttBlock.getAttribute('data-size');
                                            var color_text = elAttBlock.getAttribute('data-color');
                                            var third_text = elAttBlock.getAttribute('data-third');
                        
                                            var sel_attr_text = ""
                                            
                                            if (color_text != "" && color_text != null) {
                                                if (sel_attr_text == "" || sel_attr_text == undefined) {
                                                    sel_attr_text = color_text
                                                } else {
                                                    sel_attr_text = color_text
                                                }
                                            }
                                            if (zero_text != "" && zero_text != null) {
                                                if (sel_attr_text == "") {
                                                    sel_attr_text = zero_text
                                                } else {
                                                    sel_attr_text = sel_attr_text + " / " + zero_text
                                                }
                                            }
                                            if (size_text != "" && size_text != null) {
                                                sel_attr_text = sel_attr_text + " / " + size_text
                                            }
                                            // if (third_text != "") {
                                            //     sel_attr_text = sel_attr_text + " / " + third_text
                                            // }
                                            var pr_mod_elm = productBlock.parentNode.parentNode
                                            if (sel_attr_text != "オプションを選択"){
                                                if (pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text') != null && sel_attr_text != "") {
                                                    pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text').innerText = sel_attr_text
                                                    pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text').setAttribute('title', sel_attr_text)
                                                }
                                            }
                        
                                            productModuleBlock.querySelector('.inc_product_modal_block .inc_product_desc_add_err_text_block').innerText = ""
                        
                                        });
                        
                                        if(product0Obj['att0Array'].length == 1){
                                            elAttBlock.setAttribute("data-zero", sizeObj["text"]);
                                            attSizeImgBlock0.classList.add('active')
                                        }

                                        attSizeImgBlock0.classList.add('avail')
                                        if (productSizeText.length == 0) {
                                            productSizeText = sizeObj["text"];
                                        }
                                        var reg = new RegExp('^[A-Z]|XS|S|M|L|XL|XXL|XXXL|XX|XXXXL|2XL|3XL|4XL$');
                                        var chckType = sizeObj["text"];
                        
                                        reg.test(chckType);
                        
                        
                                        attSizeImg0.innerText = sizeObj["text"];
                                        attSizeImgBlock0.setAttribute('data-size', sizeObj["text"]);
                                        attSizeImgBlock0.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                        attSizeImgBlock0.setAttribute('data-option', "1");
                                        if (product0Obj["att0Array"][0].code == "size") {
                                            attSizeImgBlock0.setAttribute('title', sizeObj["text"].toUpperCase());
                                        } else if (product0Obj["att0Array"][0].code == "letter") {
                                            attSizeImgBlock0.setAttribute('title', "Letter" + " " + sizeObj["text"].toUpperCase());
                                        } else if (product0Obj["att0Array"][0].code == "choose") {
                                            attSizeImgBlock0.setAttribute('title', "Number " + sizeObj["text"].toUpperCase());
                                        } else {
                                            attSizeImgBlock0.setAttribute('title', sizeObj["text"].toUpperCase());
                                        }
                        
                                        attSizeImgBlock0.appendChild(attSizeImg0);
                                        elAtt0ListBlock.appendChild(attSizeImgBlock0);
                        
                                    });
                        
                                }
                            }
                        }
                        
                        // findObj.sizeText=sel_size
                        elAttSizeListBlock.innerHTML = "";
                        var selcopsize = elAttSizeListBlock.parentNode.parentNode.querySelector('.inc_variant_size_tag')
                        if (selcopsize != null) {
                            selcopsize.innerHTML = ""
                        }
                        var productSizesObj = INC.dataStore.methods().getProductSizesObj(findObj, this);

                        if (productSizesObj["sizeArray"][0] != undefined) {
                            if (productSizesObj["sizeArray"][0].code == "Color") {
                                productColorsObj = INC.dataStore.methods().getProductSizesObj(findObj, this);
                                productSizesObj = INC.dataStore.methods().getProductColorsObj(findObj, this);
                            }
                        }


                        if (productSizesObj["sizeArray"].length > 0) {
                            elAttSizeBlock.classList.add("active");
                            var variantLabel = generate_html_tag('label', 'variantLabel')
                            variantLabel.innerText = productSizesObj["sizeArray"][0].code;
                            selcopsize.appendChild(variantLabel)
                            var variantoptionsize65 = generate_html_tag('option','variantoptionsize65')
                            variantoptionsize65.textContent = "選択してください";
                            variantoptionsize65.setAttribute('disabled','disabled')
                            variantoptionsize65.setAttribute('selected','selected')
                            variantoptionsize65.setAttribute('data-size', "");
                            variantoptionsize65.setAttribute("datasize", "");
                            variantoptionsize65.setAttribute('data-option', "");
                            selectvariant.appendChild(variantoptionsize65)
                            var sel_avail = false;
                            productSizesObj["sizeArray"].forEach(function(sizeObj) {
                                var variantoption = generate_html_tag('option', 'variantoption')
                                variantoption.innerText = sizeObj["text"];
                                variantoption.setAttribute('data-size', sizeObj["text"]);
                                variantoption.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                variantoption.setAttribute('data-option', "1");
                                variantoption.setAttribute('title', sizeObj["text"].toUpperCase());
                                variantoption.setAttribute('ImgURLC', sizeObj["ImgURLC"]);
                                // if(productSizesObj["sizeArray"].length == 1){
                                //     variantoption.selected = 'selected'
                                // }else if (elAttSizeListBlock.parentNode.parentNode.getAttribute('data-size') != null) {
                                //     if (sizeObj["text"].toLocaleLowerCase() == elAttSizeListBlock.parentNode.parentNode.getAttribute('data-size').toLocaleLowerCase()) {
                                //         variantoption.selected = 'selected'
                                //     }
                                // }
                                if(productSizesObj["sizeArray"].length == 1){
                                    variantoption.selected = 'selected'
                                    sel_avail = true
                                    elAttBlock.setAttribute("data-size", sizeObj["text"]);
                                    prod_modal_attr_block.setAttribute("data-size", sizeObj["text"]);
                                }else if(elAttSizeBlock.parentNode.getAttribute('data-size') != null){
                                    if(sizeObj["text"].toLocaleLowerCase() == elAttSizeBlock.parentNode.getAttribute('data-size').toLocaleLowerCase()){
                                        variantoption.selected = 'selected'
                                        sel_avail = true
                                    }
                                }
                                selcopsize.appendChild(variantoption)
                            });
                            if(sel_avail == false){
                                elAttBlock.setAttribute("data-size", '');
                                prod_modal_attr_block.setAttribute("data-size", '');
                            }else{
                                var moduleblck=elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode
                                INC.methods.checkVariantSelection(moduleblck)
                            }
                            productSizesObj["sizeArray"].forEach(function(sizeObj) {
                                var attSizeBlock = INC.methods.generateHTMLTags('div', {
                                    class: classNames["productAttSizeListItemBlock"]
                                });
                                var attSizeImgBlock = INC.methods.generateHTMLTags('div', {
                                    class: classNames["productAttSizeListItemImgBlock"]
                                });
                                var attSizeImg = INC.methods.generateHTMLTags('div', {
                                    class: classNames["productAttSizeListItemImg"]
                                });

                                attSizeImgBlock.addEventListener("click", function() {
                                    var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                                    var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                                    var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                                    var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                                    if (atteditbutton != null) {
                                        atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                                        atteditbutton.innerText = "編集"
                                    }


                                    if (productBlock.querySelector('.close_read_more') != null) {
                                        productBlock.querySelector('.close_read_more').click()
                                    }
                                    var attr_text = this.getAttribute("data-size")
                                    elAttSizeBlock.classList.add("active");
                                    elAttSizeTitleTextSelected.innerText = attr_text;
                                    elAttBlock.setAttribute("data-size", attr_text);

                                    if (atteditbutton != null) {
                                        atteditbutton.parentNode.classList.add('active')
                                    }

                                    var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_size_block .inc_product_desc_att_size_list_item_img_block')
                                    for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                        all_color_list_item_img[cl].classList.remove("active");
                                    }

                                    this.classList.add("active");
                                    var sel_size = elAttBlock.getAttribute('data-size')
                                    findObj = new INC.classes.FindObj({
                                        mainId: productObj.mainId,
                                        colorText: attr_text
                                    });
                                    findObj.sizeText = sel_size

                                    findObj = new INC.classes.FindObj({
                                        mainId: productObj.mainId,
                                        colorText: "",
                                        sizeText: attr_text
                                    });


                                    //third
                                    var sel_size = elAttBlock.getAttribute('data-size')
                                    findObj = new INC.classes.FindObj({
                                        mainId: productObj.mainId,
                                        colorText: attr_text
                                    });
                                    findObj.sizeText = sel_size
                                    elAtt3ListBlock.innerHTML = "";

                                    var product3rdObj = INC.dataStore.methods().getProductopt3Obj(findObj, this);
                                    if (product3rdObj["att3Array"].length > 0) {
                                        elAttSizeBlock.classList.add("active");

                                        product3rdObj["att3Array"].forEach(function(sizeObj) {
                                            var attSizeBlock3 = INC.methods.generateHTMLTags('div', {
                                                class: classNames["productAttthirdListItemBlock"]
                                            });
                                            var attSizeImgBlock3 = INC.methods.generateHTMLTags('div', {
                                                class: classNames["productAttthirdListItemImgBlock"]
                                            });
                                            var attSizeImg3 = INC.methods.generateHTMLTags('div', {
                                                class: classNames["productAttthirdListItemImg"]
                                            });

                                            attSizeImgBlock3.addEventListener("click", function() {
                                                var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                                                var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                                                var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                                                var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                                                if (atteditbutton != null) {
                                                    atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                                                    atteditbutton.innerText = "編集"
                                                }


                                                if (productBlock.querySelector('.close_read_more') != null) {
                                                    productBlock.querySelector('.close_read_more').click()
                                                }
                                                var attr_text = this.getAttribute("data-size")

                                                elAttBlock.setAttribute("data-third", attr_text);

                                                if (atteditbutton != null) {
                                                    atteditbutton.parentNode.classList.add('active')
                                                }

                                                var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_third_list_item_img_block')

                                                for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                                    all_color_list_item_img[cl].classList.remove("active");
                                                }
                                                var attr_text = this.getAttribute("data-size")
                                                this.classList.add("active");
                                                elAtt3TitleTextSelected.innerText = attr_text;;

                                                INC.methods.updateProductBlock(productBlock, findObj, blockType);

                                                var productModuleBlock = productBlock.parentNode.parentNode;

                                                var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

                                                INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                                                var size_text = ""

                                            });

                                            if (productSizeText.length == 0) {
                                                productSizeText = sizeObj["text"];
                                            }

                                            attSizeImg3.innerText = sizeObj["text"];
                                            attSizeImgBlock3.setAttribute('data-size', sizeObj["text"]);
                                            attSizeImgBlock3.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                            attSizeImgBlock3.setAttribute('data-option', "3");
                                            attSizeImgBlock3.appendChild(attSizeImg3);
                                            elAtt3ListBlock.appendChild(attSizeImgBlock3);
                                            if (attSizeImgBlock3.getAttribute('data-size').toLocaleLowerCase() == elAttSizeBlock.querySelector('.inc_product_desc_att_size_title_text_selected').innerText.toLocaleLowerCase()) {
                                                attSizeImgBlock3.classList.add('active')
                                            }
                                        });
                                        var third_el_bl = elAtt3ListBlock.querySelector(getSelectorClassName(classNames, "productAttthirdListItemImgBlock"))
                                        //                        
                                        if (third_el_bl.parentNode.querySelector('.inc_product_desc_att_third_list_item_img_block.active') == null) {
                                            third_el_bl.click();
                                        }
                                    }
                                    //end 

                                    INC.methods.updateProductBlock(productBlock, findObj, blockType);

                                    var productModuleBlock = productBlock.parentNode.parentNode;

                                    var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

                                    INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                                    var zero_text = elAttBlock.getAttribute('data-zero');
                                    var size_text = elAttBlock.getAttribute('data-size');
                                    var color_text = elAttBlock.getAttribute('data-color');
                                    var third_text = elAttBlock.getAttribute('data-third');

                                    var sel_attr_text = ""
                                    
                                    if (color_text != "" && color_text != null) {
                                        if (sel_attr_text == "" || sel_attr_text == undefined) {
                                            sel_attr_text = color_text
                                        } else {
                                            sel_attr_text = color_text
                                        }
                                    }
                                    if (zero_text != "" && zero_text != null) {
                                        if (sel_attr_text == "") {
                                            sel_attr_text = zero_text
                                        } else {
                                            sel_attr_text = sel_attr_text + " / " + zero_text
                                        }
                                    }
                                    if (size_text != "" && size_text != null) {
                                        sel_attr_text = sel_attr_text + " / " + size_text
                                    }
                                    // if (third_text != "") {
                                    //     sel_attr_text = sel_attr_text + " / " + third_text
                                    // }
                                    var pr_mod_elm = productBlock.parentNode.parentNode
                                    if (sel_attr_text != "オプションを選択"){
                                        if (pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text') != null && sel_attr_text != "") {
                                            pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text').innerText = sel_attr_text
                                            pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text').setAttribute('title', sel_attr_text)
                                        }
                                    }

                                    productModuleBlock.querySelector('.inc_product_modal_block .inc_product_desc_add_err_text_block').innerText = ""
                                });
                                if(productSizesObj["sizeArray"].length == 1){
                                    elAttBlock.setAttribute("data-size", sizeObj["text"]);
                                    attSizeImgBlock.classList.add('active')
                                }
                                if (productSizeText.length == 0) {
                                    productSizeText = sizeObj["text"];
                                }
                                attSizeImgBlock.classList.add('avail')
                                attSizeImg.innerText = sizeObj["text"];
                                attSizeImgBlock.setAttribute('data-size', sizeObj["text"]);
                                attSizeImgBlock.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                attSizeImgBlock.setAttribute('data-option', "2");
                                attSizeImgBlock.appendChild(attSizeImg);
                                elAttSizeListBlock.appendChild(attSizeImgBlock);
                                if (attSizeImgBlock.getAttribute('data-size').toLocaleLowerCase() == elAttSizeBlock.querySelector('.inc_product_desc_att_size_title_text_selected').innerText.toLocaleLowerCase()) {
                                    attSizeImgBlock.classList.add('active')
                                }
                            });
                            var size_el_bl = elAttSizeListBlock.querySelector(getSelectorClassName(classNames, "productAttSizeListItemImgBlock"))
                            //                        
                            if (size_el_bl.parentNode.querySelector('.inc_product_desc_att_size_list_item_img_block.active') == null) {
                                // size_el_bl.click();
                            }

                        }else{
                            elAttBlock.setAttribute("data-size", "");
                        }
                        elAtt3ListBlock.innerHTML = "";
                        var inc_variant_tag = elAtt3ListBlock.parentNode.parentNode.querySelector('.inc_variant_tag')
                        if (inc_variant_tag != null) {
                            inc_variant_tag.innerHTML = "";
                        }
                        var check_clr_click_mai_attr = true
                        var first_attr_acodec = ["カラー", "左右", "ボール数",   "サイズ", "シャフト重量", "ライ角", "巻番号", "数量", "バックライン", "サイズ/幅", "サイズ/数量", "バックライン/サイズ","長さ", "番手", "シャフト", "口径/バックライン", "左右/サイズ", "番手/ロフト", "フレックス/長さ"  , "フレックス/サイズ"  , "ロフト/フレックス", "口径/バックライン/サイズ", "フレックス",  "番手/フレックス", "長さ/ライ角", "ロフト", "ロフト/バウンス角", "長さ/シャフト重量", "Irons", "Size"];
                        var product0Obj1 = INC.dataStore.methods().getProductopt0Obj(findObj);
                        var productSizesObj2 = INC.dataStore.methods().getProductSizesObj(findObj);
                        var productColorsObj3 = INC.dataStore.methods().getProductColorsObj(findObj);
                        if (product0Obj["att0Array"][0] != undefined && product0Obj1.att0Array.length > 0 && productSizesObj2.sizeArray.length == 0 && productColorsObj3.colorArray.length > 0) {
                            if (first_attr_acode.indexOf(product0Obj1["att0Array"][0].code) == -1) {
                                check_clr_click_mai_attr = false;
                            }
                        }
                        if (check_clr_click_mai_attr == true) {
                            var product3rdObj = INC.dataStore.methods().getProductopt3Obj(findObj, this);
                            if (product3rdObj["att3Array"].length > 0) {
                                elAtt3Block.classList.add("active");
                                var inc_variant_tag = elAtt3ListBlock.parentNode.parentNode.querySelector('.inc_variant_tag')
                                if(inc_variant_tag != null){
                                    inc_variant_tag.innerHTML = ""
                                }
                                var variantLabel = generate_html_tag('label', 'variantLabel')
                                variantLabel.innerText = product3rdObj["att3Array"][0].code;
                                inc_variant_tag.appendChild(variantLabel)
                                var variantoptionthird = generate_html_tag('option','variantoptionthird')
                                variantoptionthird.textContent = "選択してください";
                                variantoptionthird.setAttribute('disabled','disabled')
                                variantoptionthird.setAttribute('selected','selected')
                                variantoptionthird.setAttribute('data-size', "");
                                variantoptionthird.setAttribute("datasize", "");
                                variantoptionthird.setAttribute('data-option', "");
                                selectvariant.appendChild(variantoptionthird)
                                var sel_avail = false;
                                product3rdObj["att0Array"].forEach(function(att0Array) {
                                    var variantoption = generate_html_tag('option', 'variantoption')
                                    variantoption.innerText = att0Array["text"];
                                    variantoption.setAttribute('data-size', att0Array["text"]);
                                    variantoption.setAttribute("datasize", att0Array["text"].toLocaleLowerCase());
                                    variantoption.setAttribute('data-option', "1");
                                    variantoption.setAttribute('title', att0Array["text"].toUpperCase());
                                    variantoption.setAttribute('ImgURLC', att0Array["ImgURLC"]);
                                    // if (elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third') != null) {
                                    //     if (att0Array["text"].toLocaleLowerCase() == elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third').toLocaleLowerCase()) {
                                    //         variantoption.selected = 'selected'
                                    //     }
                                    // }
                                    if(product3rdObj["att3Array"].length == 1){
                                        variantoption.selected = 'selected'
                                        sel_avail = true
                                        elAttBlock.setAttribute("data-third", att3Array["text"]);
                                        prod_modal_attr_block.setAttribute("data-third", att3Array["text"]);
                                    }else if (elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third') != null) {
                                        
                                        if (att3Array["text"].toLocaleLowerCase() == elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third').toLocaleLowerCase()) {
                                            sel_avail = true
                                            variantoption.selected = 'selected'
                                        }
                                    }

                                    inc_variant_tag.appendChild(variantoption)
                                });
                                if(sel_avail == false){
                                    elAttBlock.setAttribute("data-third", '');
                                    prod_modal_attr_block.setAttribute("data-third", '');
                                }else{
                                    var moduleblck=elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode
                                    INC.methods.checkVariantSelection(moduleblck)
                                }
                                product3rdObj["att3Array"].forEach(function(sizeObj) {
                                    var attSizeBlock3 = INC.methods.generateHTMLTags('div', {
                                        class: classNames["productAttthirdListItemBlock"]
                                    });
                                    var attSizeImgBlock3 = INC.methods.generateHTMLTags('div', {
                                        class: classNames["productAttthirdListItemImgBlock"]
                                    });
                                    var attSizeImg3 = INC.methods.generateHTMLTags('div', {
                                        class: classNames["productAttthirdListItemImg"]
                                    });

                                    attSizeImgBlock3.addEventListener("click", function() {
                                        var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                                        var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                                        var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                                        var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                                        if (atteditbutton != null) {
                                            atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                                            atteditbutton.innerText = "編集"
                                        }


                                        if (productBlock.querySelector('.close_read_more') != null) {
                                            productBlock.querySelector('.close_read_more').click()
                                        }
                                        var attr_text = this.getAttribute("data-size")

                                        elAttBlock.setAttribute("data-third", attr_text);

                                        if (atteditbutton != null) {
                                            atteditbutton.parentNode.classList.add('active')
                                        }

                                        var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_third_list_item_img_block')

                                        for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                            all_color_list_item_img[cl].classList.remove("active");
                                        }
                                        var attr_text = this.getAttribute("data-size")
                                        this.classList.add("active");
                                        elAtt3TitleTextSelected.innerText = attr_text;;

                                        INC.methods.updateProductBlock(productBlock, findObj, blockType);

                                        var productModuleBlock = productBlock.parentNode.parentNode;

                                        var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

                                        INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                                        var size_text = ""

                                    });

                                    if (productSizeText.length == 0) {
                                        productSizeText = sizeObj["text"];
                                    }

                                    attSizeImg3.innerText = sizeObj["text"];
                                    attSizeImgBlock3.setAttribute('data-size', sizeObj["text"]);
                                    attSizeImgBlock3.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                    attSizeImgBlock3.setAttribute('data-option', "3");
                                    attSizeImgBlock3.appendChild(attSizeImg3);
                                    elAtt3ListBlock.appendChild(attSizeImgBlock3);
                                    if (attSizeImgBlock3.getAttribute('data-size').toLocaleLowerCase() == elAttSizeBlock.querySelector('.inc_product_desc_att_size_title_text_selected').innerText.toLocaleLowerCase()) {
                                        attSizeImgBlock3.classList.add('active')
                                    }
                                });

                            }
                        } else {
                            elAtt3ListBlock.innerHTML = "";
                            var product3rdObj = INC.dataStore.methods().getProductopt0Obj(findObj, this);
                            if (product3rdObj["att0Array"].length > 0) {
                                elAtt3Block.classList.add("active");
                                var inc_variant_tag = elAtt3ListBlock.parentNode.parentNode.querySelector('.inc_variant_tag')
                                if(inc_variant_tag != null){
                                    inc_variant_tag.innerHTML = ""
                                }
                                var variantLabel = generate_html_tag('label', 'variantLabel')
                                variantLabel.innerText = product3rdObj["att0Array"][0].code;
                                inc_variant_tag.appendChild(variantLabel)
                                var variantoptionthird = generate_html_tag('option','variantoptionthird')
                                variantoptionthird.textContent = "選択してください";
                                variantoptionthird.setAttribute('disabled','disabled')
                                variantoptionthird.setAttribute('selected','selected')
                                variantoptionthird.setAttribute('data-size', "");
                                variantoptionthird.setAttribute("datasize", "");
                                variantoptionthird.setAttribute('data-option', "");
                                selectvariant.appendChild(variantoptionthird)
                                var sel_avail = false;
                                product3rdObj["att0Array"].forEach(function(att0Array) {
                                    var variantoption = generate_html_tag('option', 'variantoption')
                                    variantoption.innerText = att0Array["text"];
                                    variantoption.setAttribute('data-size', att0Array["text"]);
                                    variantoption.setAttribute("datasize", att0Array["text"].toLocaleLowerCase());
                                    variantoption.setAttribute('data-option', "1");
                                    variantoption.setAttribute('title', att0Array["text"].toUpperCase());
                                    variantoption.setAttribute('ImgURLC', att0Array["ImgURLC"]);
                                    // if (elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third') != null) {
                                    //     if (att0Array["text"].toLocaleLowerCase() == elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third').toLocaleLowerCase()) {
                                    //         variantoption.selected = 'selected'
                                    //     }
                                    // }
                                    if(product3rdObj["att3Array"].length == 1){
                                        variantoption.selected = 'selected'
                                        sel_avail = true
                                        elAttBlock.setAttribute("data-third", att3Array["text"]);
                                        prod_modal_attr_block.setAttribute("data-third", att3Array["text"]);
                                    }else if (elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third') != null) {
                                       
                                        if (att3Array["text"].toLocaleLowerCase() == elAtt3ListBlock.parentNode.parentNode.getAttribute('data-third').toLocaleLowerCase()) {
                                            sel_avail = true
                                            variantoption.selected = 'selected'
                                        }
                                    }
                                    inc_variant_tag.appendChild(variantoption)
                                });
                                if(sel_avail == false){
                                    elAttBlock.setAttribute("data-third", '');
                                    prod_modal_attr_block.setAttribute("data-third", '');
                                }else{
                                    var moduleblck=elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode
                                    INC.methods.checkVariantSelection(moduleblck)
                                }
                                product3rdObj["att0Array"].forEach(function(sizeObj) {

                                    var attSizeBlock3 = INC.methods.generateHTMLTags('div', {
                                        class: classNames["productAttthirdListItemBlock"]
                                    });
                                    var attSizeImgBlock3 = INC.methods.generateHTMLTags('div', {
                                        class: classNames["productAttthirdListItemImgBlock"]
                                    });
                                    var attSizeImg3 = INC.methods.generateHTMLTags('div', {
                                        class: classNames["productAttthirdListItemImg"]
                                    });

                                    attSizeImgBlock3.addEventListener("click", function() {
                                        var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                                        var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                                        var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                                        var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                                        if (atteditbutton != null) {
                                            atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                                            atteditbutton.innerText = "編集"
                                        }


                                        if (productBlock.querySelector('.close_read_more') != null) {
                                            productBlock.querySelector('.close_read_more').click()
                                        }
                                        var attr_text = this.getAttribute("data-size")

                                        elAttBlock.setAttribute("data-third", attr_text);

                                        if (atteditbutton != null) {
                                            atteditbutton.parentNode.classList.add('active')
                                        }

                                        var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_third_list_item_img_block')

                                        for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                            all_color_list_item_img[cl].classList.remove("active");
                                        }
                                        var attr_text = this.getAttribute("data-size")
                                        this.classList.add("active");
                                        elAtt3TitleTextSelected.innerText = attr_text;;

                                        INC.methods.updateProductBlock(productBlock, findObj, blockType);

                                        var productModuleBlock = productBlock.parentNode.parentNode;

                                        var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

                                        INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                                        var size_text = ""

                                    });

                                    // if (productSizeText.length == 0) {
                                    //     productSizeText = sizeObj["text"];
                                    // }

                                    attSizeImg3.innerText = sizeObj["text"];
                                    attSizeImgBlock3.setAttribute('data-size', sizeObj["text"]);
                                    attSizeImgBlock3.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                                    attSizeImgBlock3.setAttribute('data-option', "3");
                                    attSizeImgBlock3.appendChild(attSizeImg3);
                                    elAtt3ListBlock.appendChild(attSizeImgBlock3);
                                    if (attSizeImgBlock3.getAttribute('data-size').toLocaleLowerCase() == elAttSizeBlock.querySelector('.inc_product_desc_att_size_title_text_selected').innerText.toLocaleLowerCase()) {
                                        attSizeImgBlock3.classList.add('active')
                                    }
                                });
                                var third_el_bl = elAtt3ListBlock.querySelector(getSelectorClassName(classNames, "productAttthirdListItemImgBlock"))
                                //                        
                                if (third_el_bl.parentNode.querySelector('.inc_product_desc_att_third_list_item_img_block.active') == null) {
                                    third_el_bl.click();
                                }
                            }
                        }
                        //end 

                        INC.methods.updateProductBlock(productBlock, findObj, blockType);

                        var productModuleBlock = productBlock.parentNode.parentNode;

                        var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

                        INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                        var zero_text = elAttBlock.getAttribute('data-zero');
                        var size_text = elAttBlock.getAttribute('data-size');
                        var color_text = elAttBlock.getAttribute('data-color');
                        var third_text = elAttBlock.getAttribute('data-third');

                        var sel_attr_text = ""
                        
                        if (color_text != "" && color_text != null) {
                            if (sel_attr_text == "" || sel_attr_text == undefined) {
                                sel_attr_text = color_text
                            } else {
                                sel_attr_text = color_text
                            }
                        }
                        if (zero_text != "" && zero_text != null) {
                            if (sel_attr_text == "") {
                                sel_attr_text = zero_text
                            } else {
                                sel_attr_text = sel_attr_text + " / " + zero_text
                            }
                        }
                        if (size_text != "" && size_text != null) {
                            sel_attr_text = sel_attr_text + " / " + size_text
                        }
                        // if (third_text != "") {
                        //     sel_attr_text = sel_attr_text + " / " + third_text
                        // }
                        var pr_mod_elm = productBlock.parentNode.parentNode
                        if (sel_attr_text != "オプションを選択"){
                            if (pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text') != null && sel_attr_text != "") {
                                pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text').innerText = sel_attr_text
                                pr_mod_elm.querySelector('.inc_product_desc_att_size_title_text').setAttribute('title', sel_attr_text)
                            }
                        }
                        productModuleBlock.querySelector('.inc_product_modal_block .inc_product_desc_add_err_text_block').innerText = ""
                    });

                    if(productColorsObj["colorArray"].length == 1){
                        elAttBlock.setAttribute("data-color", colorObj["text"]);
                        attColorImgBlock.classList.add('active')
                    }

                    attColorImg.style.backgroundColor = colorObj["colorCode"];


                    if (colorObj["imgSrc"].length > 0) {
                        if (colorObj["colorCode"] == "") {
                            //{ src: colorObj["imgSrc"] }
                            var colorImg = INC.methods.generateHTMLTags('img');
                            colorImg.setAttribute('title', colorObj["text"])
                            colorImg.setAttribute('alt', colorObj["text"])
                            colorImg.setAttribute('src', colorObj["imgSrc"])
                            if (productObj.categoryName != "") {
                                colorImg.classList.add(productObj.categoryName.replace(/\s/g, ''))
                            }
                            //
                            attColorImg.appendChild(colorImg);
                        }
                    }

                    var colorTitle = INC.methods.generateHTMLTags('a');
                    colorTitle.innerText = colorObj["text"]
                    colorTitle.title = colorObj["text"].toUpperCase();
                    colorTitle.addEventListener('click', function(e) {
                        e.preventDefault();
                    })
                    attColorImg.appendChild(colorTitle);
                    attColorImgBlock.setAttribute('data-color', colorObj["text"]);
                    attColorImgBlock.setAttribute("datacolor", colorObj["text"].toLocaleLowerCase());
                    attColorImgBlock.setAttribute('data-option', "0");


                    attColorImgBlock.appendChild(attColorImg);
                    attColorBlock.appendChild(attColorImgBlock);
                    elAttColorListBlock.appendChild(attColorBlock);
                    var prod_id = productBlock.getAttribute('data-main_id');
                    if (one_attr_flag == true) {
                        setTimeout(function() {
                            if (INC.methods.getProductIdFromWebPage() == prod_id) {
                                // attColorImgBlock.click()
                            }
                        }, 0)
                    }
                });

            }
        }
    }



    if (check_main_s) {
        if (product3Obj.att3Array.length > 0) {
            if (product3Obj["att3Array"][0].code != "Color") {
                findObj = new INC.classes.FindObj({
                    mainId: productObj.mainId
                });

                elAtt3ListBlock.innerHTML = "";



                var productSizeText = "";

                var selectvariantwrap = generate_html_tag('div', 'selectvariantwrap')
                selectvariantwrap.classList.add(product3Obj["att3Array"][0].code)
                var selectvariant = generate_html_tag('select', 'inc_variant_tag')
                selectvariant.setAttribute('id', 'variant_inc_avail')
                selectvariant.setAttribute('onchange', 'inc_onchange_variant(this)')
                var label = generate_html_tag('label', 'label')
                label.innerText = product3Obj["att3Array"][0].code;
                selectvariantwrap.appendChild(label)
                selectvariantwrap.appendChild(selectvariant)
                elAttBlock.appendChild(selectvariantwrap)
                var variantoptionzero34 = generate_html_tag('option','variantoptionzero34')
                variantoptionzero34.textContent = "選択してくださいvariantoptionzero";
                variantoptionzero34.setAttribute('selected','selected')
                variantoptionzero34.setAttribute('data-size', "");
                variantoptionzero34.setAttribute("datasize", "");
                variantoptionzero34.setAttribute('data-option', "");
                selectvariant.appendChild(variantoptionzero34)

                product3Obj["att3Array"].forEach(function(sizeObj) {
                    var variantoption = generate_html_tag('option', 'variantoption')
                    variantoption.innerText = sizeObj["text"];
                    variantoption.setAttribute('data-zero', sizeObj["text"]);
                    variantoption.setAttribute("datazero", sizeObj["text"].toLocaleLowerCase());
                    variantoption.setAttribute('data-option', "1");
                    variantoption.setAttribute('title', sizeObj["text"].toUpperCase());
                    variantoption.setAttribute('ImgURLC', sizeObj["ImgURLC"]);
                    if(product3Obj["att3Array"].length == 1){
                        variantoption.selected = 'selected'
                    }
                    selectvariant.appendChild(variantoption)

                });
                if (product3Obj["att3Array"].length > 0) {
                    // elAttSizeTitleText.innerText = "SELECT OPTION";
                    // elAtt3Block.classList.add("active");
                    product3Obj["att3Array"].forEach(function(sizeObj) {
                        elAtt3TitleText.innerText = product3Obj["att3Array"][0].code;
                        elAtt3Block.classList.add("active");
                        var attSizeBlock3 = INC.methods.generateHTMLTags('div', {
                            class: classNames["productAttthirdListItemBlock"]
                        });
                        var attSizeImgBlock3 = INC.methods.generateHTMLTags('div', {
                            class: classNames["productAttthirdListItemImgBlock"]
                        });
                        var attSizeImg3 = INC.methods.generateHTMLTags('div', {
                            class: classNames["productAttthirdListItemImg"]
                        });

                        attSizeImgBlock3.classList.add('avail')

                        attSizeImgBlock3.addEventListener("click", function() {
                            var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                            var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                            var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                            var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                            if (atteditbutton != null) {
                                atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                                atteditbutton.innerText = "編集"
                            }


                            if (productBlock.querySelector('.close_read_more') != null) {
                                productBlock.querySelector('.close_read_more').click()
                            }
                            var attr_text = this.getAttribute("data-size")

                            elAttBlock.setAttribute("data-third", attr_text);

                            if (atteditbutton != null) {
                                atteditbutton.parentNode.classList.add('active')
                            }

                            var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_third_list_item_img_block')

                            for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                                all_color_list_item_img[cl].classList.remove("active");
                            }
                            var attr_text = this.getAttribute("data-size")
                            this.classList.add("active");
                            elAtt3TitleTextSelected.innerText = attr_text;;

                            INC.methods.updateProductBlock(productBlock, findObj, blockType);

                            var productModuleBlock = productBlock.parentNode.parentNode;

                            var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

                            INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                            var size_text = ""

                        });
                        if(product3Obj["att3Array"].length == 1){
                            elAttBlock.setAttribute("data-third", sizeObj["text"]);
                            attSizeImgBlock3.classList.add('active')
                        }

                        if (productSizeText.length == 0) {
                            productSizeText = sizeObj["text"];
                        }
                        var reg = new RegExp('^[A-Z]|XS|S|M|L|XL|XXL|XXXL|XX|XXXXL|2XL|3XL|4XL$');
                        var chckType = sizeObj["text"];

                        reg.test(chckType);


                        attSizeImg3.innerText = sizeObj["text"];
                        attSizeImgBlock3.setAttribute('data-size', sizeObj["text"]);
                        attSizeImgBlock3.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                        attSizeImgBlock3.setAttribute('data-option', "3");

                        attSizeImgBlock3.appendChild(attSizeImg3);
                        elAtt3ListBlock.appendChild(attSizeImgBlock3);

                    });

                }
            }
        }
    } else {
        elAtt3ListBlock.innerHTML = "";
        var product3rdObj = INC.dataStore.methods().getProductopt0Obj(findObj);
        if (product3rdObj["att0Array"].length > 0) {
            elAtt3Block.classList.add("active");
            var selectvariantwrap = generate_html_tag('div', 'selectvariantwrap')
            selectvariantwrap.classList.add(product3rdObj["att0Array"][0].code)
            var selectvariant = generate_html_tag('select', 'inc_variant_tag')
            selectvariant.setAttribute('id', 'variant_inc_avail')
            selectvariant.setAttribute('onchange', 'inc_onchange_variant(this)')
            var label = generate_html_tag('label', 'label')
            label.innerText = product3rdObj["att0Array"][0].code;
            selectvariantwrap.appendChild(label)
            selectvariantwrap.appendChild(selectvariant)
            elAttBlock.appendChild(selectvariantwrap)

            var variantoptionzero76 = generate_html_tag('option','variantoptionzero76')
            variantoptionzero76.textContent = "選択してください";
            variantoptionzero76.setAttribute('selected','selected')
            variantoptionzero76.setAttribute('data-size', "");
            variantoptionzero76.setAttribute("datasize", "");
            variantoptionzero76.setAttribute('data-option', "");
            selectvariant.appendChild(variantoptionzero76)
            product3rdObj["att0Array"].forEach(function(sizeObj) {
                var variantoption = generate_html_tag('option', 'variantoption')
                variantoption.innerText = sizeObj["text"];
                variantoption.setAttribute('data-zero', sizeObj["text"]);
                variantoption.setAttribute("datazero", sizeObj["text"].toLocaleLowerCase());
                variantoption.setAttribute('data-option', "1");
                variantoption.setAttribute('title', sizeObj["text"].toUpperCase());
                variantoption.setAttribute('ImgURLC', sizeObj["ImgURLC"]);
                if(product3rdObj["att0Array"].length == 1){
                    variantoption.selected = 'selected'
                }
                selectvariant.appendChild(variantoption)

            });
            product3rdObj["att0Array"].forEach(function(sizeObj) {

                var attSizeBlock3 = INC.methods.generateHTMLTags('div', {
                    class: classNames["productAttthirdListItemBlock"]
                });
                var attSizeImgBlock3 = INC.methods.generateHTMLTags('div', {
                    class: classNames["productAttthirdListItemImgBlock"]
                });
                var attSizeImg3 = INC.methods.generateHTMLTags('div', {
                    class: classNames["productAttthirdListItemImg"]
                });

                attSizeImgBlock3.addEventListener("click", function() {
                    var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
                    var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
                    var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')
                    var atteditbutton = prod_card_attr_block.querySelector('.inc_product_desc_att_edit_text')
                    if (atteditbutton != null) {
                        atteditbutton.parentNode.parentNode.classList.add('elipsis_inc')
                        atteditbutton.innerText = "編集"
                    }


                    if (productBlock.querySelector('.close_read_more') != null) {
                        productBlock.querySelector('.close_read_more').click()
                    }
                    var attr_text = this.getAttribute("data-size")

                    elAttBlock.setAttribute("data-third", attr_text);

                    if (atteditbutton != null) {
                        atteditbutton.parentNode.classList.add('active')
                    }

                    if (this.parentNode != null) {
                        var all_color_list_item_img = this.parentNode.parentNode.querySelectorAll('.inc_product_desc_att_third_list_item_img_block')

                        for (cl = 0; cl < all_color_list_item_img.length; cl++) {
                            all_color_list_item_img[cl].classList.remove("active");
                        }
                    }
                    var attr_text = this.getAttribute("data-size")
                    this.classList.add("active");
                    elAtt3TitleTextSelected.innerText = attr_text;;

                    INC.methods.updateProductBlock(productBlock, findObj, blockType);

                    var productModuleBlock = productBlock.parentNode.parentNode;

                    var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

                    INC.methods.updateProductBlock(showcaseProductBlock, findObj, blockType);
                    var size_text = ""

                });

                // if (productSizeText.length == 0) {
                //     productSizeText = sizeObj["text"];
                // }
                if(product3rdObj["att0Array"].length == 1){
                    elAttBlock.setAttribute("data-third", sizeObj["text"]);
                    attSizeImgBlock3.classList.add('active')
                }
                elAtt3TitleText.innerText = sizeObj["code"]
                attSizeImg3.innerText = sizeObj["text"];
                attSizeImgBlock3.setAttribute('data-size', sizeObj["text"]);
                attSizeImgBlock3.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                attSizeImgBlock3.setAttribute('data-option', "3");
                attSizeImgBlock3.appendChild(attSizeImg3);
                elAtt3ListBlock.appendChild(attSizeImgBlock3);
                if (attSizeImgBlock3.getAttribute('data-size').toLocaleLowerCase() == elAttSizeBlock.querySelector('.inc_product_desc_att_size_title_text_selected').innerText.toLocaleLowerCase()) {
                    attSizeImgBlock3.classList.add('active')
                }
            });
            var third_el_bl = elAtt3ListBlock.querySelector(getSelectorClassName(classNames, "productAttthirdListItemImgBlock"))
            //                        
            if (third_el_bl.parentNode.querySelector('.inc_product_desc_att_third_list_item_img_block.active') == null) {
                // third_el_bl.click();
            }
        }
    }

    if (product4Obj.att4Array.length > 0) {
        if (product4Obj["att4Array"][0].code != "Color") {
            findObj = new INC.classes.FindObj({
                mainId: productObj.mainId
            });

            elAtt4ListBlock.innerHTML = "";
            var productSizeText = "";


            if (product4Obj["att4Array"].length > 0) {
                // elAttSizeTitleText.innerText = "SELECT OPTION";
                // elAttSizeBlock.classList.add("active");
                product4Obj["att4Array"].forEach(function(sizeObj) {

                    var attSizeBlock4 = INC.methods.generateHTMLTags('div', {
                        class: classNames["productAttfourthListItemBlock"]
                    });
                    var attSizeImgBlock4 = INC.methods.generateHTMLTags('div', {
                        class: classNames["productAttfourthListItemImgBlock"]
                    });
                    var attSizeImg4 = INC.methods.generateHTMLTags('div', {
                        class: classNames["productAttfourthListItemImg"]
                    });
                    attSizeImgBlock4.classList.add('avail')


                    if (productSizeText.length == 0) {
                        productSizeText = sizeObj["text"];
                    }
                    var reg = new RegExp('^[A-Z]|XS|S|M|L|XL|XXL|XXXL|XX|XXXXL|2XL|3XL|4XL$');
                    var chckType = sizeObj["text"];

                    reg.test(chckType);


                    attSizeImg4.innerText = sizeObj["text"];
                    attSizeImgBlock4.setAttribute('data-size', sizeObj["text"]);
                    attSizeImgBlock4.setAttribute("datasize", sizeObj["text"].toLocaleLowerCase());
                    attSizeImgBlock4.setAttribute('data-option', "4");
                    if (product4Obj["att4Array"][0].code == "size") {
                        attSizeImgBlock4.setAttribute('title', sizeObj["text"].toUpperCase());
                    } else if (product4Obj["att4Array"][0].code == "letter") {
                        attSizeImgBlock4.setAttribute('title', "Letter" + " " + sizeObj["text"].toUpperCase());
                    } else if (product4Obj["att4Array"][0].code == "choose") {
                        attSizeImgBlock4.setAttribute('title', "Number " + sizeObj["text"].toUpperCase());
                    } else {
                        attSizeImgBlock4.setAttribute('title', sizeObj["text"].toUpperCase());
                    }

                    attSizeImgBlock4.appendChild(attSizeImg4);
                    elAtt4ListBlock.appendChild(attSizeImgBlock4);

                });

            }
        }
    }



    if (productColorsObj["colorArray"].length > 0) {
        if (productColorsObj["colorArray"][0].code != "Color") {
            elAttColorTitleTextSelected.innerText = productColorsObj["colorArray"][0].code;
        }
        // elcolortitleblock.addEventListener('click',function(){
        //     this.parentNode.classList.toggle('show_dropdown')
        // })
    }
    if (product0Obj.att0Array.length > 0) {
        elAtt0TitleText.innerText = product0Obj.att0Array[0].code;
        // elzerotitleblock.addEventListener('click',function(){
        //     this.parentNode.classList.toggle('show_dropdown')
        // })
    }
    if (productSizesObj.sizeArray.length > 0) {
        elAttSizeTitleText.innerText = productSizesObj.sizeArray[0].code;
        // elAttSizeTitleBlock.addEventListener('click',function(){
        //     this.parentNode.classList.toggle('show_dropdown')
        // })
    }
    // elGallerylefttArrow.setAttribute('title','Scroll left')
    // elGalleryRightArrow.setAttribute('title','Scroll right')

    elGalleryRightArrow.addEventListener("click", function(e) {
        var prod_card = this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;
        var pr_id = prod_card.getAttribute('data-main_id')
        slideTo(pr_id, 0, prod_card, "right", "arrow")
    });
    elGallerylefttArrow.addEventListener("click", function(e) {
        var prod_card = this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;
        var pr_id = prod_card.getAttribute('data-main_id')
        slideTo(pr_id, 0, prod_card, "left", "arrow")
    });

    if (window.innerWidth > 819) {
        if ((productObj.otherImageList == null) || productObj.otherImageList.length < 4 || productObj.otherImageList.length == 1 || productObj.otherImageList == "") {
            elGalleryRightArrow.style.display = "none"
            elGallerylefttArrow.style.display = "none"
        }
    } else {
        if ((productObj.otherImageList == null) || productObj.otherImageList.length < 1 || productObj.otherImageList.length == 1 || productObj.otherImageList == "") {
            elGalleryRightArrow.style.display = "none"
            elGallerylefttArrow.style.display = "none"
        }
    }
    switch (blockType) {
        case "pdp":
            elAddText.innerText = INC.config.AddToCartText;
            break;
        case "sidebar":
        case "am":
            elAddText.innerText = INC.config.AddToCartText;
            break;
    }
    var clone_elAddBlock = generate_html_tag('div','elAddBlock')
    clone_elAddBlock.classList.add('inactive');
    clone_elAddBlock.innerText = "選択する";
    // clone_elAddBlock.style.color = "#999";
    // clone_elAddBlock.style.background = "#eee";
    // clone_elAddBlock.style.pointerEvents = "none"
    elAddBlock.parentNode.insertBefore(clone_elAddBlock,elAddBlock)
    clone_elAddBlock.addEventListener('click',function(){
        elAddBlock.click()
    })
    elAddBlock.style.display="none"
    elAddBlock.addEventListener("click", function() {
        
        var showcaseclick = false
        if (productBlock.querySelector('.close_read_more') != null) {
            productBlock.querySelector('.close_read_more').click()
        }
        var rem_inc_overlay = true;
        var productModuleBlock = productBlock.parentNode.parentNode;
        
        var flag_check = INC.methods.checkVariantSelection(productModuleBlock)

        
        
        if (document.querySelector('.inc_sidebar_modal_block.active') != null) {
            if (document.querySelector('.inc_sidebar_modal_block.active .inc_product_modal_block.active') == null) {
                document.querySelector('.inc_sidebar_modal_block.active').classList.remove('overflow_visible')
            }
        }


        var showcaseProductBlock = productModuleBlock.querySelector(getSelectorClassName(classNames, "productShowcaseBlock")).querySelector(getSelectorClassName(classNames, "productBlock"));

        if (INC.config.pageType != "cartPage" && document.querySelector('.inc_sidebar_modal_block.active') == null) {
            showcaseclick = true
            showcaseProductBlock.querySelector(getSelectorClassName(classNames, "productAddBlock")).click();
        }

        if(productModuleBlock.classList.contains('configurable') == true){
            if(flag_check == 1){
                setTimeout(function(){
                    if(document.querySelector('.inc_sidebar_modal_block.active .inc_product_modal_block.active') != null){
                        document.querySelector('.inc_sidebar_modal_block.active .inc_product_modal_block.active').classList.remove('active')
                    }
                },100)

                if (INC.config.pageType != "cartPage" && document.querySelector('.inc_sidebar_modal_block.active') != null) {
                    var  productBlockNode = this.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;
                    var sku = productBlockNode.getAttribute('data-sku');       
                    var findObj = new INC.classes.FindObj({ id: sku });
                    var qty = productBlockNode.querySelector('input').value;
                    var add_btn = productBlockNode.querySelector('.inc_product_desc_add_text');
                    var add_prod_im = productBlockNode.querySelectorAll(getSelectorClassName(classNames, "productAddImg"));
                    var add_btn_click = productBlockNode.querySelector(getSelectorClassName(classNames, "productAddText"));
                    
                    INC.methods.addProductToCart(findObj, qty, "sidebar", productBlockNode,add_btn_click,add_prod_im,add_btn);
                }
                rem_inc_overlay = true
                //document.querySelector('html').classList.remove('inc_overlay');

            }else{
                //productModuleBlock.querySelector('.inc_product_modal_block .inc_product_desc_add_err_text_block').textContent="please select color/size";
                productModuleBlock.querySelector('.inc_product_modal_block .inc_product_desc_add_err_text_block').setAttribute('style','color:#E52B45')
                var element =  document.querySelector('.inc_product_modal_block.active .inc_product_block .inc_product_desc_att_color_block') 
                if(element != null){
                    element.scrollIntoView({ behavior: 'smooth'})
                    if(flag_check == 2){
                        // productModuleBlock.querySelector('.inc_product_modal_block .inc_variant_tag').setAttribute('style','border: 1px solid #E52B45;')
                        productModuleBlock.querySelector('.inc_product_modal_block .inc_product_desc_add_err_text_block').textContent="サイズを選択してください";
                    }else if(flag_check == 3){
                        //productModuleBlock.querySelector('.inc_product_modal_block .inc_variant_tag').setAttribute('style','border: 1px solid #E52B45;')
                        productModuleBlock.querySelector('.inc_product_modal_block .selectvariant_color').setAttribute('style','border: 1px solid #E52B45;')
                        productModuleBlock.querySelector('.inc_product_modal_block .inc_product_desc_add_err_text_block').textContent="色・タイプを選択してください";
                    }else{
                        productModuleBlock.querySelector('.inc_product_modal_block .inc_product_desc_add_err_text_block').textContent="色と種類を選択してください/サイズを選択してください";
                        if (productModuleBlock.querySelector('.inc_product_modal_block .inc_variant_tag') != null){
                            productModuleBlock.querySelector('.inc_product_modal_block .inc_variant_tag').setAttribute('style','border: 1px solid #E52B45;')
                        }
                        if (productModuleBlock.querySelector('.inc_product_modal_block .selectvariant_color') != null){
                            productModuleBlock.querySelector('.inc_product_modal_block .selectvariant_color').setAttribute('style','border: 1px solid #E52B45;')
                        }
                    }
                    document.querySelector('html').classList.add('inc_popup_open')
                }
                rem_inc_overlay = false

            }
        }else{
            setTimeout(function(){
                if(document.querySelector('.inc_sidebar_modal_block.active .inc_product_modal_block.active') != null){
                    document.querySelector('.inc_sidebar_modal_block.active .inc_product_modal_block.active').classList.remove('active')
                }
            },100)
        }

        if (document.querySelector('.inc_sidebar_modal_block.active') == null && rem_inc_overlay == true) {
            if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) && onloadpdp == true && window.innerWidth < 1337) {
                if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0) {
                    document.querySelector('body').style.position = "relative"
                }
            }
            if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) && onloadpdp == true) {

                // if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && window.innerWidth < 1337) {
                if (window.innerWidth < 1337) {
                    if (productModuleBlock.querySelector('.inc_product_modal_block.active') != null) {
                        // if (document.querySelector('.inc_pdp_block') != null) {
                        //     $("html, body").animate({
                        //         //scrollTop: $(".inc_pdp_block").offset().top - 150
                        //     }, 0);
                        // } else if (document.querySelector('.inc_af_block') != null) {
                        //     $("html, body").animate({
                        //         //scrollTop: $(".inc_af_block").offset().top - 150
                        //     }, 0);
                        // }
                        // $("html, body").animate({ scrollTop:  collection_height }, 0);
                    }
                }
            }
            document.querySelector('html').classList.remove('inc_overlay');
        }
    });

    return productBlock;
}

INC.methods.updateSelectedTxt = function(prod_module_block){
    
    var prd_blck=prod_module_block.parentNode.parentNode.querySelector('.inc_product_modal_block')
    var zero_text = prd_blck.querySelector('.inc_product_desc_att_block').getAttribute('data-zero');
    var size_text = prd_blck.querySelector('.inc_product_desc_att_block').getAttribute('data-size');
    var color_text = prd_blck.querySelector('.inc_product_desc_att_block').getAttribute('data-color');
    var third_text = prd_blck.querySelector('.inc_product_desc_att_block').getAttribute('data-third');

    var sel_attr_text = ""

     
    if (color_text != "" && color_text != null) {
        if (sel_attr_text == "") {
            sel_attr_text = color_text
        } else {
            sel_attr_text = color_text
        }
    } 
    if (zero_text != "" && zero_text != null) {
        if (sel_attr_text == "") {
            sel_attr_text = zero_text
        } else {
            sel_attr_text = sel_attr_text + " / " + zero_text
        }
    }
    if (size_text != "" && size_text != null) {
        if (sel_attr_text == "") {
            sel_attr_text = size_text
        } else {   
            sel_attr_text = sel_attr_text + " / " + size_text
        }
    } 

    // if (third_text != null) {
    //     if (sel_attr_text == "") {
    //         sel_attr_text = third_text
    //     } else {   
    //         sel_attr_text = sel_attr_text + " / " + third_text
    //     }
    // } 

    prd_blck.parentNode.querySelector('.inc_product_desc_att_size_title_text').innerText = sel_attr_text
    prd_blck.parentNode.querySelector('.inc_product_desc_att_size_title_text').setAttribute('title', sel_attr_text)
}

INC.methods.checkVariantSelection = function(prod_module_block){
    
    var prd_blck=prod_module_block.querySelector('.inc_product_modal_block')
    var attr_flag_size = false;
    var attr_flag_color = false;
    var attr_flag_zero = false;
    var elSize = prod_module_block.querySelector('.inc_product_modal_block .inc_variant_size_tag')
    var elColor = prod_module_block.querySelector('.inc_product_modal_block .inc_variant_color_tag')
    var elzero = prod_module_block.querySelector('.inc_product_modal_block .inc_variant_zero_tag')
    if(elSize != null && elColor != null && elzero != null){
        var eldataOption = elSize.options[elSize.selectedIndex].getAttribute("data-size");
        var eldataOptioncolor = elColor.options[elColor.selectedIndex].getAttribute("data-color");
        var eldataOptionzero = elzero.options[elzero.selectedIndex].getAttribute("data-size");
        

        if((eldataOptioncolor != "" && eldataOptioncolor != null) && (eldataOptionzero != null && eldataOptionzero != "") && (eldataOption != null && eldataOption != "")){
            attr_flag_color = true
            attr_flag_size = true
            attr_flag_zero = true
        }
        
        if(eldataOptioncolor != "" && eldataOptioncolor != null){
            attr_flag_color = true
        }else{
            attr_flag_color = false
        }
        if(eldataOptionzero != null && eldataOptionzero != ""){
            attr_flag_zero = true
        }else{
            attr_flag_zero = false
        }
        
        if(eldataOption != null && eldataOption != ""){
            attr_flag_size = true
        }else{
            attr_flag_size = false
        }
        
        
    }else if(elSize != null && elColor != null && elzero != null){
        var eldataOption = elSize.options[elSize.selectedIndex].getAttribute("data-size");
        var eldataOptioncolor = elColor.options[elColor.selectedIndex].getAttribute("data-color");
        var eldataOptionzero = elzero.options[elzero.selectedIndex].getAttribute("data-size");
        
        if((eldataOptioncolor != "" && eldataOptioncolor != null) && (eldataOptionzero != null && eldataOptionzero != "") && (eldataOption != null && eldataOption != "")){
            attr_flag_color = true
            attr_flag_size = true
            attr_flag_zero = true
        }
        
        if(eldataOptioncolor != "" && eldataOptioncolor != null){
            attr_flag_color = true
        }else{
            attr_flag_color = false
        }
        if(eldataOptionzero != null && eldataOptionzero != ""){
            attr_flag_zero = true
        }else{
            attr_flag_zero = false
        }
        
        if(eldataOption != null && eldataOption != ""){
            attr_flag_size = true
        }else{
            attr_flag_size = false
        }
    }else if(elColor != null && elzero != null){
        var eldataOptioncolor = elColor.options[elColor.selectedIndex].getAttribute("data-color");
        var eldataOptionzero = elzero.options[elzero.selectedIndex].getAttribute("data-size");

        attr_flag_size = true
        
        if((eldataOptioncolor != "" && eldataOptioncolor != null) && (eldataOptionzero != null && eldataOptionzero != "")){
            attr_flag_color = true
            attr_flag_zero = true
        }
        
        if(eldataOptioncolor != "" && eldataOptioncolor != null){
            attr_flag_color = true
        }else{
            attr_flag_color = false
        }
        if(eldataOptionzero != null && eldataOptionzero != ""){
            attr_flag_zero = true
        }else{
            attr_flag_zero = false
        }
        
    }else{
        if(elColor != null){
            var eldataOptioncolor = elColor.options[elColor.selectedIndex].getAttribute("data-color");
            if(eldataOptioncolor != "" && eldataOptioncolor != null){
                attr_flag_color = true
            }
        }else{
            attr_flag_color = true
        }
        if(elzero != null){
            var eldataOption = elzero.options[elzero.selectedIndex].getAttribute("datasize");
            if(eldataOption != null && eldataOption != ""){
                attr_flag_zero = true
            }
        }else{
            attr_flag_zero = true
        }
        if(elSize != null){
            var eldataOption = elSize.options[elSize.selectedIndex].getAttribute("datasize");
            if(eldataOption != null && eldataOption != ""){
                attr_flag_size = true
            }
        }else{
            attr_flag_size = true
        }
        
    }
    
    if(attr_flag_color == true && attr_flag_size == true && attr_flag_zero == true){
        
        if(prd_blck != null){
            if (prd_blck.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock") != null){
                if (prd_blck.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").classList.contains('inactive')){
                    prd_blck.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").classList.remove('inactive')
                    prd_blck.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").classList.add('inc_active')
                    prd_blck.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").setAttribute('style', '')
                    
                }
            }
        }else{
            if (prod_module_block.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").classList.contains('inactive')){
                prod_module_block.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").classList.remove('inactive')
                prod_module_block.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").setAttribute('style', '')
                prod_module_block.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").classList.add('inc_active')
                
            }
        }
        
        return 1
    }else{

        if((attr_flag_size == false && attr_flag_color == false && attr_flag_zero == false) || (attr_flag_size == false && attr_flag_color == false)){
            return 0
        }else if(attr_flag_size == false){
            return 2
        }else if(attr_flag_color == false){
            return 3
        }else if(attr_flag_zero == false){
            return 4
        }else{
            return 0
        }
    }
}

INC.methods.variantAutoSelection = function(prod_module_block, clientClk){
    var attr_flag_size = false;
    var attr_flag_color = false;
    var attr_flag_zero = false;

    var prd_blck = prod_module_block.querySelector('.inc_pdp_bundle_product_list_block .inc_product_modal_block')
    var elSize = prod_module_block.querySelector('.inc_pdp_bundle_product_list_block .inc_product_modal_block .inc_variant_size_tag')
    var elColor = prod_module_block.querySelector('.inc_pdp_bundle_product_list_block .inc_product_modal_block .inc_variant_color_tag')
    var elzero = prod_module_block.querySelector('.inc_pdp_bundle_product_list_block .inc_product_modal_block .inc_variant_zero_tag')
    if(elSize != null && elColor != null && elzero != null){
        var eldataOption = elSize.options[elSize.selectedIndex].getAttribute("data-size");
        var eldataOptioncolor = elColor.options[elColor.selectedIndex].getAttribute("data-color");
        var eldataOptionzero = elzero.options[elzero.selectedIndex].getAttribute("data-size");
        

        if((eldataOptioncolor != "" && eldataOptioncolor != null) && (eldataOptionzero != null && eldataOptionzero != "") && (eldataOption != null && eldataOption != "")){
            attr_flag_color = true
            attr_flag_size = true
            attr_flag_zero = true
        }
        
        if(eldataOptioncolor != "" && eldataOptioncolor != null){
            attr_flag_color = true
        }else{
            attr_flag_color = false
        }
        if(eldataOptionzero != null && eldataOptionzero != ""){
            attr_flag_zero = true
        }else{
            attr_flag_zero = false
        }
        
        if(eldataOption != null && eldataOption != ""){
            attr_flag_size = true
        }else{
            attr_flag_size = false
        }
        
        
    }else if(elSize != null && elColor != null && elzero != null){
        var eldataOption = elSize.options[elSize.selectedIndex].getAttribute("data-size");
        var eldataOptioncolor = elColor.options[elColor.selectedIndex].getAttribute("data-color");
        var eldataOptionzero = elzero.options[elzero.selectedIndex].getAttribute("data-size");
        
        if((eldataOptioncolor != "" && eldataOptioncolor != null) && (eldataOptionzero != null && eldataOptionzero != "") && (eldataOption != null && eldataOption != "")){
            attr_flag_color = true
            attr_flag_size = true
            attr_flag_zero = true
        }
        
        if(eldataOptioncolor != "" && eldataOptioncolor != null){
            attr_flag_color = true
        }else{
            attr_flag_color = false
        }
        if(eldataOptionzero != null && eldataOptionzero != ""){
            attr_flag_zero = true
        }else{
            attr_flag_zero = false
        }
        
        if(eldataOption != null && eldataOption != ""){
            attr_flag_size = true
        }else{
            attr_flag_size = false
        }
    }else if(elColor != null && elzero != null){
        var eldataOptioncolor = elColor.options[elColor.selectedIndex].getAttribute("data-color");
        var eldataOptionzero = elzero.options[elzero.selectedIndex].getAttribute("data-size");

        attr_flag_size = true
        
        if((eldataOptioncolor != "" && eldataOptioncolor != null) && (eldataOptionzero != null && eldataOptionzero != "")){
            attr_flag_color = true
            attr_flag_zero = true
        }
        
        if(eldataOptioncolor != "" && eldataOptioncolor != null){
            attr_flag_color = true
        }else{
            attr_flag_color = false
        }
        if(eldataOptionzero != null && eldataOptionzero != ""){
            attr_flag_zero = true
        }else{
            attr_flag_zero = false
        }
        
    }else{
        if(elColor != null){
            var eldataOptioncolor = elColor.options[elColor.selectedIndex].getAttribute("data-color");
            if(eldataOptioncolor != "" && eldataOptioncolor != null){
                attr_flag_color = true
            }
        }else{
            attr_flag_color = true
        }
        if(elzero != null){
            var eldataOption = elzero.options[elzero.selectedIndex].getAttribute("datasize");
            if(eldataOption != null && eldataOption != ""){
                attr_flag_zero = true
            }
        }else{
            attr_flag_zero = true
        }
        if(elSize != null){
            var eldataOption = elSize.options[elSize.selectedIndex].getAttribute("datasize");
            if(eldataOption != null && eldataOption != ""){
                attr_flag_size = true
            }
        }else{
            attr_flag_size = true
        }
        
    }
    
    if(attr_flag_color == true && attr_flag_size == true && attr_flag_zero == true){

        if(prd_blck != null){
            if (prd_blck.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock") != null){
                prd_blck.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").classList.remove('inactive')
                prd_blck.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").setAttribute('style', '')
                prd_blck.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").classList.add('inc_active')
                prd_blck.classList.add('active')
                prd_blck.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").click()
            }
        }else{
            prod_module_block.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").classList.remove('inactive')
            prod_module_block.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").classList.add('inc_active')
            prod_module_block.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").setAttribute('style', '')
            prod_module_block.classList.add('active')
            prod_module_block.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").click();
        }

       
        return 1
    }else{

        if (prod_module_block.querySelector(".inc_product_showcase_block .inc_product_block").classList.contains('inc_checked')){
            prod_module_block.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").click();

        }

        if((attr_flag_size == false && attr_flag_color == false && attr_flag_zero == false) || (attr_flag_size == false && attr_flag_color == false)){
            return 0
        }else if(attr_flag_size == false){
            return 2
        }else if(attr_flag_color == false){
            return 3
        }else if(attr_flag_zero == false){
            return 4
        }else{
            return 0
        }
    }
}

function inc_onchange_variant(elattrblock) {
    if (elattrblock.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.classList.contains('inc_product_module_block') == true) {
        var elmainblock = elattrblock.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
    } else {
        var elmainblock = elattrblock.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
    }

    var elAttBlock = elattrblock.parentNode.parentNode
    var productBlock = elattrblock.parentNode.parentNode.parentNode.parentNode.parentNode
    var elAtt0TitleText = elAttBlock.querySelector('.inc_product_desc_att_zero_title_text')
    var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
    var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
    var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_zero_title_text')

    if (productBlock.querySelector('.close_read_more') != null) {
        productBlock.querySelector('.close_read_more').click()
    }
    var flag_check = INC.methods.checkVariantSelection(productBlock)
    if(flag_check == 1){
        if (elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock") != null){
            if (elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").classList.contains('inactive')){
                elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").classList.remove('inactive')
                elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").classList.add('inc_active')
                elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").setAttribute('style', '')
                // elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").style.background = "#ee2d42";
                // elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").style.color = "#ffffff";
                // elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").style.pointerEvents ="auto"
            }
        }
    }
    var attr_text = elattrblock.options[elattrblock.selectedIndex].getAttribute("datasize");
    var attr_text_small = elattrblock.options[elattrblock.selectedIndex].getAttribute("datasize");
    if (elAttBlock.querySelector('.inc_product_desc_att_zero_block.active .inc_product_desc_att_size_list_item_img_block[datasize="' + attr_text_small + '"]') != null) {
        elAttBlock.querySelector('.inc_product_desc_att_zero_block.active .inc_product_desc_att_size_list_item_img_block[datasize="' + attr_text_small + '"]').click()
    }
   
}

function inc_onchange_size_variant(elattrblock) {
    if (elattrblock.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.classList.contains('inc_product_module_block') == true) {
        var elmainblock = elattrblock.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
    } else {
        var elmainblock = elattrblock.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
    }

    var elAttBlock = elattrblock.parentNode.parentNode
    var productBlock = elattrblock.parentNode.parentNode.parentNode.parentNode.parentNode
    var flag_check = INC.methods.checkVariantSelection(productBlock)
    if(flag_check == 1){
        if (elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock") != null){
            if (elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").classList.contains('inactive')){
                elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").classList.remove('inactive')
                elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").classList.add('inc_active');

                elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").setAttribute('style', '')
                // elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").style.background = "#ee2d42";
                // elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").style.color = "#ffffff";
                // elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").style.pointerEvents ="auto"
            }
        }
    }
    var elAtt0TitleText = elAttBlock.querySelector('.inc_product_desc_att_size_title_text')
    var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
    var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
    var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_size_title_text')

    if (productBlock.querySelector('.close_read_more') != null) {
        productBlock.querySelector('.close_read_more').click()
    }
    var attr_text = elattrblock.options[elattrblock.selectedIndex].getAttribute("datasize");
    var attr_text_small = elattrblock.options[elattrblock.selectedIndex].getAttribute("datasize");

    if (elAttBlock.querySelector('.inc_product_desc_att_size_list_block .inc_product_desc_att_size_list_item_img_block[datasize="' + attr_text_small + '"]') != null) {
        elAttBlock.querySelector('.inc_product_desc_att_size_list_block .inc_product_desc_att_size_list_item_img_block[datasize="' + attr_text_small + '"]').click()
    }
}

function inc_onchange_color_variant(elattrblock) {
    if (elattrblock.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.classList.contains('inc_product_module_block') == true) {
        var elmainblock = elattrblock.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
    } else {
        var elmainblock = elattrblock.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode
    }

    var elAttBlock = elattrblock.parentNode.parentNode
    var productBlock = elattrblock.parentNode.parentNode.parentNode.parentNode.parentNode
    var flag_check = INC.methods.checkVariantSelection(productBlock)
    if(flag_check == 1){
        if (elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock") != null){
            if (elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").classList.contains('inactive')){
                elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").classList.remove('inactive')
                elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").classList.add('inc_active');
                elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").setAttribute('style', '')
                // elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").style.background = "#ee2d42";
                // elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").style.color = "#ffffff";
                // elattrblock.parentNode.parentNode.parentNode.querySelector(".inc_product_desc_qty_add_btn_block .elAddBlock").style.pointerEvents ="auto"
            }
        }
    }
    var attrImng = elattrblock.options[elattrblock.selectedIndex].getAttribute('imgurlc')
    var elAtt0TitleText = elAttBlock.querySelector('.inc_product_desc_att_color_title_text')
    var prod_card_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_showcase_block .inc_product_desc_att_block')
    var prod_modal_attr_block = elAttBlock.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.querySelector('.inc_product_modal_block .inc_product_desc_att_block')
    var attselectedsizeText = prod_card_attr_block.querySelector('.inc_product_desc_att_color_title_text')

    if (productBlock.querySelector('.close_read_more') != null) {
        productBlock.querySelector('.close_read_more').click()
    }

    if (elattrblock.options[elattrblock.selectedIndex].getAttribute("datasize") != null){
        var attr_text = elattrblock.options[elattrblock.selectedIndex].getAttribute("datasize");
        var attr_text_small = elattrblock.options[elattrblock.selectedIndex].getAttribute("datasize");
    }

    if (elattrblock.options[elattrblock.selectedIndex].getAttribute("datacolor") != null){
        var attr_text = elattrblock.options[elattrblock.selectedIndex].getAttribute("datacolor");
        var attr_text_small = elattrblock.options[elattrblock.selectedIndex].getAttribute("datacolor");
    } 

    if (elAttBlock.querySelector('.inc_product_desc_att_color_list_block .inc_product_desc_att_color_list_item_img_block[datacolor="' + attr_text_small + '"]') != null) {
        elAttBlock.querySelector('.inc_product_desc_att_color_list_block .inc_product_desc_att_color_list_item_img_block[datacolor="' + attr_text_small + '"]').click()
    }
}
INC.methods.updateProductBlock = function(productBlock, findObj, blockType, bundleProductListCheck) {
    
    var dataStore = INC.dataStore;
    var classNames = INC.uiConfig[blockType].className;
    var productBlock = productBlock;
    var bkupActPrc = "";
    var productModuleBlock = productBlock.parentNode.parentNode;

    //

    var modal_attr_block = productModuleBlock.querySelector('.inc_product_modal_block')
    var zero_text = modal_attr_block.querySelector('.inc_product_desc_att_block').getAttribute('data-zero');
    var size_text = modal_attr_block.querySelector('.inc_product_desc_att_block').getAttribute('data-size');
    var color_text = modal_attr_block.querySelector('.inc_product_desc_att_block').getAttribute('data-color');
    var third_text = modal_attr_block.querySelector('.inc_product_desc_att_block').getAttribute('data-third');

    var sel_attr_text = ""

    
    if (color_text != "" && color_text != null) {
        findObj.colorText = color_text
        if (sel_attr_text == "") {
            sel_attr_text = color_text
        } else {
            sel_attr_text = color_text
        }

    } else {
        findObj.colorText = ""
    }
    if (zero_text != "" && zero_text != null) {
        findObj.zeroText = zero_text
        if (sel_attr_text == "") {
            sel_attr_text = zero_text
        } else {
            sel_attr_text = sel_attr_text + " / " + zero_text
        }
    } else {
        findObj.zeroText = ""
    }
    if (size_text != "" && size_text != null) {
        findObj.sizeText = size_text
        sel_attr_text =   sel_attr_text+ " / " + size_text
    } else {
        findObj.sizeText = ""
    }
    if ((zero_text != null && zero_text != "" ) && (color_text != null && color_text != "")){
        if(productModuleBlock.querySelector('.inc_product_desc_titlprc_block .inc_product_desc_price_block').classList.contains('showPriceLabel')){
            productModuleBlock.querySelector('.inc_product_desc_titlprc_block .inc_product_desc_price_block').classList.remove('showPriceLabel')
        }
        productModuleBlock.querySelector('.inc_product_desc_titlprc_block .inc_product_desc_price_block').classList.add('hidePriceLabel');
        if(modal_attr_block.querySelector('.inc_product_desc_titlprc_block .inc_product_desc_price_block').classList.contains('showPriceLabel')){
            modal_attr_block.querySelector('.inc_product_desc_titlprc_block .inc_product_desc_price_block').classList.remove('showPriceLabel')
        }
        modal_attr_block.querySelector('.inc_product_desc_titlprc_block .inc_product_desc_price_block').classList.add('hidePriceLabel');
    }

    var productObj = INC.dataStore.methods().getProductByAtt(findObj);
    if (Object.keys(productObj).length != 0) {
        var previousSKU = "";
        var getSelectorClassName = this.getSelectorClassName;
        previousSKU = productBlock.getAttribute('data-sku');
        productBlock.setAttribute('data-id', productObj.id);
        productBlock.setAttribute('data-sku', productObj.sku);
        productBlock.setAttribute('data-main_id', productObj.mainId);
        productBlock.setAttribute('data-bundle_id', productObj.bundleId);

        productModuleBlock.setAttribute('data-id', productObj.id);
        productModuleBlock.setAttribute('data-sku', productObj.sku);
        productModuleBlock.setAttribute('data-main_id', productObj.mainId);
        productModuleBlock.setAttribute('data-bundle_id', productObj.bundleId);

        
        var selLen = productModuleBlock.querySelectorAll('.inc_product_desc_att_block .selectvariantwrap').length

        var colorSel = false;
        var sizeSel = false;
        var zeroSel =false;
        var color = productModuleBlock.querySelectorAll('.inc_product_modal_block .inc_product_desc_att_block .inc_product_desc_att_color_list_block .inc_product_desc_att_color_list_item_block')
        
        if (sel_attr_text != "オプションを選択"){
            productModuleBlock.querySelector('.inc_product_desc_att_size_title_text').innerText = sel_attr_text
            productModuleBlock.querySelector('.inc_product_desc_att_size_title_text').setAttribute('title', sel_attr_text)
        }

        function getViewElement(className) {
            return productBlock.querySelector(getSelectorClassName(classNames, className));
        }

        var elImgBlock = getViewElement("productImgBlock");
        var elInfoText = getViewElement("productInfoText");
        var elImgBlock = getViewElement("productImgBlock");
        var elImgGalleryListBlock = getViewElement("productImgGalleryListBlock");
        var elTitleBlock = getViewElement("productTitleBlock");
        var elTitleText = getViewElement("productTitleText");
        var elMTitleBlock = getViewElement("productMaufactureTextBlock");
        var elMTitleText = getViewElement("productMaufactureText")
        var elPriceActiveText = getViewElement("productPriceActiveText");
        var elPriceActiveMsg = getViewElement("productPriceActiveTextMsg");
        var elPriceRegularText = getViewElement("productPriceRegularText");
        var elAttBlock = getViewElement("productAttBlock");
        var elAttColorTitleText = getViewElement("productAttColorTitleText");
        var elAttColorTitleTextSelected = getViewElement("productAttColorTitleTextSelected");
        var elAttColorListBlock = getViewElement("productAttColorListBlock");
        var elAttSizeTitleText = getViewElement("productAttSizeTitleText");
        var elAttSizeTitleTextSelected = getViewElement("productAttSizeTitleTextSelected");
        var elPackOfListBlock = getViewElement("productPackOfListBlock");
        var elQtyInputText = getViewElement("productQtyInputText");
        var elQtyDownBlock = getViewElement("productQtyDownBlock");
        var elQtyUpBlock = getViewElement("productQtyUpBlock");
        var elAddBlock = getViewElement("productAddBlock");
        var elAddText = getViewElement("productAddText");
        var elAddImg = getViewElement("productAddImg");
        var elworthPrice = getViewElement("productPriceWorthText");
        var elFullDesctext = getViewElement("productInfoFullDescText");
        var elGalleryRightArrow = getViewElement("productImgGalleryRightBlock");
        var elGallerylefttArrow = getViewElement("productImgGalleryLeftBlock");

        var eladdbtnqtyblock = getViewElement("productQtyAddBtnBlock");
        if (productBlock.parentNode.className.indexOf('inc_product_showcase_block') >= 0) {
            if (blockType != "pdp") {
                eladdbtnqtyblock.classList.add('active')
            }
        }
        var prod_modal = productModuleBlock.querySelector('.inc_product_modal_block')
        var elImgMainImg = elImgBlock.querySelector(getSelectorClassName(classNames, "productImgMainImg"));
        if (productBlock.querySelector('.inc_product_desc_block .inc_product_desc_att_block').classList.contains('1')){
            elImgMainImg.querySelectorAll('img')[0].setAttribute('src', productObj["imageURL"]);
            if (productModuleBlock.querySelector('.inc_product_showcase_block .inc_product_img_main_img img') != null){
                productModuleBlock.querySelector('.inc_product_showcase_block .inc_product_img_main_img img').setAttribute('src', productObj["imageURL"]);
            }
        } else if (productBlock.querySelector('.inc_product_desc_block .inc_product_desc_att_block').classList.contains('2')){
            if (zero_text != null && color_text != null){
                elImgMainImg.querySelectorAll('img')[0].setAttribute('src', productObj["imageURL"]);
                if (productModuleBlock.querySelector('.inc_product_showcase_block .inc_product_img_main_img img') != null){
                    productModuleBlock.querySelector('.inc_product_showcase_block .inc_product_img_main_img img').setAttribute('src', productObj["imageURL"]);
                }
            }
        }
        
        // elImgMainImg.querySelector('a').setAttribute('href', productObj["url"]);
        if (productBlock.parentNode.className.indexOf('inc_product_showcase_block') == -1 && productBlock.parentNode.className.indexOf('inc_product_modal_block') == -1) {
            elImgMainImg.querySelector('a').setAttribute('href', productObj["url"]+"?car=gr-dmg-bundle");
        }
        elImgMainImg.querySelector('a').setAttribute('otherImageList', productObj["otherImageList"])
        elImgMainImg.querySelector('a').setAttribute('imageURL', productObj["imageURL"])

        elImgMainImg.querySelectorAll('img')[0].setAttribute('data-mouseover', productObj["otherImageList"])
        elImgMainImg.querySelectorAll('img')[0].setAttribute('data-imageURL', productObj["imageURL"])

        var prod_ids = productModuleBlock.getAttribute('data-main_id')
        if (document.querySelector('.inc_pdp_bundle_product_list_items_block .inc_pdp_bundle_product_list_item_block[data-main_id="' + prod_ids + '"]') != null) {
            var tab_img = document.querySelector('.inc_pdp_bundle_product_list_items_block .inc_pdp_bundle_product_list_item_block[data-main_id="' + prod_ids + '"]');
            if (tab_img.querySelector('img') != null) {
                tab_img.querySelector('img').src = productObj["imageURL"]
            }
        }

        // elworthPrice.innerText = productObj.reviewsCount

        elImgGalleryListBlock.innerHTML = "";

        if ((productObj.otherImageList != null) && productObj.otherImageList.length >= 1) {
            var otimg = 0;
            productObj.otherImageList.forEach(function(otherImgURL) {
                var elOtherImgTag = INC.methods.generateHTMLTags('img', {
                    src: otherImgURL
                });
                elOtherImgTag.setAttribute('alt', productObj.name)
                elOtherImgTag.setAttribute('onerror', "this.src='" + productObj.imageURL + "'");
                var elImgGalleryListItemBlock = INC.methods.getElementChilds("productImgGalleryListItemBlock", blockType);

                var elImgGalleryListItemImg = elImgGalleryListItemBlock.querySelector(getSelectorClassName(classNames, "productImgGalleryListItemImg"));

                elImgGalleryListItemImg.appendChild(elOtherImgTag);
                elImgGalleryListItemBlock.setAttribute('index', otimg)
                elImgGalleryListItemBlock.addEventListener("click", function() {

                    Array.prototype.forEach.call(productBlock.querySelectorAll(getSelectorClassName(classNames, "productImgGalleryListItemBlock")), function(galleryListItemBlock) {
                        galleryListItemBlock.classList.remove("active");
                    });

                    elImgGalleryListItemBlock.classList.add("active");

                    elImgMainImg.querySelector('img').src = otherImgURL;
                    elImgMainImg.querySelector('img').setAttribute('onerror', "this.src='" + productObj.imageURL + "'");
                })

                elImgGalleryListBlock.appendChild(elImgGalleryListItemBlock);
                if (otimg == 0) {
                    // elImgGalleryListItemBlock.classList.add('active')
                }
                otimg++;
                if (productObj.otherImageList.length > 5) {
                    elImgGalleryListItemBlock.parentNode.classList.add("flex-start")
                }

            });
        }

        if (window.innerWidth > 819) {
            if ((productObj.otherImageList == null) || productObj.otherImageList.length < 4 || productObj.otherImageList.length == 1 || productObj.otherImageList == "") {
                elGalleryRightArrow.style.display = "none"
                elGallerylefttArrow.style.display = "none"
            }
        } else {
            if (productObj.otherImageList == null || productObj.otherImageList.length < 1 || productObj.otherImageList.length == 1 || productObj.otherImageList == "") {
                elGalleryRightArrow.style.display = "none"
                elGallerylefttArrow.style.display = "none"
            }
        }

        if (productObj.MakerName != null){
            var txtCount = productObj.manufacturer.length +  productObj.MakerName.length
            var mark_Manu =  productObj.MakerName + " " + productObj.manufacturer;
            if (productBlock.parentNode.classList.contains('inc_product_modal_block')){
                if (window.innerWidth < 820){
                    // if (txtCount > 24){
                    //     elMTitleText.querySelector('div').innerText = mark_Manu.substring(0, 24) + "...";;
                    // } else {
                        elMTitleText.querySelector('div').innerText = productObj.MakerName + " " + productObj.manufacturer;
                    // }

                } else {
                    // if (txtCount > 17){
                    //     elMTitleText.querySelector('div').innerText = mark_Manu.substring(0, 17) + "...";;
                    // } else {
                        elMTitleText.querySelector('div').innerText = productObj.MakerName + " " + productObj.manufacturer;
                    // }
                }
            } else {
                if (window.innerWidth < 820){
                    elMTitleText.querySelector('div').innerText = productObj.MakerName + " " + productObj.manufacturer;
                } else {
                    if (productObj.MakerName.length > 10){
                        elMTitleText.querySelector('div').innerText = productObj.MakerName.substring(0, 10) + "...";;
                    } else {
                        elMTitleText.querySelector('div').innerText = productObj.MakerName;
                    }
                }
            }
        }
        // elMTitleText.innerText = productObj.MakerName;
        elTitleText.querySelector('div').innerText = productObj.name

        if (productBlock.parentNode.className.indexOf('inc_product_showcase_block') == -1 && productBlock.parentNode.className.indexOf('inc_product_modal_block') == -1) {
            elMTitleText.querySelector('a').setAttribute('href', productObj["url"]+"?car=gr-dmg-bundle");
            elTitleText.querySelector('a').setAttribute('href', productObj["url"]+"?car=gr-dmg-bundle");
        }

        elTitleText.querySelector('a').setAttribute('title', productObj.name)
        if (productObj.MakerName != null){
            if (productBlock.parentNode.classList.contains('inc_product_modal_block')){
                elMTitleText.querySelector('a').setAttribute('title', productObj.MakerName + " " + productObj.manufacturer);
            } else {
                elMTitleText.querySelector('a').setAttribute('title', productObj.MakerName);
            }
        }

        elFullDesctext.setAttribute('aria-hidden', 'true')
        if (INC.config.usrIdfy == "nonLogin") { 
            // var activePrice = parseFloat(productObj.activePrice).toFixed(2).toString();
            // var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            if (productObj.MemberPrices !=undefined && productObj.MemberPrc != "") {
                var activePrice = parseFloat(productObj.MemberPrices.split('|')[0].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            } else {
                if (productObj.worthPrice != null && productObj.worthPricee != ""){
                    var activePrice = parseFloat(productObj.worthPrice.split('|')[0].split('=')[1]).toFixed(2).toString();
                    var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
                }
            }
        } else if (INC.config.usrIdfy == "level0"){
            if (productObj.MemberPrices !=undefined && productObj.MemberPrc != "") {
                var activePrice = parseFloat(productObj.MemberPrices.split('|')[1].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            } else {
                if (productObj.worthPrice != null && productObj.worthPricee != ""){
                    var activePrice = parseFloat(productObj.worthPrice.split('|')[1].split('=')[1]).toFixed(2).toString();
                    var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
                }
            }
        } else if (INC.config.usrIdfy == "level1"){
            if (productObj.MemberPrices !=undefined && productObj.MemberPrc != ""){
                var activePrice = parseFloat(productObj.MemberPrices.split('|')[2].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            } else {
                if (productObj.worthPrice != null && productObj.worthPricee != ""){
                    var activePrice = parseFloat(productObj.worthPrice.split('|')[2].split('=')[1]).toFixed(2).toString();
                    var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
                }
            }
        } else if (INC.config.usrIdfy == "level2"){
            if (productObj.MemberPrices !=undefined && productObj.MemberPrc != ""){
                var activePrice = parseFloat(productObj.MemberPrices.split('|')[3].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            } else {
                if (productObj.worthPrice != null && productObj.worthPricee != ""){
                    var activePrice = parseFloat(productObj.worthPrice.split('|')[3].split('=')[1]).toFixed(2).toString();
                    var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
                }
            }
        } else if (INC.config.usrIdfy == "level3"){
            if (productObj.MemberPrices !=undefined && productObj.MemberPrc != ""){
                var activePrice = parseFloat(productObj.MemberPrices.split('|')[4].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            } else {
                if (productObj.worthPrice != null && productObj.worthPricee != ""){
                    var activePrice = parseFloat(productObj.worthPrice.split('|')[4].split('=')[1]).toFixed(2).toString();
                    var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
                }
            }
        } else if (INC.config.usrIdfy == "level4"){
           if (productObj.MemberPrices !=undefined && productObj.MemberPrc != ""){
                var activePrice = parseFloat(productObj.MemberPrices.split('|')[5].split('=')[1]).toFixed(2).toString();
                var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
            } else {
                if (productObj.worthPrice != null && productObj.worthPricee != ""){
                    var activePrice = parseFloat(productObj.worthPrice.split('|')[5].split('=')[1]).toFixed(2).toString();
                    var regularPrice = parseFloat(productObj.regularPrice).toFixed(2).toString();
                }
            }
        }
        // var worthPrice = parseFloat(productObj.worthPrice).toFixed(2).toString();




        // elPriceActiveMsg.innerText = " + VAT"
        if (zero_text != null && color_text != null){
            if (elPriceRegularText != null){
                elPriceRegularText.innerText = "";
            }
            
            if (activePrice != undefined){
                bkupActPrc = activePrice
            }
            if (activePrice != regularPrice && regularPrice != "" && regularPrice != null && regularPrice != 0) {
                elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>" + "¥" + formatter.format(activePrice).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>"
                elPriceRegularText.innerHTML = INC.clientConfig.regularPricePrefix + "<span> 特価 </span>"  + INC.clientConfig.currencySymbol +
                    formatter.format(regularPrice) + "<span> ("+INC.config.prcText+") </span>"
            } else {
                if (activePrice == undefined){
                    elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol + "<span> 価格 </span>"  + "¥" + formatter.format(bkupActPrc).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>"
                } else {
                    elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol + "<span> 価格 </span>"  + "¥" + formatter.format(activePrice).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>"
                }
            }
        }
        if (productBlock.querySelector(getSelectorClassName(classNames, "productAddText")).innerText == "Added" || productBlock.querySelector(getSelectorClassName(classNames, "productAddText")).innerText == INC.config.AddedText || productBlock.parentNode.parentNode.querySelector(getSelectorClassName(classNames, "productAddText")).innerText == INC.config.AddedText) {
            if (!dataStore.hasOwnProperty('bundleCartProducts')) {
                dataStore['bundleCartProducts'] = {};
            }

            dataStore["bundleCartProducts"][productObj["sku"]] = dataStore["bundleCartProducts"][previousSKU];
            if (productObj["sku"] != previousSKU) {
                delete dataStore["bundleCartProducts"][previousSKU];
            }
        }

        var elQtyInput = elQtyInputText.querySelector('input');
        var sku = productBlock.getAttribute('data-sku');
        var bundle_id = productBlock.getAttribute('data-bundle_id');
        var main_id = productBlock.getAttribute('data-main_id');
        var qty = parseInt(elQtyInput.value);
        var pname = productBlock.querySelector('.inc_product_desc_title_text').innerText;
        var pprice = productBlock.querySelector('.inc_product_desc_price_active_text').innerText.replace('$', '');
        
        if (elAddText.parentNode.parentNode.querySelector('.inc_product_desc_add_img.checked') != null) {
            INC.methods.updateBundleCart({
                sku: sku,
                qty: qty
            }, "add", main_id, bundle_id, pname, pprice);
        }
        setTimeout(function() {
            if (elImgMainImg.querySelectorAll('img')[0].naturalWidth == 360) {
                elImgMainImg.querySelectorAll('img')[0].setAttribute('src', productObj["imageURLMain"]);
            }
        }, 200);
    }
}

INC.methods.createProductListItemBlock = function(productObj, blockType) {
    var classNames = INC.uiConfig[blockType].className;
    var productListItemBlock = this.getElementChilds("pdpBundleProductListItemBlock", blockType);
    var findObj = new INC.classes.FindObj({
        id: productObj.id,
        mainId: productObj.mainId
    });
    var productObj = INC.dataStore.methods().getProductById(findObj);
    // var productColorText = productObj["option"]["0"].text;
    // var productColorsCount = INC.dataStore.methods().getProductColorsObj(findObj)["colorArray"].length;
    var getSelectorClassName = this.getSelectorClassName;
    productListItemBlock.style.userSelect = "none";
    productListItemBlock.setAttribute('data-id', productObj.id);
    productListItemBlock.setAttribute('data-sku', productObj.sku);
    productListItemBlock.setAttribute('data-main_id', productObj.mainId);
    productListItemBlock.setAttribute('data-bundle_id', productObj.bundleId);
    if (productObj.ProductLevelDiscountMessage != null) {
        productListItemBlock.classList.add('promo_available')
    }

    function getViewElement(className) {
        return productListItemBlock.querySelector(getSelectorClassName(classNames, className));
    }
    var elTitleBlockMob = getViewElement("pdpBundleProductListItemTitleBlock");
    var elImgBlockMob = getViewElement("pdpBundleProductListItemImgBlock");
    var elcheckblock = getViewElement("pdpBundleProductListItemAddedBlock");
    var elImg = getViewElement("pdpBundleProductListItemImg");
    var elTitleText = getViewElement("pdpBundleProductListItemTitleText");
    var elPriceActive = getViewElement("pdpBundleProductListItemPriceActiveText");
    var elImgTag1 = INC.methods.generateHTMLTags('img', {
        src: productObj.imageURL
    });
    if(onloadpdp == true){
        elImgTag1.src = productObj.imageURL
    }
    elImgTag1.setAttribute('alt', productObj.name)
    elImg.appendChild(elImgTag1);
    if (productObj.ProductLevelDiscountMessage != null) {
        elImg.classList.add('Inc_offer')
    }
    productListItemBlock.addEventListener("click", function() {
        Array.prototype.forEach.call(document.querySelectorAll(getSelectorClassName(classNames, "productPackOfListBlock")), function(el) {
            el.classList.remove("active");
        });
        Array.prototype.forEach.call(document.querySelectorAll(getSelectorClassName(classNames, "productAttSizeListBlock")), function(attSizeListBlock) {
            attSizeListBlock.classList.remove("active");
        });

        var elListMainBlock = document.querySelector(getSelectorClassName(classNames, "pdpBundleProductListMainBlock"));
        Array.prototype.forEach.call(elListMainBlock.querySelectorAll(getSelectorClassName(classNames, "productModuleBlock")), function(productBlock) {
            productBlock.style.display = "none";
        });
        if (elListMainBlock.querySelector(getSelectorClassName(classNames, "productModuleBlock") + "[data-main_id=\"" + productObj.mainId + "\"]") != null) {
            elListMainBlock.querySelector(getSelectorClassName(classNames, "productModuleBlock") + "[data-main_id=\"" + productObj.mainId + "\"]").style.display = "block";
            if (elListMainBlock.querySelector(getSelectorClassName(classNames, "productModuleBlock") + "[data-main_id=\"" + productObj.mainId + "\"]").nextElementSibling != null) {
                elListMainBlock.querySelector(getSelectorClassName(classNames, "productModuleBlock") + "[data-main_id=\"" + productObj.mainId + "\"]").nextElementSibling.style.display = "block";
            } else {
                if (elListMainBlock.querySelector(getSelectorClassName(classNames, "productModuleBlock") + "[data-main_id=\"" + productObj.mainId + "\"]").previousElementSibling != null) {
                    elListMainBlock.querySelector(getSelectorClassName(classNames, "productModuleBlock") + "[data-main_id=\"" + productObj.mainId + "\"]").previousElementSibling.style.display = "block";
                }
            }
        } else if (document.querySelector(".inc_pdp_block .inc_product_module_block[data-main_id=\"" + productObj.mainId + "\"]") != null) {
            document.querySelector(".inc_pdp_block .inc_product_module_block[data-main_id=\"" + productObj.mainId + "\"]").style.display = "block";
            if (document.querySelectorAll(".inc_pdp_block .inc_pdp_bundle_product_list_main_block .inc_product_module_block")[0] != null) {
                document.querySelectorAll(".inc_pdp_block .inc_pdp_bundle_product_list_main_block .inc_product_module_block")[0].style.display = "block";
            }
            if (document.querySelectorAll(".inc_pdp_block .inc_pdp_bundle_product_list_main_block .inc_product_module_block")[1] != null) {
                document.querySelectorAll(".inc_pdp_block .inc_pdp_bundle_product_list_main_block .inc_product_module_block")[1].style.display = "block";
            }
        }

        Array.prototype.forEach.call(productListItemBlock.parentNode.querySelectorAll(getSelectorClassName(classNames, "pdpBundleProductListItemBlock")), function(pListItemBlock) {
            pListItemBlock.classList.remove("active");
        });

        productListItemBlock.classList.add("active");
    });
    elcheckblock.addEventListener("click", function() {
        if (document.querySelector('.inc_pdp_block .inc_product_module_block[data-main_id="' + productObj.mainId + '"]') != null) {
            var elselprod = document.querySelector('.inc_pdp_block .inc_product_module_block[data-main_id="' + productObj.mainId + '"]')
            elselprod.querySelector('.inc_product_desc_add_block').click()
            document.querySelector('.inc_pdp_bundle_product_list_items_show_more_less_block').click()
        }
    });
    elTitleBlockMob.addEventListener("click", function() {
        if (document.querySelector('.inc_pdp_block .inc_product_module_block[data-main_id="' + productObj.mainId + '"]') != null) {
            var elselprod = document.querySelector('.inc_pdp_block .inc_product_module_block[data-main_id="' + productObj.mainId + '"]')
            elselprod.querySelector('.inc_product_desc_add_block').click()
            document.querySelector('.inc_pdp_bundle_product_list_items_show_more_less_block').click()
        }
    });
    elImgBlockMob.addEventListener("click", function() {
        if (document.querySelector('.inc_pdp_block .inc_product_module_block[data-main_id="' + productObj.mainId + '"]') != null) {
            var elselprod = document.querySelector('.inc_pdp_block .inc_product_module_block[data-main_id="' + productObj.mainId + '"]')
            elselprod.querySelector('.inc_product_desc_add_block').click()
            document.querySelector('.inc_pdp_bundle_product_list_items_show_more_less_block').click()
        }
    });
    elTitleText.innerText = productObj.name
    if (INC.config.usrIdfy == "nonLogin") { 
        // elPriceActive.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.activePrice).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
        if (productObj.MemberPrices != undefined && productObj.MemberPrices != ""){
            elPriceActive.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.MemberPrices.split('|')[0].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
        } else {
            if (productObj.worthPrice != null && productObj.worthPrice != ""){
                elPriceActive.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.worthPrice.split('|')[0].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
            }
        }
    } else if (INC.config.usrIdfy == "level0"){
        if (productObj.MemberPrices != undefined && productObj.MemberPrices != ""){
            elPriceActive.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.MemberPrices.split('|')[1].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
        } else {
            if (productObj.worthPrice != null && productObj.worthPrice != ""){
                elPriceActive.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.worthPrice.split('|')[1].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
            }
        }
    } else if (INC.config.usrIdfy == "level1"){
        if (productObj.MemberPrices != undefined && productObj.MemberPrices != ""){
            elPriceActive.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.MemberPrices.split('|')[2].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
        } else {
            if (productObj.worthPrice != null && productObj.worthPrice != ""){
                elPriceActive.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.worthPrice.split('|')[2].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
            }
        }
    } else if (INC.config.usrIdfy == "level2"){
        if (productObj.MemberPrices != undefined && productObj.MemberPrices != ""){
            elPriceActive.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.MemberPrices.split('|')[3].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
        } else {
            if (productObj.worthPrice != null && productObj.worthPrice != ""){
                elPriceActive.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.worthPrice.split('|')[3].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
            }
        }
    } else if (INC.config.usrIdfy == "level3"){
        if (productObj.MemberPrices != undefined && productObj.MemberPrices != ""){
            elPriceActive.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.MemberPrices.split('|')[4].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
        } else {
            if (productObj.worthPrice != null && productObj.worthPrice != ""){
                elPriceActive.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.worthPrice.split('|')[4].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
            }
        }
    } else if (INC.config.usrIdfy == "level4"){
       if (productObj.MemberPrices != undefined && productObj.MemberPrices != ""){
            elPriceActive.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.MemberPrices.split('|')[5].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
        } else {
            if (productObj.worthPrice != null && productObj.worthPrice != ""){
                elPriceActive.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.worthPrice.split('|')[5].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
            }
        }
    }
   


    return productListItemBlock;
}

INC.methods.updateProductListItem = function(productObj, blockType) {

    if (blockType != "pdp") return;
    var classNames = INC.uiConfig[blockType].className;
    var findObj = new INC.classes.FindObj({
        id: productObj.id,
        mainId: productObj.mainId
    });
    var productObj = INC.dataStore.methods().getProductById(findObj);
    var getSelectorClassName = this.getSelectorClassName;

    var querySelectorString = getSelectorClassName(classNames, "pdpBundleProductListItemBlock") + "[data-id=\"" + productObj.id + "\"]";
    

    var productListItemBlock = document.querySelector(querySelectorString);

    function getViewElement(className) {
        return productListItemBlock.querySelector(getSelectorClassName(classNames, className));
    }

    var elImg = getViewElement("pdpBundleProductListItemImg");

    elImg.querySelector('img').setAttribute('src', productObj.imageURL);

}

INC.methods.updateBundleCart = function(bundleCartObj, type, main_id, bundle_id, pname, pprice) {
   
    var dataStore = INC.dataStore;
    var listToDelete = []
    if (!dataStore.hasOwnProperty('bundleCartProducts')) {
        dataStore['bundleCartProducts'] = {};
        INC.config.pdpaddedProductList = []
        INC.config.bundle_tracking = []
        INC.config.dupBasket = []
    }

    switch (type) {
        case "add":
            dataStore["bundleCartProducts"][bundleCartObj["sku"]] = bundleCartObj["qty"];

            if (INC.config.pdpaddedProductList.indexOf(main_id) == -1) {
                INC.config.pdpaddedProductList.push(main_id)
                INC.config.bundle_tracking.push({
                    id: main_id,
                    bid: bundle_id,
                    pname: pname,
                    prc: pprice,
                    qty: bundleCartObj["qty"]

                });
            }
            break;
        case "sub":
            delete dataStore["bundleCartProducts"][bundleCartObj["sku"]];
            INC.config.pdpaddedProductList.remove_prod_list = function() {
                var what, a = arguments,
                    L = a.length,
                    ax;
                while (L && this.length) {
                    what = a[--L];
                    while ((ax = this.indexOf(what)) !== -1) {
                        this.splice(ax, 1);
                    }
                }
                return this;
            };
            listToDelete[0] = main_id
            for (var i = 0; i < INC.config.bundle_tracking.length; i++) {
                var obj = INC.config.bundle_tracking[i];
                if (obj != undefined) {
                    if (listToDelete.indexOf(obj.id) !== -1) {
                        INC.config.bundle_tracking.splice(i, 1);
                    }
                }
            }
            INC.config.bundle_tracking = INC.config.bundle_tracking
            INC.config.pdpaddedProductList.remove_prod_list(main_id);
            INC.config.pdpaddedProductList.remove_prod_list = function() {
                var what, a = arguments,
                    L = a.length,
                    ax;
                while (L && this.length) {
                    what = a[--L];
                    while ((ax = this.indexOf(what)) !== -1) {
                        this.splice(ax, 1);
                    }
                }
                return this;
            };
            INC.config.pdpaddedProductList.remove_prod_list(main_id);
            break;
    }

    if (INC.config.pageType == "pdp") this.calculateBundleTotal();
}

INC.methods.calculateBundleTotal = function() {

    var dataStore = INC.dataStore;
    var bundleCartProducts = dataStore["bundleCartProducts"];
    var productListObj = dataStore.dataStoreObj;
    var duplicate_check_produ = []
    var totalRegularPrice = 0;
    var totalActivePrice = 0;
    var totalMainProduct = 0;
    var totalAddonProducts = 0;
    var totalAddonProductsCount = 0;
    var totalProductCount = 0;
    var total_qty = 0
    var total_collect_point = 0
    var mainId = INC.methods.getProductIdFromWebPage();
    
    if (bundleCartProducts != null && bundleCartProducts != undefined) {
        Object.keys(bundleCartProducts).forEach(function(sku) {
            for (mainProductId in productListObj) {
                for (childProductId in productListObj[mainProductId]) {
                    if (sku == productListObj[mainProductId][childProductId]["sku"]) {
                        if (duplicate_check_produ.indexOf(productListObj[mainProductId][childProductId]["sku"]) == -1) {
                            duplicate_check_produ.push(productListObj[mainProductId][childProductId]["sku"])
                            if (INC.config.usrIdfy == "nonLogin") { 
                                // var regularPrice = productListObj[mainProductId][childProductId]["regularPrice"];
                                // var activePrice = productListObj[mainProductId][childProductId]["activePrice"];
                                if (productListObj[mainProductId][childProductId]["MemberPrices"] != undefined  &&  productListObj[mainProductId][childProductId]["MemberPrc"] != undefined){
                                    var regularPrice = productListObj[mainProductId][childProductId]["regularPrice"];
                                    var activePrice = productListObj[mainProductId][childProductId]["MemberPrices"].split('|')[0].split('=')[1];
                                } else {
                                    if (productListObj[mainProductId][childProductId]["worthPrice"] != null && productListObj[mainProductId][childProductId]["worthPrice"] != null){
                                        var regularPrice = productListObj[mainProductId][childProductId]["regularPrice"];
                                        var activePrice = productListObj[mainProductId][childProductId]["worthPrice"].split('|')[0].split('=')[1];
                                    }
                                }
                            } else if (INC.config.usrIdfy == "level0"){
                                if (productListObj[mainProductId][childProductId]["MemberPrices"] != undefined  &&  productListObj[mainProductId][childProductId]["MemberPrc"] != undefined){
                                    var regularPrice = productListObj[mainProductId][childProductId]["regularPrice"];
                                    var activePrice = productListObj[mainProductId][childProductId]["MemberPrices"].split('|')[1].split('=')[1];
                                } else {
                                    if (productListObj[mainProductId][childProductId]["worthPrice"] != null && productListObj[mainProductId][childProductId]["worthPrice"] != null){
                                        var regularPrice = productListObj[mainProductId][childProductId]["regularPrice"];
                                        var activePrice = productListObj[mainProductId][childProductId]["worthPrice"].split('|')[1].split('=')[1];
                                    }
                                }
                            } else if (INC.config.usrIdfy == "level1"){
                                if (productListObj[mainProductId][childProductId]["MemberPrices"] != undefined  &&  productListObj[mainProductId][childProductId]["MemberPrc"] != undefined){
                                    var regularPrice = productListObj[mainProductId][childProductId]["regularPrice"];
                                    var activePrice = productListObj[mainProductId][childProductId]["MemberPrices"].split('|')[2].split('=')[1];
                                } else {
                                    if (productListObj[mainProductId][childProductId]["worthPrice"] != null && productListObj[mainProductId][childProductId]["worthPrice"] != null){
                                        var regularPrice = productListObj[mainProductId][childProductId]["regularPrice"];
                                        var activePrice = productListObj[mainProductId][childProductId]["worthPrice"].split('|')[2].split('=')[1];
                                    }
                                }
                            } else if (INC.config.usrIdfy == "level2"){
                                if (productListObj[mainProductId][childProductId]["MemberPrices"] != undefined  &&  productListObj[mainProductId][childProductId]["MemberPrc"] != undefined){
                                    var regularPrice = productListObj[mainProductId][childProductId]["regularPrice"];
                                    var activePrice = productListObj[mainProductId][childProductId]["MemberPrices"].split('|')[3].split('=')[1];
                                } else {
                                    if (productListObj[mainProductId][childProductId]["worthPrice"] != null && productListObj[mainProductId][childProductId]["worthPrice"] != null){
                                        var regularPrice = productListObj[mainProductId][childProductId]["regularPrice"];
                                        var activePrice = productListObj[mainProductId][childProductId]["worthPrice"].split('|')[3].split('=')[1];
                                    }
                                }
                            } else if (INC.config.usrIdfy == "level3"){
                                if (productListObj[mainProductId][childProductId]["MemberPrices"] != undefined  &&  productListObj[mainProductId][childProductId]["MemberPrc"] != undefined){
                                    var regularPrice = productListObj[mainProductId][childProductId]["regularPrice"];
                                    var activePrice = productListObj[mainProductId][childProductId]["MemberPrices"].split('|')[4].split('=')[1];
                                } else {
                                    if (productListObj[mainProductId][childProductId]["worthPrice"] != null && productListObj[mainProductId][childProductId]["worthPrice"] != null){
                                        var regularPrice = productListObj[mainProductId][childProductId]["regularPrice"];
                                        var activePrice = productListObj[mainProductId][childProductId]["worthPrice"].split('|')[4].split('=')[1];
                                    }
                                }
                            } else if (INC.config.usrIdfy == "level4"){
                                if (productListObj[mainProductId][childProductId]["MemberPrices"] != undefined  &&  productListObj[mainProductId][childProductId]["MemberPrc"] != undefined){
                                    var regularPrice = productListObj[mainProductId][childProductId]["regularPrice"];
                                    var activePrice = productListObj[mainProductId][childProductId]["MemberPrices"].split('|')[5].split('=')[1];
                                } else {
                                    if (productListObj[mainProductId][childProductId]["worthPrice"] != null && productListObj[mainProductId][childProductId]["worthPrice"] != null){
                                        var regularPrice = productListObj[mainProductId][childProductId]["regularPrice"];
                                        var activePrice = productListObj[mainProductId][childProductId]["worthPrice"].split('|')[5].split('=')[1];
                                    }
                                }
                            }
                            
                            totalRegularPrice = totalRegularPrice + (parseFloat(bundleCartProducts[sku]) * regularPrice);
                            totalActivePrice = totalActivePrice + (parseFloat(bundleCartProducts[sku])) * activePrice;

                            total_qty = total_qty + parseInt(bundleCartProducts[sku])

                            if (productListObj[mainProductId][childProductId]["worthPrice"] != "" && productListObj[mainProductId][childProductId]["worthPrice"] != null) {
                                total_collect_point = total_collect_point + +(productListObj[mainProductId][childProductId]["worthPrice"] * parseInt(bundleCartProducts[sku]))
                            }
                            if (productListObj[mainProductId][childProductId].mainId == mainId) {
                                totalProductCount++;
                                totalMainProduct = totalMainProduct + (parseInt(bundleCartProducts[sku]) * activePrice);
                            }

                            // if (getProductBySKU(findObj).mainId != mainId) {
                            if (productListObj[mainProductId][childProductId].mainId != mainId) {
                                totalProductCount++;
                                totalAddonProductsCount++;
                                totalAddonProducts = totalAddonProducts + (parseInt(bundleCartProducts[sku]) * activePrice);
                            }
                        }
                    }
                }
            }
        });
    }


    var priceObj = {
        totalActivePrice: parseFloat(totalActivePrice).toFixed(2),
        totalRegularPrice: parseFloat(totalRegularPrice).toFixed(2),
        totalMainProduct: totalMainProduct,
        totalAddonProducts: totalAddonProducts,
        totalAddonProductsCount: totalAddonProductsCount,
        totalProductCount: totalProductCount,
        total_qty: total_qty,
        total_collect_point: total_collect_point
    }

    this.updateBundleCartBlock(priceObj);
}

INC.methods.updateBundleCartBlock = function(priceObj) {
    var classNames = INC.uiConfig.pdp.className;
    var dataStore = INC.dataStore;
    var bundleCartProducts = dataStore["bundleCartProducts"];
    var getSelectorClassName = INC.methods.getSelectorClassName;
    
    var totalRegularPrice = priceObj.totalRegularPrice;
    var totalActivePrice = priceObj.totalActivePrice;
    var totalMainProduct = priceObj.totalMainProduct;
    var totalAddonProducts = priceObj.totalAddonProducts;
    var totalAddonProductsCount = priceObj.totalAddonProductsCount;
    var totalProductCount = priceObj.totalProductCount;
    var total_qty_item = priceObj.total_qty
    var total_col_point = priceObj.total_collect_point
    var elPdpBundleCartBlock = document.querySelector(this.getSelectorClassName(classNames, "pdpModalBundleCartBlock"));
    if(isNaN(parseFloat(totalActivePrice)) == true && emailNancheck == false){
        emailNancheck = true
        var formData = new FormData();
        formData.append("EmailId", "taka@increasingly.com");
        formData.append("Subject", 'GDO NAN issue Testing email');
        formData.append("Message", window.location.href);
        var xhr = new XMLHttpRequest();
        xhr.open("POST", '//api.increasingly.co/SendEmail', true);
        xhr.send(formData);
       return;a
    }
    function getViewElement(className) {
        return elPdpBundleCartBlock.querySelector(getSelectorClassName(classNames, className));
    }

    var elBundleCartAddedBlock = getViewElement("pdpBundleCartAddedBlock");
    var elBundleCartSummaryViewBtnCount = getViewElement("pdpBundleCartSummaryViewBtnCount");
    var elBundleCartPriceRegularText = getViewElement("pdpBundleCartSummaryPriceRegularText");
    var elBundleCartPriceActiveText = getViewElement("pdpBundleCartSummaryPriceActiveText");
    var elBundleCartPriceActiveTextMsg = getViewElement("pdpBundleCartSummaryPriceActiveTextMsg");
    var elBundleCartTitleTextcount = getViewElement("pdpBundleCartTitleText");
    var elBundleCartTitleTextblock = getViewElement("pdpBundleCartTitleTextBlock");

    elBundleCartAddedBlock.innerHTML = "";

    var countcollect = 0;
    var totol_qty_item = 0;
    var bundleCartProductsArray = Object.keys(bundleCartProducts);
    // elBundleCartSummaryViewBtnCount.innerText = bundleCartProductsArray.length;

    if (window.innerWidth < 820) {
        elBundleCartTitleTextcount.innerText = "追加したアイテム"
    }


    for (var i = 0; i < bundleCartProductsArray.length; i++) {
        var findObj = new INC.classes.FindObj({
            sku: bundleCartProductsArray[i]
        });
        var productObj = INC.dataStore.methods().getProductBySKU(findObj);
        var productId = productObj.id;
        var prepen_elm = this.createBundleCartAddedProductBlock(productId, bundleCartProducts[bundleCartProductsArray[i]], "pdp")
        if (elBundleCartAddedBlock != null || elBundleCartAddedBlock != undefined) {
            elBundleCartAddedBlock.insertBefore(prepen_elm, elBundleCartAddedBlock.childNodes[0]);
        }
        countcollect = +countcollect + +productObj.worthPrice
        if (window.innerWidth < 820) {
            var mainPrdId = document.querySelector('.inc_pdp_product-main_block .inc_product_module_block').getAttribute('data-main_id')
            if (bundleCartProductsArray.length == 1 && mainPrdId == productObj.mainsku) {
                if (document.querySelector('.inc_added_img_block .inc_added_item_img_block') != null) {
                    document.querySelector('.inc_added_img_block .inc_added_item_img_block').style.display = "none"
                }
            } else {
                if (document.querySelector('.inc_added_img_block .inc_added_item_img_block') != null) {
                    document.querySelector('.inc_added_img_block .inc_added_item_img_block').style.display = "flex"
                }
            }
            if (mainPrdId != productObj.mainsku) {
                // if (i != 0){
                if (document.querySelector('.inc_added_item_img_block') != null) {
                    document.querySelector('.inc_added_item_img_block').innerHTML = "";
                }
                if (document.querySelector('.inc_added_item_img_block') != null) {
                    var elImg = document.querySelector('.inc_added_item_img_block')
                    var elImgs = document.querySelectorAll('.inc_added_item_img_block img')
                    if (elImgs.length > 0) {
                        for (z = 0; z < elImgs.length; z++) {
                            if (elImgs[z].src != undefined) {
                                if (elImgs[z].src != productObj.imageURL) {
                                    var elImgTag1 = this.generateHTMLTags('img', {
                                        src: productObj.imageURL
                                    });
                                    elImgTag1.setAttribute('alt', productObj.name)
                                    elImg.appendChild(elImgTag1);
                                }
                            } else {
                                var elImgTag1 = this.generateHTMLTags('img', {
                                    src: productObj.imageURL
                                });
                                elImgTag1.setAttribute('alt', productObj.name)
                                elImg.appendChild(elImgTag1);
                            }
                        }
                    } else {
                        if (document.querySelector('.inc_pdp_product-main_block .inc_product_module_block') != null) {

                            var elImgTag1 = this.generateHTMLTags('img', {
                                src: productObj.imageURL
                            });
                            elImgTag1.setAttribute('alt', productObj.name)
                            elImg.appendChild(elImgTag1);
                        }
                    }
                }
            }
        }

    }

    if (window.innerWidth > 819) {
        if (bundleCartProductsArray.length == 0) {
            if (document.querySelector('.inc_pdp_bundle_cart_added_block') != null) {
                document.querySelector('.inc_pdp_bundle_cart_added_block').classList.add('active');
            }
        } else {
            if (document.querySelector('.inc_pdp_bundle_cart_added_block') != null) {
                document.querySelector('.inc_pdp_bundle_cart_added_block').classList.remove('active');
            }
        }
    }

    if (window.innerWidth < 819) {
        if (bundleCartProductsArray.length == 0) {
            if (document.querySelector('.inc_added_img_block') != null) {
                document.querySelector('.inc_added_img_block').style.display = "none";
            }
            if (document.querySelector('.inc_pdp_bundle_cart_block') != null) {
                document.querySelector('.inc_pdp_bundle_cart_block').classList.add('mobActive');
            }
        } else {
            if (document.querySelector('.inc_added_img_block') != null) {
                document.querySelector('.inc_added_img_block').style.display = "flex";
            }
            if (document.querySelector('.inc_pdp_bundle_cart_block') != null) {
                document.querySelector('.inc_pdp_bundle_cart_block').classList.remove('mobActive');
            }
        }
    }

    if (!(bundleCartProductsArray.length > 4)) {
        var elBundleCartAddedProductDiv = document.createElement('div');
        elBundleCartAddedProductDiv.classList.add("bundle_cart_added_product_div");
        elBundleCartAddedProductDiv.innerText = "アイテムは追加されません";
        elBundleCartAddedBlock.appendChild(elBundleCartAddedProductDiv);
    }

    elBundleCartPriceRegularText.style.display = "none";
    if (totalActivePrice != totalRegularPrice) {
        elBundleCartPriceRegularText.style.display = "flex";
    }

    elBundleCartPriceActiveText.innerHTML = INC.clientConfig.currencySymbol + "¥" +  formatter.format(totalActivePrice).replace('￥', '').replace('¥', '')+ "<span> ("+INC.config.prcText+") </span>";
    elBundleCartPriceRegularText.parentNode.parentNode.parentNode.classList.remove('simple_price')
    elBundleCartPriceRegularText.parentNode.parentNode.parentNode.classList.remove('is_special_price')
    elBundleCartPriceRegularText.parentNode.parentNode.parentNode.parentNode.classList.remove('simple_price')
    elBundleCartPriceRegularText.parentNode.parentNode.parentNode.parentNode.classList.remove('is_special_price')
    if (totalRegularPrice != totalActivePrice && totalRegularPrice != null && totalRegularPrice != "") {
        elBundleCartPriceRegularText.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(totalRegularPrice).replace('￥', '').replace('¥', '')+ "<span> ("+INC.config.prcText+") </span>";
        elBundleCartPriceRegularText.parentNode.parentNode.parentNode.parentNode.classList.add('is_special_price')
        elBundleCartPriceRegularText.parentNode.parentNode.parentNode.classList.add('is_special_price')
    } else {
        elBundleCartPriceRegularText.parentNode.parentNode.parentNode.classList.add('simple_price')
    }

    if (elPdpBundleCartBlock != null && elPdpBundleCartBlock != undefined) {
        var bundleCartProductsLength = Object.keys(bundleCartProducts).length;

        var elBundleCartTitleText = getViewElement("pdpBundleCartSummaryTitleText");
        var elBundleCartAddBtnText = getViewElement("pdpBundleCartSummaryAddBtnText");
        // elBundleCartAddBtnText.style.textTransform = "none"
        if (total_qty_item == 1){
            if (window.innerWidth < 820){
                elBundleCartTitleText.innerHTML = "<span>"+INC.config.TotalText+"</span>"+total_qty_item+"<span>"+"点"+"</span>" 
            } else {
                elBundleCartTitleText.innerHTML = "<span>"+INC.config.TotalText+"</span>"+"("+total_qty_item+"<span>"+"点"+")"+"</span>" 
            } 
           elBundleCartAddBtnText.innerText = INC.config.AddToCartText 
        }

        if (total_qty_item > 1) {
            if (window.innerWidth < 820){
                elBundleCartTitleText.innerHTML = "<span>"+INC.config.TotalText+"</span>"+total_qty_item+"<span>"+"点"+"</span>" 
            } else {
                elBundleCartTitleText.innerHTML = "<span>"+INC.config.TotalText+"</span>"+"("+total_qty_item+"<span>"+"点"+")"+"</span>" 
            }
            elBundleCartAddBtnText.classList.add('inc_text');
            elBundleCartAddBtnText.innerText = INC.config.AddToCarts
        }

        if (!(total_qty_item > 1)) {
            if (window.innerWidth < 820){
                elBundleCartTitleText.innerHTML = "<span>"+INC.config.TotalText+"</span>"+total_qty_item+"<span>"+"点"+"</span>" 
            } else {
                elBundleCartTitleText.innerHTML = "<span>"+INC.config.TotalText+"</span>"+"("+total_qty_item+"<span>"+"点"+")"+"</span>" 
            }
            if (elBundleCartAddBtnText.classList.contains('inc_text')){
                elBundleCartAddBtnText.classList.remove('inc_text')
            }
            elBundleCartAddBtnText.innerText = INC.config.AddToCartText;
        }

    }

    var elPriceMainTitleText = elPdpBundleCartBlock.querySelector(getSelectorClassName(classNames, "pdpBundleCartPriceMainTitleText"));
    var elPriceMainFigureText = elPdpBundleCartBlock.querySelector(getSelectorClassName(classNames, "pdpBundleCartPriceMainFigureText"));
    var elPriceAddonTitleText = elPdpBundleCartBlock.querySelector(getSelectorClassName(classNames, "pdpBundleCartPriceAddonTitleText"));
    var elPriceAddonFigureText = elPdpBundleCartBlock.querySelector(getSelectorClassName(classNames, "pdpBundleCartPriceAddonFigureText"));
    var elPriceRegularText = elPdpBundleCartBlock.querySelector(getSelectorClassName(classNames, "pdpBundleCartSummaryPriceRegularText"));
    var elPriceActiveText = elPdpBundleCartBlock.querySelector(getSelectorClassName(classNames, "pdpBundleCartSummaryPriceActiveText"));

    elPriceMainTitleText.innerText = "Main Product Price";
    elPriceAddonTitleText.innerText = "Add-on(s) Selected  " + ((totalAddonProductsCount > 0) ? totalAddonProductsCount : "");

    elPriceMainFigureText.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>" +  "¥" + formatter.format(totalMainProduct).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
    elPriceAddonFigureText.innerHTML = INC.clientConfig.currencySymbol+ "<span> 特価 </span>"  + "¥" +  formatter.format(totalAddonProducts).replace('￥', '').replace('¥', '')+ "<span> ("+INC.config.prcText+") </span>";
    elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol +  "¥" + formatter.format(totalActivePrice).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
    
    setTimeout(function() {
        if (Object.keys(INC.dataStore.bundleCartProducts).length == 0) {
            // elBundleCartAddBtnText.parentNode.parentNode.setAttribute('style', 'pointer-events: none;opacity: 0.5;')
            elBundleCartAddBtnText.parentNode.parentNode.parentNode.classList.add('cartEmpty')
            elBundleCartAddBtnText.parentNode.parentNode.parentNode.classList.remove('incActive')
            // onloadpdp = false
            // document.querySelectorAll(getSelectorClassName(classNames, "productAddBlock"))[1].click();
            // setTimeout(function(){
            //     onloadpdp = true
            // onloadpdp_delete= 
            // },100)
        } else {
            // elBundleCartAddBtnText.parentNode.parentNode.setAttribute('style', 'pointer-events: auto;opacity: 1;')
            if (document.querySelector('.inc_pdp_bundle_cart_summary_add_block').classList.contains('cartEmpty')){
                document.querySelector('.inc_pdp_bundle_cart_summary_add_block').classList.remove('cartEmpty')
                document.querySelector('.inc_pdp_bundle_cart_summary_add_block').classList.add('incActive')
            }
        }
    }, 100);


}

INC.methods.createBundleCartAddedProductBlock = function(productId, qty, blockType) {

    var classNames = INC.uiConfig[blockType].className;
    var addedProductBlock = this.getElementChilds("pdpBundleCartAddedProductBlock", blockType);
    var findObj = new INC.classes.FindObj({
        id: productId
    });
    var productObj = INC.dataStore.methods().getProductById(findObj);
    var getSelectorClassName = INC.methods.getSelectorClassName;
    addedProductBlock.setAttribute('data-id', productObj.id);
    addedProductBlock.setAttribute('data-sku', productObj.sku);
    addedProductBlock.setAttribute('data-main_id', productObj.mainId);
    addedProductBlock.setAttribute('data-bundle_id', productObj.bundleId);

    //current  active prod
    var color = "";
    var size = "";
    var just_check_prod_block = document.querySelector('.inc_product_module_block[data-main_id="' + productObj.mainId + '"]')
    if (just_check_prod_block != null) {
        if (just_check_prod_block.querySelector('.inc_product_desc_att_size_list_item_img_block.active div') != null) {
            size = just_check_prod_block.querySelector('.inc_product_desc_att_size_list_item_img_block.active div').innerText
        }
        if (just_check_prod_block.querySelector('.inc_product_desc_att_color_list_item_block.active .inc_product_desc_att_color_list_item_img_block') != null) {
            color = just_check_prod_block.querySelector('.inc_product_desc_att_color_list_item_block.active .inc_product_desc_att_color_list_item_img_block').getAttribute('data-color')
        }
    }

    //end
    function getViewElement(className) {
        return addedProductBlock.querySelector(getSelectorClassName(classNames, className));
    }

    var elTitleText = getViewElement("pdpBundleCartAddedProductTitleText");
    var elImg = getViewElement("pdpBundleCartAddedProductImg");
    var elPriceActiveText = getViewElement("pdpBundleCartAddedProductPriceText");
    var elAttColorText = getViewElement("pdpBundleCartAddedProductAttColorText");
    var elAttsizeText = getViewElement("pdpBundleCartAddedProductAttSizeText");
    var elQtyText = getViewElement("pdpBundleCartAddedProductQtyText");
    var elEditTextBlock = getViewElement("pdpBundleCartAddedProductEditTextBlock");
    var elEditText = getViewElement("pdpBundleCartAddedProductEditText");
    var elEditImgBlock = getViewElement("pdpBundleCartAddedProductEditImgBlock");
    var elEditImg = getViewElement("pdpBundleCartAddedProductEditImg");

    // elTitleText.innerText = productObj.name;
    var elImgTag1 = this.generateHTMLTags('img', {
        src: productObj.imageURL
    });
    elImgTag1.setAttribute('alt', productObj.name)
    elImg.appendChild(elImgTag1);

    var prod_module_elm = document.querySelector('.inc_pdp_block .inc_product_module_block[data-main_id="' + productObj.mainId + '"]')
    var zero_text = ""
    var size_text = ""
    var color_text = ""
    var third_text = ""
    if (prod_module_elm != null) {
        var modal_attr_block = prod_module_elm.querySelector('.inc_product_modal_block')
        zero_text = modal_attr_block.querySelector('.inc_product_desc_att_block').getAttribute('data-zero');
        size_text = modal_attr_block.querySelector('.inc_product_desc_att_block').getAttribute('data-size');
        color_text = modal_attr_block.querySelector('.inc_product_desc_att_block').getAttribute('data-color');
        third_text = modal_attr_block.querySelector('.inc_product_desc_att_block').getAttribute('data-third');
    }
    var sel_attr_text = ""

    
    if (color_text != "" && color_text != null) {
        findObj.colorText = color_text
        if (sel_attr_text == "") {
            sel_attr_text = color_text
        } else {
            sel_attr_text = color_text
        }

    } else {
        findObj.colorText = ""
    }
    if (zero_text != "" && zero_text != null) {
        findObj.zeroText = zero_text
        if (sel_attr_text == "") {
            sel_attr_text = zero_text
        } else {
            sel_attr_text = sel_attr_text + " / " + zero_text
        }
    } else {
        findObj.zeroText = ""
    }
    if (size_text != "" && size_text != null) {
        findObj.sizeText = size_text
        sel_attr_text =   sel_attr_text+ " / " + size_text
    } else {
        findObj.sizeText = ""
    }
    // if (third_text != undefined) {
    //     sel_attr_text = sel_attr_text + " / " + third_text
    // }

    if (color_text != "" && color_text != undefined && color_text != null) {
        elAttColorText.innerText = "Color : " + sel_attr_text;
        elAttColorText.parentNode.parentNode.setAttribute('title', sel_attr_text)
    } else if (size_text != "" && size_text != null || zero_text != "" && zero_text != null) {
        elAttColorText.innerText = "Size : " + sel_attr_text;
        elAttColorText.parentNode.parentNode.setAttribute('title', sel_attr_text)
    }

    // elAttColorText.style.textTransform = "none"
    var pTitleDiv = document.createElement('div');
    pTitleDiv.innerHTML = productObj.name;
    pTitleDiv.setAttribute('style', 'text-transform: unset;')
    elQtyText.innerHTML = qty

    var pLink = document.createElement('a');
    pLink.title = productObj.name //+ ((attColorText.length > 0) ? (" | " + attColorText) : "");

    // pLink.setAttribute('href', productObj["url"]);
    pLink.appendChild(pTitleDiv);
    elTitleText.appendChild(pLink);
    if (INC.config.usrIdfy == "nonLogin") { 
        // elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>" + "¥" +  formatter.format(productObj.activePrice * qty).replace('￥', '').replace('¥', '')+ "<span> ("+INC.config.prcText+") </span>";
        if (productObj.MemberPrices != undefined && productObj.MemberPrices != "") {
            elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.MemberPrices.split('|')[0].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
        } else {
            if (productObj.worthPrice != null && productObj.worthPrice != "") {
                elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.worthPrice.split('|')[0].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
            }
        }
    } else if (INC.config.usrIdfy == "level0"){
        if (productObj.MemberPrices != undefined && productObj.MemberPrices != "") {
            elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.MemberPrices.split('|')[1].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
        } else {
            if (productObj.worthPrice != null && productObj.worthPrice != "") {
                elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.worthPrice.split('|')[1].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
            }
        }
    } else if (INC.config.usrIdfy == "level1"){
        if (productObj.MemberPrices != undefined && productObj.MemberPrices != "") { 
            elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.MemberPrices.split('|')[2].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
        } else {
            if (productObj.worthPrice != null && productObj.worthPrice != "") {
                elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.worthPrice.split('|')[2].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
            }
        }
    } else if (INC.config.usrIdfy == "level2"){
        if (productObj.MemberPrices != undefined && productObj.MemberPrices != "") { 
            elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.MemberPrices.split('|')[3].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
        } else {
            if (productObj.worthPrice != null && productObj.worthPrice != "") {
                elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.worthPrice.split('|')[3].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
            }
        }
    } else if (INC.config.usrIdfy == "level3"){
        if (productObj.MemberPrices != undefined && productObj.MemberPrices != "") { 
            elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.MemberPrices.split('|')[4].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
        } else {
            if (productObj.worthPrice != null && productObj.worthPrice != "") {
                elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.worthPrice.split('|')[4].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
            }
        }
    } else if (INC.config.usrIdfy == "level4"){
        if (productObj.MemberPrices != undefined && productObj.MemberPrices != "") { 
            elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.MemberPrices.split('|')[5].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
        } else {
            if (productObj.worthPrice != null && productObj.worthPrice != "") {
                elPriceActiveText.innerHTML = INC.clientConfig.currencySymbol + "<span> 特価 </span>"  + "¥" +  formatter.format(productObj.worthPrice.split('|')[5].split('=')[1]).replace('￥', '').replace('¥', '') + "<span> ("+INC.config.prcText+") </span>";
            }
        }
    }
    
    elEditTextBlock.addEventListener("click", function() {
        if (INC.config.deviceType == "mobile") {
            if (document.querySelector(getSelectorClassName(classNames, "pdpBundleProductListItemBlock") + '[data-main_id="' + productObj.mainId + '"]') != null)
                document.querySelector(getSelectorClassName(classNames, "pdpBundleProductListItemBlock") + '[data-main_id="' + productObj.mainId + '"]').click();
        }

        

        setTimeout(function() {
            document.querySelector(getSelectorClassName(classNames, "productBlock") + '[data-id="' + productObj.id + '"]').querySelector(getSelectorClassName(classNames, "productAttBlock")).click();
        }, 50);
    });
    //if(INC.methods.getProductIdFromWebPage() == productObj.bundledProductId){
    elEditText.parentNode.parentNode.classList.add('elipsis_inc')
    elEditText.innerText = INC.config.EditText;
    //}
    elEditImgBlock.addEventListener("click", function() {
        document.querySelector(getSelectorClassName(classNames, "productBlock") + '[data-id="' + productObj.id + '"]').querySelector(getSelectorClassName(classNames, "productAddBlock")).click();
    });
    elEditImg.innerText = "";
    return addedProductBlock;
}

INC.methods.clear = function() {
    if (document.querySelector('.sidebar_outer') != null) {
        Array.prototype.forEach.call(document.querySelectorAll('.sidebar_outer'), function(el) {
            el.parentNode.removeChild(el);
        });

        Array.prototype.forEach.call(document.querySelectorAll(".sidebar_outer"), function(el) {
            el.parentNode.removeChild(el);
        });
        Array.prototype.forEach.call(document.querySelectorAll(".inc_sidebar_overlay_block"), function (elm) {
            elm.parentNode.removeChild(elm);
        });
    }
    if (document.querySelector(INC.methods.getSelectorClassName(INC.uiConfig.sidebar.className, "sidebarModalBlock")) != null) {
        // document.querySelector(INC.methods.getSelectorClassName(INC.uiConfig.sidebar.className, "sidebarModalBlock")).remove();
        // document.querySelector(".inc_sidebar_overlay_block").remove();
        Array.prototype.forEach.call(document.querySelectorAll(INC.methods.getSelectorClassName(INC.uiConfig.sidebar.className, "sidebarModalBlock")), function(el) {
            el.parentNode.removeChild(el);
        });

        Array.prototype.forEach.call(document.querySelectorAll(".inc_sidebar_overlay_block"), function(el) {
            el.parentNode.removeChild(el);
        });
    }

    if (document.querySelector(INC.methods.getSelectorClassName(INC.uiConfig.am.className, "afModalBlock")) != null) {
        // document.querySelector(INC.methods.getSelectorClassName(INC.uiConfig.am.className, "afModalBlock")).remove();
        Array.prototype.forEach.call(document.querySelectorAll(INC.methods.getSelectorClassName(INC.uiConfig.am.className, "afModalBlock")), function(el) {
            el.parentNode.removeChild(el);
        });
    }

    if (document.querySelector(INC.methods.getSelectorClassName(INC.uiConfig.pdp.className, "pdpModalBlock")) != null) {
        Array.prototype.forEach.call(document.querySelectorAll(INC.methods.getSelectorClassName(INC.uiConfig.pdp.className, "pdpModalBlock")), function(el) {
            el.parentNode.removeChild(el);
        });
        // document.querySelector(INC.methods.getSelectorClassName(INC.uiConfig.pdp.className, "pdpModalBlock")).remove();
    }
}

INC.methods.getElementChilds = function(child, pageType) {
    var uiConfig = INC.uiConfig;
    var pType = pageType;
    var vDOM = uiConfig[pType]["dom"];
    var elementHTML = this.generateHTMLTags('div', {
        class: uiConfig[pType]["className"][child]
    })
    if (vDOM.hasOwnProperty(child)) {
        vDOM[child].forEach(function(subChild) {
            elementHTML.appendChild(INC.methods.getElementChilds(subChild, pType));
        });
    }

    return elementHTML;
}

INC.methods.generateHTMLTags = function(tagName, attributeObj, childNode, eventListner, callback) {
    var element = document.createElement(tagName);
    for (attr in attributeObj) {
        switch (attr) {
            case "class": {
                element.setAttribute('class', attributeObj[attr]);
            }
            break;
        case "style": {
            for (styleAttr in attributeObj[attr]) {
                element.style[styleAttr] = attributeObj[attr][styleAttr];
            }
        }
        break;
        default: {
            if(attributeObj[attr] != undefined){
                if(tagName == 'img'){
                    element.classList.add('inc_lazy')
                    element.setAttribute('data-src', attributeObj[attr]);
                    element.setAttribute('src', attributeObj[attr]);
                }else{
                    element.setAttribute(attr, attributeObj[attr]);
                }
                element.setAttribute(attr, attributeObj[attr]);
            }
        }
        }
    }

    if (childNode != null && childNode != undefined) element.appendChild(childNode);
    if (eventListner != null && childNode != undefined) element.addEventListener(eventListner, callback);

    return element;
}
INC.methods.addProductToCart = function(findObj, qty, pageType, productBlock, add_btn_click, add_prod_im, btn_addtocart) {
    if (INC.config.pageType == "cartPage") {
        if (document.querySelector('.cart-btn button') != null) {
            if (document.querySelector('.cart-btn button').getAttribute('onclick') != undefined) {
                cfftoken = document.querySelector('.cart-btn button').getAttribute('onclick').split('CFM_ID')[1].split('&')[0].replace('=', '')
            }
        }
    }
    item_inc = []
    var addProductURL = INC.config.addToBasketURL;
    var findObj = new INC.classes.FindObj(findObj);
    var productObj = INC.dataStore.methods().getProductById(findObj);
    var data0 = {};
    var formData = []

    data0["Quantity"] = qty;
    data0["cartAction"] = "update";
    data0["pid"] = productObj.idAddtocart;
    var url0 = addProductURL;
    formData.push(data0)

    $.ajax({
        type: "POST",
        url: addProductURL,
        data: formData[0],
        error: function(jqXHR, textStatus, errorMessage) {

        },
        success: function(data) {
            if (document.querySelector('#mini-cart') != null) {
                document.querySelector('#mini-cart').innerHTML = data
            }
            // addCartGoods_callback_inc(JSON.parse(data))
            if (INC.config.pageType != "cartPage") INC.methods.addProductToSidebarCart(findObj, qty, productBlock, null, btn_addtocart, productObj);
            if (INC.config.pageType == "cartPage") {
                productBlock.querySelector(INC.methods.getSelectorClassName(INC.uiConfig.am.className, "productAddText")).innerText = INC.config.AddToCartText;
                if (productBlock != null) {
                    productBlock.parentNode.removeChild(productBlock);
                }
                window.location.reload();
            }

            add_btn_click.innerText = INC.config.AddToCartText;
            INC.config.disablebtn = true
            setTimeout(function() {
                add_btn_click.innerText = INC.config.AddToCartText;
                Array.prototype.forEach.call(add_btn_click, function(el) {
                    el.innerText = INC.config.AddToCartText;
                });
                if (btn_addtocart != undefined) {
                    btn_addtocart.parentNode.parentNode.setAttribute("style", "pointer-events: auto;opacity: 1;");
                }
            }, 500);

        }
    });


    var pageType = "";
    switch (INC.config.pageType) {
        case "pdp":
            pageType = "107";
            break;
        case "productList":
            pageType = "101";
            break;
        case "cartPage":
            pageType = "103";
            break;
        case "ticket":
            pageType = "103";
            break;
        case "other":
            pageType = "101";
            break;
    }
    var pname = productBlock.querySelector('.inc_product_desc_title_text').innerText;
    var pprice = productBlock.querySelector('.inc_product_desc_price_active_text').innerText.replace('$', '');
    var eventDataObj = {};
    if (INC.config.pageType == "cartPage") {
        eventDataObj["bundle_data"] = {
            "id": productObj.bundleId,
            "product_ids": [productObj.bundledProductId, productObj.mainId],
            "product_id": productObj.mainId
        }
    } else {
        eventDataObj["bundle_data"] = {
            "id": productObj.bundleId,
            "product_ids": [productObj.bundledProductId, productObj.mainId],
            "product_id": productObj.bundledProductId
        }
    }



    INC.methods.trackingEvents("bundleAddToCart", eventDataObj, pageType);
}
INC.methods.addBundleToCart = function(btn_cart) {
    INC.clientConfig.OOS = []
    item_inc = []
    var addProductURL = INC.config.addToBasketURL
    var dataStore = INC.dataStore;
    var mainProductId = document.querySelector(INC.methods.getSelectorClassName(INC.uiConfig.pdp.className, "productBlock")).getAttribute('data-main_id');
    var cfftoken = "";
    var searchParamsObjArray = [];
    var formData = []
    formData = new FormData();
    var t = 0;
    var data0 = {};
    var data1 = {};
    var data2 = {};
    var data3 = {};
    var data4 = {};
    var data5 = {};
    var data6 = {};
    var url0 = null;
    var url1 = null;
    var url2 = null;
    var url3 = null;
    var url4 = null;
    var url5 = null;
    var url6 = null;
    var param1=""
    var param2=""
    var param3=""
    var param4=""
    var param5=""
    var param6=""
    var formData = []
    var form_data_json = []
    var count_pr_to_add = 0
    var total_length = Object.keys(dataStore.bundleCartProducts);
    
    if (document.querySelector('#form2cart input[name="CFM_ID"]') != null){
        var CFMID = document.querySelector('#form2cart input[name="CFM_ID"]').value;
    }
    Object.keys(dataStore.bundleCartProducts).forEach(function (bundleCartProduct) {
        var findObj = new INC.classes.FindObj({ id: bundleCartProduct });
        var productObj = INC.dataStore.methods().getProductById(findObj);
        var searchParamObjString = "GOODS_NO=" + productObj.childsku + "&" + "CFM_ID=" + CFMID + "&" + "ATT_GRP_ID=" + productObj.mainId + "&" + "ENTR_NO=" + productObj.idAddtocart + "&" + "STKNUM=" + "1" + "&" + "BUYM=" + "1" + "&" + "NMM=" + " " + "&" + "COMM_025=" +  dataStore.bundleCartProducts[bundleCartProduct];
        
        count_pr_to_add++
        // searchParamsObjArray.push(searchParamObjString);
        if(count_pr_to_add == 1){
            url1 =addProductURL+searchParamObjString
            param1 = searchParamObjString
        }else if(count_pr_to_add == 2){
            url2 =addProductURL+searchParamObjString
            param2 = searchParamObjString
        }else if(count_pr_to_add == 3){
            url3 =addProductURL+searchParamObjString
            param3 = searchParamObjString
        }else if(count_pr_to_add == 4){
            url4 =addProductURL+searchParamObjString
            param4 = searchParamObjString
        }else if(count_pr_to_add == 5){
            url5 =addProductURL+searchParamObjString
            param5 = searchParamObjString
        }else if(count_pr_to_add == 6){
            url6 =addProductURL+searchParamObjString
            param6 = searchParamObjString
        }
        if(total_length.length == count_pr_to_add){
            ajax_add_to_cart(url1,url2,url3,url4,url5,url6,param1,param2,param3,param4,param5,param6,btn_cart,mainProductId)
        }
    });
    var timeoutOffset = 0;

    add_to_cart_tracking_multiple(mainProductId)
    setTimeout(function() {
        var cart_img_count = document.querySelectorAll('.cart-container ul li .m_product-image img')
        for (c = 0; c < cart_img_count.length; c++) {
            var cart_img_src = cart_img_count[c].getAttribute('data-src');
            cart_img_count[c].setAttribute('src', cart_img_src)
        }
    }, 6000)
}



function ajax_add_to_cart(url1,url2,url3,url4,url5,url6,param1,param2,param3,param4,param5,param6,btn_cart,mainProductId) {
    INC.clientConfig.OOS = []
    INC.clientConfig.OOS_MESG = []
    if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
        document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text').innerText = ""
    }
    callprodA()
    //document.querySelector('#mini-cart')
   
    function callprodA() {
        jQuery.ajax({
            type: "POST",
            url: url1,
            // data: param1,
            error: function(jqXHR, textStatus, errorMessage) {
                if (param2 == "") {
                    getTrackingPixel()
                    // add_to_cart_tracking_multiple(mainProductId)
                    if (btn_cart != undefined) {
                        btn_cart.classList.remove('inc_loading')
                        btn_cart.parentNode.parentNode.classList.remove('inc_hide_icon')
                    }
                    INC.config.disablebtn = true
                    document.querySelector('html').classList.add('inc_overlay');
                    INC.methods.showSidebar();
                    INC.methods.updateSidebarBlock();
                }

                if (param2 != "") {
                    callprodB()
                }
            },
            success: function(data) {
                if (document.querySelector('#mini-cart') != null) {
                    document.querySelector('#mini-cart').innerHTML = data
                }

                var resData = JSON.parse(data);
                var prdId = param1.split('&ATT_GRP_ID=')[1].split('&')[0]
                    if (resData.errMsg != ""){
                        // if (resData.errMsg == "ご指定の商品はお取り扱いを終了しました。"){
                            if (resData.errMsg != "画面遷移に異常がありました。\n次のような操作が原因となった可能性があります。\n\n・複数のウィンドウを用いての並行した登録操作など\n・規定の画面以外からの登録操作など\n・画面遷移の有効期限切れなど" ){
                                if (document.querySelector('.inc_sidebar_modal_block').classList.contains('errorMsage')){
                                    document.querySelector('.inc_sidebar_modal_block').classList.remove('errorMsage');
                                }
                                INC.clientConfig.OOS.push(prdId)
                                if (window.innerWidth < 820){
                                    if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                        document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                        document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text').innerHTML = "<div style="+"color:#EB4055;"+"> お手続き中に在庫情報が変更になりました。 </div>" + "<div>詳細は下記よりご確認ください。</div>";
                                        if (param2 == "") {
                                            INC.methods.showSidebar();
                                            INC.methods.updateSidebarBlock();
                                            document.querySelector('html').classList.add('inc_overlay');
                                        }
                                        
                                    }

                                } else {
                                    if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                        document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                        document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text').innerText = "お手続き中に在庫情報が変更になりました。詳細は下記よりご確認ください。";
                                        if (param2 == "") {
                                            INC.methods.showSidebar();
                                            INC.methods.updateSidebarBlock();
                                            document.querySelector('html').classList.add('inc_overlay');
                                        }
                                        
                                    }
                                }
                            } else {
                                document.querySelector('.inc_sidebar_modal_block').classList.add('errorMsage')
                                if (window.innerWidth < 820){
                                    if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                        document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                        var headerDiv = document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text');
                                        var err_text_inc = generate_html_tag('div','err_text_inc');
                                        err_text_inc.innerHTML = "<div class='inc_err_heading'>画面遷移にエラーがありました</div><div class='inc_err_para'>次のような操作が原因となった可能性があります。</div><ul class='inc_err_list'><li>・複数のウィンドウを用いての並行した登録操作など</li><li>・規定の画面以外からの登録操作など</li><li>・画面遷移の有効期限切れなど</li></ul><div class='inc_err_para'>お手数ですが、画面を更新するか、時間をおいてから<br>改めてお手続きをお願いいたします。</div>";;
                                        headerDiv.appendChild(err_text_inc);
                                        
                                        if (param2 == "") {
                                            INC.methods.showSidebar();
                                            INC.methods.updateSidebarBlock();
                                            document.querySelector('html').classList.add('inc_overlay');
                                        }
                                        
                                    }

                                } else {
                                    if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                        document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                        var headerDiv = document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text');
                                        var err_text_inc = generate_html_tag('div','err_text_inc');
                                        err_text_inc.innerHTML = "<div class='inc_err_heading'>画面遷移にエラーがありました</div><div class='inc_err_para'>次のような操作が原因となった可能性があります。</div><ul class='inc_err_list'><li>・複数のウィンドウを用いての並行した登録操作など</li><li>・規定の画面以外からの登録操作など</li><li>・画面遷移の有効期限切れなど</li></ul><div class='inc_err_para'>お手数ですが、画面を更新するか、時間をおいてから<br>改めてお手続きをお願いいたします。</div>";;
                                        headerDiv.appendChild(err_text_inc);
                                        if (param2 == "") {
                                            INC.methods.showSidebar();
                                            INC.methods.updateSidebarBlock();
                                            document.querySelector('html').classList.add('inc_overlay');
                                        }
                                        
                                    }
                                }

                            }
                            if (btn_cart != undefined) {
                                btn_cart.classList.remove('inc_loading')
                                btn_cart.parentNode.parentNode.classList.remove('inc_hide_icon')
                            }
                            errFlag = true
                        // }
                    }
               
                // addCartGoods_callback_inc(JSON.parse(data))
                if (INC.clientConfig.OOS.length == 0 && resData.errMsg != "画面遷移に異常がありました。\n次のような操作が原因となった可能性があります。\n\n・複数のウィンドウを用いての並行した登録操作など\n・規定の画面以外からの登録操作など\n・画面遷移の有効期限切れなど" ){
                    if (param2 == "") {
                        INC.config.disablebtn = true
                        getTrackingPixel()
                        // add_to_cart_tracking_multiple(mainProductId)
                        if (btn_cart != undefined) {
                            btn_cart.classList.remove('inc_loading')
                            btn_cart.parentNode.parentNode.classList.remove('inc_hide_icon')
                        }
                        if (INC.clientConfig.OOS.length == 0){
                            window.location.href = INC.clientConfig.checkoutLink;
                        }
                    }
                } else {
                    if (param2 == "") {
                        INC.methods.showSidebar();
                        INC.methods.updateSidebarBlock();
                        document.querySelector('html').classList.add('inc_overlay');
                    }
                }

                if (param2 != "") {
                    callprodB()
                }
            }
        });
    }

    function callprodB() {
        jQuery.ajax({
            type: "POST",
            url: url2,
            // data: param2,
            error: function(jqXHR, textStatus, errorMessage) {
                if (param3 == "") {
                    getTrackingPixel()
                    // add_to_cart_tracking_multiple(mainProductId)
                    if (btn_cart != undefined) {
                        btn_cart.classList.remove('inc_loading')
                        btn_cart.parentNode.parentNode.classList.remove('inc_hide_icon')
                    }
                    INC.config.disablebtn = true
                    document.querySelector('html').classList.add('inc_overlay');
                    INC.methods.showSidebar();
                    INC.methods.updateSidebarBlock();
                }

                if (param3 != "") {
                    callprodC()
                }
            },
            success: function(data) {
                // addCartGoods_callback_inc(JSON.parse(data))
                if (document.querySelector('#mini-cart') != null) {
                    document.querySelector('#mini-cart').innerHTML = data
                }

                var resData = JSON.parse(data);
                var errFlag = false;
                var prdId = param2.split('&ATT_GRP_ID=')[1].split('&')[0]
                if (resData.errMsg != ""){
                    // if (resData.errMsg == "ご指定の商品はお取り扱いを終了しました。"){
                        
                        if (resData.errMsg != "画面遷移に異常がありました。\n次のような操作が原因となった可能性があります。\n\n・複数のウィンドウを用いての並行した登録操作など\n・規定の画面以外からの登録操作など\n・画面遷移の有効期限切れなど" ){
                            if (document.querySelector('.inc_sidebar_modal_block').classList.contains('errorMsage')){
                                document.querySelector('.inc_sidebar_modal_block').classList.remove('errorMsage');
                            }
                            INC.clientConfig.OOS.push(prdId)
                            if (window.innerWidth < 820){
                                if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                    document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                    document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text').innerHTML = "<div style="+"color:#EB4055;"+"> お手続き中に在庫情報が変更になりました。 </div>" + "<div>詳細は下記よりご確認ください。</div>";
                                    if (param2 == "") {
                                        INC.methods.showSidebar();
                                        INC.methods.updateSidebarBlock();
                                        document.querySelector('html').classList.add('inc_overlay');
                                    }
                                    
                                }

                            } else {
                                if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                    document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                    document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text').innerText = "お手続き中に在庫情報が変更になりました。詳細は下記よりご確認ください。";
                                    if (param2 == "") {
                                        INC.methods.showSidebar();
                                        INC.methods.updateSidebarBlock();
                                        document.querySelector('html').classList.add('inc_overlay');
                                    }
                                    
                                }
                            }
                        } else {
                            if (document.querySelector('.inc_sidebar_modal_block').classList.contains('errorMsage') == false){
                                if (window.innerWidth < 820){
                                    if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                        document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                        var headerDiv = document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text');
                                        var err_text_inc = generate_html_tag('div','err_text_inc');
                                        err_text_inc.innerHTML = "<div class='inc_err_heading'>画面遷移にエラーがありました</div><div class='inc_err_para'>次のような操作が原因となった可能性があります。</div><ul class='inc_err_list'><li>・複数のウィンドウを用いての並行した登録操作など</li><li>・規定の画面以外からの登録操作など</li><li>・画面遷移の有効期限切れなど</li></ul><div class='inc_err_para'>お手数ですが、画面を更新するか、時間をおいてから<br>改めてお手続きをお願いいたします。</div>";;
                                        headerDiv.appendChild(err_text_inc);
                                        if (param2 == "") {
                                            INC.methods.showSidebar();
                                            INC.methods.updateSidebarBlock();
                                            document.querySelector('html').classList.add('inc_overlay');
                                        }
                                        
                                    }

                                } else {
                                    if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                        document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                        var headerDiv = document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text');
                                        var err_text_inc = generate_html_tag('div','err_text_inc');
                                        err_text_inc.innerHTML = "<div class='inc_err_heading'>画面遷移にエラーがありました</div><div class='inc_err_para'>次のような操作が原因となった可能性があります。</div><ul class='inc_err_list'><li>・複数のウィンドウを用いての並行した登録操作など</li><li>・規定の画面以外からの登録操作など</li><li>・画面遷移の有効期限切れなど</li></ul><div class='inc_err_para'>お手数ですが、画面を更新するか、時間をおいてから<br>改めてお手続きをお願いいたします。</div>";;
                                        headerDiv.appendChild(err_text_inc);
                                        if (param2 == "") {
                                            INC.methods.showSidebar();
                                            INC.methods.updateSidebarBlock();
                                            document.querySelector('html').classList.add('inc_overlay');
                                        }
                                        
                                    }
                                }
                            }
                        }
                        if (btn_cart != undefined) {
                            btn_cart.classList.remove('inc_loading')
                            btn_cart.parentNode.parentNode.classList.remove('inc_hide_icon')
                        }
                        errFlag = true
                    // }
                }

                if (INC.clientConfig.OOS.length == 0 && resData.errMsg != "画面遷移に異常がありました。\n次のような操作が原因となった可能性があります。\n\n・複数のウィンドウを用いての並行した登録操作など\n・規定の画面以外からの登録操作など\n・画面遷移の有効期限切れなど" ){
                    if (param3 == "") {
                        INC.config.disablebtn = true
                        getTrackingPixel()
                        // add_to_cart_tracking_multiple(mainProductId)
                        if (btn_cart != undefined) {
                            btn_cart.classList.remove('inc_loading')
                            btn_cart.parentNode.parentNode.classList.remove('inc_hide_icon')
                        }

                        if (INC.clientConfig.OOS.length == 0){
                            window.location.href = INC.clientConfig.checkoutLink;
                        }
                    }
                } else {
                    if (param3 == "") {
                        INC.methods.showSidebar();
                        INC.methods.updateSidebarBlock();
                        document.querySelector('html').classList.add('inc_overlay');
                    }
                }

                if (param3 != "") {
                    callprodC()
                }
            }
        });
    }

    function callprodC() {
        jQuery.ajax({
            type: "POST",
            url: url3,
            // data: param3,
            error: function(jqXHR, textStatus, errorMessage) {
                if (param4 == "") {
                    getTrackingPixel()
                    // add_to_cart_tracking_multiple(mainProductId)
                    if (btn_cart != undefined) {
                        btn_cart.classList.remove('inc_loading')
                        btn_cart.parentNode.parentNode.classList.remove('inc_hide_icon')
                    }
                    INC.config.disablebtn = true
                    document.querySelector('html').classList.add('inc_overlay');
                    INC.methods.showSidebar();
                    INC.methods.updateSidebarBlock();
                }

                if (param4 != "") {
                    callprodD()
                }
            },
            success: function(data) {
                // addCartGoods_callback_inc(JSON.parse(data))
                if (document.querySelector('#mini-cart') != null) {
                    document.querySelector('#mini-cart').innerHTML = data
                }

                var resData = JSON.parse(data);
                var errFlag = false;
                var prdId = param3.split('&ATT_GRP_ID=')[1].split('&')[0]
                if (resData.errMsg != ""){
                    // if (resData.errMsg == "ご指定の商品はお取り扱いを終了しました。"){
                        
                        if (resData.errMsg != "画面遷移に異常がありました。\n次のような操作が原因となった可能性があります。\n\n・複数のウィンドウを用いての並行した登録操作など\n・規定の画面以外からの登録操作など\n・画面遷移の有効期限切れなど" ){
                            if (document.querySelector('.inc_sidebar_modal_block').classList.contains('errorMsage')){
                                document.querySelector('.inc_sidebar_modal_block').classList.remove('errorMsage');
                            }
                            INC.clientConfig.OOS.push(prdId)
                            if (window.innerWidth < 820){
                                if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                    document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                    document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text').innerHTML = "<div style="+"color:#EB4055;"+"> お手続き中に在庫情報が変更になりました。 </div>" + "<div>詳細は下記よりご確認ください。</div>";
                                    if (param2 == "") {
                                        INC.methods.showSidebar();
                                        INC.methods.updateSidebarBlock();
                                        document.querySelector('html').classList.add('inc_overlay');
                                    }
                                    
                                }

                            } else {
                                if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                    document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                    document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text').innerText = "お手続き中に在庫情報が変更になりました。詳細は下記よりご確認ください。";
                                    if (param2 == "") {
                                        INC.methods.showSidebar();
                                        INC.methods.updateSidebarBlock();
                                        document.querySelector('html').classList.add('inc_overlay');
                                    }
                                    
                                }
                            }
                        } else {
                            if (document.querySelector('.inc_sidebar_modal_block').classList.contains('errorMsage') == false){
                                if (window.innerWidth < 820){
                                    if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                        document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                        var headerDiv = document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text');
                                        var err_text_inc = generate_html_tag('div','err_text_inc');
                                        err_text_inc.innerHTML = "<div class='inc_err_heading'>画面遷移にエラーがありました</div><div class='inc_err_para'>次のような操作が原因となった可能性があります。</div><ul class='inc_err_list'><li>・複数のウィンドウを用いての並行した登録操作など</li><li>・規定の画面以外からの登録操作など</li><li>・画面遷移の有効期限切れなど</li></ul><div class='inc_err_para'>お手数ですが、画面を更新するか、時間をおいてから<br>改めてお手続きをお願いいたします。</div>";;
                                        headerDiv.appendChild(err_text_inc);
                                        if (param2 == "") {
                                            INC.methods.showSidebar()
                                            INC.methods.updateSidebarBlock();;
                                            document.querySelector('html').classList.add('inc_overlay');
                                        }
                                        
                                    }

                                } else {
                                    if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                        document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                        var headerDiv = document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text');
                                        var err_text_inc = generate_html_tag('div','err_text_inc');
                                        err_text_inc.innerHTML = "<div class='inc_err_heading'>画面遷移にエラーがありました</div><div class='inc_err_para'>次のような操作が原因となった可能性があります。</div><ul class='inc_err_list'><li>・複数のウィンドウを用いての並行した登録操作など</li><li>・規定の画面以外からの登録操作など</li><li>・画面遷移の有効期限切れなど</li></ul><div class='inc_err_para'>お手数ですが、画面を更新するか、時間をおいてから<br>改めてお手続きをお願いいたします。</div>";+ "お手数ですが、画面を更新するか、時間をおいてから" + "</br>" + "改めてお手続きをお願いいたします。";
                                        headerDiv.appendChild(err_text_inc);
                                        if (param2 == "") {
                                            INC.methods.showSidebar();
                                            INC.methods.updateSidebarBlock();
                                            document.querySelector('html').classList.add('inc_overlay');
                                        }
                                        
                                    }
                                }
                            }
                        }
                        if (btn_cart != undefined) {
                            btn_cart.classList.remove('inc_loading')
                            btn_cart.parentNode.parentNode.classList.remove('inc_hide_icon')
                        }
                        errFlag = true
                    // }
                }

                if (INC.clientConfig.OOS.length == 0 && resData.errMsg != "画面遷移に異常がありました。\n次のような操作が原因となった可能性があります。\n\n・複数のウィンドウを用いての並行した登録操作など\n・規定の画面以外からの登録操作など\n・画面遷移の有効期限切れなど" ){
                    if (param4 == "") {
                        INC.config.disablebtn = true
                        getTrackingPixel()
                        // add_to_cart_tracking_multiple(mainProductId)
                        if (btn_cart != undefined) {
                            btn_cart.classList.remove('inc_loading')
                            btn_cart.parentNode.parentNode.classList.remove('inc_hide_icon')
                        }

                        if (INC.clientConfig.OOS.length == 0){
                            window.location.href = INC.clientConfig.checkoutLink;
                        }
                    }
                } else {
                    if (param4 == "") {
                        INC.methods.showSidebar();
                        INC.methods.updateSidebarBlock();
                        document.querySelector('html').classList.add('inc_overlay');
                    }
                }

                if (param4 != "") {
                    callprodD()
                }
            }
        });
    }

    function callprodD() {
        jQuery.ajax({
            type: "POST",
            url: url4,
            // data: param4,
            error: function(jqXHR, textStatus, errorMessage) {
                if (param5 == "") {
                    INC.config.disablebtn = true
                    getTrackingPixel()
                    // add_to_cart_tracking_multiple(mainProductId)
                    if (btn_cart != undefined) {
                        btn_cart.classList.remove('inc_loading')
                        btn_cart.parentNode.parentNode.classList.remove('inc_hide_icon')
                    }

                    document.querySelector('html').classList.add('inc_overlay');
                    INC.methods.showSidebar();
                    INC.methods.updateSidebarBlock();
                }

                if (param5 != "") {
                    callprodE()
                }
            },
            success: function(data) {
                if (document.querySelector('#mini-cart') != null) {
                    document.querySelector('#mini-cart').innerHTML = data
                }
                // addCartGoods_callback_inc(JSON.parse(data))
                var resData = JSON.parse(data);
                var prdId = param4.split('&ATT_GRP_ID=')[1].split('&')[0]
                if (resData.errMsg != ""){
                    // if (resData.errMsg == "ご指定の商品はお取り扱いを終了しました。"){
                        INC.clientConfig.OOS.push(prdId)
                        if (resData.errMsg != "画面遷移に異常がありました。\n次のような操作が原因となった可能性があります。\n\n・複数のウィンドウを用いての並行した登録操作など\n・規定の画面以外からの登録操作など\n・画面遷移の有効期限切れなど" ){
                            if (document.querySelector('.inc_sidebar_modal_block').classList.contains('errorMsage')){
                                document.querySelector('.inc_sidebar_modal_block').classList.remove('errorMsage');
                            }
                            INC.clientConfig.OOS.push(prdId)
                            if (window.innerWidth < 820){
                                if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                    document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                    document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text').innerHTML = "<div style="+"color:#EB4055;"+"> お手続き中に在庫情報が変更になりました。 </div>" + "<div>詳細は下記よりご確認ください。</div>";
                                    if (param2 == "") {
                                        INC.methods.showSidebar();
                                        INC.methods.updateSidebarBlock();
                                        document.querySelector('html').classList.add('inc_overlay');
                                    }
                                    
                                }

                            } else {
                                if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                    document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                    document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text').innerText = "お手続き中に在庫情報が変更になりました。詳細は下記よりご確認ください。";
                                    if (param2 == "") {
                                        INC.methods.showSidebar();
                                        INC.methods.updateSidebarBlock();
                                        document.querySelector('html').classList.add('inc_overlay');
                                    }
                                    
                                }
                            }
                        } else {
                            if (document.querySelector('.inc_sidebar_modal_block').classList.contains('errorMsage') == false){
                                if (window.innerWidth < 820){
                                    if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                        document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                        var headerDiv = document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text');
                                        var err_text_inc = generate_html_tag('div','err_text_inc');
                                        err_text_inc.innerHTML = "<div class='inc_err_heading'>画面遷移にエラーがありました</div><div class='inc_err_para'>次のような操作が原因となった可能性があります。</div><ul class='inc_err_list'><li>・複数のウィンドウを用いての並行した登録操作など</li><li>・規定の画面以外からの登録操作など</li><li>・画面遷移の有効期限切れなど</li></ul><div class='inc_err_para'>お手数ですが、画面を更新するか、時間をおいてから<br>改めてお手続きをお願いいたします。</div>";;
                                        headerDiv.appendChild(err_text_inc);
                                        if (param2 == "") {
                                            INC.methods.showSidebar();
                                            INC.methods.updateSidebarBlock();
                                            document.querySelector('html').classList.add('inc_overlay');
                                        }
                                        
                                    }

                                } else {
                                    if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                        document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                        var headerDiv = document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text');
                                        var err_text_inc = generate_html_tag('div','err_text_inc');
                                        err_text_inc.innerHTML = "<div class='inc_err_heading'>画面遷移にエラーがありました</div><div class='inc_err_para'>次のような操作が原因となった可能性があります。</div><ul class='inc_err_list'><li>・複数のウィンドウを用いての並行した登録操作など</li><li>・規定の画面以外からの登録操作など</li><li>・画面遷移の有効期限切れなど</li></ul><div class='inc_err_para'>お手数ですが、画面を更新するか、時間をおいてから<br>改めてお手続きをお願いいたします。</div>";;
                                        headerDiv.appendChild(err_text_inc);
                                        if (param2 == "") {
                                            INC.methods.showSidebar();
                                            INC.methods.updateSidebarBlock();
                                            document.querySelector('html').classList.add('inc_overlay');
                                        }
                                        
                                    }
                                }
                            }
                        }
                        if (btn_cart != undefined) {
                            btn_cart.classList.remove('inc_loading')
                            btn_cart.parentNode.parentNode.classList.remove('inc_hide_icon')
                        }
                        errFlag = true
                    // }
                }
                
                if (INC.clientConfig.OOS.length == 0 && resData.errMsg != "画面遷移に異常がありました。\n次のような操作が原因となった可能性があります。\n\n・複数のウィンドウを用いての並行した登録操作など\n・規定の画面以外からの登録操作など\n・画面遷移の有効期限切れなど" ){
                    if (param5 == "") {
                        INC.config.disablebtn = true
                        getTrackingPixel()
                        if (btn_cart != undefined) {
                            btn_cart.classList.remove('inc_loading')
                            btn_cart.parentNode.parentNode.classList.remove('inc_hide_icon')
                        }

                        if (INC.clientConfig.OOS.length == 0){
                            window.location.href = INC.clientConfig.checkoutLink;
                        }
                    }
                } else {
                    if (param5 == "") {
                        INC.methods.showSidebar();
                        INC.methods.updateSidebarBlock();
                        document.querySelector('html').classList.add('inc_overlay');
                    }
                }

                if (param5 != "") {
                    callprodE()
                }
            }
        });
    }

    function callprodE() {
        jQuery.ajax({
            type: "POST",
            url: url5,
            // data: param5,
            error: function(jqXHR, textStatus, errorMessage) {
                if (param6 == "") {
                    INC.config.disablebtn = true
                    getTrackingPixel()
                    // add_to_cart_tracking_multiple(mainProductId)
                    if (btn_cart != undefined) {
                        btn_cart.classList.remove('inc_loading')
                        btn_cart.parentNode.parentNode.classList.remove('inc_hide_icon')
                    }
                    if (param6 != "") {
                        document.querySelector('html').classList.add('inc_overlay');
                        INC.methods.showSidebar();
                        INC.methods.updateSidebarBlock();
                    }
                }

                if (param6 != "") {
                    callprodF()
                }
            },
            success: function(data) {
                if (document.querySelector('#mini-cart') != null) {
                    document.querySelector('#mini-cart').innerHTML = data
                }
                // addCartGoods_callback_inc(JSON.parse(data))
                var resData = JSON.parse(data);
                var prdId = param5.split('&ATT_GRP_ID=')[1].split('&')[0]
                if (resData.errMsg != ""){
                    // if (resData.errMsg == "ご指定の商品はお取り扱いを終了しました。"){
                        if (resData.errMsg != "画面遷移に異常がありました。\n次のような操作が原因となった可能性があります。\n\n・複数のウィンドウを用いての並行した登録操作など\n・規定の画面以外からの登録操作など\n・画面遷移の有効期限切れなど" ){
                            if (document.querySelector('.inc_sidebar_modal_block').classList.contains('errorMsage')){
                                document.querySelector('.inc_sidebar_modal_block').classList.remove('errorMsage');
                            }
                            INC.clientConfig.OOS.push(prdId)
                            if (window.innerWidth < 820){
                                if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                    document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                    document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text').innerHTML = "<div style="+"color:#EB4055;"+"> お手続き中に在庫情報が変更になりました。 </div>" + "<div>詳細は下記よりご確認ください。</div>";
                                    if (param2 == "") {
                                        INC.methods.showSidebar();
                                        INC.methods.updateSidebarBlock();
                                        document.querySelector('html').classList.add('inc_overlay');
                                    }
                                    
                                }

                            } else {
                                if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                    document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                    document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text').innerText = "お手続き中に在庫情報が変更になりました。詳細は下記よりご確認ください。";
                                    if (param2 == "") {
                                        INC.methods.showSidebar();
                                        INC.methods.updateSidebarBlock();
                                        document.querySelector('html').classList.add('inc_overlay');
                                    }
                                    
                                }
                            }
                        } else {
                            if (document.querySelector('.inc_sidebar_modal_block').classList.contains('errorMsage') == false){
                                if (window.innerWidth < 820){
                                    if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                        document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                        var headerDiv = document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text');
                                        var err_text_inc = generate_html_tag('div','err_text_inc');
                                        err_text_inc.innerHTML = "<div class='inc_err_heading'>画面遷移にエラーがありました</div><div class='inc_err_para'>次のような操作が原因となった可能性があります。</div><ul class='inc_err_list'><li>・複数のウィンドウを用いての並行した登録操作など</li><li>・規定の画面以外からの登録操作など</li><li>・画面遷移の有効期限切れなど</li></ul><div class='inc_err_para'>お手数ですが、画面を更新するか、時間をおいてから<br>改めてお手続きをお願いいたします。</div>";;
                                        headerDiv.appendChild(err_text_inc);
                                        if (param2 == "") {
                                            INC.methods.showSidebar();
                                            INC.methods.updateSidebarBlock();
                                            document.querySelector('html').classList.add('inc_overlay');
                                        }
                                        
                                    }

                                } else {
                                    if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                        document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                        var headerDiv = document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text');
                                        var err_text_inc = generate_html_tag('div','err_text_inc');
                                        err_text_inc.innerHTML = "<div class='inc_err_heading'>画面遷移にエラーがありました</div><div class='inc_err_para'>次のような操作が原因となった可能性があります。</div><ul class='inc_err_list'><li>・複数のウィンドウを用いての並行した登録操作など</li><li>・規定の画面以外からの登録操作など</li><li>・画面遷移の有効期限切れなど</li></ul><div class='inc_err_para'>お手数ですが、画面を更新するか、時間をおいてから<br>改めてお手続きをお願いいたします。</div>";;
                                        headerDiv.appendChild(err_text_inc);
                                        if (param2 == "") {
                                            INC.methods.showSidebar();
                                            INC.methods.updateSidebarBlock();
                                            document.querySelector('html').classList.add('inc_overlay');
                                        }
                                        
                                    }
                                }
                            }
                        }
                        if (btn_cart != undefined) {
                            btn_cart.classList.remove('inc_loading')
                            btn_cart.parentNode.parentNode.classList.remove('inc_hide_icon')
                        }
                        errFlag = true
                    // }
                }
                
                if (INC.clientConfig.OOS.length == 0 && resData.errMsg != "画面遷移に異常がありました。\n次のような操作が原因となった可能性があります。\n\n・複数のウィンドウを用いての並行した登録操作など\n・規定の画面以外からの登録操作など\n・画面遷移の有効期限切れなど" ){
                    if (param6 == "") {
                        INC.config.disablebtn = true
                        getTrackingPixel()
                        if (btn_cart != undefined) {
                            btn_cart.classList.remove('inc_loading')
                            btn_cart.parentNode.parentNode.classList.remove('inc_hide_icon')
                        }

                        if (INC.clientConfig.OOS.length == 0){
                            window.location.href = INC.clientConfig.checkoutLink;
                        }
                    }
                } else {
                    INC.methods.showSidebar();
                    INC.methods.updateSidebarBlock();
                    document.querySelector('html').classList.add('inc_overlay');
                }

                if (param6 != "") {
                    callprodF()
                }
            }
        });
    }

    function callprodF() {
        jQuery.ajax({
            type: "POST",
            url: url6,
            // data: param6,
            error: function(jqXHR, textStatus, errorMessage) {
                INC.config.disablebtn = true
                getTrackingPixel()
                // add_to_cart_tracking_multiple(mainProductId)
                if (btn_cart != undefined) {
                    btn_cart.classList.remove('inc_loading')
                    btn_cart.parentNode.parentNode.classList.remove('inc_hide_icon')
                }

                document.querySelector('html').classList.add('inc_overlay');
                INC.methods.showSidebar();
                INC.methods.updateSidebarBlock();
            },
            success: function(data) {
                if (document.querySelector('#mini-cart') != null) {
                    document.querySelector('#mini-cart').innerHTML = data
                }
                // addCartGoods_callback_inc(JSON.parse(data))
                var resData = JSON.parse(data);
                var prdId = param6.split('&ATT_GRP_ID=')[1].split('&')[0]
                if (resData.errMsg != ""){
                    // if (resData.errMsg == "ご指定の商品はお取り扱いを終了しました。"){
                        if (resData.errMsg != "画面遷移に異常がありました。\n次のような操作が原因となった可能性があります。\n\n・複数のウィンドウを用いての並行した登録操作など\n・規定の画面以外からの登録操作など\n・画面遷移の有効期限切れなど" ){
                            if (document.querySelector('.inc_sidebar_modal_block').classList.contains('errorMsage')){
                                document.querySelector('.inc_sidebar_modal_block').classList.remove('errorMsage');
                            }
                            INC.clientConfig.OOS.push(prdId)
                            if (window.innerWidth < 820){
                                if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                    document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                    document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text').innerHTML = "<div style="+"color:#EB4055;"+"> お手続き中に在庫情報が変更になりました。 </div>" + "<div>詳細は下記よりご確認ください。</div>";
                                    if (param2 == "") {
                                        INC.methods.showSidebar();
                                        INC.methods.updateSidebarBlock();
                                        document.querySelector('html').classList.add('inc_overlay');
                                    }
                                    
                                }

                            } else {
                                if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                    document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                    document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text').innerText = "お手続き中に在庫情報が変更になりました。詳細は下記よりご確認ください。";
                                    if (param2 == "") {
                                        INC.methods.showSidebar();
                                        INC.methods.updateSidebarBlock();
                                        document.querySelector('html').classList.add('inc_overlay');
                                    }
                                    
                                }
                            }
                        } else {
                            if (document.querySelector('.inc_sidebar_modal_block').classList.contains('errorMsage') == false){
                                if (window.innerWidth < 820){
                                    if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                        document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                        var headerDiv = document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text');
                                        var err_text_inc = generate_html_tag('div','err_text_inc');
                                        err_text_inc.innerHTML =  "<div class='inc_err_heading'>画面遷移にエラーがありました</div><div class='inc_err_para'>次のような操作が原因となった可能性があります。</div><ul class='inc_err_list'><li>・複数のウィンドウを用いての並行した登録操作など</li><li>・規定の画面以外からの登録操作など</li><li>・画面遷移の有効期限切れなど</li></ul><div class='inc_err_para'>お手数ですが、画面を更新するか、時間をおいてから<br>改めてお手続きをお願いいたします。</div>";
                                        headerDiv.appendChild(err_text_inc);
                                        if (param2 == "") {
                                            INC.methods.showSidebar();
                                            INC.methods.updateSidebarBlock();
                                            document.querySelector('html').classList.add('inc_overlay');
                                        }
                                        
                                    }

                                } else {
                                    if (document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text') != null){
                                        document.querySelector('.inc_header_sub_title_text_block').classList.add('active')
                                        var headerDiv = document.querySelector('.inc_header_sub_title_text_block .inc_header_sub_title_text');
                                        var err_text_inc = generate_html_tag('div','err_text_inc');
                                        err_text_inc.innerHTML = "<div class='inc_err_heading'>画面遷移にエラーがありました</div><div class='inc_err_para'>次のような操作が原因となった可能性があります。</div><ul class='inc_err_list'><li>・複数のウィンドウを用いての並行した登録操作など</li><li>・規定の画面以外からの登録操作など</li><li>・画面遷移の有効期限切れなど</li></ul><div class='inc_err_para'>お手数ですが、画面を更新するか、時間をおいてから<br>改めてお手続きをお願いいたします。</div>";;
                                        headerDiv.appendChild(err_text_inc);
                                        if (param2 == "") {
                                            INC.methods.showSidebar();
                                            INC.methods.updateSidebarBlock();
                                            document.querySelector('html').classList.add('inc_overlay');
                                        }
                                        
                                    }
                                }
                            }
                        }
                        if (btn_cart != undefined) {
                            btn_cart.classList.remove('inc_loading')
                            btn_cart.parentNode.parentNode.classList.remove('inc_hide_icon')
                        }
                        errFlag = true
                    // }
                }
                
                getTrackingPixel()
                // add_to_cart_tracking_multiple(mainProductId)
                if (btn_cart != undefined) {
                    btn_cart.classList.remove('inc_loading')
                    btn_cart.parentNode.parentNode.classList.remove('inc_hide_icon')
                }
                INC.config.disablebtn = true
                if (INC.clientConfig.OOS.length == 0 && resData.errMsg != "画面遷移に異常がありました。\n次のような操作が原因となった可能性があります。\n\n・複数のウィンドウを用いての並行した登録操作など\n・規定の画面以外からの登録操作など\n・画面遷移の有効期限切れなど" ){
                    window.location.href = INC.clientConfig.checkoutLink;
                }   
            }
        });
    }
}


function addCartGoods_callback_inc(oJson_inc) {
    $("#call_back2").text("");
    var count = document.getElementById("cart-count");
    if (count != null) {
        if (oJson_inc.RESULT == "0") {
            var count = document.getElementById("cart-count");
            count.innerHTML = oJson_inc.COUNT;
            var cart = document.getElementById("gn-item11");

            if (cart == null) {
                cart = document.getElementById("gn-item09");
            }
            cart.getElementsByTagName("a")[0].getElementsByTagName("em")[0].innerHTML = oJson_inc.COUNT;
            var price = document.getElementById("cart-price");
            price.innerHTML = oJson_inc.PRICE;
            var tip = document.getElementById("cart-tip");
            if (oJson_inc.TIP) {
                tip.className = "cart-tip";
                tip.innerHTML = oJson_inc.TIP;
            } else {
                tip.className = "";
                tip.innerHTML = "";
            }

            var delvYen = document.getElementById("get-free-shipping");
            if (oJson_inc.DELVYEN) {
                delvYen.className = "get-free-shipping";
                delvYen.innerHTML = oJson_inc.DELVYEN;
            } else {
                delvYen.className = "";
                delvYen.innerHTML = "";
            }
            var delvKind = document.getElementById("carriage-message");
            delvKind.innerHTML = oJson_inc.DELVKIND;

            var priceDownCnt = oJson_inc.PRICE_DOWN_COUNT;
            var priceDownCntDisplay = "";
            if (oJson_inc.PRICE_DOWN_COUNT === "0") {
                priceDownCnt = "";
                priceDownCntDisplay = "none";
            }
            $("#cartPriceDownCnt").text(priceDownCnt);
            if ((oJson_inc.GOODS_STK_NO != null) && (oJson_inc.GOODS_STK_NO != "")) {
                execAsyncJson(oJson_inc.GS_REQUEST_URL + "?action=cart&item=" + oJson_inc.GOODS_STK_NO + "&amount=" + oJson_inc.REAL_PRICE + "&url=" + encodeURIComponent("https://www.toysrus.co.jp/" + oJson_inc.URL_CONTEXT) + "&ref=" + encodeURIComponent(location.href) + "&id=" + oJson_inc.GS_USER_ID, "dummy_callback");
            }
        }

        if (oJson_inc.adobeAddCartClickStr != null && oJson_inc.adobeAddCartClickStr != "") {
            clickAdobeMarketingTag01(oJson_inc.adobeAddCartClickStr);
        }

        $("#call_back2").text(oJson_inc.MSG);
    } else {
        if (oJson_inc.RESULT == "0") {
            var cart = document.getElementById("cartBtn");
            var price = document.getElementById("cart-price");
            price.innerHTML = oJson_inc.PRICE;
            var tip = document.getElementById("cartTip");
            if (oJson_inc.TIP) {
                tip.className = "cartTip";
                tip.innerHTML = oJson_inc.TIP;
            } else {
                tip.className = "";
                tip.innerHTML = "";
            }
            var delvYen = document.getElementById("get-free-shipping");
            if (oJson_inc.DELVYEN) {
                delvYen.className = "get-free-shipping";
                delvYen.innerHTML = oJson_inc.DELVYEN;
            } else {
                delvYen.className = "";
                delvYen.innerHTML = "";
            }
            var delvKind = document.getElementById("shipping-condition");
            if (oJson_inc.DELVKIND) {
                delvKind.className = "shipping-condition";
                delvKind.innerHTML = oJson_inc.DELVKIND;
            } else {
                delvKind.className = "";
                delvKind.innerHTML = "";
            }

            if (oJson_inc.adobeAddCartClickStr != null && oJson_inc.adobeAddCartClickStr != "") {
                clickAdobeMarketingTag01(oJson_inc.adobeAddCartClickStr);
            }

            $("#cartGoodsCnt").text(oJson_inc.COUNT);
            var priceDownCnt = oJson_inc.PRICE_DOWN_COUNT;
            var priceDownCntDisplay = "";
            if (oJson_inc.PRICE_DOWN_COUNT === "0") {
                priceDownCnt = "";
                priceDownCntDisplay = "none";
            }
            $("#cartPriceDownCnt").text(priceDownCnt);
            if ((oJson_inc.GOODS_STK_NO != null) && (oJson_inc.GOODS_STK_NO != "")) {
                execAsyncJson(oJson_inc.GS_REQUEST_URL + "?action=cart&item=" + oJson_inc.GOODS_STK_NO + "&amount=" + oJson_inc.REAL_PRICE + "&url=" + encodeURIComponent("https://www.toysrus.co.jp/" + oJson_inc.URL_CONTEXT) + "&ref=" + encodeURIComponent(location.href) + "&id=" + oJson_inc.GS_USER_ID, "dummy_callback");
            }
        }

        $("#call_back2").text(oJson_inc.MSG);
    }
}

function add_to_cart_tracking_multiple(mainProductId) {
    var event_type = "bundle_add_to_cart";
    var core_prod_id = "";
    var productIdsforTracking = []
    core_prod_id = mainProductId;

    pageType = "100";
    // eventdata = { "id": bundleId, "product_ids": productIdsforTracking, "product_id": core_prod_id.toString() }
    var all_data = [];
    for (var k = 0; k < INC.config.bundle_tracking.length; k++) {
        if (INC.config.bundle_tracking.length == 1) {
            productIdsforTracking.push(mainProductId)
            productIdsforTracking.push(INC.config.bundle_tracking[k].id)
            all_data.push({
                id: parseInt(INC.config.bundle_tracking[k].bid),
                product_ids: productIdsforTracking,
                product_id: core_prod_id
            })
            productIdsforTracking = []
        } else {
            if (mainProductId != INC.config.bundle_tracking[k].id) {
                productIdsforTracking.push(mainProductId)
                productIdsforTracking.push(INC.config.bundle_tracking[k].id)
                all_data.push({
                    id: parseInt(INC.config.bundle_tracking[k].bid),
                    product_ids: productIdsforTracking,
                    product_id: core_prod_id
                })
                productIdsforTracking = []
            }
        }
    }
    data = {
        "eventData": btoa((JSON.stringify({
            "event_data": {
                "bundle_data": all_data
            },
            "page_type": pageType.toString(),
            "event_type": event_type,
            "method": "track",
            "platform": "",
            "token": INC.config.clientToken,
            "mb": "1"
        }))),
        "vid": INC.config.ivid,
        "time": getCurrentFormattedTime(),
        "uri": document.location.href
    };
    makeTrackingApiCall(JSON.stringify(data));


}

function makeTrackingApiCall(eventdata) {
    p_url = '//jpoptimizedby.increasingly.co/ImportData';
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function() {
        if (xhr.readyState == XMLHttpRequest.DONE) {
            if (xhr.status == 200) {
                if (xhr.responseText != "" && xhr.responseText != null) {
                    // m_incBndle.DataModel.jsonData = xhr.responseText;
                    // callback(m_incBndle.DataModel.jsonData)
                } 
            }
        }
    };
    xhr.open("POST", p_url, true);
    xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.send(eventdata);
}

function getCurrentFormattedTime() {
    var d = new Date();
    var currentTime = (d.getFullYear() + "-" + (d.getMonth() + 1) + "-" + d.getDate() + " " + d.getHours() + ":" + d.getMinutes() + ":" + d.getSeconds() + "." + d.getMilliseconds());
    return currentTime;
}
INC.methods.getBasketID = function() {
    var cookieArray = document.cookie.split(";");
    var basketID = "";
    cookieArray.forEach(function(cookie) {
        var cookieSplit = cookie.split("=");
    });

    return basketID;
};

INC.methods.checkStatusVAT = function() {
    if (INC.methods.checkStatusLoggedIn()) return "false";
    var cookieArray = document.cookie.split(";");
    var statusVAT = "true";
    cookieArray.forEach(function(cookie) {
        var cookieSplit = cookie.split("=");
        if (cookieSplit[0].trim() == "includeVat") {
            statusVAT = cookieSplit[1].trim();
        }
    });

    return statusVAT;
}

INC.methods.checkStatusLoggedIn = function() {
    var cookieArray = document.cookie.split(";");
    var statusLoggedIn = false;
    cookieArray.forEach(function(cookie) {
        var cookieSplit = cookie.split("=");
        if (cookieSplit[0].trim() == "customer_name") {
            statusLoggedIn = true;
        }
    });

    return statusLoggedIn;
}

INC.methods.getCookieValue = function(cookieName) {
    var cookieArray = document.cookie.split(";");
    var cookieValue = "";
    cookieArray.forEach(function(cookie) {
        var cookieSplit = cookie.split("=");
        if (cookieSplit[0].trim() == cookieName) cookieValue = cookieSplit[1].trim();
    });

    return cookieValue
}

INC.methods.init = function() {}
INC.methods.initDev = function() {}

INC.methods.trackingEvents = function(eventType, eventDataObj, pageType) {

    // var importEventDataObj = new INC.classes.EventData(eventDataObj);
    var importEventDataObj = {};
    var importDataObj = {};

    importEventDataObj["event_data"] = eventDataObj;

    switch (eventType) {
        case "productPageVisit":
            importEventDataObj["event_type"] = "product_page_visit";
            importEventDataObj["method"] = "track";
            break;
        case "catalogProductView":
            importEventDataObj["event_type"] = "catalog_product_view";
            importEventDataObj["page_type"] = "catalog_product_view";
            importEventDataObj["method"] = "track";
            break;
        case "bundleProductClickTracking":
            importEventDataObj["event_type"] = "bundle_product_click_tracking";
            importEventDataObj["page_type"] = pageType;


            importEventDataObj["is_logged"] = "0";
            importEventDataObj["method"] = "track";
            INC.methods.sendAffiliateRequest();
            break;
        case "bundleAddToCart":
            importEventDataObj["event_type"] = "bundle_add_to_cart";
            importEventDataObj["page_type"] = pageType;
            importEventDataObj["is_logged"] = (INC.clientConfig.statusLoggedIn == true) ? "1" : "0";
            importEventDataObj["method"] = "track";
            INC.methods.sendAffiliateRequest();
            break;
    }

    importEventDataObj["platform"] = "";
    importEventDataObj["token"] = INC.config.clientToken;
    importDataObj["eventData"] = btoa(JSON.stringify(importEventDataObj));
    importDataObj["uri"] = window.location.href;
    importDataObj["vid"] = INC.config.ivid;
    INC.methods.sendTrackingEvents(importDataObj);
}

INC.methods.sendTrackingEvents = function(importDataObj) {


    var xhr = new XMLHttpRequest();
    var method = "POST";
    var url = INC.config.trackingURL;
    xhr.onreadystatechange = handleStateChange;

    xhr.open(method, url, true);
    xhr.setRequestHeader('Content-Type', 'application/json');

    function handleStateChange() {
        if (xhr.readyState === 4 && xhr.status === 200) {
            // logger(xhr.responseText);
        }
    }

    xhr.send(JSON.stringify(importDataObj));
}

INC.methods.sendAffiliateRequest = function() {
    var url = INC.config.affiliateURL;
    var oImg = document.createElement("img");
    oImg.setAttribute('id', 'cstracking')
    oImg.setAttribute('src', url);
    oImg.setAttribute('height', '1px');
    oImg.setAttribute('width', '1px');
    oImg.setAttribute('style', 'display:none')
    document.body.appendChild(oImg);
}


INC.methods.addVisitorID = function () {
    function generateUniqueINCVisitorId(len, bits) {
        var bits = bits || 36;
        var outStr = "";
        var newStr;
        while (outStr.length < len) {
            newStr = Math.random().toString(bits).slice(2);
            outStr += newStr.slice(0, Math.min(newStr.length, (len - outStr.length)));
        }
        return outStr;
    }
    var cookieArray = document.cookie.split(";");
    var ivid = "";
    cookieArray.forEach(function (cookie) {
        var cookieSplit = cookie.split("=");
        if (cookieSplit[0].trim() == "ivid") {
            ivid = cookieSplit[1].trim();
        }
    });
    if (ivid.length == 0) {
        ivid = generateUniqueINCVisitorId(42, 16);
        var clientDomain = window.location.host.replace("www", "");
        var d = new Date();
        d.setTime(d.getTime() + (365 * 24 * 60 * 60 * 1000));
        var expires = "expires=" + d.toUTCString();
        document.cookie = 'ivid=' + ivid + '; expires=' + expires + '; domain=' + clientDomain + '; path=/' + '; secure:' + true + ';'
        // document.cookie = "ivid=" + ivid + ";" + "expires=16 Jul 2021 06:23:41 GMT;" + "path=/";
    }else{
        ivid = ivid;
        var clientDomain = window.location.host.replace("www", "");
        var d = new Date();
        d.setTime(d.getTime() + (365 * 24 * 60 * 60 * 1000));
        var expires = "expires=" + d.toUTCString();
        document.cookie = 'ivid=' + ivid + '; expires=' + expires + '; domain=' + clientDomain + '; path=/' + '; secure:' + true + ';'
    }
    INC.config.ivid = ivid;
    return ivid;
}
INC.checkDevUserCookie();
document.onclick = clickListener;

function clickListener(e) {
    var clickedElement = e.target;
    if (clickedElement != null) {
        tags = document.getElementsByTagName(clickedElement.tagName);
        try {
            if (clickedElement.className == "inc_product_modal_block active") {
                if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null) && onloadpdp == true && window.innerWidth < 1337) {
                    if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && navigator.userAgent.toLowerCase().indexOf('chrome') == -1) {
                        document.querySelector('body').style.position = "relative"
                    }
                }

                
                if (document.querySelector('.inc_sidebar_modal_block.active') == null) {
                    document.querySelector('html').classList.remove('inc_overlay');
                }
                if (document.querySelector('.inc_product_Info_Full_desc_info_block.show_full_desc') != null) {
                    document.querySelector('.inc_product_Info_Full_desc_info_block.show_full_desc .close_read_more').click()
                }
                 document.querySelector('body').style.position = "relative"
                clickedElement.classList.remove('active')

                if ((document.querySelector('.inc_pdp_block') != null || document.querySelector('.inc_af_block') != null)) {

                    // if (navigator.userAgent.toLowerCase().indexOf('safari') >= 0 && window.innerWidth < 1337) {
                    if (window.innerWidth < 819) {
                        // if (document.querySelector('.inc_pdp_block') != null) {
                        //     // var a = document.querySelector(".recommend_area")
                        //     // a.scrollIntoView();
                        // } else if (document.querySelector('.inc_af_block') != null) {
                        //     $("html, body").animate({
                        //         scrollTop: $(".inc_af_block").offset().top - 150
                        //     }, 0);
                        // }
                        // $("html, body").animate({ scrollTop:  collection_height }, 0);
                    }
                }
            }
            setTimeout(function(){
                var inc_prod_img1 =  document.querySelector('.inc_product_modal_block.active .inc_product_img_main_img img')
                
            },1000)
            if (clickedElement.className == "sidebar_outer sidebar_outer_active") {
                document.querySelector('.inc_header_continue_img').click()
            }
            if (clickedElement.classList.contains('delete_popup') == true) {
                if (document.querySelector('.inc_cart_added_product_block.remove_product_conf_modal .confirm_remove_product_close') != null) {
                    document.querySelector('.inc_cart_added_product_block.remove_product_conf_modal .confirm_remove_product_close').click()
                }
            }
            if (clickedElement.className == "inc_pdp_bundle_cart_overlay_block active") {
                document.querySelector('.inc_pdp_bundle_cart_title_img_block').click()
            }
            if (clickedElement.className == "inc_promo_popup inc_active") {
                document.querySelector('html').classList.remove('inc_overlay_promo');
                clickedElement.classList.remove('inc_active')
                if (document.querySelector('.inc_sidebar_modal_block.active') != null) {
                    document.querySelector('.inc_sidebar_modal_block.active').classList.remove('overflow_visible')
                }
            }
            if (clickedElement.parentNode != null) {
                if (clickedElement.className != "inc_product_desc_att_color_title_text_block" && clickedElement.className != "inc_product_desc_att_color_title_text_selected" && clickedElement.parentNode.className != "inc_product_desc_att_color_title_text_block" && clickedElement.className != "inc_product_desc_att_zero_title_text" && clickedElement.className != "inc_product_desc_att_zero_title_text_block" && clickedElement.className != "inc_product_desc_add_block" && clickedElement.className != "inc_product_desc_add_text" && clickedElement.className != "img_color_swatch" && clickedElement.className != "inc_product_desc_att_size_title_text_block") {
                    if (document.querySelector('.inc_product_desc_att_block .show_dropdown') != null) {
                        document.querySelector('.inc_product_desc_att_block .show_dropdown').classList.remove('show_dropdown')
                    }
                }
            }
            if (document.querySelector('.inc_sidebar_modal_block.active .inc_product_modal_block.active') == null) {
                if (document.querySelector('.inc_sidebar_modal_block.active') != null) {
                    if (document.querySelector('.close_read_more') != null) {
                        document.querySelector('.close_read_more').click()
                    }
                    if (document.querySelector('.inc_cart_added_product_block.remove_product_conf_modal') == null) {
                        if (document.querySelector('.inc_promo_popup.inc_active') == null) {
                            document.querySelector('.inc_sidebar_modal_block.active').classList.remove('overflow_visible')
                        }
                    }
                }
            }
            if (clickedElement.className == "inc_pdp_bundle_product_list_wrapper_items_block active") {
                document.querySelector('.inc_pdp_bundle_product_list_items_show_more_less_block').click()
            }
            if (clickedElement.id == "basket_confirmation_button_yes") {
                setTimeout(function() {
                    INC.init();
                }, 3000)
            }
            setTimeout(function(){
                if(clickedElement.parentNode != null){
                    if(clickedElement.parentNode.parentNode != null){
                        if(clickedElement.parentNode.parentNode != null){
                            if (clickedElement.parentNode.parentNode.parentNode.parentNode.classList != undefined) {
                                if (clickedElement.parentNode != null) {
                                    if (clickedElement.parentNode.parentNode.classList != undefined) {
                                        if (clickedElement.parentNode.parentNode.parentNode.classList != undefined) {
                                            if (clickedElement.parentNode.parentNode.parentNode.parentNode.classList != null) {
                                                if (clickedElement.tagName != "INPUT" && clickedElement.parentNode.parentNode.parentNode.parentNode.classList.contains('inc_product_desc_qty_block') == false && clickedElement.parentNode.parentNode.parentNode.classList.contains('inc_product_desc_qty_block') == false && clickedElement.parentNode.parentNode.classList.contains('inc_product_desc_qty_block') == false && clickedElement.parentNode.classList.contains('inc_product_desc_qty_block') == false && clickedElement.classList.contains('inc_product_desc_qty_block') == false) {
                                                    if (document.querySelector('.inc_product_desc_pack_of_list_block.active') != null) {
                                                        document.querySelector('.inc_product_desc_pack_of_list_block.active').classList.remove('active')
                                                        if (document.querySelector('.inc_product_desc_qty_block.active') != null) {
                                                            document.querySelector('.inc_product_desc_qty_block.active').classList.remove('active')
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                                if (clickedElement.parentNode.parentNode.parentNode.parentNode.classList != undefined) {
                                    if (clickedElement.parentNode.parentNode.parentNode.parentNode.classList.contains("variant-radio")) {
                                        setTimeout(function() {
                                            var hand_txt = clickedElement.parentNode.querySelector('span').innerText
                                            if (hand_txt != undefined) {
                                                hand_txt = hand_txt.trim().toLowerCase();
                                            }

                                            if (hand_txt != null) {
                                                var main_prod_attr = document.querySelectorAll('.inc_pdp_product-main_block .inc_product_modal_block .inc_product_desc_att_zero_block .inc_product_desc_att_size_list_item_img_block');
                                                for (a = 0; a < main_prod_attr.length; a++) {
                                                    if (main_prod_attr[a].getAttribute('datasize') == hand_txt.trim()) {
                                                        main_prod_attr[a].click();
                                                    }
                                                }
                                            }
                                            setTimeout(function(){
                                                if(document.querySelector('.inc_pdp_block') != null){
                                                    if (document.querySelector(".appeal_message").innerText == "在庫切れ"){
                                                        document.querySelector('.inc_pdp_block').style.display = "none"
                                                    } else {
                                                        document.querySelector('.inc_pdp_block').style.display = "block"
                                                    }
                                                }
                                            },2000)
                                            // })
                                        }, 500);
                                    }
                                }
                                if (clickedElement.parentNode.parentNode.parentNode.className == "variation_selection" || clickedElement.parentNode.parentNode.parentNode.className == "cart_area") {
                                    if (INC.config.pageType != "productList") {
                                        if(document.querySelector('.inc_pdp_block') != null){
                                            if (document.querySelector(".appeal_message").innerText == "在庫切れ" || document.querySelector(".appeal_message").innerText == "在庫なし"){
                                                document.querySelector('.inc_pdp_block').style.display = "none"
                                            } else {
                                                document.querySelector('.inc_pdp_block').style.display = "block"
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            },2000)
        } catch (err) {
            // var formData = new FormData();
            // formData.append("EmailId", "nitish@increasingly.com");
            // formData.append("Subject", 'JS Error on Toysrus');
            // formData.append("Message", err + 'Error Stack' + err.stack);
            // var xhr = new XMLHttpRequest();
            // xhr.open("POST", '//jpapi.increasingly.co/SendEmail', true);
            // xhr.send(formData);
        }
    }
}

setTimeout(function() {
    if (window.innerWidth < 820) {
        window.addEventListener("orientationchange", function() {
            if (window.matchMedia("(orientation: portrait)").matches) {
                INC.config.deviceMode = "PORTRAIT"
                var inc_pdp_block_rem = document.querySelector(".inc_pdp_block");
                if (inc_pdp_block_rem != null) {
                    inc_pdp_block_rem.parentNode.removeChild(inc_pdp_block_rem);
                }
                var sidebar_rem = document.querySelector(".inc_sidebar_modal_block");
                if (sidebar_rem != null) {
                    sidebar_rem.parentNode.removeChild(sidebar_rem);
                }
                var over_rem = document.querySelector(".inc_sidebar_overlay_block");
                if (over_rem != null) {
                    over_rem.parentNode.removeChild(over_rem);
                }
                setTimeout(function() {
                    onloadpdp = false;
                    INC.init();
                }, 0)

            }
            if (window.matchMedia("(orientation: landscape)").matches) {
                INC.config.deviceMode = "LANSCAPE";
                var inc_pdp_block_rem = document.querySelector(".inc_pdp_block");
                if (inc_pdp_block_rem != null) {
                    inc_pdp_block_rem.parentNode.removeChild(inc_pdp_block_rem);
                }
                var sidebar_rem = document.querySelector(".inc_sidebar_modal_block");
                if (sidebar_rem != null) {
                    sidebar_rem.parentNode.removeChild(sidebar_rem);
                }
                var over_rem = document.querySelector(".inc_sidebar_overlay_block");
                if (over_rem != null) {
                    over_rem.parentNode.removeChild(over_rem);
                }
                setTimeout(function() {
                    onloadpdp = false;
                    INC.init();
                }, 0)
            }
        }, false);
    }
    if (typeof(jQuery) != "undefined") {
        $(window).resize(function() {
            if (document.querySelector('.inc_pdp_block .inc_pdp_bundle_product_list_main_block') != null) {
                document.querySelector('.inc_pdp_block .inc_pdp_bundle_product_list_main_block').setAttribute("style", "margin-left:0");
                if (window.innerWidth < 819) {
                    var prd_length = 2
                } else {
                    var prd_length = 4
                }
                if (document.querySelectorAll('.inc_pdp_block .inc_product_module_block').length > prd_length) {
                    document.querySelector('.inc_pdp_block .inc_pdp_bundle_product_left-btn_block').setAttribute("style", "pointer-events: none;opacity:0.5");
                    document.querySelector('.inc_pdp_block .inc_pdp_bundle_product_right-btn_block').setAttribute("style", "pointer-events: auto;opacity:1");
                    // if (isIE()){
                    document.querySelector('.inc_pdp_bundle_product_left-btn_img').setAttribute('style', 'opacity:0.5')
                    document.querySelector('.inc_pdp_bundle_product_right-btn_img').setAttribute('style', 'opacity:1')
                    // }
                }
                INC.clientConfig.slidevalue = 0
                INC.clientConfig.offset = 0
                INC.clientConfig.slidevalue = 0
            }
        });
        $(window).bind('scroll', function() {
            var y_scroll_pos = window.pageYOffset;
            //var scroll_pos_test = element_position;
            var inc_div = document.querySelector(".inc_pdp_block");
            if (document.querySelector('.inc_pdp_block') != null) {
                if (document.querySelector('.inc_pdp_block') != null) {
                    var width_min = 500
                    var widthplus = 500 //225;
                    if (window.innerWidth > 500) {
                        var width_min = 200
                        var widthplus = 450
                    }
                    if (window.innerWidth < 600) {
                        if (y_scroll_pos >= inc_div.offsetTop - width_min && y_scroll_pos <= inc_div.offsetTop + widthplus) {
                            if (document.querySelector('.inc_pdp_block') != null) {
                                if (document.querySelector('.feedback-box') != null) {
                                    document.querySelector('.feedback-box').setAttribute('style', 'display:none !important')
                                }
                            }
                        } else {
                            if (document.querySelector('.inc_pdp_block') != null) {
                                if (document.querySelector('.feedback-box') != null) {
                                    document.querySelector('.feedback-box').setAttribute('style', 'display:block !important')
                                }
                            }
                        }
                    }
                    var width_minbtn = 400 //top to bottom
                    var widthplusbtn = 50 // bottom to top
                    if (window.innerWidth > 500) {
                        var width_minbtn = 200
                        var widthplusbtn = 450
                    }
                    if (window.innerWidth < 600) {
                        if (y_scroll_pos >= inc_div.offsetTop - width_minbtn && y_scroll_pos <= inc_div.offsetTop + widthplusbtn) {
                            if (document.querySelector('.inc_pdp_block') != null) {

                                if (document.querySelector('.inc_pdp_block').classList.contains('.inc_sticky_add_to_cart') == false) {
                                    // document.querySelector('.inc_pdp_block').classList.add('inc_sticky_add_to_cart');
                                }
                            }
                        } else {
                            if (document.querySelector('.inc_pdp_block') != null) {

                                if (document.querySelector('.inc_pdp_block') != null) {
                                    // document.querySelector('.inc_pdp_block').classList.remove('inc_sticky_add_to_cart');
                                }
                            }
                        }
                    }
                }
            }
        });
        $('.swatches.color .selectable').click(function(e) {
            var textcolor = this.querySelector('a').getAttribute('title').split(':')[1]
            if (textcolor != undefined) {
                textcolor = textcolor.trim().toLowerCase()
            }
            // var allavailcol = document.querySelectorAll('.inc_pdp_product-main_block .inc_product_desc_att_color_list_item_img_block')
            if(window.innerWidth > 819){
                var allavailcol = document.querySelectorAll('.inc_pdp_bundle_product_list_block .inc_product_module_block .inc_product_desc_att_color_list_item_img_block')
            }else{
                var allavailcol = document.querySelectorAll('.inc_pdp_product-main_block .inc_product_desc_att_color_list_item_img_block')
            }
            for (j = 0; j < allavailcol.length; j++) {
                if (allavailcol[j].getAttribute('datacolor') == textcolor) {
                    allavailcol[j].click()
                }
            }
            setTimeout(function(){
                if(document.querySelector('.inc_pdp_block') != null){
                    if (document.querySelector('#add-to-cart').getAttribute('disabled') == "disabled") {
                        document.querySelector('.inc_pdp_block').style.display = "none"
                    } else {
                        document.querySelector('.inc_pdp_block').style.display = "block"
                    }
                }
            },2500)
        })
        $('select.variation-select').change(function(e) {
            var cur_seltag = e.target;
            var sel_text = cur_seltag.options[cur_seltag.selectedIndex].innerText.trim().toLowerCase();
            // var availvariant = document.querySelectorAll('.inc_pdp_product-main_block select')
            if(window.innerWidth < 820){
                var availvariant = document.querySelectorAll('.inc_pdp_bundle_product_list_block .inc_product_module_block select')
            }else{
                var availvariant = document.querySelectorAll('.inc_pdp_product-main_block select')
            }
            for (m6 = 0; m6 < availvariant.length; m6++) {
                var alloptionss = availvariant[m6].querySelectorAll('option')
                for (h6 = 0; h6 < alloptionss.length; h6++) {
                    if (alloptionss[h6].getAttribute('datasize').toLowerCase() == sel_text) {
                        alloptionss[h6].selected = 'selected'
                        if (availvariant[m6].getAttribute('onchange').replace('(this)', '') == "inc_onchange_variant") {
                            inc_onchange_variant(availvariant[m6])
                        } else if (availvariant[m6].getAttribute('onchange').replace('(this)', '') == "inc_onchange_color_variant") {
                            inc_onchange_color_variant(availvariant[m6])
                        } else if (availvariant[m6].getAttribute('onchange').replace('(this)', '') == "inc_onchange_size_variant") {
                            inc_onchange_variant(availvariant[m6])
                        }
                        break;
                    }
                }
            }
            setTimeout(function(){
                if(document.querySelector('.inc_pdp_block') != null){
                    if (document.querySelector('#add-to-cart').getAttribute('disabled') == "disabled") {
                        document.querySelector('.inc_pdp_block').style.display = "none"
                    } else {
                        document.querySelector('.inc_pdp_block').style.display = "block"
                    }
                }
            },2500)
        });
    }
}, 3000)

function login_user() {
    if (document.querySelector('.authenticated-user a') != null) {
        if (document.querySelector('.authenticated-user a').innerText.indexOf('increasingly') >= 0) {

            return true
        }

    }
}

function read_more_inc(element) {
    var prod_desc_block = element.parentNode.parentNode.parentNode.parentNode.parentNode;
    if (prod_desc_block.querySelector('.inc_product_Info_Full_desc_info_block').classList.contains('show_full_desc') == false) {
        prod_desc_block.querySelector('.inc_product_Info_Full_desc_info_block').classList.add('show_full_desc')
        element.classList.add('active')
        if (element.parentNode.querySelector('.inc_prod_details') != null) {
            element.parentNode.querySelector('.inc_prod_details').classList.remove('active')
        }
    } else {
        prod_desc_block.querySelector('.inc_product_Info_Full_desc_info_block').classList.remove('show_full_desc')
        element.classList.remove('active')
    }
}

function view_details_inc(element) {
    var prod_desc_block = element.parentNode.parentNode.parentNode.parentNode.parentNode;
    prod_desc_block.querySelector('.inc_product_Info_Full_desc_info_block').classList.remove('show_full_desc')
    element.classList.add('active')
    element.parentNode.querySelector('.inc_readMore').classList.remove('active')
}

//window.location.pathname.indexOf('/ca/')

function slideTo(id, n, elm, type_of, arrow) {
    if (elm.className == "left_arrow" || elm.className == "left_arrow active" || type_of == "left") {
        var nn = -1
        inc_showSlides(INC.config.inc_slideIndex += nn, nn, elm, type_of, arrow);
    } else {
        var nn = 1
        inc_showSlides(INC.config.inc_slideIndex += nn, nn, elm, type_of, arrow);
    }
}

function inc_showSlides(n, ind, elm, type_of, arrow) {
    var i;
    var showcase_other_img_list = elm.querySelector('.inc_product_module_block .inc_product_showcase_block .inc_product_img_main_img a')
    var modal_other_img_list = elm.querySelector('.inc_product_module_block .inc_product_modal_block .inc_product_img_main_img a')
    var showcase_dots = elm.querySelectorAll('.inc_product_module_block .inc_product_showcase_block .inc_product_img_gallery_list_block .inc_product_img_gallery_list_item_block')
    var modal_dots = elm.querySelectorAll('.inc_product_module_block .inc_product_modal_block .inc_product_img_gallery_list_block .inc_product_img_gallery_list_item_block')

    var showcase_other_img = elm.querySelector('.inc_product_module_block .inc_product_showcase_block .inc_product_img_main_img a img')

    var modal_other_img = elm.querySelector('.inc_product_module_block .inc_product_modal_block .inc_product_img_main_img a img')

    var otherImg_list = showcase_other_img_list.getAttribute('otherImageList');
    var additional_img = []
    var additional_img = otherImg_list.split(',');
    var get_org_img = showcase_other_img_list.getAttribute('imageURL')
    if (n > additional_img.length) {
        INC.config.inc_slideIndex = 1
    }
    if (n < 1) {
        INC.config.inc_slideIndex = additional_img.length
    }

    for (i = 0; i < showcase_dots.length; i++) {
        showcase_dots[i].classList.remove('active')
        if (modal_dots[i] != undefined) {
            modal_dots[i].classList.remove('active')
        }
    }
    var img_src = additional_img[INC.config.inc_slideIndex - 1];
    if (img_src != "null"){
        showcase_other_img.setAttribute('src', img_src);
        modal_other_img.setAttribute('src', img_src)
        showcase_other_img.setAttribute('onerror', "this.src='" + get_org_img + "'");
        modal_other_img.setAttribute('onerror', "this.src='" + get_org_img + "'");

        for (var r = 0; r < showcase_dots.length; r++) {
            showcase_dots[r].classList.remove('active');
            modal_dots[r].classList.remove('active');
        }
        if (showcase_dots[INC.config.inc_slideIndex - 1] != null) {
            showcase_dots[INC.config.inc_slideIndex - 1].classList.add('active');
        }
        if (modal_dots[INC.config.inc_slideIndex - 1] != null) {
            modal_dots[INC.config.inc_slideIndex - 1].classList.add('active');
        }
        if (arrow == "arrow") {
            if (modal_dots.length > 4) {
                var activedots = elm.querySelector('.inc_product_modal_block .inc_product_img_gallery_list_block .inc_product_img_gallery_list_item_block.active')
                if (activedots != null) {
                    var actind = activedots.getAttribute('index')
                    // if(type_of == "right"){
                    if (actind == 4) {
                        if (modal_dots.length >= 5) {
                            modal_dots[0].style.display = "none"
                        }
                    } else if (actind == 5) {
                        if (modal_dots.length >= 6) {
                            modal_dots[0].style.display = "none"
                            modal_dots[1].style.display = "none"
                        }
                    } else if (actind == 6) {
                        if (modal_dots.length >= 7) {
                            modal_dots[0].style.display = "none"
                            modal_dots[1].style.display = "none"
                            modal_dots[2].style.display = "none"
                        }
                    } else if (actind == 7) {
                        if (modal_dots.length >= 8) {
                            modal_dots[0].style.display = "none"
                            modal_dots[1].style.display = "none"
                            modal_dots[2].style.display = "none"
                            modal_dots[3].style.display = "none"
                        }
                    } else if (actind == 8) {
                        if (modal_dots.length >= 9) {
                            modal_dots[0].style.display = "none"
                            modal_dots[1].style.display = "none"
                            modal_dots[2].style.display = "none"
                            modal_dots[3].style.display = "none"
                            modal_dots[4].style.display = "none"
                        }
                    } else if (actind == 9) {
                        if (modal_dots.length >= 10) {
                            modal_dots[0].style.display = "none"
                            modal_dots[1].style.display = "none"
                            modal_dots[2].style.display = "none"
                            modal_dots[3].style.display = "none"
                            modal_dots[4].style.display = "none"
                            modal_dots[5].style.display = "none"
                        }
                    } else if (actind == 10) {
                        if (modal_dots.length >= 11) {
                            modal_dots[0].style.display = "none"
                            modal_dots[1].style.display = "none"
                            modal_dots[2].style.display = "none"
                            modal_dots[3].style.display = "none"
                            modal_dots[4].style.display = "none"
                            modal_dots[5].style.display = "none"
                            modal_dots[6].style.display = "none"
                        }
                    } else {
                        modal_dots[0].style.display = "block"
                        modal_dots[1].style.display = "block"
                        modal_dots[2].style.display = "block"
                        modal_dots[3].style.display = "block"
                        if (modal_dots[4] != undefined) {
                            modal_dots[4].style.display = "block"
                        }
                        if (modal_dots[5] != undefined) {
                            modal_dots[5].style.display = "block"
                        }
                        if (modal_dots[6] != undefined) {
                            modal_dots[6].style.display = "block"
                        }
                    }
                    // }
                }
            }
        }
    }
}
// SWIPE FEATURE
var xDown = null;
var yDown = null;

function add_swipe(element) {
    element.addEventListener('touchstart', handleTouchStart, {passive: true});
    element.addEventListener('touchmove', handleTouchMove, {passive: true});
}

function handleTouchStart(evt) {
    xDown = evt.touches[0].clientX;
    yDown = evt.touches[0].clientY;
};

function handleTouchMove(evt) {
    if (!xDown || !yDown) {
        return;
    }
    var xUp = evt.touches[0].clientX;
    var yUp = evt.touches[0].clientY;
    var xDiff = xDown - xUp;
    var yDiff = yDown - yUp;
    if (Math.abs(xDiff) + Math.abs(yDiff) > 150) { //to deal with to short swipes
        if (Math.abs(xDiff) > Math.abs(yDiff)) {
            /*most significant*/
            if (xDiff > 0) {
                var prod_card = evt.target.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;
                slideTo(null, 0, prod_card, "left")
            } else {
                /* right swipe */
                var prod_card = evt.target.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;
                slideTo(null, 0, prod_card, "right")
            }
        }
        /* reset values */
        xDown = null;
        yDown = null;
    }
    if (Math.abs(xDiff) + Math.abs(yDiff) < 150) {
        if (Math.abs(xDiff) > Math.abs(yDiff)) {
            /*most significant*/
            if (xDiff > 0) {
                /* left swipe */
                var prod_card = evt.target.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;
                slideTo(null, 0, prod_card, "left")
            } else {
                /* right swipe */
                var prod_card = evt.target.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode.parentNode;
                slideTo(null, 0, prod_card, "right")
            }
        }
        /* reset values */
        xDown = null;
        yDown = null;
    }
}

var formatter = new Intl.NumberFormat('ja-JP', {
    style: 'currency',
    currency: 'JPY',
});


function cb_tc(bundle_response) {
    var bundles_tc = bundle_response.Bundles;

    for (var i = 0; i < bundles_tc.length; i++) {
        if (INC.config.dupDataObjectProducts.indexOf(bundles_tc[i].BundleId) == -1) {
            INC.config.dupDataObjectProducts.push(bundles_tc[i].BundleId)
            var irbBundleObj = bundles_tc[i];
            var bundleObj = {};
            bundleObj.id = irbBundleObj["BundleId"];
            bundleObj.totalRegularPrice = irbBundleObj["TotalPrice"];
            bundleObj.totalActivePrice = irbBundleObj["TotalSpecialPrice"];
            bundleObj.totalBundlePrice = irbBundleObj["TotalBundlePrice"];
            bundleObj.totalBundleDiscountPrice = irbBundleObj["DiscountPrice"];
            bundleObj.productCount = irbBundleObj["ProductCount"];


            var irbProductsArray = irbBundleObj["Products"];
            if (irbProductsArray.length) {
                pdpProductId = irbProductsArray[0]["ProductId"];
                if (INC.dataStore.bundleProductsArray != undefined) {
                    INC.dataStore.bundleProductsArray.push(irbProductsArray[1]["ProductId"]);
                }
            }

            for (var j = 0; j < irbProductsArray.length; j++) {
                var product = irbProductsArray[j];

                if (INC.config.uniqeProduct.indexOf(product["ProductId"]) == -1) {
                    if (isBase64(product["Description"]) == true) {
                        try {
                            product["Description"] = Base64.decode(product["Description"])
                        } catch (e) {
                            product["Description"] = product["Description"]
                        }
                    } else {
                        // product["Description"] = product["Description"]
                        try {
                            if (product["Description"] != "" && product["Description"] != null) {
                                if (product["Description"].indexOf('the') >= 0 || product["Description"].indexOf('br') >= 0 || product["Description"].indexOf('<a>') >= 0 || product["Description"].indexOf('<p>') >= 0 || product["Description"].indexOf('<span>') >= 0 || product["Description"].indexOf('and') >= 0 || product["Description"].indexOf('<a')) {
                                    product["Description"] = product["Description"]
                                } else {
                                    product["Description"] = Base64.decode(product["Description"])
                                }

                            }
                        } catch (e) {
                            product["Description"] = product["Description"]
                        }

                    }

                    var pAttributes = product["Attributes"] || "";
                    if (pAttributes != "" && pAttributes != null) {
                        pAttributes = attribute_listing(pAttributes)
                    }

                    var pAttObj = {};
                    for (t = 0; t < pAttributes.length; t++) {
                        pAttributes[t].attributeId = t
                        var attr_values = pAttributes[t].attributeValues;
                        for (v = 0; v < attr_values.length; v++) {
                            attr_values[v].optionId = t;
                        }
                    }

                    if (pAttributes.length) {
                        INC.config.configcount = 0
                        for (var k = 0; k < pAttributes.length; k++) {
                            var pAttributesObj = pAttributes[k];

                            var pAttributesValues = pAttributesObj["attributeValues"];

                            for (var l = 0; l < pAttributesValues.length; l++) {
                                var childProduct = pAttributesValues[l];
                                if (childProduct["childProductId"] == null) {
                                    childProduct["childProductId"] = product["ProductId"];
                                    childProduct["childProductSku"] = product["ProductSku"];
                                    childProduct["childProductName"] = product["ProductName"];
                                    childProduct["childProductImageUrl"] = product["ImageURL"];
                                    childProduct["childProductOtherImageUrl"] = product["OtherImageList"];
                                    childProduct["childProductUrl"] = product["ProductUrl"];
                                    childProduct["childProductPrice"] = product["Price"];
                                    childProduct["childProductSpecialPrice"] = product["SpecialPrice"];
                                    childProduct["childProductDescription"] = product["Description"];
                                    childProduct["childInternalProductId"] = product["ProductId"];
                                    childProduct["MemberPrc"] = product["Field4"];
                                    childProduct["MemberPrices"] = product["Field4"];
                                    childProduct["MakerName"] = product["Field6"];

                                }
                                if (childProduct["childProductImageUrl"] == "" || childProduct["childProductImageUrl"] == null) {
                                    childProduct["childProductImageUrl"] = product["ImageURL"];
                                }
                                if (INC.config.uniqeProduct.indexOf(childProduct["childProductId"]) == -1) {

                                    childProduct["MainprodVariant"] = product["Color"];
                                    childProduct["childProductDescription"] = product["Description"];
                                    childProduct["ShortDescription"] = product["ShortDescription"];
                                    childProduct["childProductImageUrlMain"] = product["ImageURL"];
                                    childProduct["childProductPrice"] = product["Price"];
                                    childProduct["childProductSpecialPrice"] = product["SpecialPrice"];
                                    childProduct["childProductNameMain"] = product["ProductName"];
                                    childProduct["childProductUrlMain"] = product["ProductUrl"];
                                    childProduct["mainSKU"] = product["ProductSku"];
                                    childProduct["ProductType"] = product["ProductType"];
                                    childProduct["childCategoryId"] = product["CategoryId"];
                                    childProduct["childCategoryName"] = product["CategoryName"];
                                    childProduct["Manufacturer"] = product["Manufacturer"];
                                    childProduct["MakerName"] = product["Field6"];
                                    childProduct["genericField"] = product["GenericField"];

                                    if (childProduct["optionImageUrl"] == null) {
                                        childProduct["optionImageUrl"] = product["childProductImageUrl"];
                                    }

                                    var productObj = new INC.classes.ProductAttObj(childProduct);

                                    productObj["bundledProductId"] = pdpProductId;
                                    productObj.mainId = product["ProductId"];
                                    productObj.bundleId = bundleObj.id;
                                    productObj.sku = productObj.id;
                                    productObj.option[pAttributesObj["attributeId"]].id = pAttributesObj["attributeId"];
                                    productObj.option[pAttributesObj["attributeId"]].label = pAttributesObj["frontEndLabel"];
                                    productObj.option[pAttributesObj["attributeId"]].code = pAttributesObj["attributeCode"];
                                    productObj.Filed3 = product["Field2"] + " | " + product["Field3"];
                                    if (!INC.dataStore.dataStoreObj.hasOwnProperty(product['ProductId'])) {
                                        INC.dataStore.dataStoreObj[product['ProductId']] = {};
                                    }
                                    if (!INC.dataStore.dataStoreObj[product['ProductId']].hasOwnProperty(productObj['id'])) {
                                        INC.dataStore.dataStoreObj[product['ProductId']][productObj['id']] = {}
                                    }
                                    pAttObj = INC.dataStore.dataStoreObj[product['ProductId']][productObj['id']];


                                    for (pAtt in productObj) {
                                        if (pAtt == "option") {
                                            if (!pAttObj.hasOwnProperty('option')) {
                                                pAttObj["option"] = {}
                                            }

                                            Object.keys(productObj[pAtt]).forEach(function(key) {
                                                pAttObj[pAtt][key] = productObj[pAtt][key];
                                            });
                                            // }
                                        } else {
                                            pAttObj[pAtt] = productObj[pAtt];
                                        }
                                    }
                                }
                            }

                        }
                    }

                    if (pAttributes.length == 0) {
                        // INC.config.uniqeProduct.push(product["ProductId"])
                        var productObj = new INC.classes.ProductObj(product);
                        productObj["bundleId"] = irbBundleObj["BundleId"];
                        productObj["bundledProductId"] = pdpProductId;
                        productObj.sku = productObj.id;
                        productObj.Filed3 = product["Field2"] + " | " + product["Field3"];
                        if ((INC.dataStore.dataStoreObj != undefined) && (!INC.dataStore.dataStoreObj.hasOwnProperty(productObj['mainId']))) {
                            INC.dataStore.dataStoreObj[productObj['mainId']] = {};
                        }


                        if (INC.dataStore.dataStoreObj != undefined) {
                            INC.dataStore.dataStoreObj[productObj['mainId']][productObj['id']] = {};
                            if (!!window.MSInputMethodContext && !!document.documentMode) {
                                INC.dataStore.dataStoreObj[productObj['mainId']][productObj['id']] = JSON.parse(JSON.stringify(productObj));
                            } else {
                                INC.dataStore.dataStoreObj[productObj['mainId']][productObj['id']] = Object.assign({}, productObj);
                            }
                        }
                    }
                }
            }
        }
    }

    setTimeout(function() {
        INC.methods.createPDPBlock("sidebar")
    },100)

}

function attribute_listing(valueArray) {
    // if  (readCookie('ivid') == "44bf6be5c73bce6f001a2b594cea4fad9d783a0bc2"){
    //     debugger
    // }
    sortingArr = ["Color", "Size","カラー", "左右", "ボール数", "サイズ", "シャフト重量", "ライ角", "巻番号", "数量", "バックライン", "サイズ/幅", "サイズ/数量", "バックライン/サイズ", "長さ",   "番手","シャフト", "口径/バックライン", "左右/サイズ", "番手/ロフト", "フレックス/長さ", "フレックス/サイズ"  , "ロフト/フレックス", "口径/バックライン/サイズ","フレックス",  "番手/フレックス", "ロフト", "ロフト/バウンス角", "長さ/ライ角", "長さ/シャフト重量", "Flex", "Irons"];

    items = valueArray

    sorting = ["Color", "Size","カラー", "左右", "ボール数",  "サイズ", "シャフト重量", "ライ角", "巻番号", "数量", "バックライン", "サイズ/幅", "サイズ/数量", "バックライン/サイズ",  "長さ",  "番手","シャフト", "口径/バックライン", "左右/サイズ", "番手/ロフト", "フレックス/長さ", "フレックス/サイズ"  , "ロフト/フレックス", "口径/バックライン/サイズ", "フレックス",  "番手/フレックス", "長さ/ライ角", "ロフト", "ロフト/バウンス角", "長さ/シャフト重量", "Flex", "Irons"];
    result = [] 

    sorting.forEach(function(key) {
        var found = false;
        items = items.filter(function(item) {
            if (!found && item.attributeCode == key) {
                result.push(item);
                found = true;
                return false;
            } else
                return true;
        })
    })
    return result;
}
//色/サイズ




var Base64 = {
    _keyStr: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
    encode: function(e) {
        var t = "";
        var n, r, i, s, o, u, a;
        var f = 0;
        e = Base64._utf8_encode(e);
        while (f < e.length) {
            n = e.charCodeAt(f++);
            r = e.charCodeAt(f++);
            i = e.charCodeAt(f++);
            s = n >> 2;
            o = (n & 3) << 4 | r >> 4;
            u = (r & 15) << 2 | i >> 6;
            a = i & 63;
            if (isNaN(r)) {
                u = a = 64
            } else if (isNaN(i)) {
                a = 64
            }
            t = t + this._keyStr.charAt(s) + this._keyStr.charAt(o) + this._keyStr.charAt(u) + this._keyStr.charAt(a)
        }
        return t
    },
    decode: function(e) {
        var t = "";
        var n, r, i;
        var s, o, u, a;
        var f = 0;
        e = e.replace(/[^A-Za-z0-9+/=]/g, "");
        while (f < e.length) {
            s = this._keyStr.indexOf(e.charAt(f++));
            o = this._keyStr.indexOf(e.charAt(f++));
            u = this._keyStr.indexOf(e.charAt(f++));
            a = this._keyStr.indexOf(e.charAt(f++));
            n = s << 2 | o >> 4;
            r = (o & 15) << 4 | u >> 2;
            i = (u & 3) << 6 | a;
            t = t + String.fromCharCode(n);
            if (u != 64) {
                t = t + String.fromCharCode(r)
            }
            if (a != 64) {
                t = t + String.fromCharCode(i)
            }
        }
        t = Base64._utf8_decode(t);
        return t
    },
    _utf8_encode: function(e) {
        e = e.replace(/rn/g, "n");
        var t = "";
        for (var n = 0; n < e.length; n++) {
            var r = e.charCodeAt(n);
            if (r < 128) {
                t += String.fromCharCode(r)
            } else if (r > 127 && r < 2048) {
                t += String.fromCharCode(r >> 6 | 192);
                t += String.fromCharCode(r & 63 | 128)
            } else {
                t += String.fromCharCode(r >> 12 | 224);
                t += String.fromCharCode(r >> 6 & 63 | 128);
                t += String.fromCharCode(r & 63 | 128)
            }
        }
        return t
    },
    _utf8_decode: function(e) {
        var t = "";
        var n = 0;
        var r = c1 = c2 = 0;
        while (n < e.length) {
            r = e.charCodeAt(n);
            if (r < 128) {
                t += String.fromCharCode(r);
                n++
            } else if (r > 191 && r < 224) {
                c2 = e.charCodeAt(n + 1);
                t += String.fromCharCode((r & 31) << 6 | c2 & 63);
                n += 2
            } else {
                c2 = e.charCodeAt(n + 1);
                c3 = e.charCodeAt(n + 2);
                t += String.fromCharCode((r & 15) << 12 | (c2 & 63) << 6 | c3 & 63);
                n += 3
            }
        }
        return t
    }
}

function getTrackingPixel() {
    // url = ''
    // /*-------------------Tracking with Image Pixel---------------------------*/
    // var oImg = document.createElement("img");
    // oImg.setAttribute('id', 'cstracking')
    // oImg.setAttribute('src', url);
    // oImg.setAttribute('height', '1px');
    // oImg.setAttribute('width', '1px');
    // oImg.setAttribute('style', 'display:none')
    // document.body.appendChild(oImg);
    /* -----------------------------------------------------------------------*/
}
var _isVisible = {
    viewport: {},
    _index: 0,
    _imgs: null,
    _active: false,
    _init: function(data) {
        this.viewport.top = window.pageYOffset;
        this.viewport.bottom = this.viewport.top + window.innerHeight;
        this._imgs = document.querySelectorAll(data.classSelector);
        this._index = data.index;
        this._active = true;
        this.getImages();
    },
    checkVisibility: function(elm) {
        if (typeof (elm) == "undefined")
            return;
        var bounds = {};
        bounds.top = elm.getBoundingClientRect().top + window.pageYOffset;
        bounds.bottom = bounds.top + elm.clientHeight;
        return (bounds.bottom >= this.viewport.top && bounds.bottom <= this.viewport.bottom) || (bounds.top <= this.viewport.bottom && bounds.top >= this.viewport.top);
    },
    getImages: function() {
        (function(elm) {
            var imgLoader = window.setInterval(function() {
                if (elm.checkVisibility(elm._imgs[elm._index])) {
                    switch (elm._imgs[elm._index].tagName) {
                    case "IMG":
                        if (!(elm._imgs[elm._index].src.indexOf("img_placeholder") == -1)) {
                            elm._imgs[elm._index].src = elm._imgs[elm._index].getAttribute('data-src');
                        }
                        break;
                    case "SOURCE":
                        //https://gzinc.increasingly.co/Implementation/tA7T9/images/img_placeholder.gif
                        //if (!(elm._imgs[elm._index].srcset.indexOf("https") > -1)) {
                        if (!(elm._imgs[elm._index].srcset.indexOf("img_placeholder") == -1)) {
                            elm._imgs[elm._index].srcset = elm._imgs[elm._index].getAttribute('data-srcset');
                        }
                        break;
                    }
                }
                elm._index++;
            }, 10);
        }
        )(this);
    }
}
// window.addEventListener('scroll', function() {
//     _isVisible._init({
//         classSelector: ".inc_pdp_block img[data-src], .inc_pdp_block source[data-src], .inc_sidebar_modal_block img[data-src], .inc_sidebar_modal_block source[data-src], .inc_af_block img[data-src], .inc_af_block source[data-src]",
//         index: 0
//     }, {passive: true});
// });
// window.addEventListener('mousemove', function() {
//     _isVisible._init({
//         classSelector: ".inc_pdp_block img[data-src], .inc_pdp_block source[data-src], .inc_sidebar_modal_block img[data-src], .inc_sidebar_modal_block source[data-src], .inc_af_block img[data-src], .inc_af_block source[data-src]",
//         index: 0
//     });
// }, {passive: true});
// document.addEventListener('DOMContentLoaded', function() {
//     _isVisible._init({
//         classSelector: ".inc_pdp_block img[data-src], .inc_pdp_block source[data-src], .inc_sidebar_modal_block img[data-src], .inc_sidebar_modal_block source[data-src], .inc_af_block img[data-src], .inc_af_block source[data-src]",
//         index: 0
//     });
// }, {passive: true});


var is_visible_elem_counter = 0;
if (window.innerWidth < 980){
    var scrollableElement = document.body;
    scrollableElement.addEventListener('wheel', checkScrollDirection);
    document.addEventListener("touchmove", checkScrollDirection, false);
    function checkScrollDirection(event) {
        var inc_div = document.querySelector(".inc_pdp_block");
        if( inc_isOnScreen(jQuery( '.inc_pdp_block'))  && is_visible_elem_counter < 1){
            var data = {
                "eventData": String(btoa(JSON.stringify({ "event_data": { "product_id": INC.dataStore.pdpProductId }, "event_type": "catalog_product_view", "page_type": "catalog_product_view", "method": "track", "platform": "", "token": INC.config.clientToken }))),
                "vid": readCookie('ivid'),
                "time": getCurrentFormattedTime(),
                "uri": document.location.href
            };
            makeTrackingApiCall(JSON.stringify(data));
            is_visible_elem_counter++;
        }
    }
} else {
    
    window.onscroll = function () { execute_import_tracking(); };
}

function inc_isOnScreen(elem) {
    var isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
    if (isIOS) {
        var el = document.querySelector(".inc_pdp_block")
        if(el != null){
            var top = el.offsetTop;
            var left = el.offsetLeft;
            var width = el.offsetWidth;
            var height = el.offsetHeight;
            while (el.offsetParent) {
                el = el.offsetParent;
                top += el.offsetTop;
                left += el.offsetLeft;
            }
            return (top < (window.pageYOffset + window.innerHeight + 2000) && left < (window.pageXOffset + window.innerWidth) && (top + height) > window.pageYOffset && (left + width) > window.pageXOffset);
        }
    } else {
        if( elem.length == 0 ) {
            return;
        }
        var $window = jQuery(window)
        var viewport_top = $window.scrollTop()
        var viewport_height = $window.height()
        var viewport_bottom = viewport_top + viewport_height
        var $elem = jQuery(elem)
        var top = $elem.offset().top
        var height = $elem.height()
        var bottom = top + height
        return (top >= viewport_top && top < viewport_bottom) ||
        (bottom > viewport_top && bottom <= viewport_bottom) ||
        (height > viewport_height && top <= viewport_top && bottom >= viewport_bottom)
    }
    
}

function execute_import_tracking() {
    if (document.querySelector(".inc_pdp_block") != null || document.querySelector(".inc_pdp_block") != undefined) {
        var el = document.querySelector(".inc_pdp_block");
        var a = element_in_viewport(el);
    }
    if (a == true && is_visible_elem_counter < 1) {
        var data = {
            "eventData": String(btoa(JSON.stringify({ "event_data": { "product_id": INC.dataStore.pdpProductId }, "event_type": "catalog_product_view", "page_type": "catalog_product_view", "method": "track", "platform": "", "token": INC.config.clientToken }))),
            "vid": readCookie('ivid'),
            "time": getCurrentFormattedTime(),
            "uri": document.location.href
        };
        makeTrackingApiCall(JSON.stringify(data));
        is_visible_elem_counter++;
    }
}
function element_in_viewport(el) {
    var top = el.offsetTop;
    var left = el.offsetLeft;
    var width = el.offsetWidth;
    var height = el.offsetHeight;
    while (el.offsetParent) {
        el = el.offsetParent;
        top += el.offsetTop;
        left += el.offsetLeft;
    }
    return (top < (window.pageYOffset + window.innerHeight) && left < (window.pageXOffset + window.innerWidth) && (top + height) > window.pageYOffset && (left + width) > window.pageXOffset);
}